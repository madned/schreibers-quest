/*! Built with IMPACT - impactjs.com */

(function(window){"use strict";Number.prototype.map=function(istart,istop,ostart,ostop){return ostart+(ostop-ostart)*((this-istart)/(istop-istart));};Number.prototype.limit=function(min,max){return Math.min(max,Math.max(min,this));};Number.prototype.round=function(precision){precision=Math.pow(10,precision||0);return Math.round(this*precision)/precision;};Number.prototype.floor=function(){return Math.floor(this);};Number.prototype.ceil=function(){return Math.ceil(this);};Number.prototype.toInt=function(){return(this|0);};Number.prototype.toRad=function(){return(this/180)*Math.PI;};Number.prototype.toDeg=function(){return(this*180)/Math.PI;};Object.defineProperty(Array.prototype,'erase',{value:function(item){for(var i=this.length;i--;){if(this[i]===item){this.splice(i,1);}}
return this;}});Object.defineProperty(Array.prototype,'random',{value:function(item){return this[Math.floor(Math.random()*this.length)];}});Function.prototype.bind=Function.prototype.bind||function(oThis){if(typeof this!=="function"){throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");}
var aArgs=Array.prototype.slice.call(arguments,1),fToBind=this,fNOP=function(){},fBound=function(){return fToBind.apply((this instanceof fNOP&&oThis?this:oThis),aArgs.concat(Array.prototype.slice.call(arguments)));};fNOP.prototype=this.prototype;fBound.prototype=new fNOP();return fBound;};window.ig={game:null,debug:null,version:'1.24',global:window,modules:{},resources:[],ready:false,baked:false,nocache:'',ua:{},prefix:(window.ImpactPrefix||''),lib:'lib/',_current:null,_loadQueue:[],_waitForOnload:0,$:function(selector){return selector.charAt(0)=='#'?document.getElementById(selector.substr(1)):document.getElementsByTagName(selector);},$new:function(name){return document.createElement(name);},copy:function(object){if(!object||typeof(object)!='object'||object instanceof HTMLElement||object instanceof ig.Class){return object;}
else if(object instanceof Array){var c=[];for(var i=0,l=object.length;i<l;i++){c[i]=ig.copy(object[i]);}
return c;}
else{var c={};for(var i in object){c[i]=ig.copy(object[i]);}
return c;}},merge:function(original,extended){for(var key in extended){var ext=extended[key];if(typeof(ext)!='object'||ext instanceof HTMLElement||ext instanceof ig.Class||ext===null){original[key]=ext;}
else{if(!original[key]||typeof(original[key])!='object'){original[key]=(ext instanceof Array)?[]:{};}
ig.merge(original[key],ext);}}
return original;},ksort:function(obj){if(!obj||typeof(obj)!='object'){return[];}
var keys=[],values=[];for(var i in obj){keys.push(i);}
keys.sort();for(var i=0;i<keys.length;i++){values.push(obj[keys[i]]);}
return values;},setVendorAttribute:function(el,attr,val){var uc=attr.charAt(0).toUpperCase()+attr.substr(1);el[attr]=el['ms'+uc]=el['moz'+uc]=el['webkit'+uc]=el['o'+uc]=val;},getVendorAttribute:function(el,attr){var uc=attr.charAt(0).toUpperCase()+attr.substr(1);return el[attr]||el['ms'+uc]||el['moz'+uc]||el['webkit'+uc]||el['o'+uc];},normalizeVendorAttribute:function(el,attr){var prefixedVal=ig.getVendorAttribute(el,attr);if(!el[attr]&&prefixedVal){el[attr]=prefixedVal;}},getImagePixels:function(image,x,y,width,height){var canvas=ig.$new('canvas');canvas.width=image.width;canvas.height=image.height;var ctx=canvas.getContext('2d');ig.System.SCALE.CRISP(canvas,ctx);var ratio=ig.getVendorAttribute(ctx,'backingStorePixelRatio')||1;ig.normalizeVendorAttribute(ctx,'getImageDataHD');var realWidth=image.width/ratio,realHeight=image.height/ratio;canvas.width=Math.ceil(realWidth);canvas.height=Math.ceil(realHeight);ctx.drawImage(image,0,0,realWidth,realHeight);return(ratio===1)?ctx.getImageData(x,y,width,height):ctx.getImageDataHD(x,y,width,height);},module:function(name){if(ig._current){throw("Module '"+ig._current.name+"' defines nothing");}
if(ig.modules[name]&&ig.modules[name].body){throw("Module '"+name+"' is already defined");}
ig._current={name:name,requires:[],loaded:false,body:null};ig.modules[name]=ig._current;ig._loadQueue.push(ig._current);return ig;},requires:function(){ig._current.requires=Array.prototype.slice.call(arguments);return ig;},defines:function(body){ig._current.body=body;ig._current=null;ig._initDOMReady();},addResource:function(resource){ig.resources.push(resource);},setNocache:function(set){ig.nocache=set?'?'+Date.now():'';},log:function(){},assert:function(condition,msg){},show:function(name,number){},mark:function(msg,color){},_loadScript:function(name,requiredFrom){ig.modules[name]={name:name,requires:[],loaded:false,body:null};ig._waitForOnload++;var path=ig.prefix+ig.lib+name.replace(/\./g,'/')+'.js'+ig.nocache;var script=ig.$new('script');script.type='text/javascript';script.src=path;script.onload=function(){ig._waitForOnload--;ig._execModules();};script.onerror=function(){throw('Failed to load module '+name+' at '+path+' '+'required from '+requiredFrom);};ig.$('head')[0].appendChild(script);},_execModules:function(){var modulesLoaded=false;for(var i=0;i<ig._loadQueue.length;i++){var m=ig._loadQueue[i];var dependenciesLoaded=true;for(var j=0;j<m.requires.length;j++){var name=m.requires[j];if(!ig.modules[name]){dependenciesLoaded=false;ig._loadScript(name,m.name);}
else if(!ig.modules[name].loaded){dependenciesLoaded=false;}}
if(dependenciesLoaded&&m.body){ig._loadQueue.splice(i,1);m.loaded=true;m.body();modulesLoaded=true;i--;}}
if(modulesLoaded){ig._execModules();}
else if(!ig.baked&&ig._waitForOnload==0&&ig._loadQueue.length!=0){var unresolved=[];for(var i=0;i<ig._loadQueue.length;i++){var unloaded=[];var requires=ig._loadQueue[i].requires;for(var j=0;j<requires.length;j++){var m=ig.modules[requires[j]];if(!m||!m.loaded){unloaded.push(requires[j]);}}
unresolved.push(ig._loadQueue[i].name+' (requires: '+unloaded.join(', ')+')');}
throw("Unresolved (or circular?) dependencies. "+"Most likely there's a name/path mismatch for one of the listed modules "+"or a previous syntax error prevents a module from loading:\n"+
unresolved.join('\n'));}},_DOMReady:function(){if(!ig.modules['dom.ready'].loaded){if(!document.body){return setTimeout(ig._DOMReady,13);}
ig.modules['dom.ready'].loaded=true;ig._waitForOnload--;ig._execModules();}
return 0;},_boot:function(){if(document.location.href.match(/\?nocache/)){ig.setNocache(true);}
ig.ua.pixelRatio=window.devicePixelRatio||1;ig.ua.viewport={width:window.innerWidth,height:window.innerHeight};ig.ua.screen={width:window.screen.availWidth*ig.ua.pixelRatio,height:window.screen.availHeight*ig.ua.pixelRatio};ig.ua.iPhone=/iPhone/i.test(navigator.userAgent);ig.ua.iPhone4=(ig.ua.iPhone&&ig.ua.pixelRatio==2);ig.ua.iPad=/iPad/i.test(navigator.userAgent);ig.ua.android=/android/i.test(navigator.userAgent);ig.ua.winPhone=/Windows Phone/i.test(navigator.userAgent);ig.ua.iOS=ig.ua.iPhone||ig.ua.iPad;ig.ua.mobile=ig.ua.iOS||ig.ua.android||ig.ua.winPhone||/mobile/i.test(navigator.userAgent);ig.ua.touchDevice=(('ontouchstart'in window)||(window.navigator.msMaxTouchPoints));},_initDOMReady:function(){if(ig.modules['dom.ready']){ig._execModules();return;}
ig._boot();ig.modules['dom.ready']={requires:[],loaded:false,body:null};ig._waitForOnload++;if(document.readyState==='complete'){ig._DOMReady();}
else{document.addEventListener('DOMContentLoaded',ig._DOMReady,false);window.addEventListener('load',ig._DOMReady,false);}}};ig.normalizeVendorAttribute(window,'requestAnimationFrame');if(window.requestAnimationFrame){var next=1,anims={};window.ig.setAnimation=function(callback,element){var current=next++;anims[current]=true;var animate=function(){if(!anims[current]){return;}
window.requestAnimationFrame(animate,element);callback();};window.requestAnimationFrame(animate,element);return current;};window.ig.clearAnimation=function(id){delete anims[id];};}
else{window.ig.setAnimation=function(callback,element){return window.setInterval(callback,1000/60);};window.ig.clearAnimation=function(id){window.clearInterval(id);};}
var initializing=false,fnTest=/xyz/.test(function(){xyz;})?/\bparent\b/:/.*/;var lastClassId=0;window.ig.Class=function(){};var inject=function(prop){var proto=this.prototype;var parent={};for(var name in prop){if(typeof(prop[name])=="function"&&typeof(proto[name])=="function"&&fnTest.test(prop[name])){parent[name]=proto[name];proto[name]=(function(name,fn){return function(){var tmp=this.parent;this.parent=parent[name];var ret=fn.apply(this,arguments);this.parent=tmp;return ret;};})(name,prop[name]);}
else{proto[name]=prop[name];}}};window.ig.Class.extend=function(prop){var parent=this.prototype;initializing=true;var prototype=new this();initializing=false;for(var name in prop){if(typeof(prop[name])=="function"&&typeof(parent[name])=="function"&&fnTest.test(prop[name])){prototype[name]=(function(name,fn){return function(){var tmp=this.parent;this.parent=parent[name];var ret=fn.apply(this,arguments);this.parent=tmp;return ret;};})(name,prop[name]);}
else{prototype[name]=prop[name];}}
function Class(){if(!initializing){if(this.staticInstantiate){var obj=this.staticInstantiate.apply(this,arguments);if(obj){return obj;}}
for(var p in this){if(typeof(this[p])=='object'){this[p]=ig.copy(this[p]);}}
if(this.init){this.init.apply(this,arguments);}}
return this;}
Class.prototype=prototype;Class.prototype.constructor=Class;Class.extend=window.ig.Class.extend;Class.inject=inject;Class.classId=prototype.classId=++lastClassId;return Class;};if(window.ImpactMixin){ig.merge(ig,window.ImpactMixin);}})(window);

// lib/impact/image.js
ig.baked=true;ig.module('impact.image').defines(function(){"use strict";ig.Image=ig.Class.extend({data:null,width:0,height:0,loaded:false,failed:false,loadCallback:null,path:'',staticInstantiate:function(path){return ig.Image.cache[path]||null;},init:function(path){this.path=path;this.load();},load:function(loadCallback){if(this.loaded){if(loadCallback){loadCallback(this.path,true);}
return;}
else if(!this.loaded&&ig.ready){this.loadCallback=loadCallback||null;this.data=new Image();this.data.onload=this.onload.bind(this);this.data.onerror=this.onerror.bind(this);this.data.src=ig.prefix+this.path+ig.nocache;}
else{ig.addResource(this);}
ig.Image.cache[this.path]=this;},reload:function(){this.loaded=false;this.data=new Image();this.data.onload=this.onload.bind(this);this.data.src=this.path+'?'+Date.now();},onload:function(event){this.width=this.data.width;this.height=this.data.height;this.loaded=true;if(ig.system.scale!=1){this.resize(ig.system.scale);}
if(this.loadCallback){this.loadCallback(this.path,true);}},onerror:function(event){this.failed=true;if(this.loadCallback){this.loadCallback(this.path,false);}},resize:function(scale){var origPixels=ig.getImagePixels(this.data,0,0,this.width,this.height);var widthScaled=this.width*scale;var heightScaled=this.height*scale;var scaled=ig.$new('canvas');scaled.width=widthScaled;scaled.height=heightScaled;var scaledCtx=scaled.getContext('2d');var scaledPixels=scaledCtx.getImageData(0,0,widthScaled,heightScaled);for(var y=0;y<heightScaled;y++){for(var x=0;x<widthScaled;x++){var index=(Math.floor(y/scale)*this.width+Math.floor(x/scale))*4;var indexScaled=(y*widthScaled+x)*4;scaledPixels.data[indexScaled]=origPixels.data[index];scaledPixels.data[indexScaled+1]=origPixels.data[index+1];scaledPixels.data[indexScaled+2]=origPixels.data[index+2];scaledPixels.data[indexScaled+3]=origPixels.data[index+3];}}
scaledCtx.putImageData(scaledPixels,0,0);this.data=scaled;},draw:function(targetX,targetY,sourceX,sourceY,width,height){if(!this.loaded){return;}
var scale=ig.system.scale;sourceX=sourceX?sourceX*scale:0;sourceY=sourceY?sourceY*scale:0;width=(width?width:this.width)*scale;height=(height?height:this.height)*scale;ig.system.context.drawImage(this.data,sourceX,sourceY,width,height,ig.system.getDrawPos(targetX),ig.system.getDrawPos(targetY),width,height);ig.Image.drawCount++;},drawTile:function(targetX,targetY,tile,tileWidth,tileHeight,flipX,flipY){tileHeight=tileHeight?tileHeight:tileWidth;if(!this.loaded||tileWidth>this.width||tileHeight>this.height){return;}
var scale=ig.system.scale;var tileWidthScaled=Math.floor(tileWidth*scale);var tileHeightScaled=Math.floor(tileHeight*scale);var scaleX=flipX?-1:1;var scaleY=flipY?-1:1;if(flipX||flipY){ig.system.context.save();ig.system.context.scale(scaleX,scaleY);}
ig.system.context.drawImage(this.data,(Math.floor(tile*tileWidth)%this.width)*scale,(Math.floor(tile*tileWidth/this.width)*tileHeight)*scale,tileWidthScaled,tileHeightScaled,ig.system.getDrawPos(targetX)*scaleX-(flipX?tileWidthScaled:0),ig.system.getDrawPos(targetY)*scaleY-(flipY?tileHeightScaled:0),tileWidthScaled,tileHeightScaled);if(flipX||flipY){ig.system.context.restore();}
ig.Image.drawCount++;}});ig.Image.drawCount=0;ig.Image.cache={};ig.Image.reloadCache=function(){for(var path in ig.Image.cache){ig.Image.cache[path].reload();}};});

// lib/impact/font.js
ig.baked=true;ig.module('impact.font').requires('impact.image').defines(function(){"use strict";ig.Font=ig.Image.extend({widthMap:[],indices:[],firstChar:32,alpha:1,letterSpacing:1,lineSpacing:0,onload:function(ev){this._loadMetrics(this.data);this.parent(ev);},widthForString:function(text){if(text.indexOf('\n')!==-1){var lines=text.split('\n');var width=0;for(var i=0;i<lines.length;i++){width=Math.max(width,this._widthForLine(lines[i]));}
return width;}
else{return this._widthForLine(text);}},_widthForLine:function(text){var width=0;for(var i=0;i<text.length;i++){width+=this.widthMap[text.charCodeAt(i)-this.firstChar]+this.letterSpacing;}
return width;},heightForString:function(text){return text.split('\n').length*(this.height+this.lineSpacing);},draw:function(text,x,y,align){if(typeof(text)!='string'){text=text.toString();}
if(text.indexOf('\n')!==-1){var lines=text.split('\n');var lineHeight=this.height+this.lineSpacing;for(var i=0;i<lines.length;i++){this.draw(lines[i],x,y+i*lineHeight,align);}
return;}
if(align==ig.Font.ALIGN.RIGHT||align==ig.Font.ALIGN.CENTER){var width=this._widthForLine(text);x-=align==ig.Font.ALIGN.CENTER?width/2:width;}
if(this.alpha!==1){ig.system.context.globalAlpha=this.alpha;}
for(var i=0;i<text.length;i++){var c=text.charCodeAt(i);x+=this._drawChar(c-this.firstChar,x,y);}
if(this.alpha!==1){ig.system.context.globalAlpha=1;}
ig.Image.drawCount+=text.length;},_drawChar:function(c,targetX,targetY){if(!this.loaded||c<0||c>=this.indices.length){return 0;}
var scale=ig.system.scale;var charX=this.indices[c]*scale;var charY=0;var charWidth=this.widthMap[c]*scale;var charHeight=(this.height-2)*scale;ig.system.context.drawImage(this.data,charX,charY,charWidth,charHeight,ig.system.getDrawPos(targetX),ig.system.getDrawPos(targetY),charWidth,charHeight);return this.widthMap[c]+this.letterSpacing;},_loadMetrics:function(image){this.height=image.height-1;this.widthMap=[];this.indices=[];var px=ig.getImagePixels(image,0,image.height-1,image.width,1);var currentChar=0;var currentWidth=0;for(var x=0;x<image.width;x++){var index=x*4+3;if(px.data[index]>127){currentWidth++;}
else if(px.data[index]<128&&currentWidth){this.widthMap.push(currentWidth);this.indices.push(x-currentWidth);currentChar++;currentWidth=0;}}
this.widthMap.push(currentWidth);this.indices.push(x-currentWidth);}});ig.Font.ALIGN={LEFT:0,RIGHT:1,CENTER:2};});

// lib/impact/sound.js
ig.baked=true;ig.module('impact.sound').defines(function(){"use strict";ig.SoundManager=ig.Class.extend({clips:{},volume:1,format:null,init:function(){if(!ig.Sound.enabled||!window.Audio){ig.Sound.enabled=false;return;}
var probe=new Audio();for(var i=0;i<ig.Sound.use.length;i++){var format=ig.Sound.use[i];if(probe.canPlayType(format.mime)){this.format=format;break;}}
if(!this.format){ig.Sound.enabled=false;}
if(ig.Sound.enabled&&ig.Sound.useWebAudio){this.audioContext=new AudioContext();this.boundWebAudioUnlock=this.unlockWebAudio.bind(this);document.addEventListener('touchstart',this.boundWebAudioUnlock,false);}},unlockWebAudio:function(){document.removeEventListener('touchstart',this.boundWebAudioUnlock,false);var buffer=this.audioContext.createBuffer(1,1,22050);var source=this.audioContext.createBufferSource();source.buffer=buffer;source.connect(this.audioContext.destination);source.start(0);},load:function(path,multiChannel,loadCallback){if(multiChannel&&ig.Sound.useWebAudio){return this.loadWebAudio(path,multiChannel,loadCallback);}
else{return this.loadHTML5Audio(path,multiChannel,loadCallback);}},loadWebAudio:function(path,multiChannel,loadCallback){var realPath=ig.prefix+path.replace(/[^\.]+$/,this.format.ext)+ig.nocache;if(this.clips[path]){return this.clips[path];}
var audioSource=new ig.Sound.WebAudioSource()
this.clips[path]=audioSource;var request=new XMLHttpRequest();request.open('GET',realPath,true);request.responseType='arraybuffer';var that=this;request.onload=function(ev){that.audioContext.decodeAudioData(request.response,function(buffer){audioSource.buffer=buffer;loadCallback(path,true,ev);},function(ev){loadCallback(path,false,ev);});};request.onerror=function(ev){loadCallback(path,false,ev);};request.send();return audioSource;},loadHTML5Audio:function(path,multiChannel,loadCallback){var realPath=ig.prefix+path.replace(/[^\.]+$/,this.format.ext)+ig.nocache;if(this.clips[path]){if(this.clips[path]instanceof ig.Sound.WebAudioSource){return this.clips[path];}
if(multiChannel&&this.clips[path].length<ig.Sound.channels){for(var i=this.clips[path].length;i<ig.Sound.channels;i++){var a=new Audio(realPath);a.load();this.clips[path].push(a);}}
return this.clips[path][0];}
var clip=new Audio(realPath);if(loadCallback){if(ig.ua.mobile){setTimeout(function(){loadCallback(path,true,null);},0);}
else{clip.addEventListener('canplaythrough',function cb(ev){clip.removeEventListener('canplaythrough',cb,false);loadCallback(path,true,ev);},false);clip.addEventListener('error',function(ev){loadCallback(path,false,ev);},false);}}
clip.preload='auto';clip.load();this.clips[path]=[clip];if(multiChannel){for(var i=1;i<ig.Sound.channels;i++){var a=new Audio(realPath);a.load();this.clips[path].push(a);}}
return clip;},get:function(path){var channels=this.clips[path];if(channels&&channels instanceof ig.Sound.WebAudioSource){return channels;}
for(var i=0,clip;clip=channels[i++];){if(clip.paused||clip.ended){if(clip.ended){clip.currentTime=0;}
return clip;}}
channels[0].pause();channels[0].currentTime=0;return channels[0];}});ig.Music=ig.Class.extend({tracks:[],namedTracks:{},currentTrack:null,currentIndex:0,random:false,_volume:1,_loop:false,_fadeInterval:0,_fadeTimer:null,_endedCallbackBound:null,init:function(){this._endedCallbackBound=this._endedCallback.bind(this);Object.defineProperty(this,"volume",{get:this.getVolume.bind(this),set:this.setVolume.bind(this)});Object.defineProperty(this,"loop",{get:this.getLooping.bind(this),set:this.setLooping.bind(this)});},add:function(music,name){if(!ig.Sound.enabled){return;}
var path=music instanceof ig.Sound?music.path:music;var track=ig.soundManager.load(path,false);if(track instanceof ig.Sound.WebAudioSource){ig.system.stopRunLoop();throw("Sound '"+path+"' loaded as Multichannel but used for Music. "+"Set the multiChannel param to false when loading, e.g.: new ig.Sound(path, false)");}
track.loop=this._loop;track.volume=this._volume;track.addEventListener('ended',this._endedCallbackBound,false);this.tracks.push(track);if(name){this.namedTracks[name]=track;}
if(!this.currentTrack){this.currentTrack=track;}},next:function(){if(!this.tracks.length){return;}
this.stop();this.currentIndex=this.random?Math.floor(Math.random()*this.tracks.length):(this.currentIndex+1)%this.tracks.length;this.currentTrack=this.tracks[this.currentIndex];this.play();},pause:function(){if(!this.currentTrack){return;}
this.currentTrack.pause();},stop:function(){if(!this.currentTrack){return;}
this.currentTrack.pause();this.currentTrack.currentTime=0;},play:function(name){if(name&&this.namedTracks[name]){var newTrack=this.namedTracks[name];if(newTrack!=this.currentTrack){this.stop();this.currentTrack=newTrack;}}
else if(!this.currentTrack){return;}
this.currentTrack.play();},getLooping:function(){return this._loop;},setLooping:function(l){this._loop=l;for(var i in this.tracks){this.tracks[i].loop=l;}},getVolume:function(){return this._volume;},setVolume:function(v){this._volume=v.limit(0,1);for(var i in this.tracks){this.tracks[i].volume=this._volume;}},fadeOut:function(time){if(!this.currentTrack){return;}
clearInterval(this._fadeInterval);this.fadeTimer=new ig.Timer(time);this._fadeInterval=setInterval(this._fadeStep.bind(this),50);},_fadeStep:function(){var v=this.fadeTimer.delta().map(-this.fadeTimer.target,0,1,0).limit(0,1)*this._volume;if(v<=0.01){this.stop();this.currentTrack.volume=this._volume;clearInterval(this._fadeInterval);}
else{this.currentTrack.volume=v;}},_endedCallback:function(){if(this._loop){this.play();}
else{this.next();}}});ig.Sound=ig.Class.extend({path:'',volume:1,currentClip:null,multiChannel:true,_loop:false,init:function(path,multiChannel){this.path=path;this.multiChannel=(multiChannel!==false);Object.defineProperty(this,"loop",{get:this.getLooping.bind(this),set:this.setLooping.bind(this)});this.load();},getLooping:function(){return this._loop;},setLooping:function(loop){this._loop=loop;if(this.currentClip){this.currentClip.loop=loop;}},load:function(loadCallback){if(!ig.Sound.enabled){if(loadCallback){loadCallback(this.path,true);}
return;}
if(ig.ready){ig.soundManager.load(this.path,this.multiChannel,loadCallback);}
else{ig.addResource(this);}},play:function(){if(!ig.Sound.enabled){return;}
this.currentClip=ig.soundManager.get(this.path);this.currentClip.loop=this._loop;this.currentClip.volume=ig.soundManager.volume*this.volume;this.currentClip.play();},stop:function(){if(this.currentClip){this.currentClip.pause();this.currentClip.currentTime=0;}}});ig.Sound.WebAudioSource=ig.Class.extend({sources:[],gain:null,buffer:null,_loop:false,init:function(){this.gain=ig.soundManager.audioContext.createGain();this.gain.connect(ig.soundManager.audioContext.destination);Object.defineProperty(this,"loop",{get:this.getLooping.bind(this),set:this.setLooping.bind(this)});Object.defineProperty(this,"volume",{get:this.getVolume.bind(this),set:this.setVolume.bind(this)});},play:function(){if(!this.buffer){return;}
var source=ig.soundManager.audioContext.createBufferSource();source.buffer=this.buffer;source.connect(this.gain);source.loop=this._loop;var that=this;this.sources.push(source);source.onended=function(){that.sources.erase(source);}
source.start(0);},pause:function(){for(var i=0;i<this.sources.length;i++){try{this.sources[i].stop();}catch(err){}}},getLooping:function(){return this._loop;},setLooping:function(loop){this._loop=loop;for(var i=0;i<this.sources.length;i++){this.sources[i].loop=loop;}},getVolume:function(){return this.gain.gain.value;},setVolume:function(volume){this.gain.gain.value=volume;}});ig.Sound.FORMAT={MP3:{ext:'mp3',mime:'audio/mpeg'},M4A:{ext:'m4a',mime:'audio/mp4; codecs=mp4a'},OGG:{ext:'ogg',mime:'audio/ogg; codecs=vorbis'},WEBM:{ext:'webm',mime:'audio/webm; codecs=vorbis'},CAF:{ext:'caf',mime:'audio/x-caf'}};ig.Sound.use=[ig.Sound.FORMAT.MP3,ig.Sound.FORMAT.OGG];ig.Sound.channels=4;ig.Sound.enabled=true;ig.normalizeVendorAttribute(window,'AudioContext');ig.Sound.useWebAudio=!!window.AudioContext&&!window.nwf;});

// lib/impact/loader.js
ig.baked=true;ig.module('impact.loader').requires('impact.image','impact.font','impact.sound').defines(function(){"use strict";ig.Loader=ig.Class.extend({resources:[],gameClass:null,status:0,done:false,_unloaded:[],_drawStatus:0,_intervalId:0,_loadCallbackBound:null,init:function(gameClass,resources){this.gameClass=gameClass;this.resources=resources;this._loadCallbackBound=this._loadCallback.bind(this);for(var i=0;i<this.resources.length;i++){this._unloaded.push(this.resources[i].path);}},load:function(){ig.system.clear('#000');if(!this.resources.length){this.end();return;}
for(var i=0;i<this.resources.length;i++){this.loadResource(this.resources[i]);}
this._intervalId=setInterval(this.draw.bind(this),16);},loadResource:function(res){res.load(this._loadCallbackBound);},end:function(){if(this.done){return;}
this.done=true;clearInterval(this._intervalId);ig.system.setGame(this.gameClass);},draw:function(){this._drawStatus+=(this.status-this._drawStatus)/5;var s=ig.system.scale;var w=ig.system.width*0.6;var h=ig.system.height*0.1;var x=ig.system.width*0.5-w/2;var y=ig.system.height*0.5-h/2;ig.system.context.fillStyle='#000';ig.system.context.fillRect(0,0,480,320);ig.system.context.fillStyle='#fff';ig.system.context.fillRect(x*s,y*s,w*s,h*s);ig.system.context.fillStyle='#000';ig.system.context.fillRect(x*s+s,y*s+s,w*s-s-s,h*s-s-s);ig.system.context.fillStyle='#fff';ig.system.context.fillRect(x*s,y*s,w*s*this._drawStatus,h*s);},_loadCallback:function(path,status){if(status){this._unloaded.erase(path);}
else{throw('Failed to load resource: '+path);}
this.status=1-(this._unloaded.length/this.resources.length);if(this._unloaded.length==0){setTimeout(this.end.bind(this),250);}}});});

// lib/impact/timer.js
ig.baked=true;ig.module('impact.timer').defines(function(){"use strict";ig.Timer=ig.Class.extend({target:0,base:0,last:0,pausedAt:0,init:function(seconds){this.base=ig.Timer.time;this.last=ig.Timer.time;this.target=seconds||0;},set:function(seconds){this.target=seconds||0;this.base=ig.Timer.time;this.pausedAt=0;},reset:function(){this.base=ig.Timer.time;this.pausedAt=0;},tick:function(){var delta=ig.Timer.time-this.last;this.last=ig.Timer.time;return(this.pausedAt?0:delta);},delta:function(){return(this.pausedAt||ig.Timer.time)-this.base-this.target;},pause:function(){if(!this.pausedAt){this.pausedAt=ig.Timer.time;}},unpause:function(){if(this.pausedAt){this.base+=ig.Timer.time-this.pausedAt;this.pausedAt=0;}}});ig.Timer._last=0;ig.Timer.time=Number.MIN_VALUE;ig.Timer.timeScale=1;ig.Timer.maxStep=0.05;ig.Timer.step=function(){var current=Date.now();var delta=(current-ig.Timer._last)/1000;ig.Timer.time+=Math.min(delta,ig.Timer.maxStep)*ig.Timer.timeScale;ig.Timer._last=current;};});

// lib/impact/system.js
ig.baked=true;ig.module('impact.system').requires('impact.timer','impact.image').defines(function(){"use strict";ig.System=ig.Class.extend({fps:30,width:320,height:240,realWidth:320,realHeight:240,scale:1,tick:0,animationId:0,newGameClass:null,running:false,delegate:null,clock:null,canvas:null,context:null,init:function(canvasId,fps,width,height,scale){this.fps=fps;this.clock=new ig.Timer();this.canvas=ig.$(canvasId);this.resize(width,height,scale);this.context=this.canvas.getContext('2d');this.getDrawPos=ig.System.drawMode;if(this.scale!=1){ig.System.scaleMode=ig.System.SCALE.CRISP;}
ig.System.scaleMode(this.canvas,this.context);},resize:function(width,height,scale){this.width=width;this.height=height;this.scale=scale||this.scale;this.realWidth=this.width*this.scale;this.realHeight=this.height*this.scale;this.canvas.width=this.realWidth;this.canvas.height=this.realHeight;},setGame:function(gameClass){if(this.running){this.newGameClass=gameClass;}
else{this.setGameNow(gameClass);}},setGameNow:function(gameClass){ig.game=new(gameClass)();ig.system.setDelegate(ig.game);},setDelegate:function(object){if(typeof(object.run)=='function'){this.delegate=object;this.startRunLoop();}else{throw('System.setDelegate: No run() function in object');}},stopRunLoop:function(){ig.clearAnimation(this.animationId);this.running=false;},startRunLoop:function(){this.stopRunLoop();this.animationId=ig.setAnimation(this.run.bind(this),this.canvas);this.running=true;},clear:function(color){this.context.fillStyle=color;this.context.fillRect(0,0,this.realWidth,this.realHeight);},run:function(){ig.Timer.step();this.tick=this.clock.tick();this.delegate.run();ig.input.clearPressed();if(this.newGameClass){this.setGameNow(this.newGameClass);this.newGameClass=null;}},getDrawPos:null});ig.System.DRAW={AUTHENTIC:function(p){return Math.round(p)*this.scale;},SMOOTH:function(p){return Math.round(p*this.scale);},SUBPIXEL:function(p){return p*this.scale;}};ig.System.drawMode=ig.System.DRAW.SMOOTH;ig.System.SCALE={CRISP:function(canvas,context){ig.setVendorAttribute(context,'imageSmoothingEnabled',false);canvas.style.imageRendering='-moz-crisp-edges';canvas.style.imageRendering='-o-crisp-edges';canvas.style.imageRendering='-webkit-optimize-contrast';canvas.style.imageRendering='crisp-edges';canvas.style.msInterpolationMode='nearest-neighbor';},SMOOTH:function(canvas,context){ig.setVendorAttribute(context,'imageSmoothingEnabled',true);canvas.style.imageRendering='';canvas.style.msInterpolationMode='';}};ig.System.scaleMode=ig.System.SCALE.SMOOTH;});

// lib/impact/input.js
ig.baked=true;ig.module('impact.input').defines(function(){"use strict";ig.KEY={'MOUSE1':-1,'MOUSE2':-3,'MWHEEL_UP':-4,'MWHEEL_DOWN':-5,'BACKSPACE':8,'TAB':9,'ENTER':13,'PAUSE':19,'CAPS':20,'ESC':27,'SPACE':32,'PAGE_UP':33,'PAGE_DOWN':34,'END':35,'HOME':36,'LEFT_ARROW':37,'UP_ARROW':38,'RIGHT_ARROW':39,'DOWN_ARROW':40,'INSERT':45,'DELETE':46,'_0':48,'_1':49,'_2':50,'_3':51,'_4':52,'_5':53,'_6':54,'_7':55,'_8':56,'_9':57,'A':65,'B':66,'C':67,'D':68,'E':69,'F':70,'G':71,'H':72,'I':73,'J':74,'K':75,'L':76,'M':77,'N':78,'O':79,'P':80,'Q':81,'R':82,'S':83,'T':84,'U':85,'V':86,'W':87,'X':88,'Y':89,'Z':90,'NUMPAD_0':96,'NUMPAD_1':97,'NUMPAD_2':98,'NUMPAD_3':99,'NUMPAD_4':100,'NUMPAD_5':101,'NUMPAD_6':102,'NUMPAD_7':103,'NUMPAD_8':104,'NUMPAD_9':105,'MULTIPLY':106,'ADD':107,'SUBSTRACT':109,'DECIMAL':110,'DIVIDE':111,'F1':112,'F2':113,'F3':114,'F4':115,'F5':116,'F6':117,'F7':118,'F8':119,'F9':120,'F10':121,'F11':122,'F12':123,'SHIFT':16,'CTRL':17,'ALT':18,'PLUS':187,'COMMA':188,'MINUS':189,'PERIOD':190};ig.Input=ig.Class.extend({bindings:{},actions:{},presses:{},locks:{},delayedKeyup:{},isUsingMouse:false,isUsingKeyboard:false,isUsingAccelerometer:false,mouse:{x:0,y:0},accel:{x:0,y:0,z:0},initMouse:function(){if(this.isUsingMouse){return;}
this.isUsingMouse=true;var mouseWheelBound=this.mousewheel.bind(this);ig.system.canvas.addEventListener('mousewheel',mouseWheelBound,false);ig.system.canvas.addEventListener('DOMMouseScroll',mouseWheelBound,false);ig.system.canvas.addEventListener('contextmenu',this.contextmenu.bind(this),false);ig.system.canvas.addEventListener('mousedown',this.keydown.bind(this),false);ig.system.canvas.addEventListener('mouseup',this.keyup.bind(this),false);ig.system.canvas.addEventListener('mousemove',this.mousemove.bind(this),false);if(ig.ua.touchDevice){ig.system.canvas.addEventListener('touchstart',this.keydown.bind(this),false);ig.system.canvas.addEventListener('touchend',this.keyup.bind(this),false);ig.system.canvas.addEventListener('touchmove',this.mousemove.bind(this),false);ig.system.canvas.addEventListener('MSPointerDown',this.keydown.bind(this),false);ig.system.canvas.addEventListener('MSPointerUp',this.keyup.bind(this),false);ig.system.canvas.addEventListener('MSPointerMove',this.mousemove.bind(this),false);ig.system.canvas.style.msTouchAction='none';}},initKeyboard:function(){if(this.isUsingKeyboard){return;}
this.isUsingKeyboard=true;window.addEventListener('keydown',this.keydown.bind(this),false);window.addEventListener('keyup',this.keyup.bind(this),false);},initAccelerometer:function(){if(this.isUsingAccelerometer){return;}
this.isUsingAccelerometer=true;window.addEventListener('devicemotion',this.devicemotion.bind(this),false);},mousewheel:function(event){var delta=event.wheelDelta?event.wheelDelta:(event.detail*-1);var code=delta>0?ig.KEY.MWHEEL_UP:ig.KEY.MWHEEL_DOWN;var action=this.bindings[code];if(action){this.actions[action]=true;this.presses[action]=true;this.delayedKeyup[action]=true;event.stopPropagation();event.preventDefault();}},mousemove:function(event){var internalWidth=parseInt(ig.system.canvas.offsetWidth)||ig.system.realWidth;var scale=ig.system.scale*(internalWidth/ig.system.realWidth);var pos={left:0,top:0};if(ig.system.canvas.getBoundingClientRect){pos=ig.system.canvas.getBoundingClientRect();}
var ev=event.touches?event.touches[0]:event;this.mouse.x=(ev.clientX-pos.left)/scale;this.mouse.y=(ev.clientY-pos.top)/scale;},contextmenu:function(event){if(this.bindings[ig.KEY.MOUSE2]){event.stopPropagation();event.preventDefault();}},keydown:function(event){var tag=event.target.tagName;if(tag=='INPUT'||tag=='TEXTAREA'){return;}
var code=event.type=='keydown'?event.keyCode:(event.button==2?ig.KEY.MOUSE2:ig.KEY.MOUSE1);if(code<0&&!ig.ua.mobile){window.focus();}
if(event.type=='touchstart'||event.type=='mousedown'){this.mousemove(event);}
var action=this.bindings[code];if(action){this.actions[action]=true;if(!this.locks[action]){this.presses[action]=true;this.locks[action]=true;}
event.preventDefault();}},keyup:function(event){var tag=event.target.tagName;if(tag=='INPUT'||tag=='TEXTAREA'){return;}
var code=event.type=='keyup'?event.keyCode:(event.button==2?ig.KEY.MOUSE2:ig.KEY.MOUSE1);var action=this.bindings[code];if(action){this.delayedKeyup[action]=true;event.preventDefault();}},devicemotion:function(event){this.accel=event.accelerationIncludingGravity;},bind:function(key,action){if(key<0){this.initMouse();}
else if(key>0){this.initKeyboard();}
this.bindings[key]=action;},bindTouch:function(selector,action){var element=ig.$(selector);var that=this;element.addEventListener('touchstart',function(ev){that.touchStart(ev,action);},false);element.addEventListener('touchend',function(ev){that.touchEnd(ev,action);},false);element.addEventListener('MSPointerDown',function(ev){that.touchStart(ev,action);},false);element.addEventListener('MSPointerUp',function(ev){that.touchEnd(ev,action);},false);},unbind:function(key){var action=this.bindings[key];this.delayedKeyup[action]=true;this.bindings[key]=null;},unbindAll:function(){this.bindings={};this.actions={};this.presses={};this.locks={};this.delayedKeyup={};},state:function(action){return this.actions[action];},pressed:function(action){return this.presses[action];},released:function(action){return!!this.delayedKeyup[action];},clearPressed:function(){for(var action in this.delayedKeyup){this.actions[action]=false;this.locks[action]=false;}
this.delayedKeyup={};this.presses={};},touchStart:function(event,action){this.actions[action]=true;this.presses[action]=true;event.stopPropagation();event.preventDefault();return false;},touchEnd:function(event,action){this.delayedKeyup[action]=true;event.stopPropagation();event.preventDefault();return false;}});});

// lib/impact/impact.js
ig.baked=true;ig.module('impact.impact').requires('dom.ready','impact.loader','impact.system','impact.input','impact.sound').defines(function(){"use strict";ig.main=function(canvasId,gameClass,fps,width,height,scale,loaderClass){ig.system=new ig.System(canvasId,fps,width,height,scale||1);ig.input=new ig.Input();ig.soundManager=new ig.SoundManager();ig.music=new ig.Music();ig.ready=true;var loader=new(loaderClass||ig.Loader)(gameClass,ig.resources);loader.load();};});ig.merge=function(original,extended){original=original||{};if(extended){for(var key in extended){var ext=extended[key];var extType=typeof ext;if(extType!=='undefined'){if(extType!=='object'||ext instanceof HTMLElement||ext instanceof ig.Class){if(extType==='string'){if(ext==='true'){ext=true;}
else if(ext==='false'){ext=false;}}
original[key]=ext;}
else{if(!original[key]||typeof(original[key])!=='object'){original[key]=(ext instanceof Array)?[]:{};}
ig.merge(original[key],ext);}}}}
return original;};

// lib/plusplus/config-user.js
ig.baked=true;ig.module('plusplus.config-user').defines(function(){ig.CONFIG_USER={TOP_DOWN:true,GAME_WIDTH_PCT:1,GAME_HEIGHT_PCT:1,GAME_WIDTH_VIEW:320,GAME_HEIGHT_VIEW:200,TRANSITION_LEVELS:false,FONT:{CHAT_NAME:"monologue_font_10px.png"},TEXT_BUBBLE:{PIXEL_PERFECT:true,TRIANGLE_LENGTH:5,PADDING_X:5,PADDING_Y:4,R:1,G:1,B:1},CAMERA:{AUTO_FOLLOW_PLAYER:false},CHARACTER:{MAX_VEL_GROUNDED_Y:30,MAX_VEL_GROUNDED_X:30}};});

// lib/plusplus/core/config.js
ig.baked=true;ig.module('plusplus.core.config').requires('plusplus.config-user').defines(function(){"use strict";ig.CONFIG={};ig.CONFIG.FORCE_ENTITY_EXTENDED=true;ig.CONFIG.AUTO_CRISP_SCALING=true;ig.CONFIG.MIN_TIME_STEP=(ig.ua.mobile?(1000/30):(1000/60))/1000;ig.CONFIG.PATH_TO_MEDIA='media/';ig.CONFIG.DURATION_THROTTLE=500;ig.CONFIG.DURATION_THROTTLE_MEDIUM=250;ig.CONFIG.DURATION_THROTTLE_SHORT=60;ig.CONFIG.DURATION_TWEEN=500;ig.CONFIG.DURATION_FADE=300;ig.CONFIG.GAME_WIDTH=ig.ua.viewport.width;ig.CONFIG.GAME_HEIGHT=ig.ua.viewport.height;ig.CONFIG.GAME_WIDTH_PCT=0;ig.CONFIG.GAME_HEIGHT_PCT=0;ig.CONFIG.GAME_WIDTH_VIEW=0;ig.CONFIG.GAME_HEIGHT_VIEW=0;ig.CONFIG.TOP_DOWN=false;ig.CONFIG.FLIP_Y=false;ig.CONFIG.SCALE=1;ig.CONFIG.SCALE_MIN=1;ig.CONFIG.SCALE_MAX=Infinity;ig.CONFIG.RESIZE_DELAY=500;ig.CONFIG.GRAVITY=400;ig.CONFIG.AUTO_SORT_LAYERS=false;ig.CONFIG.AUTO_SORT_OVERLAY_LAYER=true;ig.CONFIG.AUTO_SORT_UI_LAYER=true;ig.CONFIG.PRERENDER_MAPS=true;ig.CONFIG.PRERENDER_BACKGROUND_LAYER=true;ig.CONFIG.PRERENDER_FOREGROUND_LAYER=true;ig.CONFIG.CLEAR_ON_LOAD_UI_LAYER=false;ig.CONFIG.IGNORE_PAUSE_UI_LAYER=true;ig.CONFIG.IGNORE_PAUSE_OVERLAY_LAYER=false;ig.CONFIG.NO_UPDATE_BACKGROUND_LAYER=true;ig.CONFIG.NO_UPDATE_FOREGROUND_LAYER=true;ig.CONFIG.LOADER_MAX_WIDTH_PCT=0.5;ig.CONFIG.LOADER_MAX_HEIGHT_PCT=0.5;ig.CONFIG.LOADER_BG_COLOR='#111111';ig.CONFIG.LOADER_FADE_COLOR='#DDDDDD';ig.CONFIG.LOADER_BAR=true;ig.CONFIG.LOADER_BAR_COLOR='#DDDDDD';ig.CONFIG.LOADER_BAR_WIDTH_PCT=0.25;ig.CONFIG.LOADER_BAR_HEIGHT_PCT=0.025;ig.CONFIG.LOADER_BAR_LINE_WIDTH=3;ig.CONFIG.LOADER_BAR_SPACE_PCT=0.005;ig.CONFIG.LOADER_SPACE_PCT=0.02;ig.CONFIG.LOADER_LOGO_SRC_MAIN="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAP8AAAAtCAYAAABh/r3uAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3QUTEQcqYSZEBgAAAVtJREFUeNrt3MGNwjAQBVC8oqPctpxtYevYFiiHm2tiryARKdaMjcHv3UCBOA5f/oGIctqxbdvtBLy9Wmt59vyXqYE1CT8sqqj6sOYlgJUf1H5gqdqv6oOVHxB+QPgB4QeEHxB+QPgB4Qfmds56o+vfz9Pnv38v6YPe29eR/baO8377I8eyt31kzK1zEhln1lxlnZfZ5qd1nJHtsz6TVn5A+IFg7R9ZUSLvkzXOSBXsfSmUNc6suerx2pFzlVXRW7e38gPCD0xY+2cw8leGIxWutVr3GHPWOFc4p+/42bbyA8IPvLD2v6pGZlXuyH5HvnbkvmY4pyuL3BBl5QeEH+hU+3tXlKxvqnuPM1KnZ6u7kbmKHGOP+Wn9BaT12Ge7gcfKDwg/8Mj/9oOVHxB+QPgB4QeEHxB+QPgB4QcmV+4fuOEHPluttVj5Qe0Hlq/9LgHgs6u+lR8QfljVP9Eqv3CR+x/VAAAAAElFTkSuQmCC";ig.CONFIG.LOADER_LOGO_SRC_ALT="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3QUGFCwN01BpQgAAACZpVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVAgb24gYSBNYWOV5F9bAAADT0lEQVR42u3du27UQBiG4VlkUSCuIRU9QhuKpMpFUFOkTcl1bElLTcFFUCUFsai4EwqEEFAkGwkL4zE+zeF5qxw2m43z/+98Y896dmGA/X7/KyBb2rbd/ev7jxyiulEACgA1szPm150JGMAQAAWAejOAMZ8BoACgACZwe9aG27PW0WQAVB0CuxY4vdk7wgyA6qaBTMAAyIRmjV/CCAyAmjJAX+d3YQIGQMkGiDUBIzAASjYAEzAAFMA4U7i6yAAoLQOMzQKyAQOgRAMwwbjjseTfywCV05TQKbIBAyDHDDA1C+SeDVLIQAxgCCgrRad8BvH6cBmuD5cKAGYBRc8Sjl1+/ubdH1/vfs4AqGMWkMq4nPos4Xicvr96G0II4fGHq8VfNwMwQHorglI3Qt8Yv9TxYQCUYYDSTFACDMAA+a0HKNUES2ULBkCaBkjVBDVlAwaoHAUwYKbS35+gAGSAdG4Vm0u3zZUNtkj9DIB0DVCrCWQAMAATMAA2oHEI5jdVnxFSSP0MgHwyQG5ZIMdswAAMkM+mUUuZ4OuPuz64+PRi1M99fPk5hBDC0+ZntiZgAAbIb9u4uU0wtUP7Xs+a6/sZAPUYYC4TzN2R759/CSGE8OzJt2yyAANUThZnAuc+g7ZUJ568Ptx9cD/m9xkrJRMwgAyQ/+bRY7PA0h2Y004pDFA5RRTA6c1+k65K8Z4/DIB8ZwFT0/7RAmtdPUzxnj8MgHwNkGpHpbiShwHgPEBq8/Ecd0VjAAbYzgBrja2xJvjf15PzfogMwADlZoDYDl16TSADgAFiOnKtq3TdtXpL4X0BSJ6q3hv4cK0gXPnPMwBWywBb7Y4VO69P7X0GDAAZYA5iz+hNXUfgDiFggC2Z65pCjfsGMIBZQHpnAvs6uuSVOQwABqh57x4GQD0GAANAAUABQAFAAUABQAFAAaCiAsj19iol3BaGAfBAMqeCh7qq79Lw0OPGPr77uOP3x/780OtI5ZI2A1ROs3XHdzuh23F9n8d24NDiktjOnPp8Y38fA6BsA5RGrKlkADDAkrOHoc6L7eDY5xvKJLGzFAZA3ecB5ppFgAGgAKAAEJcBul+wTLxs2rbdMQAUABQA/pYBZIKyx3wGgAKAAsA9vwE+PY+Xd5MPtQAAAABJRU5ErkJggg==";ig.CONFIG.CLEAR_COLOR="#000000";ig.CONFIG.STATIC="static";ig.CONFIG.MOVABLE="movable";ig.CONFIG.DYNAMIC="dynamic";ig.CONFIG.AUTO_SPAWN_PLAYER=true;ig.CONFIG.Z_INDEX_BELOW_ALL=-1;ig.CONFIG.Z_INDEX_BELOW_PLAYER=0;ig.CONFIG.Z_INDEX_PLAYER=100;ig.CONFIG.Z_INDEX_ABOVE_PLAYER=200;ig.CONFIG.Z_INDEX_ABOVE_ALL=9999;ig.CONFIG.TRANSITION_LEVELS=true;ig.CONFIG.TRANSITIONER_COLOR="#333333";ig.CONFIG.TRANSITIONER_R=51;ig.CONFIG.TRANSITIONER_G=51;ig.CONFIG.TRANSITIONER_B=51;ig.CONFIG.TRANSITIONER_LAYER='ui';ig.CONFIG.Z_INDEX_TRANSITIONER=ig.CONFIG.Z_INDEX_ABOVE_PLAYER;ig.CONFIG.DIMMED_PAUSE=true;ig.CONFIG.DIMMER_COLOR="#333333";ig.CONFIG.DIMMER_R=51;ig.CONFIG.DIMMER_G=51;ig.CONFIG.DIMMER_B=51;ig.CONFIG.DIMMER_ALPHA=0.75;ig.CONFIG.LAYERS_CUSTOM={};ig.CONFIG.LEVEL_MAX=4;ig.CONFIG.RANKS_MAP={NONE:0,EASY:Math.round(ig.CONFIG.LEVEL_MAX*0.25),MEDIUM:Math.round(ig.CONFIG.LEVEL_MAX*0.5),HARD:Math.round(ig.CONFIG.LEVEL_MAX*0.75),IMPOSSIBLE:ig.CONFIG.LEVEL_MAX};ig.CONFIG.PRECISION_ZERO=0.01;ig.CONFIG.PRECISION_ZERO_TWEEN=0.1;ig.CONFIG.PRECISION_PCT_ONE_SIDED=0.01;ig.CONFIG.FONT={};ig.CONFIG.FONT.MAIN_NAME="font_04b03_white_8.png";ig.CONFIG.FONT.ALT_NAME="";ig.CONFIG.FONT.CHAT_NAME="";ig.CONFIG.FONT.SCALE=1;ig.CONFIG.FONT.SCALE_OF_SYSTEM_SCALE=1;ig.CONFIG.FONT.SCALE_MIN=1;ig.CONFIG.FONT.SCALE_MAX=Infinity;ig.CONFIG.FONT.IGNORE_SYSTEM_SCALE=false;ig.CONFIG.UI={};ig.CONFIG.UI.POS_AS_PCT=true;ig.CONFIG.UI.SCALE=1;ig.CONFIG.UI.SCALE_OF_SYSTEM_SCALE=1;ig.CONFIG.UI.SCALE_MIN=1;ig.CONFIG.UI.SCALE_MAX=Infinity;ig.CONFIG.UI.IGNORE_SYSTEM_SCALE=false;ig.CONFIG.UI.MARGIN_AS_PCT_SMALLEST=true;ig.CONFIG.UI.MARGIN_SCALELESS=true;ig.CONFIG.UI.CAN_FLIP_X=true;ig.CONFIG.UI.CAN_FLIP_Y=false;ig.CONFIG.GESTURE={RELEASE_DELAY:0.3,DIRECTION_SWITCH_PCT:0.03,HOLD_DELAY:0.15,HOLD_DELAY_BLOCK_TAP:0.3,HOLD_DELAY_ACTIVATE:0.5,HOLD_ACTIVATE_DISTANCE_PCT:0.01,SWIPE_DISTANCE_PCT:0.05,SWIPE_DURATION_TRY:0.3,SWIPE_DURATION_RESET:0.1,TAP_MULTI_DISTANCE_PCT:0.05,TARGET_UP:false,TARGET_DOWN:false,TARGET_DOWN_START:true,TARGET_TAP:true,TARGET_SEARCH_RADIUS:10};ig.CONFIG.CAMERA={AUTO_FOLLOW_PLAYER:true,SNAP_FIRST_FOLLOW:true,CENTER_FIRST_FOLLOW:true,KEEP_CENTERED:true,KEEP_INSIDE_LEVEL:false,LERP:1,BOUNDS_TRAP_AS_PCT:false,BOUNDS_TRAP_MINX:0,BOUNDS_TRAP_MINY:0,BOUNDS_TRAP_MAXX:0,BOUNDS_TRAP_MAXY:0,BOUNDS_TRAP_PCT_MINX:0,BOUNDS_TRAP_PCT_MINY:0,BOUNDS_TRAP_PCT_MAXX:0,BOUNDS_TRAP_PCT_MAXY:0,TRANSITION_DURATION:1,TRANSITION_DURATION_MIN:0.2,TRANSITION_DURATION_MAX:2,TRANSITION_DISTANCE:100};ig.CONFIG.ENTITY={};ig.CONFIG.ENTITY.SIZE_X=16;ig.CONFIG.ENTITY.SIZE_Y=16;ig.CONFIG.ENTITY.SIZE_OFFSET_X=0;ig.CONFIG.ENTITY.SIZE_OFFSET_Y=0;ig.CONFIG.ENTITY.SCALE=1;ig.CONFIG.ENTITY.SCALE_OF_SYSTEM_SCALE=1;ig.CONFIG.ENTITY.SCALE_MIN=1;ig.CONFIG.ENTITY.SCALE_MAX=Infinity;ig.CONFIG.ENTITY.IGNORE_SYSTEM_SCALE=false;ig.CONFIG.ENTITY.CAN_FLIP_X=true;ig.CONFIG.ENTITY.CAN_FLIP_Y=false;ig.CONFIG.ENTITY.FRICTION_X=0;ig.CONFIG.ENTITY.FRICTION_Y=0;ig.CONFIG.ENTITY.MAX_VEL_X=100;ig.CONFIG.ENTITY.MAX_VEL_Y=100;ig.CONFIG.ENTITY.BOUNCINESS=0;ig.CONFIG.ENTITY.MIN_BOUNCE_VEL=40;ig.CONFIG.ENTITY.NEEDS_BOUNDS=false;ig.CONFIG.ENTITY.NEEDS_VERTICES=false;ig.CONFIG.ENTITY.HEALTH=1;ig.CONFIG.ENTITY.SLOPE_STICKING=false;ig.CONFIG.ENTITY.SLOPE_SPEED_MOD=0.75;ig.CONFIG.ENTITY.SLOPE_STANDING_MIN=-136;ig.CONFIG.ENTITY.SLOPE_STANDING_MAX=-44;ig.CONFIG.ENTITY.OPAQUE=false;ig.CONFIG.ENTITY.OPAQUE_OFFSET={left:0,right:0,top:0,bottom:0};ig.CONFIG.ENTITY.OPAQUE_OFFSET_RIGHT=0;ig.CONFIG.ENTITY.OPAQUE_OFFSET_TOP=0;ig.CONFIG.ENTITY.OPAQUE_OFFSET_BOTTOM=0;ig.CONFIG.ENTITY.OPAQUE_FROM_VERTICES=false;ig.CONFIG.ENTITY.DIFFUSE=0.8;ig.CONFIG.LIGHT={};ig.CONFIG.LIGHT.PIXEL_PERFECT=false;ig.CONFIG.LIGHT.GRADIENT=true;ig.CONFIG.LIGHT.CASTS_SHADOWS=false;ig.CONFIG.LIGHT.CASTS_SHADOWS_MOVABLE=false;ig.CONFIG.LIGHT.R=1;ig.CONFIG.LIGHT.G=1;ig.CONFIG.LIGHT.B=1;ig.CONFIG.LIGHT.ALPHA=0.25;ig.CONFIG.LIGHT.DIFFUSE=0.8;ig.CONFIG.LIGHT.SAMPLES=1;ig.CONFIG.CHARACTER={};ig.CONFIG.CHARACTER.ANIM_AUTOMATIC=true;ig.CONFIG.CHARACTER.SIZE_X=32;ig.CONFIG.CHARACTER.SIZE_Y=32;ig.CONFIG.CHARACTER.SIZE_OFFSET_X=0;ig.CONFIG.CHARACTER.SIZE_OFFSET_Y=0;ig.CONFIG.CHARACTER.MAX_VEL_UNGROUNDED_X=100;ig.CONFIG.CHARACTER.MAX_VEL_UNGROUNDED_Y=200;ig.CONFIG.CHARACTER.MAX_VEL_GROUNDED_X=100;ig.CONFIG.CHARACTER.MAX_VEL_GROUNDED_Y=100;ig.CONFIG.CHARACTER.MAX_VEL_CLIMBING_X=75;ig.CONFIG.CHARACTER.MAX_VEL_CLIMBING_Y=75;ig.CONFIG.CHARACTER.FRICTION_UNGROUNDED_X=0;ig.CONFIG.CHARACTER.FRICTION_UNGROUNDED_Y=0;ig.CONFIG.CHARACTER.FRICTION_GROUNDED_X=1600;ig.CONFIG.CHARACTER.FRICTION_GROUNDED_Y=1600;ig.CONFIG.CHARACTER.SPEED_X=750;ig.CONFIG.CHARACTER.SPEED_Y=750;ig.CONFIG.CHARACTER.CAN_JUMP=true;ig.CONFIG.CHARACTER.JUMP_STEPS=4;ig.CONFIG.CHARACTER.JUMP_FORCE=10;ig.CONFIG.CHARACTER.JUMP_CONTROL=0.75;ig.CONFIG.CHARACTER.SLOPE_STICKING=true;ig.CONFIG.CHARACTER.UNGROUNDED_FOR_THRESHOLD=0.1;ig.CONFIG.CHARACTER.UNGROUNDED_FOR_AND_FALLING_THRESHOLD=0.25;ig.CONFIG.CHARACTER.CAN_CLIMB=true;ig.CONFIG.CHARACTER.CLIMBING_CONTROL=1;ig.CONFIG.CHARACTER.CAN_PATHFIND=true;ig.CONFIG.CHARACTER.PATHFINDING_DELAY=1;ig.CONFIG.CHARACTER.PATHFINDING_UPDATE_DELAY=0.2;ig.CONFIG.CHARACTER.PATHFINDING_SIMPLE_DELAY=0.075;ig.CONFIG.CHARACTER.STUCK_DELAY=0.1;ig.CONFIG.CHARACTER.HEALTH=1;ig.CONFIG.CHARACTER.ENERGY=1;ig.CONFIG.CHARACTER.REGEN_RATE_HEALTH=0;ig.CONFIG.CHARACTER.REGEN_RATE_ENERGY=0;ig.CONFIG.CHARACTER.EXPLODING_DAMAGE=true;ig.CONFIG.CHARACTER.EXPLODING_DAMAGE_PARTICLE_COUNT=3;ig.CONFIG.CHARACTER.EXPLODING_DEATH=true;ig.CONFIG.CHARACTER.EXPLODING_DEATH_PARTICLE_COUNT=10;ig.CONFIG.PLAYER_MANAGER={};ig.CONFIG.PLAYER_MANAGER.AUTO_MANAGE_PLAYER=true;ig.CONFIG.PLAYER_MANAGER.HOLD_TO_MOVE=true;ig.CONFIG.PLAYER_MANAGER.SWIPE_TO_JUMP=true;ig.CONFIG.CREATURE={};ig.CONFIG.CREATURE.REACTION_DISTANCE=100;ig.CONFIG.CREATURE.REACTION_DELAY=0.2;ig.CONFIG.CREATURE.PREDATOR_FROM_DAMAGE=false;ig.CONFIG.CREATURE.CAN_LEARN_PREDATORS=false;ig.CONFIG.CREATURE.NEEDS_LINE_OF_SIGHT_PREY=true;ig.CONFIG.CREATURE.DETECT_HIDDEN_PREY=false;ig.CONFIG.CREATURE.MOVE_TO_PREY_SETTINGS={avoidEntities:true,searchDistance:ig.CONFIG.CREATURE.REACTION_DISTANCE};ig.CONFIG.CREATURE.NEEDS_LINE_OF_SIGHT_PREDATOR=true;ig.CONFIG.CREATURE.DETECT_HIDDEN_PREDATOR=false;ig.CONFIG.CREATURE.MOVE_TO_PREDATOR_SETTINGS={avoidEntities:true,searchDistance:ig.CONFIG.CREATURE.REACTION_DISTANCE};ig.CONFIG.CREATURE.CAN_FLEE=true;ig.CONFIG.CREATURE.FLEE_HEALTH_PCT=0.15;ig.CONFIG.CREATURE.CAN_BREAK_TETHER=false;ig.CONFIG.CREATURE.TETHER_TO_SPAWNER=false;ig.CONFIG.CREATURE.TETHER_DISTANCE=100;ig.CONFIG.CREATURE.MOVE_TO_TETHER_SETTINGS={avoidEntities:true};ig.CONFIG.CREATURE.CAN_WANDER_X=true;ig.CONFIG.CREATURE.CAN_WANDER_Y=false;ig.CONFIG.CREATURE.WANDER_SWITCH_CHANCE=0;ig.CONFIG.CREATURE.WANDER_SWITCH_CHANCE_STOPPED=0;ig.CONFIG.CREATURE.MOVE_TO_WANDER_SETTINGS={simple:true,avoidUngrounded:true,avoidSlopes:true};ig.CONFIG.PARTICLE={};ig.CONFIG.PARTICLE.ANIM_AUTOMATIC=true;ig.CONFIG.COLLISION={};ig.CONFIG.COLLISION.ALLOW_FIXED=false;ig.CONFIG.COLLISION.TILE_SOLID=1;ig.CONFIG.COLLISION.TILE_ONE_WAY_UP=12;ig.CONFIG.COLLISION.TILE_ONE_WAY_DOWN=23;ig.CONFIG.COLLISION.TILE_ONE_WAY_RIGHT=34;ig.CONFIG.COLLISION.TILE_ONE_WAY_LEFT=45;ig.CONFIG.COLLISION.TILE_CLIMBABLE_WITH_TOP=46;ig.CONFIG.COLLISION.TILE_CLIMBABLE=47;ig.CONFIG.COLLISION.TILE_CLIMBABLE_STAIRS_WITH_TOP=48;ig.CONFIG.COLLISION.TILE_CLIMBABLE_STAIRS=49;ig.CONFIG.COLLISION.TILES_HASH_ONE_WAY={};ig.CONFIG.COLLISION.TILES_HASH_ONE_WAY[ig.CONFIG.COLLISION.TILE_ONE_WAY_UP]=true;ig.CONFIG.COLLISION.TILES_HASH_ONE_WAY[ig.CONFIG.COLLISION.TILE_ONE_WAY_DOWN]=true;ig.CONFIG.COLLISION.TILES_HASH_ONE_WAY[ig.CONFIG.COLLISION.TILE_ONE_WAY_RIGHT]=true;ig.CONFIG.COLLISION.TILES_HASH_ONE_WAY[ig.CONFIG.COLLISION.TILE_ONE_WAY_LEFT]=true;ig.CONFIG.COLLISION.TILES_HASH_ONE_WAY[ig.CONFIG.COLLISION.TILE_CLIMBABLE_WITH_TOP]=true;ig.CONFIG.COLLISION.TILES_HASH_ONE_WAY[ig.CONFIG.COLLISION.TILE_CLIMBABLE_STAIRS_WITH_TOP]=true;ig.CONFIG.COLLISION.TILES_HASH_CLIMBABLE={};ig.CONFIG.COLLISION.TILES_HASH_CLIMBABLE[ig.CONFIG.COLLISION.TILE_CLIMBABLE_WITH_TOP]=true;ig.CONFIG.COLLISION.TILES_HASH_CLIMBABLE[ig.CONFIG.COLLISION.TILE_CLIMBABLE]=true;ig.CONFIG.COLLISION.TILES_HASH_CLIMBABLE[ig.CONFIG.COLLISION.TILE_CLIMBABLE_STAIRS_WITH_TOP]=true;ig.CONFIG.COLLISION.TILES_HASH_CLIMBABLE[ig.CONFIG.COLLISION.TILE_CLIMBABLE_STAIRS]=true;ig.CONFIG.COLLISION.TILES_HASH_CLIMBABLE_ONE_WAY={};ig.CONFIG.COLLISION.TILES_HASH_CLIMBABLE_ONE_WAY[ig.CONFIG.COLLISION.TILE_CLIMBABLE_WITH_TOP]=true;ig.CONFIG.COLLISION.TILES_HASH_CLIMBABLE_ONE_WAY[ig.CONFIG.COLLISION.TILE_CLIMBABLE_STAIRS_WITH_TOP]=true;ig.CONFIG.COLLISION.TILES_HASH_CLIMBABLE_STAIRS={};ig.CONFIG.COLLISION.TILES_HASH_CLIMBABLE_STAIRS[ig.CONFIG.COLLISION.TILE_CLIMBABLE_STAIRS_WITH_TOP]=true;ig.CONFIG.COLLISION.TILES_HASH_CLIMBABLE_STAIRS[ig.CONFIG.COLLISION.TILE_CLIMBABLE_STAIRS]=true;ig.CONFIG.COLLISION.TILES_HASH_WALKABLE={0:true,50:true,51:true};ig.CONFIG.COLLISION.TILES_HASH_WALKABLE[ig.CONFIG.COLLISION.TILE_ONE_WAY_UP]=true;ig.CONFIG.COLLISION.TILES_HASH_WALKABLE[ig.CONFIG.COLLISION.TILE_ONE_WAY_DOWN]=true;ig.CONFIG.COLLISION.TILES_HASH_WALKABLE[ig.CONFIG.COLLISION.TILE_ONE_WAY_RIGHT]=true;ig.CONFIG.COLLISION.TILES_HASH_WALKABLE[ig.CONFIG.COLLISION.TILE_ONE_WAY_LEFT]=true;ig.CONFIG.COLLISION.TILES_HASH_WALKABLE[ig.CONFIG.COLLISION.TILE_CLIMBABLE_WITH_TOP]=true;ig.CONFIG.COLLISION.TILES_HASH_WALKABLE[ig.CONFIG.COLLISION.TILE_CLIMBABLE]=true;ig.CONFIG.COLLISION.TILES_HASH_WALKABLE[ig.CONFIG.COLLISION.TILE_CLIMBABLE_STAIRS_WITH_TOP]=true;ig.CONFIG.COLLISION.TILES_HASH_WALKABLE[ig.CONFIG.COLLISION.TILE_CLIMBABLE_STAIRS]=true;ig.CONFIG.COLLISION.TILES_HASH_WALKABLE_STRICT={0:true,50:true,51:true};ig.CONFIG.COLLISION.TILES_HASH_WALKABLE_STRICT[ig.CONFIG.COLLISION.TILE_CLIMBABLE]=true;ig.CONFIG.COLLISION.TILES_HASH_WALKABLE_STRICT[ig.CONFIG.COLLISION.TILE_CLIMBABLE_STAIRS]=true;ig.CONFIG.COLLISION.TILES_HASH_SLOPED={2:true,3:true,4:true,5:true,6:true,7:true,8:true,9:true,10:true,11:true,13:true,14:true,15:true,16:true,17:true,18:true,19:true,20:true,21:true,22:true,24:true,25:true,26:true,27:true,28:true,29:true,30:true,31:true,32:true,33:true,35:true,36:true,37:true,38:true,39:true,40:true,41:true,42:true,43:true,44:true,52:true,53:true,54:true,55:true};ig.CONFIG.PATHFINDING={};ig.CONFIG.PATHFINDING.BUILD_WITH_LEVEL=true;ig.CONFIG.PATHFINDING.WEIGHTED=true;ig.CONFIG.PATHFINDING.ALLOW_DIAGONAL=true;ig.CONFIG.PATHFINDING.DIAGONAL_REQUIRES_BOTH_DIRECT=true;ig.CONFIG.PATHFINDING.AVOID_ENTITIES=true;ig.CONFIG.PATHFINDING.WEIGHT=10;ig.CONFIG.PATHFINDING.WEIGHT_AWAY_FROM=2;ig.CONFIG.PATHFINDING.AWAY_FROM_DISTANCE=100;ig.CONFIG.PATHFINDING.AWAY_FROM_MIN_DISTANCE_PCT=0.4;ig.CONFIG.PATHFINDING.AWAY_FROM_MAX_NODES=40;ig.CONFIG.PATHFINDING.STRICT_SLOPE_CHECK=false;ig.CONFIG.PATHFINDING.TILE_DEF={0:{weightPct:1},1:{weightPct:0,walkable:true},2:{weightPct:0.25,walkable:true},3:{weightPct:0.75,walkable:true},4:{walkable:false}};ig.CONFIG.OVERLAY={};ig.CONFIG.OVERLAY.R=0;ig.CONFIG.OVERLAY.G=0;ig.CONFIG.OVERLAY.B=0;ig.CONFIG.OVERLAY.ALPHA=0.8;ig.CONFIG.OVERLAY.PIXEL_PERFECT=false;ig.CONFIG.TEXT_BUBBLE={};ig.CONFIG.TEXT_BUBBLE.SIZE_X=120;ig.CONFIG.TEXT_BUBBLE.SIZE_Y=70;ig.CONFIG.TEXT_BUBBLE.SIZE_AS_PCT=true;ig.CONFIG.TEXT_BUBBLE.SIZE_PCT_X=0.5;ig.CONFIG.TEXT_BUBBLE.SIZE_PCT_Y=0.5;ig.CONFIG.TEXT_BUBBLE.CORNER_RADIUS=5;ig.CONFIG.TEXT_BUBBLE.CORNER_RADIUS_AS_PCT=false;ig.CONFIG.TEXT_BUBBLE.PIXEL_PERFECT=false;ig.CONFIG.TEXT_BUBBLE.R=0.9;ig.CONFIG.TEXT_BUBBLE.G=0.9;ig.CONFIG.TEXT_BUBBLE.B=0.9;ig.CONFIG.TEXT_BUBBLE.ALPHA=1;ig.CONFIG.TEXT_BUBBLE.TRIANGLE_LENGTH=10;ig.CONFIG.TEXT_BUBBLE.TRIANGLE_WIDTH=12;ig.CONFIG.TEXT_BUBBLE.PADDING_X=6;ig.CONFIG.TEXT_BUBBLE.PADDING_Y=6;ig.CONFIG.TEXT_BUBBLE.SHRINK_TO_TEXT=true;ig.merge(ig.CONFIG,ig.CONFIG_USER);ig.CONFIG.ENTITY.CAN_FLIP_Y=ig.CONFIG.ENTITY.CAN_FLIP_Y||ig.CONFIG.FLIP_Y;ig.CONFIG.FONT.MAIN_PATH=ig.CONFIG.FONT.MAIN_NAME?ig.CONFIG.PATH_TO_MEDIA+ig.CONFIG.FONT.MAIN_NAME:'';ig.CONFIG.FONT.ALT_PATH=ig.CONFIG.FONT.ALT_NAME?ig.CONFIG.PATH_TO_MEDIA+ig.CONFIG.FONT.ALT_NAME:'';ig.CONFIG.FONT.CHAT_PATH=ig.CONFIG.FONT.CHAT_NAME?ig.CONFIG.PATH_TO_MEDIA+ig.CONFIG.FONT.CHAT_NAME:'';ig.CONFIG.RANKS=(function(){var ranks=[];for(var rank in ig.CONFIG.RANKS_MAP){ranks.push({name:rank,level:ig.CONFIG.RANKS_MAP[rank]});}
ranks.sort(function(a,b){return a.level-b.level;});return ranks;})();ig.CONFIG.ENTITY.SIZE_EFFECTIVE_X=ig.CONFIG.ENTITY.SIZE_X-ig.CONFIG.ENTITY.SIZE_OFFSET_X*2;ig.CONFIG.ENTITY.SIZE_EFFECTIVE_Y=ig.CONFIG.ENTITY.SIZE_Y-ig.CONFIG.ENTITY.SIZE_OFFSET_Y*2;ig.CONFIG.ENTITY.SIZE_EFFECTIVE_MIN=Math.min(ig.CONFIG.ENTITY.SIZE_EFFECTIVE_X,ig.CONFIG.ENTITY.SIZE_EFFECTIVE_Y);ig.CONFIG.ENTITY.SIZE_EFFECTIVE_MAX=Math.max(ig.CONFIG.ENTITY.SIZE_EFFECTIVE_X,ig.CONFIG.ENTITY.SIZE_EFFECTIVE_Y);ig.CONFIG.CHARACTER.SIZE_EFFECTIVE_X=ig.CONFIG.CHARACTER.SIZE_X-ig.CONFIG.CHARACTER.SIZE_OFFSET_X*2;ig.CONFIG.CHARACTER.SIZE_EFFECTIVE_Y=ig.CONFIG.CHARACTER.SIZE_Y-ig.CONFIG.CHARACTER.SIZE_OFFSET_Y*2;ig.CONFIG.CHARACTER.SIZE_EFFECTIVE_MIN=Math.min(ig.CONFIG.CHARACTER.SIZE_EFFECTIVE_X,ig.CONFIG.CHARACTER.SIZE_EFFECTIVE_Y);ig.CONFIG.CHARACTER.SIZE_EFFECTIVE_MAX=Math.max(ig.CONFIG.CHARACTER.SIZE_EFFECTIVE_X,ig.CONFIG.CHARACTER.SIZE_EFFECTIVE_Y);});

// lib/plusplus/helpers/utilsmath.js
ig.baked=true;ig.module('plusplus.helpers.utilsmath').defines(function(){"use strict";ig.utilsmath={};ig.utilsmath.GOLDEN_ANGLE=Math.PI*(3-Math.sqrt(5));ig.utilsmath.TWOPI=Math.PI*2;ig.utilsmath.HALFPI=Math.PI*0.5;ig.utilsmath.clamp=function(n,min,max){return Math.min(Math.max(n,min),max);};ig.utilsmath.map=function(n,istart,istop,ostart,ostop){return ostart+(ostop-ostart)*((n-istart)/(istop-istart));};ig.utilsmath.degreesToRadians=function(n){return(n/180)*Math.PI;};ig.utilsmath.radiansToDegrees=function(n){return(n*180)/Math.PI;};ig.utilsmath.almostEqual=function(a,b,threshold){if(a===b)return true;else{var d=b-a;return d>0?d<threshold:d>-threshold;}};ig.utilsmath.oppositeSidesOfZero=function(a,b){return(a<0&&b>0)||(a>0&&b<0);};ig.utilsmath.direction=function(n){return n===0?0:(n<0?-1:1);};ig.utilsmath.directionChange=function(a,b){return(a===0&&b!==0)||(a!==0&&b===0)||ig.utilsmath.oppositeSidesOfZero(a,b);};});

// lib/plusplus/core/loader.js
ig.baked=true;ig.module('plusplus.core.loader').requires('impact.loader','plusplus.core.config','plusplus.helpers.utilsmath').defines(function(){"use strict";var _c=ig.CONFIG;var _utm=ig.utilsmath;ig.LoaderExtended=ig.Loader.extend({_endTime:0,init:function(gameClass,resources){this.logoMain=ig.$new('img');this.logoMain.src=_c.LOADER_LOGO_SRC_MAIN;this.logoAlt=ig.$new('img');this.logoAlt.src=_c.LOADER_LOGO_SRC_ALT;this.parent(gameClass,resources);gameClass.prototype.resize.call(this);},end:function(){this.parent();this._endTime=Date.now();ig.system.setDelegate(this);},run:function(){var t=Date.now()-this._endTime;var alpha=1;if(t<_c.DURATION_FADE){this.draw();alpha=_utm.map(t,0,_c.DURATION_FADE,0,1);}
else if(t<_c.DURATION_FADE*2){ig.game.run();alpha=_utm.map(t,_c.DURATION_FADE,_c.DURATION_FADE*2,1,0);}
else{ig.system.setDelegate(ig.game);return;}
var context=ig.system.context;context.globalAlpha=alpha;context.fillStyle=_c.LOADER_FADE_COLOR;context.fillRect(0,0,ig.system.realWidth,ig.system.realHeight);context.globalAlpha=1;},draw:function(){this._drawStatus+=(this.status-this._drawStatus)/5;var context=ig.system.context;var w=ig.system.realWidth;var h=ig.system.realHeight;var spacing=Math.min(w,h)*_c.LOADER_SPACE_PCT;var barWidth;var barHeight;var barSpacing;if(_c.LOADER_BAR){barWidth=w*_c.LOADER_BAR_WIDTH_PCT;barHeight=h*_c.LOADER_BAR_HEIGHT_PCT;barSpacing=Math.min(w,h)*_c.LOADER_BAR_SPACE_PCT;}
else{barWidth=barHeight=barSpacing=0;}
var logoMainWidth=this.logoMain.width;var logoMainHeight=this.logoMain.height;var logoAltWidth=this.logoAlt.width;var logoAltHeight=this.logoAlt.height;var totalWidth=Math.max(barWidth,logoMainWidth,logoAltWidth);var totalHeight=logoMainHeight+spacing+barHeight+spacing+logoAltHeight;var pctX=totalWidth/w;var pctY=totalHeight/h;var scaleX=1;var scaleY=1;if(pctX>_c.LOADER_MAX_WIDTH_PCT){scaleX=1-(pctX-_c.LOADER_MAX_WIDTH_PCT);}
if(pctY>_c.LOADER_MAX_HEIGHT_PCT){scaleY=1-(pctY-_c.LOADER_MAX_HEIGHT_PCT);}
var scale=Math.min(1,scaleX,scaleY);var centerX=(w-totalWidth*scale)/2;var centerY=(h-totalHeight*scale)/2;context.fillStyle=_c.LOADER_BG_COLOR;context.clearRect(0,0,w,h);context.save();context.translate(centerX,centerY);context.scale(scale,scale);context.drawImage(this.logoMain,(totalWidth-logoMainWidth)*0.5,0);if(_c.LOADER_BAR){context.lineWidth=_c.LOADER_BAR_LINE_WIDTH;context.strokeStyle=_c.LOADER_BAR_COLOR;context.strokeRect((totalWidth-barWidth)*0.5,logoMainHeight+spacing,barWidth,barHeight);context.fillStyle=_c.LOADER_BAR_COLOR;context.fillRect((totalWidth-barWidth)*0.5+barSpacing,logoMainHeight+spacing+barSpacing,Math.max(0,barWidth*this._drawStatus-barSpacing*2),barHeight-barSpacing*2);}
context.drawImage(this.logoAlt,(totalWidth-logoAltWidth)*0.5,totalHeight-logoAltHeight);context.restore();}});});

// lib/impact/animation.js
ig.baked=true;ig.module('impact.animation').requires('impact.timer','impact.image').defines(function(){"use strict";ig.AnimationSheet=ig.Class.extend({width:8,height:8,image:null,init:function(path,width,height){this.width=width;this.height=height;this.image=new ig.Image(path);}});ig.Animation=ig.Class.extend({sheet:null,timer:null,sequence:[],flip:{x:false,y:false},pivot:{x:0,y:0},frame:0,tile:0,loopCount:0,alpha:1,angle:0,init:function(sheet,frameTime,sequence,stop){this.sheet=sheet;this.pivot={x:sheet.width/2,y:sheet.height/2};this.timer=new ig.Timer();this.frameTime=frameTime;this.sequence=sequence;this.stop=!!stop;this.tile=this.sequence[0];},rewind:function(){this.timer.set();this.loopCount=0;this.frame=0;this.tile=this.sequence[0];return this;},gotoFrame:function(f){this.timer.set(this.frameTime*-f-0.0001);this.update();},gotoRandomFrame:function(){this.gotoFrame(Math.floor(Math.random()*this.sequence.length))},update:function(){var frameTotal=Math.floor(this.timer.delta()/this.frameTime);this.loopCount=Math.floor(frameTotal/this.sequence.length);if(this.stop&&this.loopCount>0){this.frame=this.sequence.length-1;}
else{this.frame=frameTotal%this.sequence.length;}
this.tile=this.sequence[this.frame];},draw:function(targetX,targetY){var bbsize=Math.max(this.sheet.width,this.sheet.height);if(targetX>ig.system.width||targetY>ig.system.height||targetX+bbsize<0||targetY+bbsize<0){return;}
if(this.alpha!=1){ig.system.context.globalAlpha=this.alpha;}
if(this.angle==0){this.sheet.image.drawTile(targetX,targetY,this.tile,this.sheet.width,this.sheet.height,this.flip.x,this.flip.y);}
else{ig.system.context.save();ig.system.context.translate(ig.system.getDrawPos(targetX+this.pivot.x),ig.system.getDrawPos(targetY+this.pivot.y));ig.system.context.rotate(this.angle);this.sheet.image.drawTile(-this.pivot.x,-this.pivot.y,this.tile,this.sheet.width,this.sheet.height,this.flip.x,this.flip.y);ig.system.context.restore();}
if(this.alpha!=1){ig.system.context.globalAlpha=1;}}});});

// lib/impact/entity.js
ig.baked=true;ig.module('impact.entity').requires('impact.animation','impact.impact').defines(function(){"use strict";ig.Entity=ig.Class.extend({id:0,settings:{},size:{x:16,y:16},offset:{x:0,y:0},pos:{x:0,y:0},last:{x:0,y:0},vel:{x:0,y:0},accel:{x:0,y:0},friction:{x:0,y:0},maxVel:{x:100,y:100},zIndex:0,gravityFactor:1,standing:false,bounciness:0,minBounceVelocity:40,anims:{},animSheet:null,currentAnim:null,health:10,type:0,checkAgainst:0,collides:0,_killed:false,slopeStanding:{min:(44).toRad(),max:(136).toRad()},init:function(x,y,settings){this.id=++ig.Entity._lastId;this.pos.x=this.last.x=x;this.pos.y=this.last.y=y;ig.merge(this,settings);},reset:function(x,y,settings){var proto=this.constructor.prototype;this.pos.x=x;this.pos.y=y;this.last.x=x;this.last.y=y;this.vel.x=proto.vel.x;this.vel.y=proto.vel.y;this.accel.x=proto.accel.x;this.accel.y=proto.accel.y;this.health=proto.health;this._killed=proto._killed;this.standing=proto.standing;this.type=proto.type;this.checkAgainst=proto.checkAgainst;this.collides=proto.collides;ig.merge(this,settings);},addAnim:function(name,frameTime,sequence,stop){if(!this.animSheet){throw('No animSheet to add the animation '+name+' to.');}
var a=new ig.Animation(this.animSheet,frameTime,sequence,stop);this.anims[name]=a;if(!this.currentAnim){this.currentAnim=a;}
return a;},update:function(){this.last.x=this.pos.x;this.last.y=this.pos.y;this.vel.y+=ig.game.gravity*ig.system.tick*this.gravityFactor;this.vel.x=this.getNewVelocity(this.vel.x,this.accel.x,this.friction.x,this.maxVel.x);this.vel.y=this.getNewVelocity(this.vel.y,this.accel.y,this.friction.y,this.maxVel.y);var mx=this.vel.x*ig.system.tick;var my=this.vel.y*ig.system.tick;var res=ig.game.collisionMap.trace(this.pos.x,this.pos.y,mx,my,this.size.x,this.size.y);this.handleMovementTrace(res);if(this.currentAnim){this.currentAnim.update();}},getNewVelocity:function(vel,accel,friction,max){if(accel){return(vel+accel*ig.system.tick).limit(-max,max);}
else if(friction){var delta=friction*ig.system.tick;if(vel-delta>0){return vel-delta;}
else if(vel+delta<0){return vel+delta;}
else{return 0;}}
return vel.limit(-max,max);},handleMovementTrace:function(res){this.standing=false;if(res.collision.y){if(this.bounciness>0&&Math.abs(this.vel.y)>this.minBounceVelocity){this.vel.y*=-this.bounciness;}
else{if(this.vel.y>0){this.standing=true;}
this.vel.y=0;}}
if(res.collision.x){if(this.bounciness>0&&Math.abs(this.vel.x)>this.minBounceVelocity){this.vel.x*=-this.bounciness;}
else{this.vel.x=0;}}
if(res.collision.slope){var s=res.collision.slope;if(this.bounciness>0){var proj=this.vel.x*s.nx+this.vel.y*s.ny;this.vel.x=(this.vel.x-s.nx*proj*2)*this.bounciness;this.vel.y=(this.vel.y-s.ny*proj*2)*this.bounciness;}
else{var lengthSquared=s.x*s.x+s.y*s.y;var dot=(this.vel.x*s.x+this.vel.y*s.y)/lengthSquared;this.vel.x=s.x*dot;this.vel.y=s.y*dot;var angle=Math.atan2(s.x,s.y);if(angle>this.slopeStanding.min&&angle<this.slopeStanding.max){this.standing=true;}}}
this.pos=res.pos;},draw:function(){if(this.currentAnim){this.currentAnim.draw(this.pos.x-this.offset.x-ig.game._rscreen.x,this.pos.y-this.offset.y-ig.game._rscreen.y);}},kill:function(){ig.game.removeEntity(this);},receiveDamage:function(amount,from){this.health-=amount;if(this.health<=0){this.kill();}},touches:function(other){return!(this.pos.x>=other.pos.x+other.size.x||this.pos.x+this.size.x<=other.pos.x||this.pos.y>=other.pos.y+other.size.y||this.pos.y+this.size.y<=other.pos.y);},distanceTo:function(other){var xd=(this.pos.x+this.size.x/2)-(other.pos.x+other.size.x/2);var yd=(this.pos.y+this.size.y/2)-(other.pos.y+other.size.y/2);return Math.sqrt(xd*xd+yd*yd);},angleTo:function(other){return Math.atan2((other.pos.y+other.size.y/2)-(this.pos.y+this.size.y/2),(other.pos.x+other.size.x/2)-(this.pos.x+this.size.x/2));},check:function(other){},collideWith:function(other,axis){},ready:function(){},erase:function(){}});ig.Entity._lastId=0;ig.Entity.COLLIDES={NEVER:0,LITE:1,PASSIVE:2,ACTIVE:4,FIXED:8};ig.Entity.TYPE={NONE:0,A:1,B:2,BOTH:3};ig.Entity.checkPair=function(a,b){if(a.checkAgainst&b.type){a.check(b);}
if(b.checkAgainst&a.type){b.check(a);}
if(a.collides&&b.collides&&a.collides+b.collides>ig.Entity.COLLIDES.ACTIVE){ig.Entity.solveCollision(a,b);}};ig.Entity.solveCollision=function(a,b){var weak=null;if(a.collides==ig.Entity.COLLIDES.LITE||b.collides==ig.Entity.COLLIDES.FIXED){weak=a;}
else if(b.collides==ig.Entity.COLLIDES.LITE||a.collides==ig.Entity.COLLIDES.FIXED){weak=b;}
if(a.last.x+a.size.x>b.last.x&&a.last.x<b.last.x+b.size.x){if(a.last.y<b.last.y){ig.Entity.seperateOnYAxis(a,b,weak);}
else{ig.Entity.seperateOnYAxis(b,a,weak);}
a.collideWith(b,'y');b.collideWith(a,'y');}
else if(a.last.y+a.size.y>b.last.y&&a.last.y<b.last.y+b.size.y){if(a.last.x<b.last.x){ig.Entity.seperateOnXAxis(a,b,weak);}
else{ig.Entity.seperateOnXAxis(b,a,weak);}
a.collideWith(b,'x');b.collideWith(a,'x');}};ig.Entity.seperateOnXAxis=function(left,right,weak){var nudge=(left.pos.x+left.size.x-right.pos.x);if(weak){var strong=left===weak?right:left;weak.vel.x=-weak.vel.x*weak.bounciness+strong.vel.x;var resWeak=ig.game.collisionMap.trace(weak.pos.x,weak.pos.y,weak==left?-nudge:nudge,0,weak.size.x,weak.size.y);weak.pos.x=resWeak.pos.x;}
else{var v2=(left.vel.x-right.vel.x)/2;left.vel.x=-v2;right.vel.x=v2;var resLeft=ig.game.collisionMap.trace(left.pos.x,left.pos.y,-nudge/2,0,left.size.x,left.size.y);left.pos.x=Math.floor(resLeft.pos.x);var resRight=ig.game.collisionMap.trace(right.pos.x,right.pos.y,nudge/2,0,right.size.x,right.size.y);right.pos.x=Math.ceil(resRight.pos.x);}};ig.Entity.seperateOnYAxis=function(top,bottom,weak){var nudge=(top.pos.y+top.size.y-bottom.pos.y);if(weak){var strong=top===weak?bottom:top;weak.vel.y=-weak.vel.y*weak.bounciness+strong.vel.y;var nudgeX=0;if(weak==top&&Math.abs(weak.vel.y-strong.vel.y)<weak.minBounceVelocity){weak.standing=true;nudgeX=strong.vel.x*ig.system.tick;}
var resWeak=ig.game.collisionMap.trace(weak.pos.x,weak.pos.y,nudgeX,weak==top?-nudge:nudge,weak.size.x,weak.size.y);weak.pos.y=resWeak.pos.y;weak.pos.x=resWeak.pos.x;}
else if(ig.game.gravity&&(bottom.standing||top.vel.y>0)){var resTop=ig.game.collisionMap.trace(top.pos.x,top.pos.y,0,-(top.pos.y+top.size.y-bottom.pos.y),top.size.x,top.size.y);top.pos.y=resTop.pos.y;if(top.bounciness>0&&top.vel.y>top.minBounceVelocity){top.vel.y*=-top.bounciness;}
else{top.standing=true;top.vel.y=0;}}
else{var v2=(top.vel.y-bottom.vel.y)/2;top.vel.y=-v2;bottom.vel.y=v2;var nudgeX=bottom.vel.x*ig.system.tick;var resTop=ig.game.collisionMap.trace(top.pos.x,top.pos.y,nudgeX,-nudge/2,top.size.x,top.size.y);top.pos.y=resTop.pos.y;var resBottom=ig.game.collisionMap.trace(bottom.pos.x,bottom.pos.y,0,nudge/2,bottom.size.x,bottom.size.y);bottom.pos.y=resBottom.pos.y;}};});

// lib/impact/map.js
ig.baked=true;ig.module('impact.map').defines(function(){"use strict";ig.Map=ig.Class.extend({tilesize:8,width:1,height:1,data:[[]],name:null,init:function(tilesize,data){this.tilesize=tilesize;this.data=data;this.height=data.length;this.width=data[0].length;this.pxWidth=this.width*this.tilesize;this.pxHeight=this.height*this.tilesize;},getTile:function(x,y){var tx=Math.floor(x/this.tilesize);var ty=Math.floor(y/this.tilesize);if((tx>=0&&tx<this.width)&&(ty>=0&&ty<this.height)){return this.data[ty][tx];}
else{return 0;}},setTile:function(x,y,tile){var tx=Math.floor(x/this.tilesize);var ty=Math.floor(y/this.tilesize);if((tx>=0&&tx<this.width)&&(ty>=0&&ty<this.height)){this.data[ty][tx]=tile;}}});});

// lib/impact/collision-map.js
ig.baked=true;ig.module('impact.collision-map').requires('impact.map').defines(function(){"use strict";ig.CollisionMap=ig.Map.extend({lastSlope:1,tiledef:null,init:function(tilesize,data,tiledef){this.parent(tilesize,data);this.tiledef=tiledef||ig.CollisionMap.defaultTileDef;for(var t in this.tiledef){if(t|0>this.lastSlope){this.lastSlope=t|0;}}},trace:function(x,y,vx,vy,objectWidth,objectHeight){var res={collision:{x:false,y:false,slope:false},pos:{x:x,y:y},tile:{x:0,y:0}};var steps=Math.ceil(Math.max(Math.abs(vx),Math.abs(vy))/this.tilesize);if(steps>1){var sx=vx/steps;var sy=vy/steps;for(var i=0;i<steps&&(sx||sy);i++){this._traceStep(res,x,y,sx,sy,objectWidth,objectHeight,vx,vy,i);x=res.pos.x;y=res.pos.y;if(res.collision.x){sx=0;vx=0;}
if(res.collision.y){sy=0;vy=0;}
if(res.collision.slope){break;}}}
else{this._traceStep(res,x,y,vx,vy,objectWidth,objectHeight,vx,vy,0);}
return res;},_traceStep:function(res,x,y,vx,vy,width,height,rvx,rvy,step){res.pos.x+=vx;res.pos.y+=vy;var t=0;if(vx){var pxOffsetX=(vx>0?width:0);var tileOffsetX=(vx<0?this.tilesize:0);var firstTileY=Math.max(Math.floor(y/this.tilesize),0);var lastTileY=Math.min(Math.ceil((y+height)/this.tilesize),this.height);var tileX=Math.floor((res.pos.x+pxOffsetX)/this.tilesize);var prevTileX=Math.floor((x+pxOffsetX)/this.tilesize);if(step>0||tileX==prevTileX||prevTileX<0||prevTileX>=this.width){prevTileX=-1;}
if(tileX>=0&&tileX<this.width){for(var tileY=firstTileY;tileY<lastTileY;tileY++){if(prevTileX!=-1){t=this.data[tileY][prevTileX];if(t>1&&t<=this.lastSlope&&this._checkTileDef(res,t,x,y,rvx,rvy,width,height,prevTileX,tileY)){break;}}
t=this.data[tileY][tileX];if(t==1||t>this.lastSlope||(t>1&&this._checkTileDef(res,t,x,y,rvx,rvy,width,height,tileX,tileY))){if(t>1&&t<=this.lastSlope&&res.collision.slope){break;}
res.collision.x=true;res.tile.x=t;x=res.pos.x=tileX*this.tilesize-pxOffsetX+tileOffsetX;rvx=0;break;}}}}
if(vy){var pxOffsetY=(vy>0?height:0);var tileOffsetY=(vy<0?this.tilesize:0);var firstTileX=Math.max(Math.floor(res.pos.x/this.tilesize),0);var lastTileX=Math.min(Math.ceil((res.pos.x+width)/this.tilesize),this.width);var tileY=Math.floor((res.pos.y+pxOffsetY)/this.tilesize);var prevTileY=Math.floor((y+pxOffsetY)/this.tilesize);if(step>0||tileY==prevTileY||prevTileY<0||prevTileY>=this.height){prevTileY=-1;}
if(tileY>=0&&tileY<this.height){for(var tileX=firstTileX;tileX<lastTileX;tileX++){if(prevTileY!=-1){t=this.data[prevTileY][tileX];if(t>1&&t<=this.lastSlope&&this._checkTileDef(res,t,x,y,rvx,rvy,width,height,tileX,prevTileY)){break;}}
t=this.data[tileY][tileX];if(t==1||t>this.lastSlope||(t>1&&this._checkTileDef(res,t,x,y,rvx,rvy,width,height,tileX,tileY))){if(t>1&&t<=this.lastSlope&&res.collision.slope){break;}
res.collision.y=true;res.tile.y=t;res.pos.y=tileY*this.tilesize-pxOffsetY+tileOffsetY;break;}}}}},_checkTileDef:function(res,t,x,y,vx,vy,width,height,tileX,tileY){var def=this.tiledef[t];if(!def){return false;}
var lx=(tileX+def[0])*this.tilesize,ly=(tileY+def[1])*this.tilesize,lvx=(def[2]-def[0])*this.tilesize,lvy=(def[3]-def[1])*this.tilesize,solid=def[4];var tx=x+vx+(lvy<0?width:0)-lx,ty=y+vy+(lvx>0?height:0)-ly;if(lvx*ty-lvy*tx>0){if(vx*-lvy+vy*lvx<0){return solid;}
var length=Math.sqrt(lvx*lvx+lvy*lvy);var nx=lvy/length,ny=-lvx/length;var proj=tx*nx+ty*ny;var px=nx*proj,py=ny*proj;if(px*px+py*py>=vx*vx+vy*vy){return solid||(lvx*(ty-vy)-lvy*(tx-vx)<0.5);}
res.pos.x=x+vx-px;res.pos.y=y+vy-py;res.collision.slope={x:lvx,y:lvy,nx:nx,ny:ny};return true;}
return false;}});var H=1/2,N=1/3,M=2/3,SOLID=true,NON_SOLID=false;ig.CollisionMap.defaultTileDef={5:[0,1,1,M,SOLID],6:[0,M,1,N,SOLID],7:[0,N,1,0,SOLID],3:[0,1,1,H,SOLID],4:[0,H,1,0,SOLID],2:[0,1,1,0,SOLID],10:[H,1,1,0,SOLID],21:[0,1,H,0,SOLID],32:[M,1,1,0,SOLID],43:[N,1,M,0,SOLID],54:[0,1,N,0,SOLID],27:[0,0,1,N,SOLID],28:[0,N,1,M,SOLID],29:[0,M,1,1,SOLID],25:[0,0,1,H,SOLID],26:[0,H,1,1,SOLID],24:[0,0,1,1,SOLID],11:[0,0,H,1,SOLID],22:[H,0,1,1,SOLID],33:[0,0,N,1,SOLID],44:[N,0,M,1,SOLID],55:[M,0,1,1,SOLID],16:[1,N,0,0,SOLID],17:[1,M,0,N,SOLID],18:[1,1,0,M,SOLID],14:[1,H,0,0,SOLID],15:[1,1,0,H,SOLID],13:[1,1,0,0,SOLID],8:[H,1,0,0,SOLID],19:[1,1,H,0,SOLID],30:[N,1,0,0,SOLID],41:[M,1,N,0,SOLID],52:[1,1,M,0,SOLID],38:[1,M,0,1,SOLID],39:[1,N,0,M,SOLID],40:[1,0,0,N,SOLID],36:[1,H,0,1,SOLID],37:[1,0,0,H,SOLID],35:[1,0,0,1,SOLID],9:[1,0,H,1,SOLID],20:[H,0,0,1,SOLID],31:[1,0,M,1,SOLID],42:[M,0,N,1,SOLID],53:[N,0,0,1,SOLID],12:[0,0,1,0,NON_SOLID],23:[1,1,0,1,NON_SOLID],34:[1,0,1,1,NON_SOLID],45:[0,1,0,0,NON_SOLID]};ig.CollisionMap.staticNoCollision={trace:function(x,y,vx,vy){return{collision:{x:false,y:false,slope:false},pos:{x:x+vx,y:y+vy},tile:{x:0,y:0}};}};});

// lib/impact/background-map.js
ig.baked=true;ig.module('impact.background-map').requires('impact.map','impact.image').defines(function(){"use strict";ig.BackgroundMap=ig.Map.extend({tiles:null,scroll:{x:0,y:0},distance:1,repeat:false,tilesetName:'',foreground:false,enabled:true,preRender:false,preRenderedChunks:null,chunkSize:512,debugChunks:false,anims:{},init:function(tilesize,data,tileset){this.parent(tilesize,data);this.setTileset(tileset);},setTileset:function(tileset){this.tilesetName=tileset instanceof ig.Image?tileset.path:tileset;this.tiles=new ig.Image(this.tilesetName);this.preRenderedChunks=null;},setScreenPos:function(x,y){this.scroll.x=x/this.distance;this.scroll.y=y/this.distance;},preRenderMapToChunks:function(){var totalWidth=this.width*this.tilesize*ig.system.scale,totalHeight=this.height*this.tilesize*ig.system.scale;this.chunkSize=Math.min(Math.max(totalWidth,totalHeight),this.chunkSize);var chunkCols=Math.ceil(totalWidth/this.chunkSize),chunkRows=Math.ceil(totalHeight/this.chunkSize);this.preRenderedChunks=[];for(var y=0;y<chunkRows;y++){this.preRenderedChunks[y]=[];for(var x=0;x<chunkCols;x++){var chunkWidth=(x==chunkCols-1)?totalWidth-x*this.chunkSize:this.chunkSize;var chunkHeight=(y==chunkRows-1)?totalHeight-y*this.chunkSize:this.chunkSize;this.preRenderedChunks[y][x]=this.preRenderChunk(x,y,chunkWidth,chunkHeight);}}},preRenderChunk:function(cx,cy,w,h){var tw=w/this.tilesize/ig.system.scale+1,th=h/this.tilesize/ig.system.scale+1;var nx=(cx*this.chunkSize/ig.system.scale)%this.tilesize,ny=(cy*this.chunkSize/ig.system.scale)%this.tilesize;var tx=Math.floor(cx*this.chunkSize/this.tilesize/ig.system.scale),ty=Math.floor(cy*this.chunkSize/this.tilesize/ig.system.scale);var chunk=ig.$new('canvas');chunk.width=w;chunk.height=h;chunk.retinaResolutionEnabled=false;var chunkContext=chunk.getContext('2d');ig.System.scaleMode(chunk,chunkContext);var screenContext=ig.system.context;ig.system.context=chunkContext;for(var x=0;x<tw;x++){for(var y=0;y<th;y++){if(x+tx<this.width&&y+ty<this.height){var tile=this.data[y+ty][x+tx];if(tile){this.tiles.drawTile(x*this.tilesize-nx,y*this.tilesize-ny,tile-1,this.tilesize);}}}}
ig.system.context=screenContext;return chunk;},draw:function(){if(!this.tiles.loaded||!this.enabled){return;}
if(this.preRender){this.drawPreRendered();}
else{this.drawTiled();}},drawPreRendered:function(){if(!this.preRenderedChunks){this.preRenderMapToChunks();}
var dx=ig.system.getDrawPos(this.scroll.x),dy=ig.system.getDrawPos(this.scroll.y);if(this.repeat){var w=this.width*this.tilesize*ig.system.scale;dx=(dx%w+w)%w;var h=this.height*this.tilesize*ig.system.scale;dy=(dy%h+h)%h;}
var minChunkX=Math.max(Math.floor(dx/this.chunkSize),0),minChunkY=Math.max(Math.floor(dy/this.chunkSize),0),maxChunkX=Math.ceil((dx+ig.system.realWidth)/this.chunkSize),maxChunkY=Math.ceil((dy+ig.system.realHeight)/this.chunkSize),maxRealChunkX=this.preRenderedChunks[0].length,maxRealChunkY=this.preRenderedChunks.length;if(!this.repeat){maxChunkX=Math.min(maxChunkX,maxRealChunkX);maxChunkY=Math.min(maxChunkY,maxRealChunkY);}
var nudgeY=0;for(var cy=minChunkY;cy<maxChunkY;cy++){var nudgeX=0;for(var cx=minChunkX;cx<maxChunkX;cx++){var chunk=this.preRenderedChunks[cy%maxRealChunkY][cx%maxRealChunkX];var x=-dx+cx*this.chunkSize-nudgeX;var y=-dy+cy*this.chunkSize-nudgeY;ig.system.context.drawImage(chunk,x,y);ig.Image.drawCount++;if(this.debugChunks){ig.system.context.strokeStyle='#f0f';ig.system.context.strokeRect(x,y,this.chunkSize,this.chunkSize);}
if(this.repeat&&chunk.width<this.chunkSize&&x+chunk.width<ig.system.realWidth){nudgeX+=this.chunkSize-chunk.width;maxChunkX++;}}
if(this.repeat&&chunk.height<this.chunkSize&&y+chunk.height<ig.system.realHeight){nudgeY+=this.chunkSize-chunk.height;maxChunkY++;}}},drawTiled:function(){var tile=0,anim=null,tileOffsetX=(this.scroll.x/this.tilesize).toInt(),tileOffsetY=(this.scroll.y/this.tilesize).toInt(),pxOffsetX=this.scroll.x%this.tilesize,pxOffsetY=this.scroll.y%this.tilesize,pxMinX=-pxOffsetX-this.tilesize,pxMinY=-pxOffsetY-this.tilesize,pxMaxX=ig.system.width+this.tilesize-pxOffsetX,pxMaxY=ig.system.height+this.tilesize-pxOffsetY;for(var mapY=-1,pxY=pxMinY;pxY<pxMaxY;mapY++,pxY+=this.tilesize){var tileY=mapY+tileOffsetY;if(tileY>=this.height||tileY<0){if(!this.repeat){continue;}
tileY=(tileY%this.height+this.height)%this.height;}
for(var mapX=-1,pxX=pxMinX;pxX<pxMaxX;mapX++,pxX+=this.tilesize){var tileX=mapX+tileOffsetX;if(tileX>=this.width||tileX<0){if(!this.repeat){continue;}
tileX=(tileX%this.width+this.width)%this.width;}
if((tile=this.data[tileY][tileX])){if((anim=this.anims[tile-1])){anim.draw(pxX,pxY);}
else{this.tiles.drawTile(pxX,pxY,tile-1,this.tilesize);}}}}}});});

// lib/impact/game.js
ig.baked=true;ig.module('impact.game').requires('impact.impact','impact.entity','impact.collision-map','impact.background-map').defines(function(){"use strict";ig.Game=ig.Class.extend({clearColor:'#000000',gravity:0,screen:{x:0,y:0},_rscreen:{x:0,y:0},entities:[],namedEntities:{},collisionMap:ig.CollisionMap.staticNoCollision,backgroundMaps:[],backgroundAnims:{},autoSort:false,sortBy:null,cellSize:64,_deferredKill:[],_levelToLoad:null,_doSortEntities:false,staticInstantiate:function(){this.sortBy=this.sortBy||ig.Game.SORT.Z_INDEX;ig.game=this;return null;},loadLevel:function(data){this.screen={x:0,y:0};this.entities=[];this.namedEntities={};for(var i=0;i<data.entities.length;i++){var ent=data.entities[i];this.spawnEntity(ent.type,ent.x,ent.y,ent.settings);}
this.sortEntities();this.collisionMap=ig.CollisionMap.staticNoCollision;this.backgroundMaps=[];for(var i=0;i<data.layer.length;i++){var ld=data.layer[i];if(ld.name=='collision'){this.collisionMap=new ig.CollisionMap(ld.tilesize,ld.data);}
else{var newMap=new ig.BackgroundMap(ld.tilesize,ld.data,ld.tilesetName);newMap.anims=this.backgroundAnims[ld.tilesetName]||{};newMap.repeat=ld.repeat;newMap.distance=ld.distance;newMap.foreground=!!ld.foreground;newMap.preRender=!!ld.preRender;newMap.name=ld.name;this.backgroundMaps.push(newMap);}}
for(var i=0;i<this.entities.length;i++){this.entities[i].ready();}},loadLevelDeferred:function(data){this._levelToLoad=data;},getMapByName:function(name){if(name=='collision'){return this.collisionMap;}
for(var i=0;i<this.backgroundMaps.length;i++){if(this.backgroundMaps[i].name==name){return this.backgroundMaps[i];}}
return null;},getEntityByName:function(name){return this.namedEntities[name];},getEntitiesByType:function(type){var entityClass=typeof(type)==='string'?ig.global[type]:type;var a=[];for(var i=0;i<this.entities.length;i++){var ent=this.entities[i];if(ent instanceof entityClass&&!ent._killed){a.push(ent);}}
return a;},spawnEntity:function(type,x,y,settings){var entityClass=typeof(type)==='string'?ig.global[type]:type;if(!entityClass){throw("Can't spawn entity of type "+type);}
var ent=new(entityClass)(x,y,settings||{});this.entities.push(ent);if(ent.name){this.namedEntities[ent.name]=ent;}
return ent;},sortEntities:function(){this.entities.sort(this.sortBy);},sortEntitiesDeferred:function(){this._doSortEntities=true;},removeEntity:function(ent){if(ent.name){delete this.namedEntities[ent.name];}
ent._killed=true;ent.type=ig.Entity.TYPE.NONE;ent.checkAgainst=ig.Entity.TYPE.NONE;ent.collides=ig.Entity.COLLIDES.NEVER;this._deferredKill.push(ent);},run:function(){this.update();this.draw();},update:function(){if(this._levelToLoad){this.loadLevel(this._levelToLoad);this._levelToLoad=null;}
this.updateEntities();this.checkEntities();for(var i=0;i<this._deferredKill.length;i++){this._deferredKill[i].erase();this.entities.erase(this._deferredKill[i]);}
this._deferredKill=[];if(this._doSortEntities||this.autoSort){this.sortEntities();this._doSortEntities=false;}
for(var tileset in this.backgroundAnims){var anims=this.backgroundAnims[tileset];for(var a in anims){anims[a].update();}}},updateEntities:function(){for(var i=0;i<this.entities.length;i++){var ent=this.entities[i];if(!ent._killed){ent.update();}}},draw:function(){if(this.clearColor){ig.system.clear(this.clearColor);}
this._rscreen.x=ig.system.getDrawPos(this.screen.x)/ig.system.scale;this._rscreen.y=ig.system.getDrawPos(this.screen.y)/ig.system.scale;var mapIndex;for(mapIndex=0;mapIndex<this.backgroundMaps.length;mapIndex++){var map=this.backgroundMaps[mapIndex];if(map.foreground){break;}
map.setScreenPos(this.screen.x,this.screen.y);map.draw();}
this.drawEntities();for(mapIndex;mapIndex<this.backgroundMaps.length;mapIndex++){var map=this.backgroundMaps[mapIndex];map.setScreenPos(this.screen.x,this.screen.y);map.draw();}},drawEntities:function(){for(var i=0;i<this.entities.length;i++){this.entities[i].draw();}},checkEntities:function(){var hash={};for(var e=0;e<this.entities.length;e++){var entity=this.entities[e];if(entity.type==ig.Entity.TYPE.NONE&&entity.checkAgainst==ig.Entity.TYPE.NONE&&entity.collides==ig.Entity.COLLIDES.NEVER){continue;}
var checked={},xmin=Math.floor(entity.pos.x/this.cellSize),ymin=Math.floor(entity.pos.y/this.cellSize),xmax=Math.floor((entity.pos.x+entity.size.x)/this.cellSize)+1,ymax=Math.floor((entity.pos.y+entity.size.y)/this.cellSize)+1;for(var x=xmin;x<xmax;x++){for(var y=ymin;y<ymax;y++){if(!hash[x]){hash[x]={};hash[x][y]=[entity];}
else if(!hash[x][y]){hash[x][y]=[entity];}
else{var cell=hash[x][y];for(var c=0;c<cell.length;c++){if(entity.touches(cell[c])&&!checked[cell[c].id]){checked[cell[c].id]=true;ig.Entity.checkPair(entity,cell[c]);}}
cell.push(entity);}}}}}});ig.Game.SORT={Z_INDEX:function(a,b){return a.zIndex-b.zIndex;},POS_X:function(a,b){return(a.pos.x+a.size.x)-(b.pos.x+b.size.x);},POS_Y:function(a,b){return(a.pos.y+a.size.y)-(b.pos.y+b.size.y);}};});

// lib/plusplus/core/timer.js
ig.baked=true;ig.module('plusplus.core.timer').requires('impact.timer','plusplus.core.config').defines(function(){'use strict';var _c=ig.CONFIG;ig.Timer.minStep=_c.MIN_TIME_STEP;ig.Timer.overflow=0;ig.Timer.stepped=false;ig.Timer.step=function(){var current=Date.now();ig.Timer.overflow+=Math.min((current-ig.Timer._last)/1000,ig.Timer.maxStep);if(ig.Timer.overflow>=ig.Timer.minStep){ig.Timer.overflow-=ig.Timer.minStep;ig.Timer.time+=ig.Timer.minStep*ig.Timer.timeScale;ig.Timer.stepped=true;}
else{ig.Timer.stepped=false;}
ig.Timer._last=current;};});

// lib/plusplus/helpers/signals.js
ig.baked=true;ig.module('plusplus.helpers.signals').defines(function(){"use strict";function SignalBinding(signal,listener,isOnce,listenerContext,priority){this._listener=listener;this._isOnce=isOnce;this.context=listenerContext;this._signal=signal;this._priority=priority||0;}
SignalBinding.prototype={active:true,params:null,execute:function(paramsArr){var handlerReturn,params;if(this.active&&!!this._listener){params=this.params?this.params.concat(paramsArr):paramsArr;handlerReturn=this._listener.apply(this.context,params);if(this._isOnce){this.detach();}}
return handlerReturn;},detach:function(){return this.isBound()?this._signal.remove(this._listener,this.context):null;},isBound:function(){return(!!this._signal&&!!this._listener);},isOnce:function(){return this._isOnce;},getListener:function(){return this._listener;},getSignal:function(){return this._signal;},_destroy:function(){delete this._signal;delete this._listener;delete this.context;},toString:function(){return'[SignalBinding isOnce:'+this._isOnce+', isBound:'+this.isBound()+', active:'+this.active+']';}};function validateListener(listener,fnName){if(typeof listener!=='function'){throw new Error('listener is a required param of {fn}() and should be a Function.'.replace('{fn}',fnName));}}
ig.Signal=function(){this._bindings=[];this._prevParams=null;var self=this;this.dispatch=function(){ig.Signal.prototype.dispatch.apply(self,arguments);};}
ig.Signal.prototype={VERSION:'1.0.0',memorize:false,_shouldPropagate:true,active:true,_registerListener:function(listener,isOnce,listenerContext,priority){var prevIndex=this._indexOfListener(listener,listenerContext),binding;if(prevIndex!==-1){binding=this._bindings[prevIndex];if(binding.isOnce()!==isOnce){throw new Error('You cannot add'+(isOnce?'':'Once')+'() then add'+(!isOnce?'':'Once')+'() the same listener without removing the relationship first.');}}else{binding=new SignalBinding(this,listener,isOnce,listenerContext,priority);this._addBinding(binding);}
if(this.memorize&&this._prevParams){binding.execute(this._prevParams);}
return binding;},_addBinding:function(binding){var n=this._bindings.length;do{--n;}while(this._bindings[n]&&binding._priority<=this._bindings[n]._priority);this._bindings.splice(n+1,0,binding);},_indexOfListener:function(listener,context){var n=this._bindings.length,cur;while(n--){cur=this._bindings[n];if(cur._listener===listener&&cur.context===context){return n;}}
return-1;},has:function(listener,context){return this._indexOfListener(listener,context)!==-1;},add:function(listener,listenerContext,priority){validateListener(listener,'add');return this._registerListener(listener,false,listenerContext,priority);},addOnce:function(listener,listenerContext,priority){validateListener(listener,'addOnce');return this._registerListener(listener,true,listenerContext,priority);},remove:function(listener,context){validateListener(listener,'remove');var i=this._indexOfListener(listener,context);if(i!==-1){this._bindings[i]._destroy();this._bindings.splice(i,1);}
return listener;},removeAll:function(){var n=this._bindings.length;while(n--){this._bindings[n]._destroy();}
this._bindings.length=0;},getNumListeners:function(){return this._bindings.length;},halt:function(){this._shouldPropagate=false;},dispatch:function(params){if(!this.active){return;}
var paramsArr=Array.prototype.slice.call(arguments),n=this._bindings.length,bindings;if(this.memorize){this._prevParams=paramsArr;}
if(!n){return;}
bindings=this._bindings.slice();this._shouldPropagate=true;do{n--;}while(bindings[n]&&this._shouldPropagate&&bindings[n].execute(paramsArr)!==false);},forget:function(){this._prevParams=null;},dispose:function(){this.removeAll();delete this._bindings;delete this._prevParams;},toString:function(){return'[Signal active:'+this.active+' numListeners:'+this.getNumListeners()+']';}};});

// lib/plusplus/core/image.js
ig.baked=true;ig.module('plusplus.core.image').requires('impact.image','plusplus.helpers.signals').defines(function(){'use strict';ig.Image.inject({width:1,height:1,data:null,dataContext:null,dataWidth:1,dataHeight:1,scale:1,scaleOfSystemScale:1,scaleMin:1,scaleMax:Infinity,ignoreSystemScale:false,retainScaledData:true,scaleCache:null,onLoaded:null,_scale:0,init:function(path,settings){ig.merge(this,settings);this.onLoaded=new ig.Signal();this.scaleCache={};this.parent(path);},onload:function(event){this.width=this.data.width;this.height=this.data.height;this.loaded=true;var original=ig.$new('canvas');original.width=this.width;original.height=this.height;original.style.width=this.width+"px";original.style.height=this.height+"px";original.retinaResolutionEnabled=false;var originalContext=original.getContext('2d');ig.System.scaleMode(original,originalContext);originalContext.drawImage(this.data,0,0);this.data=original;this.dataContext=this.data.getContext('2d');this.dataWidth=this.data.width;this.dataHeight=this.data.height;if(!this.scaleCache){this.scaleCache={};}
this.scaleCache.x1=this.data;if(this.loadCallback){this.loadCallback(this.path,true);}
if(this.onLoaded){this.onLoaded.dispatch(this);this.onLoaded.removeAll();this.onLoaded.forget();}
if(!ig.global.wm&&ig.game&&!ig.game._gameNeedsSetup){ig.game.resizeDeferred(true);}},resize:function(scale){var origData=this.scaleCache.x1;if(origData&&scale){scale=Math.min(Math.max(Math.round(scale*this.scaleOfSystemScale),this.scaleMin),this.scaleMax);if(this._scale!==scale){this.scale=this._scale=scale;if(!this.scaleCache){this.scaleCache={};}
this.data=this.scaleCache["x"+scale];if(this.data){this.dataContext=this.data.getContext('2d');this.dataWidth=this.data.width;this.dataHeight=this.data.height;}
else{var origPixels=ig.getImagePixels(origData,0,0,this.width,this.height);var widthScaled=(this.width*scale)|0;var heightScaled=(this.height*scale)|0;var scaled=this.data=ig.$new('canvas');scaled.width=widthScaled;scaled.height=heightScaled;scaled.style.width=widthScaled+"px";scaled.style.height=heightScaled+"px";scaled.retinaResolutionEnabled=false;this.dataWidth=widthScaled;this.dataHeight=heightScaled;var scaledCtx=this.dataContext=this.data.getContext('2d');ig.System.scaleMode(scaled,scaledCtx);var scaledPixels=scaledCtx.getImageData(0,0,widthScaled,heightScaled);for(var y=0;y<heightScaled;y++){for(var x=0;x<widthScaled;x++){var index=(Math.floor(y/scale)*this.width+Math.floor(x/scale))*4;var indexScaled=(y*widthScaled+x)*4;scaledPixels.data[indexScaled]=origPixels.data[index];scaledPixels.data[indexScaled+1]=origPixels.data[index+1];scaledPixels.data[indexScaled+2]=origPixels.data[index+2];scaledPixels.data[indexScaled+3]=origPixels.data[index+3];}}
scaledCtx.putImageData(scaledPixels,0,0);if(this.retainScaledData){this.scaleCache["x"+scale]=this.data;}}}}},draw:function(targetX,targetY,sourceX,sourceY,width,height,scale){if(!this.loaded){return;}
if(!scale){if(!this.ignoreSystemScale&&this._scale!==ig.system.scale){this.resize(ig.system.scale);}
else if(this._scale!==this.scale){this.resize(this.scale);}
scale=this._scale;}
else{this.resize(scale);}
width=((typeof width!=='undefined'?width:this.width)*scale)|0;height=((typeof height!=='undefined'?height:this.height)*scale)|0;if(width===0||height===0){return;}
sourceX=sourceX?(sourceX*scale)|0:0;sourceY=sourceY?(sourceY*scale)|0:0;ig.system.context.drawImage(this.data,sourceX,sourceY,width,height,ig.system.getDrawPos(targetX),ig.system.getDrawPos(targetY),width,height);ig.Image.drawCount++;},drawTile:function(targetX,targetY,tile,tileWidth,tileHeight,flipX,flipY,scale){tileHeight=tileHeight?tileHeight:tileWidth;if(!this.loaded||tileWidth>this.width||tileHeight>this.height){return;}
if(!scale){if(!this.ignoreSystemScale&&this._scale!==ig.system.scale){this.resize(ig.system.scale);}
else if(this._scale!==this.scale){this.resize(this.scale);}
scale=this._scale;}
else{this.resize(scale);}
var tileWidthScaled=Math.floor(tileWidth*scale);var tileHeightScaled=Math.floor(tileHeight*scale);var dirX;var dirY;var offsetX;var offsetY;if(flipX){dirX=-1;offsetX=tileWidthScaled;}
else{dirX=1;offsetX=0;}
if(flipY){dirY=-1;offsetY=tileHeightScaled;}
else{dirY=1;offsetY=0;}
if(flipX||flipY){ig.system.context.save();ig.system.context.scale(dirX,dirY);ig.system.context.drawImage(this.data,(Math.floor(tile*tileWidth)%this.width)*scale,(Math.floor(tile*tileWidth/this.width)*tileHeight)*scale,tileWidthScaled,tileHeightScaled,ig.system.getDrawPos(targetX)*dirX-offsetX,ig.system.getDrawPos(targetY)*dirY-offsetY,tileWidthScaled,tileHeightScaled);ig.system.context.restore();}
else{ig.system.context.drawImage(this.data,(Math.floor(tile*tileWidth)%this.width)*scale,(Math.floor(tile*tileWidth/this.width)*tileHeight)*scale,tileWidthScaled,tileHeightScaled,ig.system.getDrawPos(targetX)*dirX-offsetX,ig.system.getDrawPos(targetY)*dirY-offsetY,tileWidthScaled,tileHeightScaled);}
ig.Image.drawCount++;}});if(ig.global.wm){ig.Image.inject({resize:function(scale){if(scale&&this._scale!==scale){var origData=this.scaleCache.x1;if(!origData){this.scaleCache.x1=this.data;}
this.parent(scale);}},draw:function(targetX,targetY,sourceX,sourceY,width,height,scale){if(!scale){scale=ig.system.scale;}
this.parent(targetX,targetY,sourceX,sourceY,width,height,scale);},drawTile:function(targetX,targetY,tile,tileWidth,tileHeight,flipX,flipY,scale){if(!scale){scale=ig.system.scale;}
this.parent(targetX,targetY,tile,tileWidth,tileHeight,flipX,flipY,scale);}});}});

// lib/plusplus/core/font.js
ig.baked=true;ig.module('plusplus.core.font').requires('impact.font','plusplus.core.config','plusplus.core.image').defines(function(){"use strict";var _c=ig.CONFIG;ig.Font.inject({scale:_c.FONT.SCALE,scaleOfSystemScale:_c.FONT.SCALE_OF_SYSTEM_SCALE,scaleMin:_c.FONT.SCALE_MIN,scaleMax:_c.FONT.SCALE_MAX,ignoreSystemScale:_c.FONT.IGNORE_SYSTEM_SCALE,multilineForWidth:function(text,width){text=""+text;var formatted="";var lineWidth=0;var space=" ";var empty="";var words=text.split(space);text.replace("\n",empty);for(var i=0,il=words.length;i<il;i++){var word=words[i]+(i!==il-1?space:empty);var wordWidth=this._widthForLine(word);if(lineWidth!==0&&lineWidth+wordWidth>width){formatted+="\n";lineWidth=0;}
formatted+=word;lineWidth+=wordWidth;}
return formatted;},overflowForHeight:function(text,height){text=""+text;var display=text;var overflow="";var lines=text.split('\n');var multilineHeight=lines.length*(this.height+this.lineSpacing);if(multilineHeight>height){var linesDisplay=Math.floor(lines.length*height/multilineHeight);display="";for(var i=0,il=lines.length;i<il;i++){var line=lines[i];if(i<linesDisplay){display+=line;if(i<linesDisplay-1){display+="\n";}}
else{overflow+=line;if(i<il-1){overflow+="\n";}}}}
return{display:display,overflow:overflow};},draw:function(text,x,y,align,context,scale,scaleMod,forMultiline){if(!this.loaded)return;text=""+text;if(!forMultiline){context=context||ig.system.context;if(!scale){if(!this.ignoreSystemScale&&this._scale!==ig.system.scale){this.resize(ig.system.scale);}
else if(this._scale!==this.scale){this.resize(this.scale);}
scale=this._scale;}
else{var scaleLast=this.scale;this.resize(scale);this.scale=scaleLast;}
if(context===ig.system.context){scaleMod=scale/ig.system.scale;}
else{scaleMod=1;}
if(text.indexOf('\n')!==-1){var lines=text.split('\n');var lineHeight=(this.height+this.lineSpacing)*scaleMod;for(var i=0,il=lines.length;i<il;i++){this.draw(lines[i],x,y+i*lineHeight,align,context,scale,scaleMod,true);}
return;}}
if(align===ig.Font.ALIGN.CENTER){x-=this._widthForLine(text)*0.5;}
else if(align===ig.Font.ALIGN.RIGHT){x-=this._widthForLine(text);}
if(this.alpha!==1){context.globalAlpha=this.alpha;}
for(var i=0;i<text.length;i++){var c=text.charCodeAt(i)-this.firstChar;x+=this._drawChar(c,x,y,context,scale)*scaleMod;}
if(this.alpha!==1){context.globalAlpha=1;}
ig.Image.drawCount+=text.length;},_drawChar:function(c,targetX,targetY,context,scale){var width=this.widthMap[c];var height=this.height-2;if(context===ig.system.context){context.drawImage(this.data,this.indices[c]*scale,0,width*scale,height*scale,ig.system.getDrawPos(targetX),ig.system.getDrawPos(targetY),width*scale,height*scale);}
else{context.drawImage(this.data,this.indices[c]*scale,0,width*scale,height*scale,targetX*scale,targetY*scale,width*scale,height*scale);}
return width+this.letterSpacing;}});ig.Font.FONTS={};ig.Font.FONTS.MAIN=(_c.FONT.MAIN_PATH?new ig.Font(_c.FONT.MAIN_PATH):null);ig.Font.FONTS.ALT=(_c.FONT.ALT_PATH?new ig.Font(_c.FONT.ALT_PATH):ig.Font.FONTS.MAIN);ig.Font.FONTS.CHAT=(_c.FONT.CHAT_PATH?new ig.Font(_c.FONT.CHAT_PATH):ig.Font.FONTS.MAIN);});

// lib/plusplus/core/image-drawing.js
ig.baked=true;ig.module('plusplus.core.image-drawing').requires('plusplus.core.image').defines(function(){"use strict";ig.ImageDrawing=ig.Image.extend({loaded:true,init:function(settings){ig.merge(this,settings);this.data=ig.$new('canvas');this.dataContext=this.data.getContext('2d');this.dataWidth=(this.width*this.scale)|0;this.dataHeight=(this.height*this.scale)|0;this.data.width=this.dataWidth;this.data.height=this.dataHeight;this.data.style.width=this.dataWidth+"px";this.data.style.height=this.dataHeight+"px";this.data.retinaResolutionEnabled=false;ig.System.scaleMode(this.data,this.dataContext);this.scaleCache={};this.scaleCache.x1=this.data;},load:function(){},reload:function(){},onload:function(){},setWidth:function(width){this.setDimensions(width,this.height);},setHeight:function(height){this.setDimensions(this.width,height);},setDimensions:function(width,height){this.width=width|0;this.height=height|0;if(this.data){this.dataWidth=this.data.width=this.width;this.dataHeight=this.data.height=this.height;ig.System.scaleMode(this.data,this.dataContext);}},finalize:function(scale){if(!scale){this._scale=scale=1;}
else{this.scale=this._scale=Math.min(Math.max(Math.round(scale*this.scaleOfSystemScale),this.scaleMin),this.scaleMax);}
this.scaleCache={};this.scaleCache["x"+scale]=this.data;this.dataContext=this.data.getContext('2d');this.dataWidth=this.data.width;this.dataHeight=this.data.height;this.width=this.dataWidth/scale;this.height=this.dataHeight/scale;}});});

// lib/plusplus/helpers/shims.js
ig.baked=true;ig.module('plusplus.helpers.shims').defines(function(){"use strict";if(typeof Date.now!=='function'){Date.now=function(){return+(new Date);};}});

// lib/plusplus/helpers/utils.js
ig.baked=true;ig.module('plusplus.helpers.utils').requires('plusplus.helpers.shims','plusplus.core.config').defines(function(){"use strict";var _g=ig.global;var _c=ig.CONFIG;ig.utils={};ig.utils.type=function(o){return o==null?o+'':Object.prototype.toString.call(o).slice(8,-1).toLowerCase();};ig.utils.isNumber=function(n){return!isNaN(n)&&isFinite(n)&&typeof n!=='boolean';};ig.utils.isArray=function(target){return Object.prototype.toString.call(target)==='[object Array]';};ig.utils.toArray=function(target){return target?(ig.utils.isArray(target)!==true?[target]:target):[];};ig.utils.toNotArray=function(target,index){return ig.utils.isArray(target)===true?target[index||0]:target;};ig.utils.arrayCautiousAdd=function(target,element){var index=ig.utils.indexOfValue(target,element);if(index===-1){target.push(element);}
return target;};ig.utils.arrayCautiousAddMulti=function(target,elements){var element,index;elements=ig.utils.toArray(elements);for(var i=0,il=elements.length;i<il;i++){element=elements[i];if(element!==target){index=ig.utils.indexOfValue(target,element);if(index===-1){target.push(element);}}}
return target;};ig.utils.arrayCautiousRemove=function(target,element){var index=ig.utils.indexOfValue(target,element);if(index!==-1){target.splice(index,1);}
return target;};ig.utils.arrayCautiousRemoveMulti=function(target,elements){var element,index;elements=ig.utils.toArray(elements);for(var i=0,il=elements.length;i<il;i++){element=elements[i];if(element!==target){index=ig.utils.indexOfValue(target,element);if(index!==-1){target.splice(index,1);}}}
return target;};ig.utils.forEach=function(array,callback,args){for(var i=0,il=array.length;i<il;i++){callback.apply(array[i],args);}};ig.utils.indexOfValue=function(array,value){for(var i=0,il=array.length;i<il;i++){if(value===array[i]){return i;}}
return-1;};ig.utils.indexOfProperty=function(array,property,value){for(var i=0,il=array.length;i<il;i++){if(value===array[i][property]){return i;}}
return-1;};ig.utils.indexOfProperties=function(array,properties,values){for(var i=0,il=array.length;i<il;i++){var obj=array[i];var missing=false;for(var j=0,jl=properties.length;j<jl;j++){if(values[j]!==obj[properties[j]]){missing=true;break;}}
if(missing!==true){return i;}}
return-1;};ig.utils.throttle=function(callback,delay,trailing){var timeoutId;var timeLast=0;if(ig.utils.isNumber(delay)!==true){delay=_c.DURATION_THROTTLE;}
function throttled(){var me=this;var elapsed=Date.now()-timeLast;var args=arguments;function execute(){timeLast=Date.now();callback.apply(me,args);}
if(elapsed>delay){timeoutId&&_g.clearTimeout(timeoutId);execute();}
else if(trailing!==false){timeoutId&&_g.clearTimeout(timeoutId);timeoutId=_g.setTimeout(execute,delay-elapsed);}}
return throttled;};ig.utils.debounce=function(callback,delay){var timeoutId;if(ig.utils.isNumber(delay)!==true){delay=_c.DURATION_THROTTLE;}
function debounced(){var me=this;var args=arguments;timeoutId&&_g.clearTimeout(timeoutId);timeoutId=_g.setTimeout(function(){callback.apply(me,args);},delay);}
return debounced;};var MAX_TYPE=Math.pow(2,32);ig.utils.getType=function(classObject,names,typeListName){typeListName=typeListName||'TYPE';var types=classObject[typeListName];var typeLastName=typeListName+"_LAST";var type;if(!classObject[typeLastName]||!types){classObject[typeLastName]=1;types=classObject[typeListName]={};}
names=names.toUpperCase();type=types[names];if(!type){type=0;var typeLast=classObject[typeLastName];var namesList=names.split(" ");for(var i=0,il=namesList.length;i<il;i++){var name=namesList[i];var typeNext=types[name];if(!typeNext){if(typeLast>=MAX_TYPE){throw new TypeError('Bitwise flag out of range / above 32 bits!');}
typeNext=types[name]=typeLast;classObject[typeLastName]=typeLast*2;}
type|=typeNext;}
types[names]=type;}
return type;};ig.utils.addType=function(classObject,entity,property,names,typeListName){entity[property]|=ig.utils.getType(classObject,names,typeListName);};});

// lib/plusplus/core/background-map.js
ig.baked=true;ig.module('plusplus.core.background-map').requires('impact.background-map','plusplus.core.image-drawing','plusplus.helpers.utils').defines(function(){'use strict';var _ut=ig.utils;ig.BackgroundMapExtended=ig.BackgroundMap.extend({preRenderedScale:0,mergedMaps:[],setTileset:function(tileset){if(tileset instanceof ig.ImageDrawing){this.tiles=tileset;}
else{this.tilesetName=tileset instanceof ig.Image?tileset.path:tileset;this.tiles=new ig.Image(this.tilesetName);}
this.preRenderedChunks=null;},merge:function(map){if(this.preRender&&!this.repeat&&map instanceof ig.BackgroundMap&&map.preRender&&!map.repeat){_ut.arrayCautiousAdd(this.mergedMaps,map);this.preRenderedChunks=null;}},preRenderMapToChunks:function(){this.preRenderedScale=ig.system.scale;if(this.mergedMaps.length>0){this.preRenderedChunks=[];var maps=[this].concat(this.mergedMaps);var totalWidth=0;var totalHeight=0;var totalSize=0;var chunkSize=0;for(var i=0,il=maps.length;i<il;i++){var map=maps[i];totalWidth=Math.max(totalWidth,map.width*map.tilesize*ig.system.scale);totalHeight=Math.max(totalHeight,map.height*map.tilesize*ig.system.scale);totalSize=Math.max(totalWidth,totalHeight);chunkSize=Math.max(chunkSize,Math.min(totalSize,map.chunkSize));}
var chunkCols=Math.ceil(totalWidth/chunkSize);var chunkRows=Math.ceil(totalHeight/chunkSize);for(var y=0;y<chunkRows;y++){var chunkRow=this.preRenderedChunks[y]=this.preRenderedChunks[y]||[];for(var x=0;x<chunkCols;x++){var chunkWidth=(x===chunkCols-1)?totalWidth-x*chunkSize:chunkSize;var chunkHeight=(y===chunkRows-1)?totalHeight-y*chunkSize:chunkSize;chunkRow[x]=this.preRenderMergedChunk(maps,chunkSize,x,y,chunkWidth,chunkHeight);}}}
else{this.parent();}},preRenderMergedChunk:function(maps,chunkSize,cx,cy,w,h){var chunk=ig.$new('canvas');chunk.width=w;chunk.height=h;chunk.style.width=w+"px";chunk.style.height=h+"px";chunk.retinaResolutionEnabled=false;var screenContext=ig.system.context;var chunkContext=chunk.getContext("2d");ig.System.scaleMode(chunk,chunkContext);ig.system.context=chunkContext;for(var i=0,il=maps.length;i<il;i++){this.preRenderChunk(cx,cy,w,h,maps[i],chunkSize,chunk);}
ig.system.context=screenContext;return chunk;},preRenderChunk:function(cx,cy,w,h,map,chunkSize,chunk){map=map||this;chunkSize=chunkSize||this.chunkSize;var screenContext;if(!chunk){chunk=ig.$new('canvas');chunk.width=w;chunk.height=h;chunk.style.width=w+"px";chunk.style.height=h+"px";chunk.retinaResolutionEnabled=false;var chunkContext=chunk.getContext('2d');ig.System.scaleMode(chunk,chunkContext);screenContext=ig.system.context;ig.system.context=chunkContext;}
var tw=w/map.tilesize/ig.system.scale+1,th=h/map.tilesize/ig.system.scale+1;var nx=(cx*chunkSize/ig.system.scale)%map.tilesize,ny=(cy*chunkSize/ig.system.scale)%map.tilesize;var tx=Math.floor(cx*chunkSize/map.tilesize/ig.system.scale),ty=Math.floor(cy*chunkSize/map.tilesize/ig.system.scale);for(var x=0;x<tw;x++){for(var y=0;y<th;y++){if(x+tx<map.width&&y+ty<map.height){var tile=map.data[y+ty][x+tx];if(tile){map.tiles.drawTile(x*map.tilesize-nx,y*map.tilesize-ny,tile-1,map.tilesize);}}}}
if(screenContext){ig.system.context=screenContext;}
return chunk;},draw:function(){this.setScreenPos(ig.game.screen.x,ig.game.screen.y);if(!this.tiles.loaded||!this.enabled)return;if(this.preRender){if(this.preRenderedScale!==ig.system.scale){this.preRenderedChunks=null;}
this.drawPreRendered();}
else{this.drawTiled();}}});});

// lib/plusplus/core/collision-map.js
ig.baked=true;ig.module('plusplus.core.collision-map').requires('impact.collision-map','plusplus.core.config').defines(function(){'use strict';var _c=ig.CONFIG;ig.CollisionMap.inject({trace:function(x,y,vx,vy,objectWidth,objectHeight,res){res.collision.x=res.collision.y=res.collision.slope=false;res.pos.x=x;res.pos.y=y;res.tile.x=res.tile.y=0;var steps=Math.ceil(Math.max(Math.abs(vx),Math.abs(vy))/this.tilesize);if(steps>1){var sx=vx/steps;var sy=vy/steps;for(var i=0;i<steps&&(sx||sy);i++){this._traceStep(res,x,y,sx,sy,objectWidth,objectHeight,vx,vy,i);x=res.pos.x;y=res.pos.y;if(res.collision.x){sx=0;vx=0;}
if(res.collision.y){sy=0;vy=0;}
if(res.collision.slope){break;}}}
else{this._traceStep(res,x,y,vx,vy,objectWidth,objectHeight,vx,vy,0);}
return res;},_traceStep:function(res,x,y,vx,vy,width,height,rvx,rvy,step){res.pos.x+=vx;res.pos.y+=vy;var t=0;var slope;var sx;var sy;var snx;var sny;if(vx){var pxOffsetX=(vx>0?width:0);var tileOffsetX=(vx<0?this.tilesize:0);var firstTileY=Math.max(Math.floor(y/this.tilesize),0);var lastTileY=Math.min(Math.ceil((y+height)/this.tilesize),this.height);var tileX=Math.floor((res.pos.x+pxOffsetX)/this.tilesize);var prevTileX=Math.floor((x+pxOffsetX)/this.tilesize);if(step>0||tileX==prevTileX||prevTileX<0||prevTileX>=this.width){prevTileX=-1;}
if(tileX>=0&&tileX<this.width){for(var tileY=firstTileY;tileY<lastTileY;tileY++){if(prevTileX!=-1){t=this.data[tileY][prevTileX];if(t>1&&t<=this.lastSlope&&this._checkTileDef(res,t,x,y,rvx,rvy,width,height,prevTileX,tileY)&&res.slope.ny!==0){break;}}
t=this.data[tileY][tileX];if(t==1||t>this.lastSlope||(t>1&&this._checkTileDef(res,t,x,y,rvx,rvy,width,height,tileX,tileY))){res.tile.x=t;res.tile.xPos.x=tileX;res.tile.xPos.y=tileY;if(t>1&&t<=this.lastSlope&&res.collision.slope){slope=true;sx=res.slope.x;sy=res.slope.y;snx=res.slope.nx;sny=res.slope.ny;break;}
res.collision.x=true;x=res.pos.x=tileX*this.tilesize-pxOffsetX+tileOffsetX;rvx=0;break;}}}}
if(vy){var pxOffsetY=(vy>0?height:0);var tileOffsetY=(vy<0?this.tilesize:0);var firstTileX=Math.max(Math.floor(res.pos.x/this.tilesize),0);var lastTileX=Math.min(Math.ceil((res.pos.x+width)/this.tilesize),this.width);var tileY=Math.floor((res.pos.y+pxOffsetY)/this.tilesize);var prevTileY=Math.floor((y+pxOffsetY)/this.tilesize);if(step>0||tileY==prevTileY||prevTileY<0||prevTileY>=this.height){prevTileY=-1;}
if(tileY>=0&&tileY<this.height){for(var tileX=firstTileX;tileX<lastTileX;tileX++){if(prevTileY!=-1){t=this.data[prevTileY][tileX];if(t>1&&t<=this.lastSlope&&this._checkTileDef(res,t,x,y,rvx,rvy,width,height,tileX,prevTileY)&&res.slope.nx!==0){break;}}
t=this.data[tileY][tileX];if(t==1||t>this.lastSlope||(t>1&&this._checkTileDef(res,t,x,y,rvx,rvy,width,height,tileX,tileY))){res.tile.y=t;res.tile.yPos.x=tileX;res.tile.yPos.y=tileY;if(t>1&&t<=this.lastSlope&&res.collision.slope){break;}
res.collision.y=true;res.pos.y=tileY*this.tilesize-pxOffsetY+tileOffsetY;break;}}}}
if(slope){res.slope.x=sx;res.slope.y=sy;res.slope.nx=snx;res.slope.ny=sny;}},_checkTileDef:function(res,t,x,y,vx,vy,width,height,tileX,tileY){var def=this.tiledef[t];if(!def){return false;}
var lx=(tileX+def[0])*this.tilesize,ly=(tileY+def[1])*this.tilesize,lvx=(def[2]-def[0])*this.tilesize,lvy=(def[3]-def[1])*this.tilesize,solid=def[4];var tx=x+vx+(lvy<0?width:0)-lx,ty=y+vy+(lvx>0?height:0)-ly;if(lvx*ty-lvy*tx>0){if(vx*-lvy+vy*lvx<0){return solid;}
var length=Math.sqrt(lvx*lvx+lvy*lvy);var nx=lvy/length,ny=-lvx/length;var proj=tx*nx+ty*ny;var px=nx*proj,py=ny*proj;if(px*px+py*py>=vx*vx+vy*vy){return solid||(lvx*(ty-vy)-lvy*(tx-vx)<0.5);}
res.pos.x=x+vx-px;res.pos.y=y+vy-py;res.collision.slope=true;res.slope.x=lvx;res.slope.y=lvy;res.slope.nx=nx;res.slope.ny=ny;return true;}}});var dtd=ig.CollisionMap.defaultTileDef;var SOLID=true;var NON_SOLID=false;for(var tileId in _c.COLLISION.TILES_HASH_WALKABLE_STRICT){dtd[tileId]=null;}
dtd[_c.COLLISION.TILE_SOLID]=[0,0,1,0,SOLID];dtd[_c.COLLISION.TILE_CLIMBABLE_WITH_TOP]=[0,0,1,0,NON_SOLID];dtd[_c.COLLISION.TILE_CLIMBABLE_STAIRS_WITH_TOP]=[0,0,1,0,NON_SOLID];});

// lib/plusplus/core/pathfinding-map.js
ig.baked=true;ig.module('plusplus.core.pathfinding-map').requires('impact.map','plusplus.core.config','plusplus.core.image').defines(function(){"use strict";var _c=ig.CONFIG;ig.PathfindingMap=ig.Map.extend({tiledef:null,init:function(tilesize,data,tiledef){this.parent(tilesize,data);this.tiledef=tiledef||_c.PATHFINDING.TILE_DEF;}});});

// lib/plusplus/core/animation.js
ig.baked=true;ig.module('plusplus.core.animation').requires('impact.animation','plusplus.core.config','plusplus.core.image','plusplus.core.image-drawing','plusplus.helpers.signals').defines(function(){'use strict';var _c=ig.CONFIG;ig.AnimationSheet.inject({init:function(path,width,height){if(!width||width<0){width=this.width;}
if(!height||height<0){height=this.height;}
this.parent(path,width,height);}});ig.AnimationExtended=ig.Animation.extend({frameTime:1,sequence:[],pivot:null,stop:false,changed:false,once:false,reverse:false,texturing:null,textureWidth:0,textureHeight:0,opaqueOffset:null,onCompleted:null,_texturingDeferred:false,init:function(sheet,settings){this.sheet=sheet;this.pivot={x:sheet.width*0.5,y:sheet.height*0.5};ig.merge(this,settings);this.tile=this.sequence[0];this.timer=new ig.Timer();this.onCompleted=new ig.Signal();},getDuration:function(){return this.frameTime*this.sequence.length;},texturize:function(entity){if(!this.sheet.image.loaded){this._texturingDeferred=entity;this.sheet.image.onLoaded.remove(this._texturizeDeferred,this);this.sheet.image.onLoaded.addOnce(this._texturizeDeferred,this);}
else{var sheetData=(this.sheet.image.scaleCache&&this.sheet.image.scaleCache.x1)||this.sheet.image.data;var textureWidth=entity.getSizeDrawX();var textureHeight=entity.getSizeDrawY();var tileWidth=this.sheet.width;var tileHeight=this.sheet.height;var sizeMismatch=this.textureWidth!==textureWidth||this.textureHeight!==textureHeight;if(tileWidth<textureWidth||tileHeight<textureHeight){this.texturing=entity;this.texturing.textures=this.texturing.textures||{};this.texturing.texturedAnimsCount=(this.texturing.texturedAnimsCount||0)+1;for(var i=0,il=this.sequence.length;i<il;i++){var tile=this.sequence[i];var texture=this.texturing.textures[tile];var recreate;if(!texture){texture=this.texturing.textures[tile]=new ig.ImageDrawing({width:textureWidth,height:textureHeight});recreate=true;}
else if(sizeMismatch){texture.setDimensions(textureWidth,textureHeight);recreate=true;}
if(recreate){var frame=ig.$new('canvas');frame.width=tileWidth;frame.height=tileHeight;frame.style.width=tileWidth+"px";frame.style.height=tileHeight+"px";frame.retinaResolutionEnabled=false;var frameContext=frame.getContext('2d');ig.System.scaleMode(frame,frameContext);frameContext.drawImage(sheetData,-Math.floor(tile*tileWidth)%sheetData.width,-Math.floor(tile*tileHeight/sheetData.width)*tileHeight);texture.dataContext.fillStyle=texture.dataContext.createPattern(frame,'repeat');texture.dataContext.fillRect(0,0,textureWidth,textureHeight);texture.finalize();}}
this.textureWidth=textureWidth;this.textureHeight=textureHeight;}}},_texturizeDeferred:function(){this.texturize(this._texturingDeferred);this._texturingDeferred=undefined;},detexturize:function(){if(this.texturing){this.texturing.texturedAnimsCount=Math.max(0,this.texturing.texturedAnimsCount-1);if(!this.texturing.texturedAnimsCount){this.texturing.textures=undefined;}
this.sheet.image.onLoaded.remove(this._texturizeDeferred,this);this.texturing=this.textureWidth=this.textureHeight=this._texturingDeferred=undefined;}},playFromStart:function(once,reverse){this.stop=false;this.rewind(once,reverse);},rewind:function(once,reverse){this.once=typeof once!=='undefined'?once:this.once;this.reverse=typeof reverse!=='undefined'?reverse:this.reverse;return this.parent();},gotoFrame:function(f){var stopped=this.stop;this.stop=false;this.parent(f);this.stop=stopped;},update:function(){if(!this.stop){var loopCount=this.loopCount;var numFrames=this.sequence.length;var frameTotal=Math.floor(this.timer.delta()/this.frameTime);this.loopCount=Math.floor(frameTotal/numFrames);if(this.reverse){this.frame=(this.sequence.length-1)-(frameTotal%numFrames);}
else{this.frame=frameTotal%numFrames;}
if(this.loopCount>loopCount){if(this.once){this.once=false;this.stop=true;this.frame=numFrames-1;}
this.onCompleted.dispatch();}
var tile=this.tile;this.tile=this.sequence[this.frame];if(numFrames>1&&this.tile!==tile){this.changed=true;}
else{this.changed=false;}}},draw:function(targetX,targetY,scale,texturing){if(this.alpha!==1){ig.system.context.globalAlpha=this.alpha;}
texturing=texturing||this.texturing;if(texturing){if(this.texturing!==texturing||this.textureWidth!==this.texturing.sizeDraw.x||this.textureHeight!==this.texturing.sizeDraw.y){this.texturize(texturing);}
var texture=this.texturing&&this.texturing.textures&&this.texturing.textures[this.tile];if(texture){texture.draw(targetX,targetY,undefined,undefined,undefined,undefined,scale);}
else{return this.draw(targetX,targetY,scale);}}
else{if(this.angle===0){this.sheet.image.drawTile(targetX,targetY,this.tile,this.sheet.width,this.sheet.height,this.flip.x,this.flip.y,scale);}
else{ig.system.context.save();ig.system.context.translate(ig.system.getDrawPos(targetX+this.pivot.x),ig.system.getDrawPos(targetY+this.pivot.y));ig.system.context.rotate(this.angle);this.sheet.image.drawTile(-this.pivot.x,-this.pivot.y,this.tile,this.sheet.width,this.sheet.height,this.flip.x,this.flip.y,scale);ig.system.context.restore();}}
if(this.alpha!==1){ig.system.context.globalAlpha=1;}}});if(ig.global.wm){ig.AnimationExtended.inject({computeDrawCount:5,computeDrawCountMax:5,draw:function(targetX,targetY){if(this.texturing){if(this.computeDrawCount>=this.computeDrawCountMax){this.computeDrawCount=0;this.texturing.recordChanges(true);if(this.textureWidth*ig.system.scale!==this.texturing.getSizeDrawX()*ig.system.scale||this.textureHeight*ig.system.scale!==this.texturing.getSizeDrawY()*ig.system.scale){this.texturize(this.texturing);}}
else{this.computeDrawCount++;}}
this.parent(targetX,targetY);}});}});

// lib/plusplus/helpers/tweens.js
ig.baked=true;ig.module('plusplus.helpers.tweens').requires('plusplus.core.config').defines(function(){"use strict";var _c=ig.CONFIG;var TWEEN=TWEEN||(function(){var _tweens=[];var _paused=false;return{REVISION:'9',getAll:function(){return _tweens;},removeAll:function(){_tweens=[];},add:function(tween){if(_paused){tween.pause();}
else{tween.unpause();}
_tweens.push(tween);},remove:function(tween){var i=_tweens.indexOf(tween);if(i!==-1){_tweens.splice(i,1);}},pause:function(){if(!_paused){_paused=true;for(var i=0,il=_tweens.length;i<il;i++){_tweens[i].pause();}}},unpause:function(){if(_paused){_paused=false;for(var i=0,il=_tweens.length;i<il;i++){_tweens[i].unpause();}}},update:function(time){if(_tweens.length===0||_paused)return false;var i=0,numTweens=_tweens.length;time=time!==undefined?time:(ig.global.performance!==undefined&&ig.global.performance.now!==undefined?ig.global.performance.now():Date.now());while(i<numTweens){var tween=_tweens[i];if(tween.update(time)){i++;}else{_tweens.splice(i,1);numTweens--;}}
return true;}};})();TWEEN.Tween=function(object){var _object=object;var _valuesStart={};var _valuesEnd={};var _valuesStartRepeat={};var _duration=_c.DURATION_TWEEN;var _repeat=0;var _delayTime=0;var _startTime=null;var _paused=false;var _pausedAt=0;var _easingFunction=TWEEN.Easing.Linear.None;var _interpolationFunction=TWEEN.Interpolation.Linear;var _chainedTweens=[];var _onStartCallback=null;var _onStartCallbackFired=false;var _onUpdateCallback=null;var _onCompleteCallback=null;this.to=function(properties,duration){if(duration!==undefined){_duration=duration;}
_valuesEnd=properties;return this;};this.start=function(time){TWEEN.add(this);_onStartCallbackFired=false;_startTime=(time!==undefined?time:(ig.global.performance!==undefined&&ig.global.performance.now!==undefined?ig.global.performance.now():Date.now()));_startTime+=_delayTime;for(var property in _valuesEnd){if((property in _object)===false||_object[property]===null){continue;}
if(_valuesEnd[property]instanceof Array){if(_valuesEnd[property].length===0){continue;}
_valuesEnd[property]=[_object[property]].concat(_valuesEnd[property]);}
_valuesStart[property]=_object[property];if((_valuesStart[property]instanceof Array)==false){_valuesStart[property]*=1.0;}
_valuesStartRepeat[property]=_valuesStart[property];}
return this;};this.stop=function(){TWEEN.remove(this);return this;};this.pause=function(){if(!_paused){_paused=true;_pausedAt=ig.global.performance!==undefined&&ig.global.performance.now!==undefined?ig.global.performance.now():Date.now();}
return this;};this.unpause=function(){if(_paused){_paused=false;_startTime+=(ig.global.performance!==undefined&&ig.global.performance.now!==undefined?ig.global.performance.now():Date.now())-_pausedAt;_pausedAt=0;}
return this;};this.delay=function(amount){_delayTime=amount;return this;};this.repeat=function(times){_repeat=times;return this;};this.easing=function(easing){if(typeof easing==='function'){_easingFunction=easing;}
return this;};this.interpolation=function(interpolation){if(typeof easing==='function'){_interpolationFunction=interpolation;}
return this;};this.chain=function(){_chainedTweens=arguments;return this;};this.onStart=function(callback){_onStartCallback=callback;return this;};this.onUpdate=function(callback){_onUpdateCallback=callback;return this;};this.onComplete=function(callback){_onCompleteCallback=callback;return this;};this.update=function(time){if(_paused||time<_startTime){return true;}
if(_onStartCallbackFired===false){if(_onStartCallback){_onStartCallback.call(_object);}
_onStartCallbackFired=true;}
var elapsed=(time-_startTime)/_duration;elapsed=elapsed>1?1:elapsed;var value=_easingFunction(elapsed);for(var property in _valuesStart){var start=_valuesStart[property];var end=_valuesEnd[property];if(end instanceof Array){_object[property]=_interpolationFunction(end,value);}else{_object[property]=start+(end-start)*value;}}
if(_onUpdateCallback){_onUpdateCallback.call(_object,value);}
if(elapsed==1){if(_repeat>0){if(isFinite(_repeat)){_repeat--;}
for(var property in _valuesStartRepeat){_valuesStart[property]=_valuesStartRepeat[property];}
_startTime=time+_delayTime;return true;}else{if(_onCompleteCallback){_onCompleteCallback.call(_object);}
for(var i=0,numChainedTweens=_chainedTweens.length;i<numChainedTweens;i++){_chainedTweens[i].start(time);}
return false;}}
return true;};};TWEEN.Easing={Linear:{None:function(k){return k;}},Quadratic:{In:function(k){return k*k;},Out:function(k){return k*(2-k);},InOut:function(k){if((k*=2)<1)return 0.5*k*k;return-0.5*(--k*(k-2)-1);}},Cubic:{In:function(k){return k*k*k;},Out:function(k){return--k*k*k+1;},InOut:function(k){if((k*=2)<1)return 0.5*k*k*k;return 0.5*((k-=2)*k*k+2);}},Quartic:{In:function(k){return k*k*k*k;},Out:function(k){return 1-(--k*k*k*k);},InOut:function(k){if((k*=2)<1)return 0.5*k*k*k*k;return-0.5*((k-=2)*k*k*k-2);}},Quintic:{In:function(k){return k*k*k*k*k;},Out:function(k){return--k*k*k*k*k+1;},InOut:function(k){if((k*=2)<1)return 0.5*k*k*k*k*k;return 0.5*((k-=2)*k*k*k*k+2);}},Sinusoidal:{In:function(k){return 1-Math.cos(k*Math.PI/2);},Out:function(k){return Math.sin(k*Math.PI/2);},InOut:function(k){return 0.5*(1-Math.cos(Math.PI*k));}},Exponential:{In:function(k){return k===0?0:Math.pow(1024,k-1);},Out:function(k){return k===1?1:1-Math.pow(2,-10*k);},InOut:function(k){if(k===0)return 0;if(k===1)return 1;if((k*=2)<1)return 0.5*Math.pow(1024,k-1);return 0.5*(-Math.pow(2,-10*(k-1))+2);}},Circular:{In:function(k){return 1-Math.sqrt(1-k*k);},Out:function(k){return Math.sqrt(1-(--k*k));},InOut:function(k){if((k*=2)<1)return-0.5*(Math.sqrt(1-k*k)-1);return 0.5*(Math.sqrt(1-(k-=2)*k)+1);}},Elastic:{In:function(k){var s,a=0.1,p=0.4;if(k===0)return 0;if(k===1)return 1;if(!a||a<1){a=1;s=p/4;}
else s=p*Math.asin(1/a)/(2*Math.PI);return-(a*Math.pow(2,10*(k-=1))*Math.sin((k-s)*(2*Math.PI)/p));},Out:function(k){var s,a=0.1,p=0.4;if(k===0)return 0;if(k===1)return 1;if(!a||a<1){a=1;s=p/4;}
else s=p*Math.asin(1/a)/(2*Math.PI);return(a*Math.pow(2,-10*k)*Math.sin((k-s)*(2*Math.PI)/p)+1);},InOut:function(k){var s,a=0.1,p=0.4;if(k===0)return 0;if(k===1)return 1;if(!a||a<1){a=1;s=p/4;}
else s=p*Math.asin(1/a)/(2*Math.PI);if((k*=2)<1)return-0.5*(a*Math.pow(2,10*(k-=1))*Math.sin((k-s)*(2*Math.PI)/p));return a*Math.pow(2,-10*(k-=1))*Math.sin((k-s)*(2*Math.PI)/p)*0.5+1;}},Back:{In:function(k){var s=1.70158;return k*k*((s+1)*k-s);},Out:function(k){var s=1.70158;return--k*k*((s+1)*k+s)+1;},InOut:function(k){var s=1.70158*1.525;if((k*=2)<1)return 0.5*(k*k*((s+1)*k-s));return 0.5*((k-=2)*k*((s+1)*k+s)+2);}},Bounce:{In:function(k){return 1-TWEEN.Easing.Bounce.Out(1-k);},Out:function(k){if(k<(1/2.75)){return 7.5625*k*k;}else if(k<(2/2.75)){return 7.5625*(k-=(1.5/2.75))*k+0.75;}else if(k<(2.5/2.75)){return 7.5625*(k-=(2.25/2.75))*k+0.9375;}else{return 7.5625*(k-=(2.625/2.75))*k+0.984375;}},InOut:function(k){if(k<0.5)return TWEEN.Easing.Bounce.In(k*2)*0.5;return TWEEN.Easing.Bounce.Out(k*2-1)*0.5+0.5;}}};TWEEN.Interpolation={Linear:function(v,k){var m=v.length-1,f=m*k,i=Math.floor(f),fn=TWEEN.Interpolation.Utils.Linear;if(k<0)return fn(v[0],v[1],f);if(k>1)return fn(v[m],v[m-1],m-f);return fn(v[i],v[i+1>m?m:i+1],f-i);},Bezier:function(v,k){var b=0,n=v.length-1,pw=Math.pow,bn=TWEEN.Interpolation.Utils.Bernstein,i;for(i=0;i<=n;i++){b+=pw(1-k,n-i)*pw(k,i)*v[i]*bn(n,i);}
return b;},CatmullRom:function(v,k){var m=v.length-1,f=m*k,i=Math.floor(f),fn=TWEEN.Interpolation.Utils.CatmullRom;if(v[0]===v[m]){if(k<0)i=Math.floor(f=m*(1+k));return fn(v[(i-1+m)%m],v[i],v[(i+1)%m],v[(i+2)%m],f-i);}else{if(k<0)return v[0]-(fn(v[0],v[0],v[1],v[1],-f)-v[0]);if(k>1)return v[m]-(fn(v[m],v[m],v[m-1],v[m-1],f-m)-v[m]);return fn(v[i?i-1:0],v[i],v[m<i+1?m:i+1],v[m<i+2?m:i+2],f-i);}},Utils:{Linear:function(p0,p1,t){return(p1-p0)*t+p0;},Bernstein:function(n,i){var fc=TWEEN.Interpolation.Utils.Factorial;return fc(n)/fc(i)/fc(n-i);},Factorial:(function(){var a=[1];return function(n){var s=1,i;if(a[n])return a[n];for(i=n;i>1;i--)s*=i;return a[n]=s;};})(),CatmullRom:function(p0,p1,p2,p3,t){var v0=(p2-p0)*0.5,v1=(p3-p1)*0.5,t2=t*t,t3=t*t2;return(2*p1-2*p2+v0+v1)*t3+(-3*p1+3*p2-2*v0-v1)*t2+v0*t+p1;}}};ig.TWEEN=TWEEN;ig.TWEEN.Tween;ig.TWEEN.tween=function(object,properties,options){options=options||{};if(options.tween){options.tween.stop();}
var tween=new ig.TWEEN.Tween(object).to(properties,options.duration).easing(options.easing).onStart(options.onStart).onUpdate(options.onUpdate).onComplete(options.onComplete);if(!options.stopped){tween.start();}
return tween;};});

// lib/plusplus/helpers/utilsvector2.js
ig.baked=true;ig.module('plusplus.helpers.utilsvector2').requires('plusplus.core.config','plusplus.helpers.utilsmath').defines(function(){"use strict";var _c=ig.CONFIG;var _utm=ig.utilsmath;ig.utilsvector2={};ig.utilsvector2.vector=function(x,y,v){v=v||{};ig.utilsvector2.set(v,x||0,y||0);return v;};ig.utilsvector2.set=function(v,x,y){v.x=x;v.y=y;return v;};ig.utilsvector2.setScalar=function(v,s){v.x=s;v.y=s;return v;};ig.utilsvector2.clone=function(v){return ig.utilsvector2.vector(v.x,v.y);};ig.utilsvector2.copy=function(a,b){a.x=b.x;a.y=b.y;return a;};ig.utilsvector2.zero=function(v){v.x=0;v.y=0;return v;};ig.utilsvector2.isZero=function(v){return v.x===0&&v.y===0;};ig.utilsvector2.isAlmostZero=function(v){return _utm.almostEqual(v.x,0,_c.PRECISION_ZERO)&&_utm.almostEqual(v.y,0,_c.PRECISION_ZERO);};ig.utilsvector2.equal=function(a,b){return a.x===b.x&&a.y===b.y;};ig.utilsvector2.inverse=function(v){v.x=-v.x;v.y=-v.y;return v;};ig.utilsvector2.add=function(a,b){a.x+=b.x;a.y+=b.y;return a;};ig.utilsvector2.addVectors=function(a,b){return{x:a.x+b.x,y:a.y+b.y};};ig.utilsvector2.addScalar=function(v,s){v.x+=s;v.y+=s;return v;};ig.utilsvector2.subtract=function(a,b){a.x-=b.x;a.y-=b.y;return a;};ig.utilsvector2.subtractVectors=function(a,b){return{x:a.x-b.x,y:a.y-b.y};};ig.utilsvector2.subtractScalar=function(v,s){v.x-=s;v.y-=s;return v;};ig.utilsvector2.multiply=function(a,b){a.x*=b.x;a.y*=b.y;return a;};ig.utilsvector2.multiplyVectors=function(a,b){return{x:a.x*b.x,y:a.y*b.y};};ig.utilsvector2.multiplyScalar=function(v,s){v.x*=s;v.y*=s;return v;};ig.utilsvector2.divide=function(a,b){a.x/=b.x;a.y/=b.y;return a;};ig.utilsvector2.divideVectors=function(a,b){return{x:a.x/b.x,y:a.y/b.y};};ig.utilsvector2.divideScalar=function(v,s){v.x/=s;v.y/=s;return v;};ig.utilsvector2.min=function(a,b){return{x:a.x<b.x?a.x:b.x,y:a.y<b.y?a.y:b.y};};ig.utilsvector2.max=function(a,b){return{x:a.x>b.x?a.x:b.x,y:a.y>b.y?a.y:b.y};};ig.utilsvector2.abs=function(v){if(v.x<0){v.x=-v.x;}
if(v.y<0){v.y=-v.y;}
return v;};ig.utilsvector2.length=function(v){return Math.sqrt(v.x*v.x+v.y*v.y);};ig.utilsvector2.lengthSquared=function(v){return v.x*v.x+v.y*v.y;};ig.utilsvector2.normalize=function(v){var length=ig.utilsvector2.length(v);if(length>=Number.MIN_VALUE){var invLength=1/length;v.x*=invLength;v.y*=invLength;}
return v;};ig.utilsvector2.dot=function(a,b){return a.x*b.x+a.y*b.y;};ig.utilsvector2.cross=function(a,b){return a.x*b.y-a.y*b.x;};ig.utilsvector2.crossVF=function(v,s){var x=v.x;v.x=s*v.y;v.y=-s*x;return v;};ig.utilsvector2.crossFV=function(v,s){var x=v.x;v.x=-s*v.y;v.y=s*x;return v;};ig.utilsvector2.rotate=function(v,angle,originX,originY){var s=Math.sin(angle);var c=Math.cos(angle);var translatedX=v.x-originX;var translatedY=v.y-originY;v.x=originX+translatedX*c-translatedY*s;v.y=originY+translatedX*s+translatedY*c;return v;};ig.utilsvector2.projectPoints=function(points,offsetX,offsetY,scaleX,scaleY,angle,angleOffsetX,angleOffsetY){offsetX=offsetX||0;offsetY=offsetY||0;scaleX=scaleX||1;scaleY=scaleY||1;angle=angle||0;var pointsProjected=[];var i,il,point,pointRotated;if(angle!==0){angleOffsetX=angleOffsetX||0;angleOffsetY=angleOffsetY||0;for(i=0,il=points.length;i<il;i++){point=points[i];pointRotated=ig.utilsvector2.rotate(point,angle,angleOffsetX,angleOffsetY);pointsProjected[i]={x:pointRotated.x*scaleX+offsetX,y:pointRotated.y*scaleY+offsetY};}}
else{for(i=0,il=points.length;i<il;i++){point=points[i];pointsProjected[i]={x:point.x*scaleX+offsetX,y:point.y*scaleY+offsetY};}}
return pointsProjected;};ig.utilsvector2.centerOfPoints=function(points){var cx=0;var cy=0;var point;for(var i=0,il=points.length;i<il;i++){point=points[i];cx+=point.x;cy+=point.y;}
return{x:cx/il,y:cy/il};};ig.utilsvector2.pointsCW=function(p1,p2,p3){return(p2.x-p1.x)*(p3.y-p1.y)-(p2.y-p1.y)*(p3.x-p1.x);};ig.utilsvector2.radianBetweenPoints=function(a,b,c){var abx=b.x-a.x;var aby=b.y-a.y;var cbx=b.x-c.x;var cby=b.y-c.y;var dot=(abx*cbx+aby*cby);var cross=(abx*cby-aby*cbx);var alpha=Math.atan2(cross,dot);return alpha;};ig.utilsvector2.pointsToConvexHull=function(points){if(points.length<3)return points;var i,il;var indexMin=0,pointMin=points[indexMin],point;for(i=1,il=points.length;i<il;i++){point=points[i];if(point.y===pointMin.y){if(point.x<pointMin.x){indexMin=i;pointMin=point;}}
else if(point.y<pointMin.y){indexMin=i;pointMin=point;}}
var pointsByAngle=[];var pointFromMin;for(i=0,il=points.length;i<il;i++){if(i===indexMin)continue;point=points[i];pointFromMin={x:point.x,y:point.y};pointFromMin.angle=Math.atan((point.y-pointMin.y)/(point.x-pointMin.x));if(pointFromMin.angle<0)pointFromMin.angle+=Math.PI;pointFromMin.distance=(point.x-pointMin.x)*(point.x-pointMin.x)+(point.y-pointMin.y)*(point.y-pointMin.y);pointFromMin.index=i;pointsByAngle.push(pointFromMin);}
pointsByAngle.sort(function(a,b){if(a.angle<b.angle)return-1;else if(a.angle>b.angle)return 1;else{if(a.distance<b.distance)return-1;else if(a.distance>b.distance)return 1;}
return 0;});pointsByAngle.unshift(pointsByAngle[pointsByAngle.length-1],{x:pointMin.x,y:pointMin.y,index:indexMin});var pointTemp;var loc=2;for(i=3,il=points.length;i<=il;i++){while(ig.utilsvector2.pointsCW(pointsByAngle[loc-1],pointsByAngle[loc],pointsByAngle[i])<=0){loc--;}
loc++;pointTemp=pointsByAngle[i];pointsByAngle[i]=pointsByAngle[loc];pointsByAngle[loc]=pointTemp;}
var pointsSorted=[];for(i=0;i<=loc;i++){pointsSorted[i]=points[pointsByAngle[i].index];}
return pointsSorted;};ig.utilsvector2.Q_1=1;ig.utilsvector2.Q_2=1<<2;ig.utilsvector2.Q_3=1<<3;ig.utilsvector2.Q_4=1<<4;ig.utilsvector2.pointQuadrant=function(x,y,originX,originY){var q;var dx=originX-x;var dy=originY-y;if(dx===0&&dy===0){q=ig.utilsvector2.Q_1|ig.utilsvector2.Q_2|ig.utilsvector2.Q_3|ig.utilsvector2.Q_4;}
else if(dx===0){if(dy<0)q=ig.utilsvector2.Q_3|ig.utilsvector2.Q_4;else q=ig.utilsvector2.Q_1|ig.utilsvector2.Q_2;}
else if(dy===0){if(dx<0)q=ig.utilsvector2.Q_2|ig.utilsvector2.Q_4;else q=ig.utilsvector2.Q_1|ig.utilsvector2.Q_3;}
else{q=1;if(dx<0)q=2;if(dy<0)q+=2;q=1<<q;}
return q;};ig.utilsvector2.directionThreshold=function(v,thresholdX,thresholdY){thresholdX=thresholdX||0;thresholdY=thresholdY||0;if(thresholdY<thresholdX){if(v.y!==0){if(_utm.almostEqual(v.x,0,thresholdX)){v.x=0;}}
if(v.x!==0){if(_utm.almostEqual(v.y,0,thresholdY)){v.y=0;}}}
else{if(v.x!==0){if(_utm.almostEqual(v.y,0,thresholdY)){v.y=0;}}
if(v.y!==0){if(_utm.almostEqual(v.x,0,thresholdX)){v.x=0;}}}
return v;};ig.utilsvector2.directionToString=function(v){var xDir=_utm.direction(v.x);var yDir=_utm.direction(v.y);for(var direction in ig.utilsvector2.DIRECTION){var dv=ig.utilsvector2.DIRECTION[direction];if(dv.x===xDir&&dv.y===yDir){return direction;}}
return'NONE';};ig.utilsvector2.DIRECTION={NONE:ig.utilsvector2.vector(),LEFT:ig.utilsvector2.vector(-1,0),RIGHT:ig.utilsvector2.vector(1,0),UP:ig.utilsvector2.vector(0,-1),DOWN:ig.utilsvector2.vector(0,1),UPLEFT:ig.utilsvector2.vector(-1,-1),UPRIGHT:ig.utilsvector2.vector(1,-1),DOWNLEFT:ig.utilsvector2.vector(-1,1),DOWNRIGHT:ig.utilsvector2.vector(1,1)};});

// lib/plusplus/helpers/utilsintersection.js
ig.baked=true;ig.module('plusplus.helpers.utilsintersection').requires('plusplus.helpers.utilsmath','plusplus.helpers.utilsvector2').defines(function(){"use strict";var _utm=ig.utilsmath;var _utv2=ig.utilsvector2;ig.utilsintersection={};ig.utilsintersection.bounds=function(x,y,width,height,bounds){bounds=bounds||{};bounds.minX=x;bounds.minY=y;bounds.maxX=x+width;bounds.maxY=y+height;bounds.width=width;bounds.height=height;return bounds;};ig.utilsintersection.boundsMinMax=function(minX,minY,maxX,maxY,bounds){bounds=bounds||{};bounds.minX=minX;bounds.minY=minY;bounds.maxX=maxX;bounds.maxY=maxY;bounds.width=maxX-minX;bounds.height=maxY-minY;return bounds;};ig.utilsintersection.boundsOfPoints=function(points,bounds){var i,il,point=points[0];var minX=point.x;var minY=point.y;var maxX=point.x;var maxY=point.y;for(i=1,il=points.length;i<il;i++){point=points[i];if(point.x<minX)minX=point.x;else if(point.x>maxX)maxX=point.x;if(point.y<minY)minY=point.y;else if(point.y>maxY)maxY=point.y;}
bounds=bounds||{};bounds.minX=minX;bounds.minY=minY;bounds.maxX=maxX;bounds.maxY=maxY;bounds.width=maxX-minX;bounds.height=maxY-minY;return bounds;};ig.utilsintersection.boundsClone=function(boundsSource,offsetX,offsetY,bounds){offsetX=offsetX||0;offsetY=offsetY||0;var minX=boundsSource.minX+offsetX;var minY=boundsSource.minY+offsetY;var maxX=boundsSource.maxX+offsetX;var maxY=boundsSource.maxY+offsetY;bounds=bounds||{};bounds.minX=minX;bounds.minY=minY;bounds.maxX=maxX;bounds.maxY=maxY;bounds.width=maxX-minX;bounds.height=maxY-minY;return bounds;};ig.utilsintersection.boundsCopy=function(boundsA,boundsB,offsetX,offsetY,scaleX,scaleY){offsetX=offsetX||0;offsetY=offsetY||0;scaleX=scaleX||1;scaleY=scaleY||1;boundsA.minX=boundsB.minX*scaleX+offsetX;boundsA.maxX=boundsB.maxX*scaleX+offsetX;boundsA.minY=boundsB.minY*scaleY+offsetY;boundsA.maxY=boundsB.maxY*scaleY+offsetY;boundsA.width=boundsA.maxX-boundsA.minX;boundsA.height=boundsA.maxY-boundsA.minY;return boundsA;};ig.utilsintersection.boundsCopyX=function(boundsA,boundsB,offsetX,scaleX){offsetX=offsetX||0;scaleX=scaleX||1;boundsA.minX=boundsB.minX*scaleX+offsetX;boundsA.maxX=boundsB.maxX*scaleX+offsetX;boundsA.width=boundsA.maxX-boundsA.minX;return boundsA;};ig.utilsintersection.boundsCopyY=function(boundsA,boundsB,offsetY,scaleY){offsetY=offsetY||0;scaleY=scaleY||1;boundsA.minY=boundsB.minY*scaleY+offsetY;boundsA.maxY=boundsB.maxY*scaleY+offsetY;boundsA.height=boundsA.maxY-boundsA.minY;return boundsA;};ig.utilsintersection.boundsCopyRotated=function(boundsA,boundsB,angle){angle=(angle%_utm.TWOPI);if(angle>Math.PI){angle-=_utm.TWOPI;}
else if(angle<-Math.PI){angle+=_utm.TWOPI;}
var cos=Math.cos(angle);var sin=Math.sin(angle);var width=boundsB.width;var height=boundsB.height;var hcos=height*cos;var wcos=width*cos;var hsin=height*sin;var wsin=width*sin;var minX=boundsB.minX;var minY=boundsB.minY;var cX=minX+boundsB.width*0.5;var cY=minY+boundsB.height*0.5;var dminX=minX-cX;var dminY=minY-cY;var x=cX+dminX*cos-dminY*sin;var y=cY+dminX*sin+dminY*cos;if(angle>0){if(angle<_utm.HALFPI){boundsA.minY=y;boundsA.maxY=y+hcos+wsin;boundsA.minX=x-hsin;boundsA.maxX=x+wcos;}
else{boundsA.minY=y+hcos;boundsA.maxY=y+wsin;boundsA.minX=x-hsin+wcos;boundsA.maxX=x;}}
else{if(angle<-_utm.HALFPI){boundsA.minY=y+wsin;boundsA.maxY=y+hcos;boundsA.minX=x;boundsA.maxX=x+wcos-hsin;}
else{boundsA.minY=y+wsin+hcos;boundsA.maxY=y;boundsA.minX=x+wcos;boundsA.maxX=x-hsin;}}
boundsA.width=boundsA.maxX-boundsA.minX;boundsA.height=boundsA.maxY-boundsA.minY;return boundsA;};ig.utilsintersection.AABBContains=function(aminX,aminY,amaxX,amaxY,bminX,bminY,bmaxX,bmaxY){if(aminX>=bminX&&amaxX<=bmaxX&&aminY>=bminY&&amaxY<=bmaxY){return true;}
return false;};ig.utilsintersection.AABBIntersect=function(aminX,aminY,amaxX,amaxY,bminX,bminY,bmaxX,bmaxY){if(amaxX<bminX)return false;if(aminX>bmaxX)return false;if(amaxY<bminY)return false;if(aminY>bmaxY)return false;return true;};ig.utilsintersection.boundsIntersect=function(boundsA,boundsB){if(boundsA.maxX<boundsB.minX)return false;if(boundsA.minX>boundsB.maxX)return false;if(boundsA.maxY<boundsB.minY)return false;if(boundsA.minY>boundsB.maxY)return false;return true;};ig.utilsintersection.boundsAABBIntersect=function(bounds,minX,minY,maxX,maxY){if(bounds.maxX<minX)return false;if(bounds.minX>maxX)return false;if(bounds.maxY<minY)return false;if(bounds.minY>maxY)return false;return true;};ig.utilsintersection.pointInAABB=function(x,y,minX,minY,maxX,maxY){if(x<minX)return false;if(x>maxX)return false;if(y<minY)return false;if(y>maxY)return false;return true;};ig.utilsintersection.pointInBounds=function(x,y,bounds){if(x<bounds.minX)return false;if(x>bounds.maxX)return false;if(y<bounds.minY)return false;if(y>bounds.maxY)return false;return true;};ig.utilsintersection.pointInCircle=function(x,y,cx,cy,radius){var dx=cx-x;var dy=cy-y;var squareDistance=dx*dx+dy*dy;var squareRadius=radius*radius;return squareDistance<squareRadius;};ig.utilsintersection.pointInPolygon=function(x,y,vertices){var i,j=vertices.length-1;var oddNodes=false;for(i=0;i<vertices.length;i++){var va=vertices[j];var vb=vertices[i];if((va.x===x&&va.y===y)||(vb.x===x&&vb.y===y)){oddNodes=true;break;}
else if((vb.y<y&&va.y>=y||va.y<y&&vb.y>=y)&&(vb.x<=x||va.x<=x)){if(vb.x+(y-vb.y)/(va.y-vb.y)*(va.x-vb.x)<x){oddNodes=!oddNodes;}}
j=i;}
return oddNodes;};ig.utilsintersection.entitiesInAABB=function(minX,minY,maxX,maxY,targetable,layerName,unsorted){var intersected=[];var layer;var i,il;if(!layerName){for(i=0,il=ig.game.layers.length;i<il;i++){layer=ig.game.layers[i];if(layer.name&&layer.numEntities&&(!targetable||layer.itemsTargetable.length)){intersected=intersected.concat(ig.utilsintersection.entitiesInAABB(minX,minY,maxX,maxY,targetable,layer.name,true));}}}
else{layer=ig.game.layersMap[layerName];var entities=targetable?layer.itemsTargetable:layer.items;for(i=0,il=entities.length;i<il;i++){var entity=entities[i];var intersects;if(entity.fixed){var screenX=ig.game.screen.x;var screenY=ig.game.screen.y;intersects=ig.utilsintersection.AABBIntersect(entity.pos.x+screenX,entity.pos.y+screenY,entity.pos.x+entity.size.x+screenX,entity.pos.y+entity.size.y+screenY,minX,minY,maxX,maxY);}
else{intersects=ig.utilsintersection.AABBIntersect(entity.pos.x,entity.pos.y,entity.pos.x+entity.size.x,entity.pos.y+entity.size.y,minX,minY,maxX,maxY);}
if(intersects){intersected.push(entity);}}}
if(intersected.length>1&&!unsorted){ig.utilsintersection.sortByDistance(minX+(maxX-minX)*0.5,minY+(maxY-minY)*0.5,intersected);}
return intersected;};ig.utilsintersection.getIsAABBInScreen=function(x,y,width,height){var adjustedX=x-ig.game.screen.x;var adjustedY=y-ig.game.screen.y;return ig.utilsintersection.AABBIntersect(adjustedX,adjustedY,adjustedX+width,adjustedY+height,0,0,ig.system.width,ig.system.height);};ig.utilsintersection.sortByDistance=function(x,y,entities){var pos=_utv2.set(ig.utilsintersection._utilVec2Sort,x,y);entities.sort(function(a,b){var aDistance=a.distanceSquaredEdgeTo(pos);var bDistance=b.distanceSquaredEdgeTo(pos);return aDistance-bDistance||a.distanceSquaredTo(pos)-b.distanceSquaredTo(pos);});return entities;};ig.utilsintersection._utilVec2Sort={x:0.1,y:0.1};});

// lib/plusplus/helpers/utilsdraw.js
ig.baked=true;ig.module('plusplus.helpers.utilsdraw').requires('plusplus.helpers.utilsintersection').defines(function(){"use strict";var _uti=ig.utilsintersection;ig.utilsdraw={};ig.utilsdraw.pixelFillPolygon=function(context,minX,minY,maxX,maxY,vertices,r,g,b,a,add,boundsVertices,stabilize){minX|=0;minY|=0;var fminX,fminY,fmaxX,fmaxY;if(boundsVertices){fminX=boundsVertices.minX|0;fminY=boundsVertices.minY|0;fmaxX=Math.ceil(boundsVertices.maxX);fmaxY=Math.ceil(boundsVertices.maxY);}
else{fminX=minX;fminY=minY;fmaxX=Math.ceil(maxX);fmaxY=Math.ceil(maxY);}
var imageX,imageY,width,height;if(stabilize!==false){imageX=fminX-minX-1;imageY=fminY-minY-1;width=fmaxX-fminX+1;height=fmaxY-fminY+1;}
else{imageX=fminX-minX;imageY=fminY-minY;width=fmaxX-fminX;height=fmaxY-fminY;}
var r255=r*255|0;var g255=g*255|0;var b255=b*255|0;var a255=a*255|0;var shape=context.getImageData(imageX,imageY,width,height);if(add===true){for(var x=0;x<width;x++){for(var y=0;y<height;y++){if(_uti.pointInPolygon(x+fminX,y+fminY,vertices)){var index=(x+y*width)*4;shape.data[index]+=r255;shape.data[index+1]+=g255;shape.data[index+2]+=b255;shape.data[index+3]+=a255;}}}}
else{for(var x=0;x<width;x++){for(var y=0;y<height;y++){if(_uti.pointInPolygon(x+fminX,y+fminY,vertices)){var index=(x+y*width)*4;shape.data[index]=r255;shape.data[index+1]=g255;shape.data[index+2]=b255;shape.data[index+3]=a255;}}}}
context.putImageData(shape,imageX,imageY);};ig.utilsdraw.fillPolygon=function(context,vertices,offsetX,offsetY,scale){offsetX=offsetX||0;offsetY=offsetY||0;scale=scale||1;var vertex=vertices[0];context.beginPath();context.moveTo((vertex.x+offsetX)*scale,(vertex.y+offsetY)*scale);for(var i=1,il=vertices.length;i<il;i++){vertex=vertices[i];context.lineTo((vertex.x+offsetX)*scale,(vertex.y+offsetY)*scale);}
context.fill();};ig.utilsdraw.fillRoundedRect=function(context,x,y,width,height,radius){context.beginPath();context.moveTo(x+radius,y);context.lineTo(x+width-radius,y);context.quadraticCurveTo(x+width,y,x+width,y+radius);context.lineTo(x+width,y+height-radius);context.quadraticCurveTo(x+width,y+height,x+width-radius,y+height);context.lineTo(x+radius,y+height);context.quadraticCurveTo(x,y+height,x,y+height-radius);context.lineTo(x,y+radius);context.quadraticCurveTo(x,y,x+radius,y);context.closePath();context.fill();};ig.utilsdraw.pixelFillRoundedRect=function(context,minX,minY,maxX,maxY,x,y,width,height,radius,r,g,b,a,precision,add,stabilize){if(typeof precision==='undefined'){precision=Math.round(radius*0.25);}
var anglePerVertex=Math.PI*0.5/(precision+1);var addCornerVertices=function(cx,cy,angle){for(var i=0;i<precision;i++){angle+=anglePerVertex;vertices.push({x:cx+radius*Math.cos(angle),y:cy+radius*Math.sin(angle)});}}
var vertices=[];vertices.push({x:x+radius,y:y});vertices.push({x:x+width-radius,y:y});if(precision>0){addCornerVertices(x+width-radius,y+radius,Math.PI*1.5);}
vertices.push({x:x+width,y:y+radius});vertices.push({x:x+width,y:y+height-radius});if(precision>0){addCornerVertices(x+width-radius,y+height-radius,0);}
vertices.push({x:x+width-radius,y:y+height});vertices.push({x:x+radius,y:y+height});if(precision>0){addCornerVertices(x+radius,y+height-radius,Math.PI*0.5);}
vertices.push({x:x,y:y+height-radius});vertices.push({x:x,y:y+radius});if(precision>0){addCornerVertices(x+radius,y+radius,Math.PI);}
ig.utilsdraw.pixelFillPolygon(context,minX,minY,maxX,maxY,vertices,r,g,b,a,add,ig.utilsintersection.bounds(x,y,width,height),stabilize);};});

// lib/plusplus/helpers/utilscolor.js
ig.baked=true;ig.module('plusplus.helpers.utilscolor').defines(function(){"use strict";ig.utilscolor={};ig.utilscolor.hexToRGBA=function(hex){hex=Math.floor(hex);var rgba={};rgba.r=(hex>>24&255)/255;rgba.g=(hex>>16&255)/255;rgba.b=(hex>>8&255)/255;rgba.a=(hex&255)/255;return rgba;};ig.utilscolor.RGBAToHex=function(r,g,b,a){return(r*255)<<24^(g*255)<<16^(b*255)<<8^(a*255)<<0;};ig.utilscolor.RGBToHex=function(r,g,b){return(r*255)<<16^(g*255)<<8^(b*255)<<0;};ig.utilscolor.CSSToRGBA=(function(){var canvas=ig.$new("canvas");canvas.width=canvas.height=1;var ctx=canvas.getContext("2d");return function(color,alpha){ctx.clearRect(0,0,1,1);ctx.fillStyle=color;ctx.fillRect(0,0,1,1);var data=ctx.getImageData(0,0,1,1).data;var rgba={};rgba.r=data[0]/255;rgba.g=data[1]/255;rgba.b=data[2]/255;rgba.a=alpha;return rgba;}}());ig.utilscolor.RGBAToCSS=function(r,g,b,a){return'rgba('+((r*255)|0)+','+((g*255)|0)+','+((b*255)|0)+','+a+')';};ig.utilscolor.RGBToCSS=function(r,g,b){return'rgb('+((r*255)|0)+','+((g*255)|0)+','+((b*255)|0)+')';};ig.utilscolor.linearGradient=function(minX,minY,maxX,maxY,colors){var gradient=ig.system.context.createLinearGradient(minX,minY,maxX,maxY);var pctPerStop=1/(colors.length-1);for(var i=0,il=colors.length;i<il;i++){var color=colors[i];var style;if(typeof color==='object'){if(typeof color.a!=='undefined'){style=ig.utilscolor.RGBAToCSS(color.r,color.g,color.b,color.a);}
else{style=ig.utilscolor.RGBToCSS(color.r,color.g,color.b);}}
else{style=color;}
gradient.addColorStop(i*pctPerStop,style);}
return gradient;};ig.utilscolor.radialGradient=function(radius,colors){var gradient=ig.system.context.createRadialGradient(radius,radius,0,radius,radius,radius);var pctPerStop=1/(colors.length-1);for(var i=0,il=colors.length;i<il;i++){var color=colors[i];var style;if(typeof color==='object'){if(typeof color.a!=='undefined'){style=ig.utilscolor.RGBAToCSS(color.r,color.g,color.b,color.a);}
else{style=ig.utilscolor.RGBToCSS(color.r,color.g,color.b);}}
else{style=color;}
gradient.addColorStop(i*pctPerStop,style);}
return gradient;};});

// lib/plusplus/helpers/utilstile.js
ig.baked=true;ig.module('plusplus.helpers.utilstile').requires('plusplus.core.config','plusplus.core.collision-map','plusplus.helpers.utils','plusplus.helpers.utilsintersection','plusplus.helpers.utilsvector2').defines(function(){"use strict";var _c=ig.CONFIG;var _ut=ig.utils;var _uti=ig.utilsintersection;var _utv2=ig.utilsvector2;var TILE_ONE_WAY_UP=_c.COLLISION.TILE_ONE_WAY_UP;var TILE_ONE_WAY_DOWN=_c.COLLISION.TILE_ONE_WAY_DOWN;var TILE_ONE_WAY_RIGHT=_c.COLLISION.TILE_ONE_WAY_RIGHT;var TILE_ONE_WAY_LEFT=_c.COLLISION.TILE_ONE_WAY_LEFT;var TILE_CLIMBABLE_WITH_TOP=_c.COLLISION.TILE_CLIMBABLE_WITH_TOP;var TILE_CLIMBABLE=_c.COLLISION.TILE_CLIMBABLE;var TILE_CLIMBABLE_STAIRS_WITH_TOP=_c.COLLISION.TILE_STAIRS_WITH_TOP;var TILE_CLIMBABLE_STAIRS=_c.COLLISION.TILE_STAIRS;var HASH_WALKABLE=_c.COLLISION.TILES_HASH_WALKABLE;var HASH_WALKABLE_STRICT=_c.COLLISION.TILES_HASH_WALKABLE_STRICT;var HASH_ONE_WAY=_c.COLLISION.TILES_HASH_ONE_WAY;var HASH_CLIMBABLE=_c.COLLISION.TILES_HASH_CLIMBABLE;var HASH_CLIMBABLE_ONE_WAY=_c.COLLISION.TILES_HASH_CLIMBABLE_ONE_WAY;var HASH_CLIMBABLE_STAIRS=_c.COLLISION.TILES_HASH_CLIMBABLE_STAIRS;var SEGMENT_A=1;var SEGMENT_B=2;ig.utilstile={};ig.utilstile.defaultTileVerticesDef={};ig.utilstile.defaultTileSegmentsDef={};var _collisionMap=null;var _collisionMapTileDef=null;ig.utilstile.rebuild=function(collisionMap){if(collisionMap instanceof ig.CollisionMap&&collisionMap.tiledef!==_collisionMapTileDef){ig.utilstile.unload();_collisionMap=collisionMap;_collisionMapTileDef=_collisionMap.tiledef||ig.CollisionMap.defaultTileDef;for(var tileId in _collisionMapTileDef){ig.utilstile.shapeFromTile(tileId,_collisionMapTileDef);}
ig.utilstile.shapeFromTile(1,_collisionMapTileDef);}
else{_collisionMap=collisionMap;}};ig.utilstile.unload=function(){_collisionMap=null;_collisionMapTileDef=ig.CollisionMap.defaultTileDef;ig.utilstile.defaultTileVerticesDef={};ig.utilstile.defaultTileSegmentsDef={};};ig.utilstile.isTileWalkable=function(tileId){return HASH_WALKABLE[tileId];};ig.utilstile.isTileWalkableStrict=function(tileId){return HASH_WALKABLE_STRICT[tileId];};ig.utilstile.isTileOneWay=function(tileId){return HASH_ONE_WAY[tileId];};ig.utilstile.isTileClimbable=function(tileId){return HASH_CLIMBABLE[tileId];};ig.utilstile.isTileClimbableStairs=function(tileId){return HASH_CLIMBABLE_STAIRS[tileId];};ig.utilstile.isTileClimbableOneWay=function(tileId){return HASH_CLIMBABLE_ONE_WAY[tileId];};ig.utilstile.shapesFromCollisionMap=function(map,options){var shapes={oneWays:[],solids:[],climbables:[]};if(map instanceof ig.CollisionMap){options=options||{};var data=ig.copy(map.data);var tilesize=map.tilesize;var width=map.width;var height=map.height;var solids=[];var climbables=[];var oneWays=[];var vertices,scaledVertices,segments,segment;var ix,iy,x,y;var i,il,tile,shape;for(iy=0;iy<height;iy++){for(ix=0;ix<width;ix++){shape=ig.utilstile.shapeFromTile(map.data[iy][ix],map.tiledef);tile={id:map.data[iy][ix],ix:ix,iy:iy,x:ix*tilesize,y:iy*tilesize,width:tilesize,height:tilesize,shape:shape};if(shape.vertices.length>0){scaledVertices=[];vertices=shape.vertices;segments=shape.segments;for(i=0,il=segments.length;i<il;i++){segment=segments[i];var va=vertices[segment.a];scaledVertices[segment.a]={x:tile.x+va.x*tilesize,y:tile.y+va.y*tilesize};}
shape.vertices=scaledVertices;if(HASH_CLIMBABLE[tile.id]){if(!options.ignoreClimbables){climbables.push(tile);}}
else if(HASH_ONE_WAY[tile.id]){if(!options.ignoreOneWays){oneWays.push(tile);}}
else if(!options.ignoreSolids){solids.push(tile);}}
data[iy][ix]=tile;}}
var rectangles=options.rectangles;shapes.solids=shapes.solids.concat(ig.utilstile.shapedTilesToShapes(solids,data,options));if(typeof options.groupByTileId==='undefined'){options.groupByTileId=true;}
options.rectangles=typeof rectangles!=='undefined'?rectangles:!options.contourClimbables;shapes.climbables=shapes.climbables.concat(ig.utilstile.shapedTilesToShapes(climbables,data,options));for(i=0,il=shapes.climbables.length;i<il;i++){shape=shapes.climbables[i];if(HASH_CLIMBABLE_ONE_WAY[shape.id]){shape.settings.oneWay=true;}
else{shape.settings.sensor=true;}
if(HASH_CLIMBABLE_STAIRS[shape.id]){shape.settings.climbableStairs=true;}}
options.rectangles=typeof rectangles!=='undefined'?rectangles:!options.contourOneWays;shapes.oneWays=shapes.oneWays.concat(ig.utilstile.shapedTilesToShapes(oneWays,data,options));for(i=0,il=shapes.oneWays.length;i<il;i++){shape=shapes.oneWays[i];if(HASH_ONE_WAY[shape.id]){shape.settings.oneWay=true;if(shape.id===TILE_ONE_WAY_DOWN){shape.settings.oneWayFacing={x:0,y:1};}
else if(shape.id===TILE_ONE_WAY_RIGHT){shape.settings.oneWayFacing={x:1,y:0};}
else if(shape.id===TILE_ONE_WAY_LEFT){shape.settings.oneWayFacing={x:-1,y:0};}}}}
return shapes;};ig.utilstile.shapedTilesToShapes=function(tiles,data,options){options=options||{};var shapes=[];var vertices=[];var contours=[];var i,il,j,jl,index;if(options.groupByTileId){delete options.groupByTileId;var ids=[];var id;var groups={};var group;for(i=0,il=tiles.length;i<il;i++){var tile=tiles[i];if(groups[tile.id]){groups[tile.id].push(tile);}
else{ids.push(tile.id);groups[tile.id]=[tile];}}
for(i=0,il=ids.length;i<il;i++){id=ids[i];group=groups[id];options.id=id;shapes=shapes.concat(ig.utilstile.shapedTilesToShapes(group,data,options));}}
else{if(options.rectangles){var tilePool=tiles.slice(0);var rectangles=[];var line,length,stepped,rectangle;while(tilePool.length>0){line=ig.utilstile.findShapedTileLine(tilePool);_ut.arrayCautiousRemoveMulti(tilePool,line);length=line.length;rectangle=line;stepped=true;while(stepped){stepped=false;var tileLast=line[0];var tileFrom=data[tileLast.iy][tileLast.ix+1];if(tileFrom){index=_ut.indexOfValue(tilePool,tileFrom);if(index!==-1){line=ig.utilstile.findShapedTileLine(tilePool,false,index,length);if(line.length===length){_ut.arrayCautiousRemoveMulti(tilePool,line);rectangle=rectangle.concat(line);stepped=true;}}}}
if(rectangle.length>0){rectangles.push(rectangle);}}
for(j=0,jl=rectangles.length;j<jl;j++){rectangle=rectangles[j];vertices=[];for(i=0,il=rectangle.length;i<il;i++){vertices=vertices.concat(ig.utilstile.getNonDuplicateSegmentVertices(rectangle[i],data,rectangle));}
contours=contours.concat(ig.utilstile.verticesToContours(vertices,options));}}
else{for(i=0,il=tiles.length;i<il;i++){vertices=vertices.concat(ig.utilstile.getNonDuplicateSegmentVertices(tiles[i],data,tiles));}
contours=ig.utilstile.verticesToContours(vertices,options);}
for(i=0,il=contours.length;i<il;i++){var contour=contours[i];shapes.push({id:options.id,x:contour.minX,y:contour.minY,settings:{size:{x:contour.width,y:contour.height},vertices:contour.vertices}});}}
return shapes;};ig.utilstile.findShapedTileLine=function(tiles,horizontal,indexFrom,length){indexFrom=indexFrom||0;length=length||0;var tileFrom=tiles[indexFrom];var line=[];var stepped=true;var i,il;while(stepped){stepped=false;line.push(tileFrom);if(line.length===length){break;}
var tileNext=horizontal?ig.utilstile.stepShapedTileHorizontally(tiles,tileFrom):ig.utilstile.stepShapedTileVertically(tiles,tileFrom);if(tileFrom!==tileNext){stepped=true;tileFrom=tileNext;}}
return line;};ig.utilstile.stepShapedTileHorizontally=function(tiles,tileFrom){for(var i=0,il=tiles.length;i<il;i++){var tileNext=tiles[i];if(tileFrom.iy===tileNext.iy&&tileFrom.ix+1===tileNext.ix){return tileNext;}}
return tileFrom;};ig.utilstile.stepShapedTileVertically=function(tiles,tileFrom){for(var i=0,il=tiles.length;i<il;i++){var tileNext=tiles[i];if(tileFrom.ix===tileNext.ix&&tileFrom.iy+1===tileNext.iy){return tileNext;}}
return tileFrom;};ig.utilstile.verticesToContours=function(vertices,options){var contours=[];if(vertices.length>1){options=options||{};var vertexPool=vertices.slice(0);var contour={vertices:[],minX:Number.MAX_VALUE,minY:Number.MAX_VALUE,maxX:-Number.MAX_VALUE,maxY:-Number.MAX_VALUE};var contourVertices=contour.vertices;var vb=vertexPool.pop();var va=vertexPool.pop();var pva,pvb;var sva,svb;var i,il,j,jl;while(vertexPool.length>-2){var stepped=false;sva=contourVertices[0];svb=contourVertices[1];if(contourVertices.length<=2||vb.x!==sva.x||vb.y!==sva.y){for(i=0,il=vertexPool.length;i<il;i+=2){pva=vertexPool[i];pvb=vertexPool[i+1];if(vb.x===pva.x&&vb.y===pva.y){stepped=true;break;}}}
contourVertices.push(vb);if(vb.x<contour.minX)contour.minX=vb.x;if(vb.x>contour.maxX)contour.maxX=vb.x;if(vb.y<contour.minY)contour.minY=vb.y;if(vb.y>contour.maxY)contour.maxY=vb.y;if(stepped===true){vertexPool.splice(i,2);va=pva;vb=pvb;}
else{if(contour.vertices.length>=3){contours.push(contour);}
if(vertexPool.length>0){contour={vertices:[]};contour.minX=contour.minY=Number.MAX_VALUE;contour.maxX=contour.maxY=-Number.MAX_VALUE;contourVertices=contour.vertices;vb=vertexPool.pop();va=vertexPool.pop();}
else{break;}}}
for(i=0,il=contours.length;i<il;i++){contour=contours[i];contour.width=contour.maxX-contour.minX;contour.height=contour.maxY-contour.minY;}
contours.sort(function(a,b){return(b.width*b.width+b.height*b.height)-(a.width*a.width+a.height*a.height);});var contourPool=contours.slice(0);var containerChains=[];var containerChain=[];var containingContour,contained;contour=contourPool.pop();while(contourPool.length>-1){contained=false;if(contour){for(i=contours.length-1;i>-1;i--){containingContour=contours[i];if(contour!==containingContour&&_uti.AABBContains(contour.minX,contour.minY,contour.maxX,contour.maxY,containingContour.minX,containingContour.minY,containingContour.maxX,containingContour.maxY)){contained=true;break;}}
containerChain.push(contour);}
if(contained){_ut.arrayCautiousRemove(contourPool,containingContour);contour=containingContour;}
else{if(containerChain.length>1){containerChains.push(containerChain);}
if(contourPool.length>0){containerChain=[];contour=contourPool.pop();}
else{break;}}}
var contoursReversed=[];var contoursRemoved=[];for(i=0,il=containerChains.length;i<il;i++){containerChain=containerChains[i];var outerBoundary=containerChain[containerChain.length-1];var innerBoundary=containerChain[containerChain.length-2];if(containerChain.length%2===0){j=0;}
else{j=1;}
for(jl=containerChain.length;j<jl;j+=2){contour=containerChain[j];if(_ut.indexOfValue(contoursReversed,contour)===-1){contour.vertices.reverse();contoursReversed.push(contour);}}
if(!options.retainBoundaryOuter&&_ut.indexOfValue(contoursRemoved,outerBoundary)===-1){contoursRemoved.push(outerBoundary);_ut.arrayCautiousRemove(contours,outerBoundary);}
if(options.discardBoundaryInner&&_ut.indexOfValue(contoursRemoved,innerBoundary)===-1){contoursRemoved.push(innerBoundary);_ut.arrayCautiousRemove(contours,innerBoundary);}
if(options.discardEdgesInner&&containerChain.length>2){var otherContours=containerChain.slice(0,containerChain.length-2);contoursRemoved=contoursRemoved.concat(otherContours);_ut.arrayCautiousRemoveMulti(contours,otherContours);}}
for(i=0,il=contours.length;i<il;i++){contour=contours[i];contourVertices=contour.vertices;if(!options.discardCollinear){sva=contourVertices[0];for(j=contourVertices.length-1;j>0;j--){va=contourVertices[j];vb=contourVertices[j-1];if(_utv2.pointsCW(sva,va,vb)===0){contourVertices.splice(j,1);}
else{sva=va;}
va=vb;}
if(_utv2.pointsCW(contourVertices[j+1],contourVertices[j],contourVertices[contourVertices.length-1])===0){contourVertices.splice(0,1);}}
if(options.reverse){contourVertices.reverse();}
var minX=contour.minX;var minY=contour.minY;var width=contour.width;var height=contour.height;for(j=0,jl=contourVertices.length;j<jl;j++){va=contourVertices[j];va.x-=minX+width*0.5;va.y-=minY+height*0.5;}}}
return contours;};ig.utilstile.shapeFromTile=function(tileId,tileDefs){var i,il;var vertices=ig.utilstile.verticesFromTile(tileId,tileDefs);var segments;if(vertices){if(ig.utilstile.defaultTileSegmentsDef[tileId]){segments=ig.utilstile.defaultTileSegmentsDef[tileId];}
else{ig.utilstile.defaultTileSegmentsDef[tileId]=segments=[];for(i=0,il=vertices.length;i<il;i++){var va=vertices[i];var indexB=i===il-1?0:i+1;var vb=vertices[indexB];var dx=vb.x-va.x;var dy=vb.y-va.y;var l=Math.sqrt(dx*dx+dy*dy);var nx;var ny;if(l>0){nx=dy/l;ny=-dx/l;}
else{nx=ny=0;}
segments.push({a:i,b:indexB,normal:{x:nx,y:ny}});}}}
return{vertices:vertices,segments:segments||[]};};ig.utilstile.verticesFromTile=function(tileId,tileDefs){if(tileDefs==='undefined'){tileDefs=_collisionMapTileDef;}
var vertices;if(ig.utilstile.defaultTileVerticesDef[tileId]){vertices=ig.utilstile.defaultTileVerticesDef[tileId];}
else{if(parseInt(tileId)===1||HASH_CLIMBABLE[tileId]){vertices=[{x:0,y:0},{x:1,y:0},{x:1,y:1},{x:0,y:1}];}
else{vertices=[];var def=tileDefs[tileId];if(def){var va=vertices[0]={x:def[0],y:def[1]};var vb=vertices[1]={x:def[2],y:def[3]};var ax=va.x;var ay=va.y;var bx=vb.x;var by=vb.y;var fx=bx-ax;var fy=by-ay;var vc=vertices[2]={x:(fy<0?1:0),y:(fx>0?1:0)};var cx=vc.x;var cy=vc.y;var vd,ve,dax,day,dbx,dby;var fiveSided=false;if(Math.abs(fx)<1&&Math.abs(fy)<1){var quadrantA=_utv2.pointQuadrant(ax,ay,0.5,0.5);var quadrantB=_utv2.pointQuadrant(bx,by,0.5,0.5);var quadrantC=_utv2.pointQuadrant(cx,cy,0.5,0.5);if(!(quadrantA&quadrantC)&&!(quadrantB&quadrantC)){fiveSided=true;}}
if(fiveSided===true){if(cx!==cy){dax=cx;dby=cy;if(cx==1){day=1;dbx=0;}
else{day=0;dbx=1;}}
else{day=cy;dbx=cx;if(cx==1){dax=0;dby=0;}
else{dax=1;dby=1;}}
vd=vertices[3]={x:dax,y:day};ve=vertices[4]={x:dbx,y:dby};}
else{if(cx!==cy){dax=cx;dby=cy;if(cx==1){day=Math.max(ay,by);dbx=Math.min(ax,bx);}
else{day=Math.min(ay,by);dbx=Math.max(ax,bx);}}
else{day=cy;dbx=cx;if(cx==1){dax=Math.min(ax,bx);dby=Math.min(ay,by);}
else{dax=Math.max(ax,bx);dby=Math.max(ay,by);}}
if((dax===ax&&day===ay)||(dax===bx&&day===by)){if(!((dbx===ax&&dby===ay)||(dbx===bx&&dby===by))){vd=vertices[3]={x:dbx,y:dby};}}
else{vd=vertices[3]={x:dax,y:day};}}
vertices=_utv2.pointsToConvexHull(vertices);}}
ig.utilstile.defaultTileVerticesDef[tileId]=vertices;}
return vertices;};ig.utilstile.getNonDuplicateSegmentVertices=function(tile,tileData,tilesAllowed){var ix=tile.ix;var iy=tile.iy;var shape=tile.shape;var vertices=shape.vertices;var segments=shape.segments;var nonDuplicates=[];var i,il;var j,jl;for(i=0,il=segments.length;i<il;i++){var segment=segments[i];var va=vertices[segment.a];var vb=vertices[segment.b];var normal=segment.normal;var overlap=false;if((normal.x===0&&normal.y!==0)||(normal.x!==0&&normal.y===0)){var touchingTiles=ig.utilstile.getTouchingTilesByDirection(tile,normal,tileData,tilesAllowed);for(j=0,jl=touchingTiles.length;j<jl;j++){var touchingTile=touchingTiles[j];if(touchingTile.shape.vertices.length>0){overlap=ig.utilstile.getSegmentOverlapWithTile(va,vb,normal,touchingTile);if(overlap)break;}}}
if(overlap===false){nonDuplicates.push(va,vb);}
else if(overlap.segmentA){nonDuplicates.push(overlap.segmentA.va,overlap.segmentA.vb);}}
return nonDuplicates;};ig.utilstile.getTouchingTilesByDirection=function(tile,direction,tileData,tilesAllowed){var ix=tile.ix;var iy=tile.iy;var nx=direction.x;var ny=direction.y;var touchingTiles=[];var touchingTile;var row;if(nx!==0){row=tileData[iy];if(nx>0){if(ix<row.length-1){touchingTile=row[ix+1];if(!tilesAllowed||_ut.indexOfValue(tilesAllowed,touchingTile)!==-1){touchingTiles.push(touchingTile);}}}
else{if(ix>0){touchingTile=row[ix-1];if(!tilesAllowed||_ut.indexOfValue(tilesAllowed,touchingTile)!==-1){touchingTiles.push(touchingTile);}}}}
if(ny!==0){if(ny>0){if(iy<tileData.length-1){touchingTile=tileData[iy+1][ix];if(!tilesAllowed||_ut.indexOfValue(tilesAllowed,touchingTile)!==-1){touchingTiles.push(touchingTile);}}}
else{if(iy>0){touchingTile=tileData[iy-1][ix];if(!tilesAllowed||_ut.indexOfValue(tilesAllowed,touchingTile)!==-1){touchingTiles.push(touchingTile);}}}}
return touchingTiles;};ig.utilstile.getSegmentOverlapWithTile=function(vaA,vbA,normalCompare,tile){var overlap=false;var shape=tile.shape;var vertices=shape.vertices;var segments=shape.segments;var i,il;var segmentPotential,normal,segment;for(i=0,il=segments.length;i<il;i++){segmentPotential=segments[i];normal=segmentPotential.normal;if(normalCompare.x===-normal.x&&normalCompare.y===-normal.y){segment=segmentPotential;break;}}
if(segment){var vaB=vertices[segment.a];var vbB=vertices[segment.b];var xaA=vaA.x;var yaA=vaA.y;var xbA=vbA.x;var ybA=vbA.y;var xaB=vaB.x;var yaB=vaB.y;var xbB=vbB.x;var ybB=vbB.y;var xlA=xbA-xaA;var ylA=ybA-yaA;var lenA=Math.sqrt(xlA*xlA+ylA*ylA);var xnA=xlA/lenA;var ynA=ylA/lenA;var xlB=xaB-xbB;var ylB=yaB-ybB;var lenB=Math.sqrt(xlB*xlB+ylB*ylB);var xnB=xlB/lenB;var ynB=ylB/lenB;var cross=xnA*ynB-ynA*xnB;if(cross===0){var saebMin,saebMax,easbMin,easbMax,normal;var minCompare,maxCompare,property;if(xnA!==0){saebMin=Math.min(xaA,xbB);saebMax=Math.max(xaA,xbB);easbMin=Math.min(xbA,xaB);easbMax=Math.max(xbA,xaB);normal=xnA;minCompare=xaA;maxCompare=xbA;property='x';}
else{saebMin=Math.min(yaA,ybB);saebMax=Math.max(yaA,ybB);easbMin=Math.min(ybA,yaB);easbMax=Math.max(ybA,yaB);normal=ynA;minCompare=yaA;maxCompare=ybA;property='y';}
if(saebMin===saebMax&&easbMin===easbMax){overlap=true;}
else{var overlappingBy=normal<0?saebMin-easbMax:easbMin-saebMax;if(overlappingBy>0){overlap={segmentA:{va:{x:vaA.x,y:vaA.y},vb:{x:vbA.x,y:vbA.y}},segmentB:{va:{x:vaB.x,y:vaB.y},vb:{x:vbB.x,y:vbB.y}}};var min,max;var wipeout=true;if(normal<0){min=saebMin===saebMax?0:(saebMin===minCompare?SEGMENT_B:SEGMENT_A);max=easbMin===easbMax?0:(easbMax===maxCompare?SEGMENT_B:SEGMENT_A);if(min===SEGMENT_A){overlap.segmentA.vb[property]+=overlappingBy;wipeout=false;}
else if(min===SEGMENT_B){overlap.segmentB.va[property]+=overlappingBy;}
if(max===SEGMENT_A){overlap.segmentA.va[property]-=overlappingBy;wipeout=false;}
else if(max===SEGMENT_B){overlap.segmentB.vb[property]-=overlappingBy;}
if(wipeout===true){overlap=true;}}
else{min=saebMin===saebMax?0:(saebMin===minCompare?SEGMENT_A:SEGMENT_B);max=easbMin===easbMax?0:(easbMax===maxCompare?SEGMENT_A:SEGMENT_B);if(min===SEGMENT_A){overlap.segmentA.vb[property]-=overlappingBy;wipeout=false;}
else if(min===SEGMENT_B){overlap.segmentB.va[property]-=overlappingBy;}
if(max===SEGMENT_A){overlap.segmentA.va[property]+=overlappingBy;wipeout=false;}
else if(max===SEGMENT_B){overlap.segmentB.vb[property]+=overlappingBy;}
if(wipeout===true){overlap=true;}}}}}}
return overlap;};});

// lib/plusplus/core/entity.js
ig.baked=true;ig.module('plusplus.core.entity').requires('impact.entity','plusplus.core.config','plusplus.core.image','plusplus.core.background-map','plusplus.core.animation','plusplus.helpers.signals','plusplus.helpers.tweens','plusplus.helpers.utils','plusplus.helpers.utilsmath','plusplus.helpers.utilsvector2','plusplus.helpers.utilsintersection','plusplus.helpers.utilsdraw','plusplus.helpers.utilscolor','plusplus.helpers.utilstile').defines(function(){"use strict";var _c=ig.CONFIG;var _tw=ig.TWEEN;var _ut=ig.utils;var _utm=ig.utilsmath;var _utv2=ig.utilsvector2;var _uti=ig.utilsintersection;var _utd=ig.utilsdraw;var _utc=ig.utilscolor;var _utt=ig.utilstile;ig.EntityExtended=ig.Entity.extend({layerName:'entities',pos:{x:0.01,y:0.01},size:{x:_c.ENTITY.SIZE_EFFECTIVE_X,y:_c.ENTITY.SIZE_EFFECTIVE_Y},offset:{x:_c.ENTITY.SIZE_OFFSET_X,y:_c.ENTITY.SIZE_OFFSET_Y},posDraw:{x:0.01,y:0.01},sizeDraw:{x:0,y:0},scale:_c.ENTITY.SCALE,scaleOfSystemScale:_c.ENTITY.SCALE_OF_SYSTEM_SCALE,scaleMin:_c.ENTITY.SCALE_MIN,scaleMax:_c.ENTITY.SCALE_MAX,scaleMod:1,ignoreSystemScale:_c.ENTITY.IGNORE_SYSTEM_SCALE,collides:0,collidesChanges:false,collisionMapResult:null,checkAgainst:0,type:0,group:0,frozen:false,controllable:true,performance:_c.STATIC,highPerformance:false,fixed:false,facing:{x:1,y:0},canFlipX:_c.ENTITY.CAN_FLIP_X,canFlipY:_c.ENTITY.CAN_FLIP_Y,friction:{x:_c.ENTITY.FRICTION_X,y:_c.ENTITY.FRICTION_Y},maxVel:{x:_c.ENTITY.MAX_VEL_X,y:_c.ENTITY.MAX_VEL_Y},angle:0,bounciness:_c.ENTITY.BOUNCINESS,minBounceVelocity:_c.ENTITY.MIN_BOUNCE_VEL,currentAnim:null,overridingAnim:null,animSheetPath:'',animSheetWidth:0,animSheetHeight:0,animSettings:null,animationType:0,animationTypes:null,animSequenceCount:1,animTileOffset:0,animFrameTime:1,animInit:'',textured:false,persistent:false,targetable:false,climbable:false,climbableStairs:false,oneWay:false,oneWayFacing:null,opaque:_c.ENTITY.OPAQUE,opaqueOffset:_c.ENTITY.OPAQUE_OFFSET,opaqueVertices:null,opaqueFromVertices:_c.ENTITY.OPAQUE_FROM_VERTICES,diffuse:_c.ENTITY.DIFFUSE,hollow:true,activated:false,alwaysToggleActivate:false,activateCallback:null,activateContext:null,deactivateCallback:false,deactivateContext:false,alpha:1,hidden:false,health:_c.ENTITY.HEALTH,healthMax:_c.ENTITY.HEALTH,invulnerable:false,rangeInteractableX:0,rangeInteractableY:0,paused:false,visible:false,changed:false,checking:false,wasChecking:false,intersecting:false,added:false,dieing:false,dieingSilently:false,canDieInstantly:true,flip:{x:false,y:false},grounded:_c.TOP_DOWN,standing:_c.TOP_DOWN,gravityFactor:_c.TOP_DOWN?0:1,hasGravity:_c.TOP_DOWN?false:true,collidingWithMap:false,collidingWithEntitiesBelow:false,slope:null,slopeSticking:_c.ENTITY.SLOPE_STICKING,slopeSpeedMod:_c.ENTITY.SLOPE_SPEED_MOD,slopeStanding:{min:_utm.degreesToRadians(_c.ENTITY.SLOPE_STANDING_MIN),max:_utm.degreesToRadians(_c.ENTITY.SLOPE_STANDING_MAX)},moving:false,movingX:false,movingY:false,movingTo:null,movedTo:true,movingToOnce:false,movingToTweening:false,movingToTweenPct:0,linkedTo:null,managed:false,tweens:{},resetState:{},needsVertices:_c.ENTITY.NEEDS_VERTICES,vertices:null,verticesWorld:null,onAdded:null,onRemoved:null,onMovedTo:null,onRefreshed:null,needsRebuild:true,_posLast:{x:0,y:0},_angleLast:0,_changedAdd:false,_verticesFound:false,_overridedAnim:false,_cleanupPersistent:false,init:function(x,y,settings){this.id=++ig.Entity._lastId;this.initTypes();this.initProperties();this.reset(x,y,settings);},initTypes:function(){},initProperties:function(){this.collisionMapResult={collision:{x:false,y:false,slope:false},pos:{x:0.0,y:0.0},slope:{x:0.0,y:0.0,nx:0.0,ny:0.0},tile:{x:0,y:0,xPos:{x:0.0,y:0.0},yPos:{x:0.0,y:0.0}}};this.onAdded=new ig.Signal();this.onRemoved=new ig.Signal();this.onMovedTo=new ig.Signal();this.onRefreshed=new ig.Signal();},reset:function(x,y,settings){this.resetCore(x,y,settings);this.resetExtras();},resetCore:function(x,y,settings){ig.merge(this,this.resetState);if(x){this.pos.x=x;}
if(y){this.pos.y=y;}
if(settings&&!ig.global.wm){if(typeof settings.type==='string'){_ut.addType(ig.EntityExtended,this,'type',settings.type);delete settings.type;}
if(typeof settings.checkAgainst==='string'){_ut.addType(ig.EntityExtended,this,'checkAgainst',settings.checkAgainst);delete settings.checkAgainst;}
if(typeof settings.group==='string'){_ut.addType(ig.EntityExtended,this,'group',settings.group,"GROUP");delete settings.group;}}
ig.merge(this,settings);this._killed=this.dieing=this.dieingSilently=false;},resetExtras:function(){this.healthMax=this.health;if(this.performance===ig.EntityExtended.PERFORMANCE.DYNAMIC){this.fixed=false;}
if(this.fixed){this.collides=ig.EntityExtended.COLLIDES.NEVER;}
if(!this.hasGravity){this.setGrounded(true);}
if(this.animSheetPath){this.animSheet=new ig.AnimationSheet(_c.PATH_TO_MEDIA+this.animSheetPath,this.animSheetWidth,this.animSheetHeight);this.animSheetPath='';}
if(this.animSettings){this.anims={};this.resetState.currentAnim=null;if(this.animSettings===true){this.createAnim();}
else{for(var animName in this.animSettings){this.createAnim(animName,this.animSettings[animName]);}}
delete this.animSettings;}
this.recordResetState();if(!ig.global.wm){ig.system.onResized.add(this.refresh,this);}
this.refresh();if(this.frozen){this.changed=this._changedAdd=false;}
else{this.changed=this._changedAdd=true;}
if(this.activated){this.activated=false;this.activate();}},recordResetState:function(){var rs=this.resetState;if(!rs.pos){rs.pos={x:0,y:0};}
_utv2.copy(rs.pos,this.pos);if(!rs.vel){rs.vel={x:0,y:0};}
_utv2.copy(rs.vel,this.vel);if(!rs.accel){rs.accel={x:0,y:0};}
_utv2.copy(rs.accel,this.accel);rs.layerName=this.layerName;rs.frozen=this.frozen;rs.alpha=this.alpha;rs.type=this.type;rs.checkAgainst=this.checkAgainst;rs.collides=this.collides;rs.performance=this.performance;rs.health=this.health;},createAnim:function(name,settings){settings=settings||{};var sequence=settings.sequence;var tileOffset=settings.tileOffset||this.animTileOffset;var i,il;if(!sequence||!sequence.length){sequence=settings.sequence=[];var frameCount=settings.sequenceCount||this.animSequenceCount;var startFrame=0;var animationType=settings.type||this.animationType;if(animationType&&this.animationTypes){var orderIndex=_ut.indexOfValue(this.animationTypes,animationType);if(orderIndex!==-1){startFrame+=frameCount*orderIndex;}}
for(i=0;i<frameCount;i++){sequence[i]=startFrame+i;}}
if(tileOffset){for(i=0,il=sequence.length;i<il;i++){sequence[i]+=tileOffset;}}
settings.frameTime=settings.frameTime||this.animFrameTime;if(name){this.addAnim(name,settings);}
else{var idleAnim=this.addAnim("idle",settings);this.anims.idleX=idleAnim;this.anims.idleY=idleAnim;this.anims.idleLeft=idleAnim;this.anims.idleRight=idleAnim;this.anims.idleUp=idleAnim;this.anims.idleDown=idleAnim;}},addAnim:function(name,settings){if(!this.animSheet){throw('No animSheet to add the animation '+name+' to.');}
var animation=new ig.AnimationExtended(this.animSheet,settings);this.anims[name]=animation;if(!this.currentAnim){this.currentAnim=animation;}
return animation;},getDirectionalAnimName:function(animName){if(this.facing.y!==0){if(this.canFlipY){return animName+"Y";}
else if(this.facing.y<0){return animName+"Up";}
else{return animName+"Down";}}
else{if(this.canFlipX){return animName+"X";}
else if(this.facing.x<0){return animName+"Left";}
else{return animName+"Right";}}},refresh:function(force){if(!this.ignoreSystemScale){var scale=Math.min(Math.max(Math.round(ig.system.scale*this.scaleOfSystemScale),this.scaleMin),this.scaleMax);if(this.scale!==scale){this.scale=scale;force=true;}}
if(this.needsRebuild){force=true;}
this.scaleMod=this.scale/ig.system.scale;force=this.resize(force)||force;if(force||this.needsRebuild){this.sizeDraw.x=this.getSizeDrawX();this.sizeDraw.y=this.getSizeDrawY();}
force=this.reposition(force)||force;this.recordChanges(force);this.recordLast();_utv2.copy(this.last,this.pos);if(force||this.needsRebuild){this.rebuild();}
if(this.movingTo){this.moveToUpdate();}
this.onRefreshed.dispatch(this);if(this.frozen){this.changed=this.moving=this.movingX=this.movingY=false;this.facing.x=this.facing.y=0;}
else if(this.performance===ig.EntityExtended.PERFORMANCE.STATIC&&this.changed){this.moving=this.movingX=this.movingY=false;this._changedAdd=true;}},resize:function(force){return force;},reposition:function(force){if(this.movingTo){this.movedTo=false;}
return force;},rebuild:function(){this.needsRebuild=false;},adding:function(){this.ready();this.onAdded.dispatch(this);},ready:function(){this.changePerformance();if(this.linkedTo){var linkedTo=this.linkedTo;this.linkedTo=null;this.link(linkedTo,linkedTo.added);}
var animNameSpawn=this.getDirectionalAnimName("spawn");if(this.anims[animNameSpawn]){this.animOverride(animNameSpawn,{callback:this.spawn});}
else{this.spawn();}},spawn:function(){this.resetToInitAnim();},resetToInitAnim:function(){if(this.animInit instanceof ig.Animation){this.currentAnim=this.animInit;}
else if(this.animInit){this.currentAnim=this.anims[this.animInit];}
else{this.currentAnim=this.anims['idle']||this.currentAnim;}
if(this.currentAnim){this.resetState.currentAnim=this.currentAnim;var stop=this.currentAnim.stop;this.currentAnim.playFromStart();this.currentAnim.stop=stop;}},setPerformance:function(level){this.performance=level;if(this.performance!==this.performanceLast){this.changePerformance();}},changePerformance:function(){this.performanceLast=this.performance;if(this.performance===ig.EntityExtended.PERFORMANCE.MOVABLE){this.changePerformanceMovable();}
else if(this.performance===ig.EntityExtended.PERFORMANCE.DYNAMIC){this.changePerformanceDynamic();}
else{this.changePerformanceStatic();}},changePerformanceStatic:function(){},changePerformanceMovable:function(){},changePerformanceDynamic:function(){},setControllable:function(controllable){if(typeof controllable==='undefined'){controllable=true;}
if(!controllable){this.removeControl();}
else{this.addControl();}},addControl:function(){this.controllable=true;},removeControl:function(){this.controllable=false;this.applyAntiVelocity();},getLayer:function(){return ig.game.layersMap[this.layerName];},getVertices:function(){var sizeX=this.size.x*0.5;var sizeY=this.size.y*0.5;return[{x:-sizeX,y:-sizeY},{x:sizeX,y:-sizeY},{x:sizeX,y:sizeY},{x:-sizeX,y:sizeY}];},getVerticesWorld:function(){if(!this.vertices){this.vertices=this.getVertices();}
return _utv2.projectPoints(this.vertices,this.pos.x+this.size.x*0.5,this.pos.y+this.size.y*0.5,1,1,this.angle);},getSizeDrawX:function(){return this.size.x+this.offset.x*2;},getSizeDrawY:function(){return this.size.y+this.offset.y*2;},getPosDrawX:function(){return this.pos.x-this.offset.x;},getPosDrawY:function(){return this.pos.y-this.offset.y;},getCenterX:function(){return this.pos.x+this.size.x*0.5;},getCenterY:function(){return this.pos.y+this.size.y*0.5;},getIsVisible:function(){if(this.alpha<=0)return false;else{if(this.fixed){return _uti.AABBIntersect(this.posDraw.x,this.posDraw.y,this.posDraw.x+this.sizeDraw.x,this.posDraw.y+this.sizeDraw.y,0,0,ig.system.width,ig.system.height);}
else{var minX=this.posDraw.x-ig.game.screen.x;var minY=this.posDraw.y-ig.game.screen.y;return _uti.AABBIntersect(minX,minY,minX+this.sizeDraw.x,minY+this.sizeDraw.y,0,0,ig.system.width,ig.system.height);}}},getNewVelocity:function(vel,accel,friction,max){if(accel){return _utm.clamp(vel+accel*ig.system.tick,-max,max);}
else if(friction){var delta=friction*ig.system.tick;if(vel-delta>0){return Math.min(vel-delta,max);}
else if(vel+delta<0){return Math.max(vel+delta,-max);}
else{return 0;}}
return _utm.clamp(vel,-max,max);},getIsMovingSelf:function(){return this.performance===ig.EntityExtended.PERFORMANCE.DYNAMIC||this.movingTo;},getIsCollidingWithOneWay:function(entityOneWay){if(entityOneWay.oneWayFacing.x!==0){if(entityOneWay.oneWayFacing.x<0){if((this.pos.x+this.size.x)-entityOneWay.pos.x<=Math.max(entityOneWay.size.x,this.size.x)*_c.PRECISION_PCT_ONE_SIDED+Math.max(this.vel.x*ig.system.tick,0)-Math.min(entityOneWay.vel.x*ig.system.tick,0)){return true;}}
else if((entityOneWay.pos.x+entityOneWay.size.x)-this.pos.x<=Math.max(entityOneWay.size.x,this.size.x)*_c.PRECISION_PCT_ONE_SIDED-Math.min(this.vel.x*ig.system.tick,0)+Math.max(entityOneWay.vel.x*ig.system.tick,0)){return true;}}
if(entityOneWay.oneWayFacing.y!==0){if(entityOneWay.oneWayFacing.y<0){if((this.pos.y+this.size.y)-entityOneWay.pos.y<=entityOneWay.size.y*_c.PRECISION_PCT_ONE_SIDED+Math.max(this.vel.y*ig.system.tick,0)-Math.min(entityOneWay.vel.y*ig.system.tick,0)+(entityOneWay.slope&&entityOneWay.accel.x!==0&&entityOneWay.slope.nx*entityOneWay.vel.x<=0?entityOneWay.vel.x*ig.system.tick:0)){return true;}}
else if((entityOneWay.pos.y+entityOneWay.size.y)-this.pos.y<=Math.max(entityOneWay.size.y,this.size.y)*_c.PRECISION_PCT_ONE_SIDED-Math.min(this.vel.y*ig.system.tick,0)+Math.max(entityOneWay.vel.y*ig.system.tick,0)){return true;}}},touches:function(entity){return _uti.AABBIntersect(this.pos.x,this.pos.y,this.pos.x+this.size.x,this.pos.y+this.size.y,entity.pos.x,entity.pos.y,entity.pos.x+entity.size.x,entity.pos.y+entity.size.y);},distanceTo:function(from){var centerX=this.pos.x+this.size.x*0.5;var centerY=this.pos.y+this.size.y*0.5;if(this.fixed){centerX+=ig.game.screen.x;centerY+=ig.game.screen.y;}
var distanceX;var distanceY;if(from instanceof ig.EntityExtended){var fromCenterX=from.pos.x+from.size.x*0.5;var fromCenterY=from.pos.y+from.size.y*0.5;if(from.fixed){fromCenterX+=ig.game.screen.x;fromCenterY+=ig.game.screen.y;}
distanceX=centerX-fromCenterX;distanceY=centerY-fromCenterY;}
else{distanceX=centerX-from.x;distanceY=centerY-from.y;}
return Math.sqrt(distanceX*distanceX+distanceY*distanceY);},distanceSquaredTo:function(from){var centerX=this.pos.x+this.size.x*0.5;var centerY=this.pos.y+this.size.y*0.5;if(this.fixed){centerX+=ig.game.screen.x;centerY+=ig.game.screen.y;}
var distanceX;var distanceY;if(from instanceof ig.EntityExtended){var fromCenterX=from.pos.x+from.size.x*0.5;var fromCenterY=from.pos.y+from.size.y*0.5;if(from.fixed){fromCenterX+=ig.game.screen.x;fromCenterY+=ig.game.screen.y;}
distanceX=centerX-fromCenterX;distanceY=centerY-fromCenterY;}
else{distanceX=centerX-from.x;distanceY=centerY-from.y;}
return distanceX*distanceX+distanceY*distanceY;},distanceEdgeTo:function(from){var minX;var maxX;var minY;var maxY;if(this.fixed){minX=this.pos.x+ig.game.screen.x;maxX=minX+this.size.x;minY=this.pos.y+ig.game.screen.y;maxY=minY+this.size.y;}
else{minX=this.pos.x;maxX=minX+this.size.x;minY=this.pos.y;maxY=minY+this.size.y;}
var fromMinX;var fromMaxX;var fromMinY;var fromMaxY;if(from instanceof ig.EntityExtended){if(from.fixed){fromMinX=from.pos.x+ig.game.screen.x;fromMaxX=fromMinX+from.size.x;fromMinY=from.pos.y+ig.game.screen.y;fromMaxY=fromMinY+from.size.y;}
else{fromMinX=from.pos.x;fromMaxX=fromMinX+from.size.x;fromMinY=from.pos.y;fromMaxY=fromMinY+from.size.y;}}
else{fromMinX=fromMaxX=from.x;fromMinY=fromMaxY=from.y;}
var distanceX;var distanceY;if(maxX<fromMinX){distanceX=fromMinX-maxX;}
else if(minX>fromMaxX){distanceX=minX-fromMaxX;}
else{distanceX=0;}
if(maxY<fromMinY){distanceY=fromMinY-maxY;}
else if(minY>fromMaxY){distanceY=minY-fromMaxY;}
else{distanceY=0;}
return Math.sqrt(distanceX*distanceX+distanceY*distanceY);},distanceSquaredEdgeTo:function(from){var minX;var maxX;var minY;var maxY;if(this.fixed){minX=this.pos.x+ig.game.screen.x;maxX=minX+this.size.x;minY=this.pos.y+ig.game.screen.y;maxY=minY+this.size.y;}
else{minX=this.pos.x;maxX=minX+this.size.x;minY=this.pos.y;maxY=minY+this.size.y;}
var fromMinX;var fromMaxX;var fromMinY;var fromMaxY;if(from instanceof ig.EntityExtended){if(from.fixed){fromMinX=from.pos.x+ig.game.screen.x;fromMaxX=fromMinX+from.size.x;fromMinY=from.pos.y+ig.game.screen.y;fromMaxY=fromMinY+from.size.y;}
else{fromMinX=from.pos.x;fromMaxX=fromMinX+from.size.x;fromMinY=from.pos.y;fromMaxY=fromMinY+from.size.y;}}
else{fromMinX=fromMaxX=from.x;fromMinY=fromMaxY=from.y;}
var distanceX;var distanceY;if(maxX<fromMinX){distanceX=fromMinX-maxX;}
else if(minX>fromMaxX){distanceX=minX-fromMaxX;}
else{distanceX=0;}
if(maxY<fromMinY){distanceY=fromMinY-maxY;}
else if(minY>fromMaxY){distanceY=minY-fromMaxY;}
else{distanceY=0;}
return distanceX*distanceX+distanceY*distanceY;},angleTo:function(from){if(from instanceof ig.EntityExtended){return Math.atan2((this.pos.x+this.size.x*0.5)-(from.pos.x+from.size.x*0.5),(this.pos.y+this.size.y*0.5)-(from.pos.y+from.size.y*0.5));}
else{return Math.atan2((this.pos.x+this.size.x*0.5)-from.x,(this.pos.y+this.size.y*0.5)-from.y);}},applyAntiVelocity:function(){this.applyAntiVelocityX();this.applyAntiVelocityY();},applyAntiVelocityX:function(){this.vel.x=0;this.movingX=false;this.moving=this.movingY;},applyAntiVelocityY:function(){this.vel.y=0;this.movingY=false;this.moving=this.movingX;},applyAntiGravity:function(){if(this.gravityFactor!==0){this.vel.y-=ig.game.gravity*ig.system.tick*this.gravityFactor;}},setGrounded:function(withoutVelocity){if(_c.TOP_DOWN){this.standing=this.grounded=true;}
else{this.standing=this.grounded=this.hasGravity;if(!withoutVelocity){if(this.slopeSticking&&this.hasGravity){this.vel.y=this.maxVel.y;}
else{this.vel.y=0;}}}},setUngrounded:function(){if(!_c.TOP_DOWN){this.grounded=this.standing=false;}},animOverride:function(animName,settings){if(this.overridingAnimName!==animName&&((settings&&settings.entity)||this).anims[animName]){settings=settings||{};var entity=settings.entity||this;this.animRelease();this.overridingAnimName=animName;this.overridingAnimCallback=settings.callback;this.overridingAnimContext=settings.context;this.overridingAnimFrozen=this.frozen;this._overridedAnim=this.currentAnim;this.currentAnim=this.overridingAnim=entity.anims[animName];if(!settings.loop&&!settings.lock&&!settings.stop){this.overridingAnim.onCompleted.addOnce(this.animRelease,this);}
if(this.frozen){this.frozen=false;}
if(settings.frame){this.overridingAnim.gotoFrame(settings.frame);if(typeof settings.reverse==='boolean'){this.overridingAnim.reverse=settings.reverse;}}
else{this.overridingAnim.playFromStart(!settings.loop,settings.reverse);}
if(typeof settings.stop==='boolean'){this.overridingAnim.stop=settings.stop;}}
else if(settings&&typeof settings.callback==='function'){this.animRelease(animName,true);settings.callback.call(settings.context||this);}},animRelease:function(name,silent){if(!name||this.overridingAnimName===name){var callback=this.overridingAnimCallback;var context=this.overridingAnimContext;if(this.overridingAnimFrozen){this.frozen=this.overridingAnimFrozen;}
if(this.overridingAnim){this.overridingAnim.onCompleted.remove(this.animRelease,this);this.currentAnim=this._overridedAnim;this.overridingAnimName=this.overridingAnim=this._overridedAnim=this.overridingAnimCallback=this.overridingAnimContext=undefined;}
if(!silent&&callback){callback.call(context||this);}}},initOpaqueVertices:function(){this.opaqueVertices=[{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:0}];},getOpaqueVertices:function(){var width=this.size.x;var height=this.size.y;var x=this.pos.x;var y=this.pos.y;var opaqueOffset=this.opaqueOffset;if(this.currentAnim&&this.currentAnim.opaqueOffset){opaqueOffset=(this.currentAnim.opaqueOffset.tiles&&this.currentAnim.opaqueOffset.tiles[this.currentAnim.tile])||this.currentAnim.opaqueOffset;}
var minX=x+opaqueOffset.left;var minY=y+opaqueOffset.top;var maxX=x+width+opaqueOffset.right;var maxY=y+height+opaqueOffset.bottom;var cX=x+width*0.5;var cY=y+height*0.5;var tl=this.opaqueVertices[0];var tr=this.opaqueVertices[1];var br=this.opaqueVertices[2];var bl=this.opaqueVertices[3];if(this.angle!==0){var cos=Math.cos(this.angle);var sin=Math.sin(this.angle);var dminX=minX-cX;var dminY=minY-cY;var dmaxX=maxX-cX;var dmaxY=maxY-cY;tl.x=cX+dminX*cos-dminY*sin;tl.y=cY+dminX*sin+dminY*cos;tr.x=cX+dmaxX*cos-dminY*sin;tr.y=cY+dmaxX*sin+dminY*cos;br.x=cX+dmaxX*cos-dmaxY*sin;br.y=cY+dmaxX*sin+dmaxY*cos;bl.x=cX+dminX*cos-dmaxY*sin;bl.y=cY+dminX*sin+dmaxY*cos;}
else{tl.x=minX;tl.y=minY;tr.x=maxX;tr.y=minY;br.x=maxX;br.y=maxY;bl.x=minX;bl.y=maxY;}
return this.opaqueVertices;},castShadow:function(light,context,point,minX,minY,radius){if(!this._contours){this._utilVec2Cast1={x:0,y:0};this._utilVec2Cast2={x:0,y:0};this._utilVec2Cast3={x:0,y:0};this._utilVec2Cast4={x:0,y:0};this._utilVec2Project1={x:0,y:0};this._utilVec2Project2={x:0,y:0};this._utilVec2Project3={x:0,y:0};this._utilVec2Project4={x:0,y:0};this._contourPool=[];this._contours=[];}
if(this.opaqueFromVertices){if(!this._verticesFound){this.opaqueVertices=this.verticesWorld=this.getVerticesWorld();}}
else{if(!this.opaqueVertices){this.initOpaqueVertices();}
if(!this._verticesFound){this.getOpaqueVertices();}}
this._verticesFound=true;if(!this.hollow&&_uti.pointInPolygon(point.x,point.y,this.opaqueVertices)){return;}
var alpha=this.diffuse>=1||light.diffuse>=1?1:this.diffuse*light.diffuse;var opaqueVertices=this.opaqueVertices;var maxX=minX+radius*2;var maxY=minY+radius*2;var withinLight=false;var contourPool=this._contourPool,contours=this._contours;var contour,contourVertices;var contourOther,contourOtherVertices;var oa,ob,oc,od,combined;var a=opaqueVertices[opaqueVertices.length-1],b,c,d;var i,il,j,jl,k,kl;for(i=0,il=opaqueVertices.length;i<il;i++){b=opaqueVertices[i];var abMinX;var abMinY;var abMaxX;var abMaxY;if(a.x<b.x){abMinX=a.x;abMaxX=b.x;}
else{abMinX=b.x;abMaxX=a.x;}
if(a.y<b.y){abMinY=a.y;abMaxY=b.y;}
else{abMinY=b.y;abMaxY=a.y;}
if(_uti.AABBIntersect(abMinX,abMinY,abMaxX,abMaxY,minX,minY,maxX,maxY)){withinLight=true;var aToB=_utv2.copy(this._utilVec2Cast1,b);_utv2.subtract(aToB,a);var normal=_utv2.set(this._utilVec2Cast2,aToB.y,-aToB.x);var pointToA=_utv2.copy(this._utilVec2Cast3,a);_utv2.subtract(pointToA,point);if(_utv2.dot(normal,pointToA)>0){var pointToB=_utv2.copy(this._utilVec2Cast4,b);_utv2.subtract(pointToB,point);contourPool.push({vertices:this.projectShadow(point,radius,a,b,pointToA,pointToB,aToB),verticesActual:[a,b],verticesHollow:[]});}}
a=b;}
if(withinLight){for(i=0,il=contourPool.length;i<il;i++){contour=contourPool[i];contourVertices=contour.vertices;combined=false;a=contourVertices[0];b=contourVertices[1];c=contourVertices[contourVertices.length-2];d=contourVertices[contourVertices.length-1];for(j=i+1;j<il;j++){contourOther=contourPool[j];contourOtherVertices=contourOther.vertices;oa=contourOtherVertices[0];ob=contourOtherVertices[1];oc=contourOtherVertices[contourOtherVertices.length-2];od=contourOtherVertices[contourOtherVertices.length-1];if(_utv2.equal(a,od)&&_utv2.equal(b,oc)){combined=true;contourPool[j]={vertices:contourOtherVertices.slice(0,-1).concat(contourVertices.slice(2)),verticesActual:contourOther.verticesActual.slice(0,-1).concat(contour.verticesActual),verticesHollow:contour.verticesHollow.concat(a,contourOther.verticesHollow)};break;}
else if(_utv2.equal(c,ob)&&_utv2.equal(d,oa)){combined=true;contourPool[j]={vertices:contourVertices.slice(0,-1).concat(contourOtherVertices.slice(2)),verticesActual:contour.verticesActual.slice(0,-1).concat(contourOther.verticesActual),verticesHollow:contourOther.verticesHollow.concat(d,contour.verticesHollow)};break;}}
if(combined!==true){contours.push(contour);}}
if(!this.hollow){var vertices=opaqueVertices.slice(0);var connections={};var connection=[];var connected=false;for(i=0,il=vertices.length;i<il;i++){var vertex=vertices[i];var matched=false;for(j=0,jl=contours.length;j<jl;j++){contour=contours[j];var contourVerticesActual=contour.verticesActual;for(k=0,kl=contourVerticesActual.length;k<kl;k++){var vertexActual=contourVerticesActual[k];if(vertex.x===vertexActual.x&&vertex.y===vertexActual.y){matched=true;if(connection){connections[j===0?jl-1:j-1]=connection;connection=undefined;connected=true;}
break;}}
if(matched===true){break;}}
if(matched===false){if(!connection){connection=[];}
connection.push(vertex);}}
if(connection){connections[jl-1]=connection!==connections[jl-1]?connection.concat(connections[jl-1]||[]):connection;}
if(connected){var contourConnected={vertices:[]};for(i=0,il=contours.length;i<il;i++){contour=contours[i];contourConnected.vertices=contourConnected.vertices.concat(contour.vertices,connections[i]||[]);}
contours=[contourConnected];}
else{contours.push({vertices:vertices});}}
else{for(i=0,il=contours.length;i<il;i++){contour=contours[i];contour.vertices=contour.vertices.concat(contour.verticesHollow);}}
if(light.pixelPerfect){for(i=0,il=contours.length;i<il;i++){contour=contours[i];_utd.pixelFillPolygon(context,minX,minY,maxX,maxY,contour.vertices,1,1,1,alpha,true,_uti.boundsOfPoints(contour.vertices));}}
else{context.fillStyle=_utc.RGBAToCSS(1,1,1,alpha);for(i=0,il=contours.length;i<il;i++){contour=contours[i];_utd.fillPolygon(context,contour.vertices,-minX,-minY,light.scale);}}
contourPool.length=contours.length=0;}},projectShadow:function(point,radius,a,b,pointToA,pointToB,aToB){var pointToAB=this._utilVec2Project1;var invOriginToA=_utv2.copy(this._utilVec2Project2,pointToA);_utv2.inverse(invOriginToA);var t=_utv2.dot(aToB,invOriginToA)/_utv2.lengthSquared(aToB);if(t<0){_utv2.copy(pointToAB,a);}
else if(t>1){_utv2.copy(pointToAB,b);}
else{_utv2.copy(pointToAB,a);var n=_utv2.copy(this._utilVec2Project3,aToB);_utv2.multiplyScalar(n,t)
_utv2.add(pointToAB,n);}
var pointToM=_utv2.copy(this._utilVec2Project4,pointToAB);_utv2.subtract(pointToM,point);_utv2.normalize(pointToM);_utv2.multiplyScalar(pointToM,radius);_utv2.normalize(pointToA);_utv2.multiplyScalar(pointToA,radius);_utv2.normalize(pointToB);_utv2.multiplyScalar(pointToB,radius);var ap=_utv2.clone(a);_utv2.add(ap,pointToA);var bp=_utv2.clone(b);_utv2.add(bp,pointToB);var oam,obm;if(t<0){obm=_utv2.clone(b);_utv2.add(obm,pointToM);return[a,ap,obm,bp,b];}
else if(t>1){oam=_utv2.clone(a);_utv2.add(oam,pointToM);return[a,ap,oam,bp,b];}
else{oam=_utv2.clone(a);_utv2.add(oam,pointToM);obm=_utv2.clone(b);_utv2.add(obm,pointToM);return[a,ap,oam,obm,bp,b];}},activate:function(entity){this.activated=true;if(this.activateCallback){this.activateCallback.call(this.activateContext||this,entity);}},deactivate:function(entity){this.activated=false;if(this.deactivateCallback){this.deactivateCallback.call(this.deactivateContext||this,entity);}},toggleActivate:function(entity){if(!this.alwaysToggleActivate&&this.activated){this.deactivate(entity);}
else{this.activate(entity);}},setHidden:function(hidden){if(hidden){this.hide();}
else{this.unhide();}},hide:function(){this.hidden=true;},unhide:function(){this.hidden=false;},fadeTo:function(alpha,settings){if(this.alpha!==alpha){settings=ig.merge({name:'fade',duration:_c.DURATION_FADE},settings);return this.tween({alpha:alpha||0},settings);}
else if(settings){if(settings.onUpdate){settings.onUpdate();}
if(settings.onComplete){settings.onComplete();}}},fadeIn:function(settings){return this.fadeTo(1,settings);},fadeOut:function(settings){return this.fadeTo(0,settings);},fadeToDeath:function(settings){settings=settings||{};var me=this;var onCompleteOriginal=settings.onComplete;settings.onComplete=function(){ig.game.removeEntity(me);if(onCompleteOriginal){onCompleteOriginal();}};return this.fadeTo(0,settings);},tween:function(properties,settings){var me=this;settings=settings||{};var name=settings.name||'tween';var tween=this.tweens[name];if(tween){tween.stop();}
if(!settings.noComplete){var onComplete=settings.onComplete;settings.onComplete=function(){delete me.tweens[name];if(typeof onComplete==='function'){onComplete();}};}
return this.tweens[name]=_tw.tween(this,properties,settings);},tweenEnd:function(name){if(typeof name==='string'){var tween=this.tweens[name];if(tween){tween.stop();delete this.tweens[name];}}
else{for(name in this.tweens){this.tweenEnd(name);}}},moveTo:function(item,settings){if(item&&this.movingTo!==item){this.moveToStop();settings=settings||{};if(_ut.isArray(item)){if(item.length===0){return;}
this.movingToSequence=item.slice(0);item=this.movingToSequence.shift();if(this.movingTo===item){return;}
this.movingToOnce=true;}
if(typeof settings.once!=='undefined'){this.movingToOnce=settings.once;}
var singleMove=!this.fixed&&this.performance===ig.EntityExtended.PERFORMANCE.STATIC;if(item instanceof ig.EntityExtended){if((settings.matchPerformance||this.ignoreSystemScale||this.scale!==ig.system.scale)&&this.performance!==ig.EntityExtended.PERFORMANCE.MOVABLE){this.setPerformance(ig.EntityExtended.PERFORMANCE.MOVABLE);singleMove=false;}}
if(settings.randomOffsetPct){settings.baseOffsetPct=settings.baseOffsetPct||settings.offsetPct||{x:0,y:0};var randomOffsetPct=settings.randomOffsetPct;randomOffsetPct.x=randomOffsetPct.x||0;randomOffsetPct.y=randomOffsetPct.y||0;settings.offsetPct={x:settings.baseOffsetPct.x+(Math.random()*2*randomOffsetPct.x-randomOffsetPct.x),y:settings.baseOffsetPct.y+(Math.random()*2*randomOffsetPct.y-randomOffsetPct.y)};}
if(singleMove&&!settings.lerp&&!settings.tween){this.moveToPosition(item,settings);this.recordChanges();}
else{this.frozen=false;this.movingTo=item;this.movedTo=false;this.movingToSettings=settings;if(settings.tween&&this.performance!==ig.EntityExtended.PERFORMANCE.DYNAMIC){this.movingToTweening=true;this.movingToTweenPct=0;this.movingToTweenX=this.pos.x;this.movingToTweenY=this.pos.y;var tweenSettings=settings.tweenSettings=settings.tweenSettings||{};tweenSettings.name="movingTo";tweenSettings.onComplete=function(){this.moveToUpdate();this.moveToComplete();}.bind(this);this.tween({movingToTweenPct:1},tweenSettings);}
return true;}}
return false;},moveToSequenceNext:function(){if(this.movingToSequence){if(this.movingToSequence.length>0){this.movingTo=null;this.moveTo(this.movingToSequence.shift(),this.movingToSettings);}
else{this.movingToSequence=undefined;this.moveToComplete();this.moveToStop();}}},moveToUpdate:function(){if(this.movingTo&&(!this.movedTo||this.movingTo.changed)){this.moveToPosition(this.movingTo,this.movingToSettings);}},moveToPosition:function(item,settings){var targetX=0;var targetY=0;var alignX=0.5;var alignY=0.5;if(item instanceof ig.EntityExtended){if(settings){var align=settings.align;if(align){if(typeof align.x!=='undefined'){alignX=align.x;}
if(typeof align.y!=='undefined'){alignY=align.y;}}
var offset=settings.offset;if(offset){targetX+=offset.x*item.scaleMod||0;targetY+=offset.y*item.scaleMod||0;}
var offsetPct=settings.offsetPct;if(offsetPct){var offsetX=offsetPct.x||0;var offsetY=offsetPct.y||0;targetX+=(offsetX*(item.size.x*0.5*item.scaleMod+this.size.x*0.5*this.scaleMod))*(item.flip.x?-1:1);targetY+=offsetY*(item.size.y*0.5*item.scaleMod+this.size.y*0.5*this.scaleMod);}
if(settings.flipWith){this.flip.x=item.flip.x;this.flip.y=item.flip.y;}}
targetX+=item.pos.x+alignX*(item.size.x*item.scaleMod-this.size.x*this.scaleMod);targetY+=item.pos.y+alignY*(item.size.y*item.scaleMod-this.size.y*this.scaleMod);if(this.fixed){if(!item.fixed){targetX-=ig.game.screen.x;targetY-=ig.game.screen.y;}}
else{if(item.fixed){targetX+=ig.game.screen.x;targetY+=ig.game.screen.y;}}}
else{if(settings){var align=settings.align;if(align){if(typeof align.x!=='undefined'){alignX=align.x;}
if(typeof align.y!=='undefined'){alignY=align.y;}}
var offset=settings.offset;if(offset){targetX+=offset.x||0;targetY+=offset.y||0;}
var offsetPct=settings.offsetPct;if(offsetPct){var offsetX=offsetPct.x||0;var offsetY=offsetPct.y||0;targetX+=offsetX*this.size.x*0.5;targetY+=offsetY*this.size.y*0.5;}}
targetX+=item.x+alignX*this.size.x;targetY+=item.y+alignY*this.size.y;if(this.fixed){targetX-=ig.game.screen.x;targetY-=ig.game.screen.y;}}
var dx=targetX-this.pos.x;var dy=targetY-this.pos.y;if(this.movingToTweening){this.pos.x=this.movingToTweenX+(targetX-this.movingToTweenX)*this.movingToTweenPct;this.pos.y=this.movingToTweenY+(targetY-this.movingToTweenY)*this.movingToTweenPct;}
else if(settings&&settings.lerp){this.pos.x+=dx*settings.lerp;this.pos.y+=dy*settings.lerp;}
else{this.pos.x=targetX;this.pos.y=targetY;}
if(_utm.almostEqual(dx,0,_c.PRECISION_ZERO)&&_utm.almostEqual(dy,0,_c.PRECISION_ZERO)){this.moveToComplete();}},moveToComplete:function(){if(this.movingToSequence){this.moveToSequenceNext();}
else{if(this.movingToOnce){this.moveToStop();}
this.movedTo=true;this.onMovedTo.dispatch(this);return true;}},moveToStop:function(){if(this.movingTo){if(this.movingToTweening){this.tweenEnd("movingTo");this.movingToTweenPct=this.movingToTweenX=this.movingToTweenY=0;}
this.movedTo=this.movingToTweening=this.movingToOnce=false;this.movingTo=this.movingToSettings=this.movingToSequence=null;}},moveAllStop:function(){this.moveToStop();this.applyAntiVelocity();},lookAt:function(target){if(target&&this!==target&&!target.fixed){var centerX=this.pos.x+this.size.x*0.5;var centerY;var targetCenterX;var targetCenterY;if(_c.TOP_DOWN){centerY=this.pos.y+this.size.y*0.5;if(target instanceof ig.EntityExtended){targetCenterX=target.pos.x+target.size.x*0.5;targetCenterY=target.pos.y+target.size.y*0.5;}
else{targetCenterX=target.x;targetCenterY=target.y;}
var xDiff=centerX-targetCenterX;var yDiff=centerY-targetCenterY;if(Math.abs(xDiff)>Math.abs(yDiff)){this.facing.y=0;if(xDiff>0){this.flip.x=this.canFlipX;this.facing.x=-1;}
else{this.flip.x=false;this.facing.x=1;}}
else{this.facing.x=0;if(yDiff>0){this.flip.y=this.canFlipY;this.facing.y=-1;}
else{this.flip.y=false;this.facing.y=1;}}}
else{if(target instanceof ig.EntityExtended){targetCenterX=target.pos.x+target.size.x*0.5;}
else{targetCenterX=target.x;}
if(centerX>targetCenterX){this.flip.x=this.canFlipX;this.facing.x=-1;}
else{this.flip.x=false;this.facing.x=1;}}}},lineOfSight:function(entity){if(entity.hidden){return false;}
var collisionMap=ig.game.collisionMap;var tilesize=collisionMap.tilesize;var cX=((this.pos.x+this.size.x*0.5)/tilesize)|0;var cY=((this.pos.y+this.size.y*0.5)/tilesize)|0;var ecX=((entity.pos.x+entity.size.x*0.5)/tilesize)|0;var ecY=((entity.pos.y+entity.size.y*0.5)/tilesize)|0;var dX=ecX-cX;var dY=ecY-cY;var length=Math.sqrt(dX*dX+dY*dY);var dirX=dX/length;var dirY=dY/length;cX=Math.round(cX+dirX);cY=Math.round(cY+dirY);for(var i=0,il=(length|0)-2;i<il;i++){var tileX=cX|0;var tileY=cY|0;var tileId=collisionMap.data[tileY][tileX];if(!_utt.isTileWalkableStrict(tileId)){return false;}
cX+=dirX;cY+=dirY;}
return true;},receiveDamage:function(amount,from,unblockable){if((!this.invulnerable||unblockable)&&amount){this.health-=amount;if(this.health<=0){this.kill();}
return true;}
return false;},manageStart:function(){this.managed=true;},manageStop:function(){this.managed=false;},pause:function(){this.paused=true;var name;var anim;var tween;for(name in this.anims){anim=this.anims[name];if(anim){anim.timer.pause();}}
for(var name in this.tweens){tween=this.tweens[name];if(tween){tween.pause();}}},unpause:function(){this.paused=false;var name;var anim;var tween;for(name in this.anims){anim=this.anims[name];if(anim){anim.timer.unpause();}}
for(var name in this.tweens){tween=this.tweens[name];if(tween){tween.unpause();}}},link:function(entity,refresh){if(entity!==this){this.unlink(false);this.linkedTo=entity;if(this.linkedTo){ig.system.onResized.remove(this.refresh,this);if(!this._killed){this.linkedTo.onRefreshed.add(this.refresh,this);this.linkedTo.onRemoved.add(this.unlink,this);}}
if(refresh!==false&&!this._killed){this.refresh(true);}}},unlink:function(refresh){if(this.linkedTo){this.linkedTo.onRefreshed.remove(this.refresh,this);this.linkedTo.onRemoved.remove(this.unlink,this);if(!this._killed){ig.system.onResized.add(this.refresh,this);}
this.linkedTo=null;}
if(refresh!==false&&!this._killed){this.refresh(true);}},kill:function(silent){if(!this.dieing){this.dieing=true;this.dieingSilently=silent||false;if(!silent){this.death();}
else{this.die();}}},death:function(animNameDeath){if(!animNameDeath||!this.anims[animNameDeath]){animNameDeath=this.getDirectionalAnimName("death");}
if(this.anims[animNameDeath]){ig.game.flagAsKilled(this);this.applyAntiVelocity();this.animOverride(animNameDeath,{callback:this.die});}
else{this.die();}},die:function(){ig.game.removeEntity(this);},cleanup:function(){if(this._cleanupPersistent){this._cleanupPersistent=false;this.cleanupPersistent();}
this.unhide();this.tweenEnd();this.moveAllStop();this.unlink(false);this.animRelease();this.currentAnim=null;this.onRemoved.dispatch(this);ig.system.onResized.remove(this.refresh,this);if(!ig.game.hasLevel){this.onAdded.removeAll();this.onAdded.forget();this.onRemoved.removeAll();this.onRemoved.forget();this.onMovedTo.removeAll();this.onMovedTo.forget();this.onRefreshed.removeAll();this.onRefreshed.forget();for(var animName in this.anims){var anim=this.anims[animName];anim.onCompleted.removeAll();anim.onCompleted.forget();}}},cleanupPersistent:function(){},cleanupCollision:function(){this.wasChecking=this.checking;this.checking=this.intersecting=this.collidingWithEntitiesBelow=false;},intersectWith:function(entity){this.intersecting=true;},check:function(entity){this.checking=true;},collideWith:function(entity,dirX,dirY,nudge,vel,weak){var res;var nudgeX;if(weak){if(this===weak){if(dirX!==0){if(_utm.oppositeSidesOfZero(this.vel.x,dirX)){this.vel.x+=entity.vel.x;}
else{this.vel.x=-this.vel.x*this.bounciness+entity.vel.x;}
res=ig.game.collisionMap.trace(this.pos.x,this.pos.y,nudge,0,this.size.x,this.size.y,this.collisionMapResult);}
else{this.vel.y=-this.vel.y*this.bounciness+entity.vel.y;nudgeX=0;if(dirY>0){this.collidingWithEntitiesBelow=true;if((entity.collides>=ig.EntityExtended.COLLIDES.FIXED||this.collides===ig.EntityExtended.COLLIDES.LITE)&&Math.abs(this.vel.y-entity.vel.y)<this.minBounceVelocity){this.setGrounded();if(entity.moving){nudgeX=entity.pos.x-entity.last.x;}}}
res=ig.game.collisionMap.trace(this.pos.x,this.pos.y,nudgeX,nudge,this.size.x,this.size.y,this.collisionMapResult);}
if(res.pos.x!==this.pos.x||res.pos.y!==this.pos.y){this.pos.x=res.pos.x;this.pos.y=res.pos.y;this.recordChanges(true);}}}
else{if(dirX!==0){this.vel.x=vel;res=ig.game.collisionMap.trace(this.pos.x,this.pos.y,nudge*0.5,0,this.size.x,this.size.y,this.collisionMapResult);}
else{var unfair;if(dirY>0){this.collidingWithEntitiesBelow=true;nudgeX=(entity.collides>=ig.EntityExtended.COLLIDES.FIXED||this.collides===ig.EntityExtended.COLLIDES.LITE)?entity.vel.x*ig.system.tick:0;unfair=entity.grounded&&entity.collidingWithMap;}
else{if(this.grounded&&this.collidingWithMap){return;}
nudgeX=0;}
if(unfair){res=ig.game.collisionMap.trace(this.pos.x,this.pos.y,nudgeX,nudge,this.size.x,this.size.y,this.collisionMapResult);if(this.bounciness>0&&this.vel.y>this.minBounceVelocity){this.vel.y*=-this.bounciness;}
else{this.setGrounded();}}
else{this.vel.y=vel;res=ig.game.collisionMap.trace(this.pos.x,this.pos.y,nudgeX,nudge*0.5,this.size.x,this.size.y,this.collisionMapResult);}}
if(res&&(res.pos.x!==this.pos.x||res.pos.y!==this.pos.y)){this.pos.x=res.pos.x;this.pos.y=res.pos.y;this.recordChanges(true);}}},handleMovementTrace:function(res){var wasGrounded=this.grounded;var collisionMap;var row;if(this.hasGravity){this.standing=false;if(this.vel.y!==0&&!this.collidingWithEntitiesBelow){this.grounded=false;}}
this.collidingWithMap=false;if(res.tile.x&&_utt.isTileClimbable(res.tile.x)){res.pos.x=this.pos.x+this.vel.x*ig.system.tick;}
else if(res.collision.x){this.collidingWithMap=true;if(this.bounciness>0&&Math.abs(this.vel.x)>this.minBounceVelocity){this.vel.x*=-this.bounciness;}
else{this.vel.x=0;}}
if(res.tile.y&&_utt.isTileClimbable(res.tile.y)){if(this.climbing||!this.hasGravity||this._climbingIntentUp){res.pos.y=this.pos.y+this.vel.y*ig.system.tick;res.collision.y=res.collision.slope=false;}
else if(this._climbingIntentDown){collisionMap=ig.game.collisionMap;var rowIndex=Math.floor((this.pos.y+this.size.y+collisionMap.tilesize*0.5)/collisionMap.tilesize);row=collisionMap.data[rowIndex];var tileLeft=row&&row[Math.floor(this.pos.x/collisionMap.tilesize)];var tileRight=row&&row[Math.floor((this.pos.x+this.size.x)/collisionMap.tilesize)];if((typeof tileLeft==='undefined'||_utt.isTileWalkable(tileLeft))&&(typeof tileRight==='undefined'||_utt.isTileWalkable(tileRight))){res.pos.y=this.pos.y+this.vel.y*ig.system.tick;res.collision.y=res.collision.slope=false;}}}
if(res.collision.y){this.collidingWithMap=true;if(this.bounciness>0&&Math.abs(this.vel.y)>this.minBounceVelocity){this.vel.y*=-this.bounciness;}
else{if(this.vel.y<0){this.vel.y=0;}
else{this.setGrounded();}}}
if(res.collision.slope){var s=this.slope=res.slope;this.collidingWithMap=true;s.angle=Math.atan2(s.ny,s.nx);if(s.angle>this.slopeStanding.min&&s.angle<this.slopeStanding.max){this.setGrounded();if(this.accel.x!==0&&!_utm.oppositeSidesOfZero(this.accel.x,this.vel.x)&&s.nx*this.vel.x<=0){this.vel.y=0;res.pos.y+=-Math.abs((s.angle+_utm.HALFPI)*this.vel.x)*this.slopeSpeedMod*ig.system.tick;}}
else if(this.vel.y<0){this.vel.y=0;}}
else if(this.slope){if(!this.jumping){this.setGrounded();}
this.slope=null;}
if(wasGrounded&&wasGrounded!==this.grounded&&!this.jumping){collisionMap=ig.game.collisionMap;row=collisionMap.data[Math.floor((this.pos.y+this.size.y+1)/collisionMap.tilesize)];var tile=row&&row[Math.floor((this.pos.x+this.size.x*0.5)/collisionMap.tilesize)];if(typeof tile==='undefined'||_utt.isTileWalkableStrict(tile)){this.vel.y=0;res.pos.y=this.pos.y;}}
if(!(this.slopeSticking&&this.slope&&this.vel.x===0)){this.pos.x=res.pos.x;this.pos.y=res.pos.y;}},update:function(){if(!this.paused){if(!this.frozen){if(this.performance===ig.EntityExtended.PERFORMANCE.STATIC){if(this._changedAdd&&this.changed){this.updateBounds();this.changed=false;}}
else{if(this.controllable&&!this._killed){this.updateChanges();if(this.performance===ig.EntityExtended.PERFORMANCE.DYNAMIC){this.updateDynamics();}}
this.recordChanges();this.recordLast();}
this.visible=this.getIsVisible();if(this.visible){this.updateVisible();}
else if(this.dieing&&this.canDieInstantly){this.die();}
if(this.currentAnim){this.currentAnim.update();}}}
else if(ig.game.camera&&!ig.game.camera.paused){this.visible=this.getIsVisible();}},recordLast:function(){_utv2.copy(this.last,this._posLast);_utv2.copy(this._posLast,this.pos);this._angleLast=this.angle;},recordChanges:function(force){if(force===true||this.pos.x!==this.last.x||this.pos.y!==this.last.y||this.angle!==this._angleLast){this.changed=true;if(this.vel.x!==0){this.movingX=true;if(this.vel.x<0){this.flip.x=this.canFlipX;}
else{this.flip.x=false;}}
else{this.movingX=false;}
if(this.vel.y!==0){this.movingY=!this.hasGravity||this.vel.y<0||!this.grounded||(!!this.slope&&this.movingX);if(_c.TOP_DOWN||this.canFlipY){if(this.vel.y<0){this.flip.y=this.canFlipY;}
else{this.flip.y=false;}}}
else{this.movingY=false;}
this.moving=this.movingX||this.movingY;this.updateBounds();}
else{this.changed=this.moving=this.movingX=this.movingY=false;}},updateBounds:function(){this.posDraw.x=this.getPosDrawX();this.posDraw.y=this.getPosDrawY();if(this.needsVertices){this._verticesFound=true;this.verticesWorld=this.getVerticesWorld();}
else{this._verticesFound=false;}},updateChanges:function(){this.moveToUpdate();},updateDynamics:function(){if(this.gravityFactor===0||ig.game.gravity===0){this.hasGravity=false;}
else{this.hasGravity=true;this.vel.y+=ig.game.gravity*ig.system.tick*this.gravityFactor;}
this.updateVelocity();var res=ig.game.collisionMap.trace(this.pos.x,this.pos.y,this.vel.x*ig.system.tick,this.vel.y*ig.system.tick,this.size.x,this.size.y,this.collisionMapResult);this.handleMovementTrace(res);},updateVelocity:function(){this.vel.x=this.getNewVelocity(this.vel.x,this.accel.x,this.friction.x,this.maxVel.x);this.vel.y=this.getNewVelocity(this.vel.y,this.accel.y,this.friction.y,this.maxVel.y);},updateVisible:function(){if(this.overridingAnim&&this.currentAnim!==this.overridingAnim){this._overridedAnim=this.currentAnim;this.currentAnim=this.overridingAnim;}
if(this._changedAdd){this._changedAdd=false;this.updateBounds();}},draw:function(){if(this.currentAnim&&this.visible){var minX=this.posDraw.x;var minY=this.posDraw.y;var alpha=this.currentAnim.alpha;var flip=this.currentAnim.flip;this.currentAnim.alpha*=this.alpha;this.currentAnim.flip=this.flip;var angle;if(this.angle!==0){angle=this.currentAnim.angle;this.currentAnim.angle=this.angle;minX+=(this.sizeDraw.x-this.currentAnim.sheet.width)*0.5;minY+=(this.sizeDraw.y-this.currentAnim.sheet.height)*0.5;}
if(this.fixed){this.currentAnim.draw(minX,minY,this.scale,this.textured?this:undefined);}
else{this.currentAnim.draw(minX-ig.game.screen.x,minY-ig.game.screen.y,this.scale,this.textured?this:undefined);}
this.currentAnim.alpha=alpha;this.currentAnim.flip=flip;if(this.angle!==0){this.currentAnim.angle=angle;}}}});ig.EntityExtended.PERFORMANCE={};ig.EntityExtended.PERFORMANCE.STATIC=_c.STATIC||"static";ig.EntityExtended.PERFORMANCE.MOVABLE=_c.MOVABLE||"movable";ig.EntityExtended.PERFORMANCE.DYNAMIC=_c.DYNAMIC||"dynamic";ig.EntityExtended.TYPE=(function(){var types=[];var combinationTypes=[];var name;var flag;for(name in ig.Entity.TYPE){types.push({name:name,flag:ig.Entity.TYPE[name]});}
types.sort(function(a,b){return a.flag-b.flag;});for(var i=0,il=types.length;i<il;i++){var type=types[i];name=type.name;flag=type.flag;if((flag===0)||((flag&(flag-1))!==0)){combinationTypes.push(type);}
else{_ut.getType(ig.EntityExtended,name);}}
for(var i=0,il=combinationTypes.length;i<il;i++){var type=combinationTypes[i];name=type.name;flag=type.flag;ig.EntityExtended.TYPE[name]=flag;}
return ig.EntityExtended.TYPE;})();ig.EntityExtended.TYPE.NONE;ig.EntityExtended.TYPE.A;ig.EntityExtended.TYPE.B;ig.EntityExtended.TYPE.BOTH;_ut.getType(ig.EntityExtended,"INTERACTIVE");ig.EntityExtended.TYPE.INTERACTIVE;_ut.getType(ig.EntityExtended,"DAMAGEABLE");ig.EntityExtended.TYPE.DAMAGEABLE;_ut.getType(ig.EntityExtended,"DANGEROUS");ig.EntityExtended.TYPE.DANGEROUS;ig.EntityExtended.GROUP={};ig.EntityExtended.GROUP.NONE=0;_ut.getType(ig.EntityExtended,"FRIEND","GROUP");ig.EntityExtended.GROUP.FRIEND;_ut.getType(ig.EntityExtended,"ENEMY","GROUP");ig.EntityExtended.GROUP.ENEMY;ig.EntityExtended.COLLIDES=ig.merge({},ig.Entity.COLLIDES);ig.EntityExtended.COLLIDES.DOUBLEFIXED=ig.EntityExtended.COLLIDES.FIXED+ig.EntityExtended.COLLIDES.FIXED;var COLLISION_ACTIVE=ig.EntityExtended.COLLIDES.ACTIVE;var COLLISION_DOUBLEFIXED=ig.EntityExtended.COLLIDES.DOUBLEFIXED;ig.EntityExtended.checkPair=function(a,b){a.intersectWith(b);b.intersectWith(a);if((a.group&b.group)===0){if(a.checkAgainst&b.type){a.check(b);}
if(b.checkAgainst&a.type){b.check(a);}
if(a.collides&&b.collides&&a.collides+b.collides>COLLISION_ACTIVE&&(_c.COLLISION.ALLOW_FIXED||a.collides+b.collides<COLLISION_DOUBLEFIXED)&&(!a.oneWay||b.getIsCollidingWithOneWay(a))&&(!b.oneWay||a.getIsCollidingWithOneWay(b))){ig.EntityExtended.solveCollision(a,b);}}};ig.EntityExtended.solveCollision=function(a,b){var weak=null;if(a.collides===ig.EntityExtended.COLLIDES.LITE||b.collides===ig.EntityExtended.COLLIDES.FIXED){weak=a;}
else if(b.collides===ig.EntityExtended.COLLIDES.LITE||a.collides===ig.EntityExtended.COLLIDES.FIXED){weak=b;}
var top;var bottom;var left;var right;var overlapX;var overlapY;if(a.pos.x<b.pos.x){left=a;right=b;overlapX=a.pos.x+a.size.x-b.pos.x;}
else{left=b;right=a;overlapX=b.pos.x+b.size.x-a.pos.x;}
if(a.pos.y<b.pos.y){top=a;bottom=b;overlapY=a.pos.y+a.size.y-b.pos.y;}
else{top=b;bottom=a;overlapY=b.pos.y+b.size.y-a.pos.y;}
var vel;if(overlapY>overlapX||(bottom.grounded&&top.collides===ig.EntityExtended.COLLIDES.FIXED)){if(left.collides+right.collides>=COLLISION_DOUBLEFIXED){left.collideWith(right,1,0,-overlapX,0);right.collideWith(left,-1,0,overlapX,0);}
else{vel=(left.vel.x-right.vel.x)*0.5;left.collideWith(right,1,0,-overlapX,-vel,weak);right.collideWith(left,-1,0,overlapX,vel,weak);}}
else{if(top.collides+bottom.collides>=COLLISION_DOUBLEFIXED){top.collideWith(bottom,0,1,-overlapY,0);bottom.collideWith(top,0,-1,overlapY,0);}
else{vel=(top.vel.y-bottom.vel.y)*0.5;top.collideWith(bottom,0,1,-overlapY,-vel,weak);bottom.collideWith(top,0,-1,overlapY,vel,weak);}}};if(ig.global.wm){ig.EntityExtended.inject({visible:true,touches:function(selector){return _uti.pointInAABB(selector.pos.x,selector.pos.y,this.pos.x,this.pos.y,this.pos.x+this.size.x,this.pos.y+this.size.y);},activate:function(){},draw:function(){this.refresh(true);this.updateVisible();if(this.textured){for(var name in this.anims){this.anims[name].texturize(this);}}
this.parent();}});}});

// lib/plusplus/entities/light.js
ig.baked=true;ig.module('plusplus.entities.light').requires('plusplus.core.entity','plusplus.core.config','plusplus.core.image-drawing','plusplus.helpers.utils','plusplus.helpers.utilsmath','plusplus.helpers.utilsvector2','plusplus.helpers.utilsintersection','plusplus.helpers.utilscolor').defines(function(){"use strict";var _c=ig.CONFIG;var _ut=ig.utils;var _utm=ig.utilsmath;var _utv2=ig.utilsvector2;var _uti=ig.utilsintersection;var _utc=ig.utilscolor;ig.EntityLight=ig.global.EntityLight=ig.EntityExtended.extend({_wmScalable:true,_wmScalableLinked:true,layerName:'lights',size:{x:10,y:10},radius:10,r:_c.LIGHT.R,g:_c.LIGHT.G,b:_c.LIGHT.B,alpha:_c.LIGHT.ALPHA,dynamicColor:false,pixelPerfect:_c.LIGHT.PIXEL_PERFECT,gradient:_c.LIGHT.GRADIENT,castsShadows:_c.LIGHT.CASTS_SHADOWS,castsShadowsMovable:_c.LIGHT.CASTS_SHADOWS_MOVABLE,items:[],diffuse:_c.LIGHT.DIFFUSE,samples:_c.LIGHT.SAMPLES,image:null,imageBase:null,imageCast:null,imageColor:null,_shadowCastingInitialized:false,_dirtySize:false,_dirtyColor:false,_scaleComputedAt:0,_rLast:0,_gLast:0,_bLast:0,_alphaLast:0,_sizeLast:{x:0,y:0},_radiusLast:0,initTypes:function(){this.parent();_ut.addType(ig.EntityExtended,this,'type',"LIGHT");},initProperties:function(){this.image=new ig.ImageDrawing();this.imageBase=new ig.ImageDrawing();this.imageCast=new ig.ImageDrawing();this.imageColor=new ig.ImageDrawing();this.parent();},resetCore:function(x,y,settings){if(settings){if(settings.radius){this.size.x=this.size.y=settings.radius*2;}}
this.parent(x,y,settings);if(this.performance===ig.EntityExtended.PERFORMANCE.DYNAMIC){this.performance=ig.EntityExtended.PERFORMANCE.MOVABLE;}},resize:function(force){this.recordChanges();if(this.changed){force=this.needsRebuild=true;}
return force;},rebuild:function(){this.compute();this.parent();},ready:function(){ig.system.onResized.add(this.resize,this);this.parent();},getRadius:function(){return Math.max(this.size.x,this.size.y)*0.5;},getSizeDrawX:function(){return this.radius*2;},getSizeDrawY:function(){return this.radius*2;},compute:function(){if(this.castsShadows&&(this.performance===ig.EntityExtended.PERFORMANCE.MOVABLE||this._changedAdd)){this.findItems();}
if(this.changed||this._changedAdd){if(this.performance===ig.EntityExtended.PERFORMANCE.STATIC){this.changed=false;}
if(this._dirtySize||(this.castsShadows&&!this.imageCast)){this._dirtySize=false;this._scaleComputedAt=this.scale;this.resizeCache();this.drawLight();}
if(this.castsShadows){this.drawShadows();}}},resizeCache:function(){var diameter=this.radius*2;if(!this.pixelPerfect){diameter*=this.scale;}
if(this.castsShadows){this.image.setDimensions(diameter,diameter);this.imageBase.setDimensions(diameter,diameter);this.imageCast.setDimensions(diameter,diameter);}
else{this.image.setDimensions(diameter,diameter);if(this.imageBase.width!==0||this.imageBase.height!==0){this.imageBase.setDimensions(0,0);}
if(this.imageCast.width!==0||this.imageCast.height!==0){this.imageCast.setDimensions(0,0);}}
if(this.dynamicColor){this.imageColor.setDimensions(diameter,diameter);this._dirtyColor=true;}},drawLight:function(){var image=this.castsShadows?this.imageBase:this.image;var context,base;var r,g,b;if(!this.dynamicColor){r=this.r;g=this.g;b=this.b;}
else{r=1;g=1;b=1;}
context=image.dataContext;if(this.pixelPerfect){var diameter=this.radius*2;base=context.createImageData(diameter,diameter);for(var x=0;x<diameter;x++){for(var y=0;y<diameter;y++){if(_uti.pointInCircle(x,y,this.radius,this.radius,this.radius)){var index=(x+y*diameter)*4;base.data[index]=(r*255)|0;base.data[index+1]=(g*255)|0;base.data[index+2]=(b*255)|0;if(this.gradient){var dx=this.radius-x;var dy=this.radius-y;var invDistPct=1-(Math.sqrt(dx*dx+dy*dy)/this.radius);base.data[index+3]=(invDistPct*255)|0;}
else{base.data[index+3]=255;}}}}
context.putImageData(base,0,0);image.finalize(1);}
else{var radiusScaled=this.radius*this.scale;if(this.gradient){var diameterScaled=radiusScaled*2;var gradient=_utc.radialGradient(radiusScaled,[{r:r,g:g,b:b},{r:r,g:g,b:b,a:0}]);context.fillStyle=gradient;context.fillRect(0,0,diameterScaled,diameterScaled);}
else{context.fillStyle=_utc.RGBToCSS(r,g,b);context.arc(radiusScaled,radiusScaled,radiusScaled,0,_utm.TWOPI,false);context.fill();}
image.finalize(this.scale);}},findItems:function(){var minX=this.pos.x;var minY=this.pos.y;var maxX=minX+this.size.x;var maxY=minY+this.size.y;var numItemsPrefind=this.items.length;this.items.length=0;for(var i=0,il=ig.game.layers.length;i<il;i++){var layer=ig.game.layers[i];if(layer.numEntities){var itemsOpaque=layer.itemsOpaque;for(var j=0,jl=itemsOpaque.length;j<jl;j++){var item=itemsOpaque[j];if(item._killed!==true&&(item.performance===ig.EntityExtended.PERFORMANCE.STATIC||this.castsShadowsMovable)&&_uti.AABBIntersect(minX,minY,maxX,maxY,item.pos.x,item.pos.y,item.pos.x+item.size.x,item.pos.y+item.size.y)){this.items.push(item);var anim=item.currentAnim;if(item.changed){this.changed=true;}
else if(anim&&((anim!==item._animCastShadow&&(anim.opaqueOffset||(item._animCastShadow&&item._animCastShadow.opaqueOffset)))||(anim.changed&&anim.opaqueOffset&&anim.opaqueOffset.tiles))){this.changed=true;if(!item.opaqueFromVertices){item._verticesFound=false;}}
item._animCastShadow=anim;}}}}
if(numItemsPrefind!==this.items.length){this.changed=true;}},_initShadowCasting:function(){if(!this._shadowCastingInitialized){this._utilVec2Samples1={x:0,y:0};this._utilVec2Samples2={x:0,y:0};this._utilVec2Samples3={x:0,y:0};}},drawShadows:function(){this._initShadowCasting();var contextCast=this.imageCast.dataContext;var diameter=this.radius*2;if(this.pixelPerfect){contextCast.clearRect(0,0,diameter,diameter);this.castShadows();this.imageCast.finalize(1);}
else{diameter*=this.scale;contextCast.clearRect(0,0,diameter,diameter);this.castShadows();this.imageCast.finalize(this.scale);}
var context=this.image.dataContext;var compositeOperation=context.globalCompositeOperation;context.clearRect(0,0,diameter,diameter);context.drawImage(this.imageBase.data,0,0);context.globalCompositeOperation="destination-out";context.drawImage(this.imageCast.data,0,0);context.globalCompositeOperation=compositeOperation;this.image.finalize(this.pixelPerfect?1:this.scale);},castShadows:function(){var context=this.imageCast.dataContext;var minX=this.pos.x;var minY=this.pos.y;var radius=this.radius;var center=_utv2.set(this._utilVec2Samples1,minX+radius,minY+radius);var i,il;if(this.samples===1){for(i=0,il=this.items.length;i<il;i++){this.items[i].castShadow(this,context,center,minX,minY,radius);}}
else{for(var s=0;s<this.samples;++s){var a=s*_utm.GOLDEN_ANGLE;var r=Math.sqrt(s/this.samples)*this.radius;var delta=_utv2.set(this._utilVec2Samples2,Math.cos(a)*r,Math.sin(a)*r);_utv2.copy(this._utilVec2Samples3,center);_utv2.add(this._utilVec2Samples3,delta);for(i=0,il=this.items.length;i<il;i++){this.items[i].castShadow(this,context,this._utilVec2Samples3,minX,minY,radius);}}}},cleanup:function(){ig.system.onResized.remove(this.resize,this);this.parent();},recordChanges:function(force){if(this.alpha===0){this.visible=false;}
else{this._dirtySize=this._scaleComputedAt!==this.scale||this.radius-this._radiusLast!==0||this.size.x-this._sizeLast.x!==0|this.size.y-this._sizeLast.y!==0;if(this.alpha-this._alphaLast!==0||this._dirtySize){force=true;}
if(this.dynamicColor){var rDelta=this.r-this._rLast;var gDelta=this.g-this._gLast;var bDelta=this.b-this._bLast;if(rDelta!==0||gDelta!==0||bDelta!==0){force=this._dirtyColor=true;}
this._rLast=this.r;this._gLast=this.g;this._bLast=this.b;}
_utv2.copy(this._sizeLast,this.size);this._radiusLast=this.radius;this._alphaLast=this.alpha;}
this.parent(force);},updateBounds:function(){this.radius=this.getRadius();this.posDraw.x=this.pos.x;this.posDraw.y=this.pos.y;},updateVisible:function(){this.compute();this.parent();},draw:function(){var image=this.image;if(!this.visible||!image){return;}
if(this.dynamicColor){if(this._dirtyColor){this._dirtyColor=false;var diameter=this.radius*2;if(!this.pixelPerfect){diameter*=this.scale;}
var contextColor=this.imageColor.dataContext;contextColor.fillStyle=_utc.RGBToCSS(this.r,this.g,this.b);contextColor.fillRect(0,0,diameter,diameter);contextColor.globalCompositeOperation="destination-atop";contextColor.drawImage(this.image.data,0,0);this.imageColor.finalize(this.pixelPerfect?1:this.scale);}
image=this.imageColor;}
var context=ig.system.context;if(this.alpha!==1){context.globalAlpha=this.alpha;}
if(this.fixed){image.draw(this.posDraw.x,this.posDraw.y,undefined,undefined,undefined,undefined,this.scale);}
else{image.draw(this.posDraw.x-ig.game.screen.x,this.posDraw.y-ig.game.screen.y,undefined,undefined,undefined,undefined,this.scale);}
if(this.alpha!==1){context.globalAlpha=1;}}});if(ig.global.wm){ig.EntityLight.inject({dynamicColor:true,init:function(x,y,settings){this.parent(x,y,settings);this.performance=ig.EntityExtended.PERFORMANCE.MOVABLE;},findItems:function(){},resizeCache:function(){var diameter=this.radius*2;if(!this.pixelPerfect){diameter*=this.scale;}
this.imageBase=this.imageCast=this.image;this.image.setDimensions(diameter,diameter);this.imageColor.setDimensions(diameter,diameter);this._dirtyColor=true;},drawShadows:function(){},draw:function(){this.refresh();this.parent();}});}});

// lib/plusplus/core/layer.js
ig.baked=true;ig.module('plusplus.core.layer').requires('plusplus.core.config','plusplus.core.entity','plusplus.core.background-map','plusplus.entities.light','plusplus.helpers.utils').defines(function(){var _c=ig.CONFIG;var _ut=ig.utils;ig.Layer=ig.Class.extend({name:'',zIndex:0,clearOnLoad:true,noUpdate:false,noDraw:false,preRender:_c.PRERENDER_MAPS,items:[],itemsTargetable:[],itemsInteractive:[],itemsOpaque:[],itemsLight:[],itemsChecking:[],spatialHash:{},spatialHashCellSize:64,autoSort:_c.AUTO_SORT_LAYERS,sortBy:false,numEntities:0,numBackgroundMaps:0,changed:true,paused:false,ignorePause:false,_dirtySort:false,_dirtyItems:false,_itemsToAdd:[],init:function(name,settings){this.name=name;ig.merge(this,settings);this.reset();},reset:function(){this.changed=true;this.paused=false;this._dirtySort=false;this.sortBy=this.sortBy||ig.game.sortBy;if(this.items.length>0){var items=this.items;var item;var i,il;if(!this.clearOnLoad){this._itemsToAdd=this.items.slice(0);for(i=0,il=this._itemsToAdd.length;i<il;i++){item=this._itemsToAdd[i];if(item.linkedTo){item._wasLinkedTo=item.linkedTo;}}}
this.items=[];this.itemsTargetable.length=this.itemsInteractive.length=this.itemsOpaque.length=this.itemsLight.length=this.itemsChecking.length=this.numBackgroundMaps=this.numEntities=0;for(i=0,il=items.length;i<il;i++){item=items[i];if(item instanceof ig.EntityExtended){ig.game.removeEntity(item);}
else{ig.game.removeItem(item);}}}},ready:function(){var i,il;var item;if(this._itemsToAdd.length>0){for(i=0,il=this._itemsToAdd.length;i<il;i++){item=this._itemsToAdd[i];if(item._wasLinkedTo){ig.game.spawnEntity(item,item.pos.x,item.pos.y,{linkedTo:item._wasLinkedTo});delete item._wasLinkedTo;}
else{ig.game.spawnEntity(item,item.pos.x,item.pos.y,(item._wasLinkedTo?{linkedTo:item._wasLinkedTo}:undefined));}}
this._itemsToAdd.length=0;}
if(this.items.length>0){this.items.sort(this.sortBy);if(this.preRender&&this.numBackgroundMaps>1){var mergers=[];var merger;for(i=0,il=this.items.length;i<il;i++){item=this.items[i];if(item instanceof ig.BackgroundMap){if(item.preRender&&!item.repeat){if(!merger){merger=[];}
merger.push(item);}
else if(merger&&merger.length>1){mergers.push(merger);merger=undefined;}}}
if(merger&&merger.length>1){mergers.push(merger);}
for(i=0,il=mergers.length;i<il;i++){merger=mergers[i];var map=merger[0];if(!(map instanceof ig.BackgroundMapExtended)){map=merger[0]=new ig.BackgroundMapExtended(map.tilesize,map.data,map.tilesetName);}
for(var j=1,jl=merger.length;j<jl;j++){item=merger[j];map.merge(item);this.removeItem(item);}}}
for(i=0,il=this.items.length;i<il;i++){item=this.items[i];if(item.adding){item.adding();}}}},addItem:function(item){this._dirtyItems=true;this.items.push(item);if(item.highPerformance){this._addEntity(item);}
else{if(item.targetable){this.itemsTargetable.push(item);}
if(item.type&ig.EntityExtended.TYPE.INTERACTIVE){this.itemsInteractive.push(item);}
if(item instanceof ig.EntityLight){this.itemsLight.push(item);}
else if(item.opaque){this.itemsOpaque.push(item);}
if(item instanceof ig.EntityExtended){this._addEntity(item);}
else if(item instanceof ig.BackgroundMap){this.numBackgroundMaps++;if(this.preRender){item.preRender=true;}}
if(this.autoSort){this.sort();}}},removeItem:function(item){var length=this.items.length;if(length>0){this._dirtyItems=true;_ut.arrayCautiousRemove(this.items,item);if(length!==this.items.length){if(item.highPerformance){this._removeEntity(item);}
else{_ut.arrayCautiousRemove(this.itemsInteractive,item);_ut.arrayCautiousRemove(this.itemsTargetable,item);_ut.arrayCautiousRemove(this.itemsOpaque,item);if(item instanceof ig.EntityLight){_ut.arrayCautiousRemove(this.itemsLight,item);}
if(item instanceof ig.EntityExtended){this._removeEntity(item);}
else if(item instanceof ig.BackgroundMap){this.numBackgroundMaps=Math.max(0,this.numBackgroundMaps-1);}
if(this.autoSort){this.sort();}}}}},_addEntity:function(item){this.numEntities++;if(item.type!==ig.Entity.TYPE.NONE||item.checkAgainst!==ig.EntityExtended.TYPE.NONE||item.collides!==ig.EntityExtended.COLLIDES.NEVER||item.collidesChanges){this.itemsChecking.push(item);}},_removeEntity:function(item){this.numEntities=Math.max(0,this.numEntities-1);var numEntitiesChecking=this.itemsChecking.length;_ut.arrayCautiousRemove(this.itemsChecking,item);if(this.itemsChecking.length!==numEntitiesChecking&&this.itemsChecking.length===0){this.spatialHash={};}},pause:function(){if(!this.ignorePause){this.paused=true;var items=this.items;for(var i=0,il=items.length;i<il;i++){var item=items[i];if(item.pause){item.pause();}}}},unpause:function(){this.paused=false;var items=this.items;for(var i=0,il=items.length;i<il;i++){var item=items[i];if(item.unpause){item.unpause();}}},sort:function(){this._dirtySort=true;},update:function(){var i,il;var item;this.changed=this.changedLights=false;if(this._dirtySort){this.items.sort(this.sortBy);this._dirtySort=false;}
if(!this.noUpdate&&this.items.length>0){if(this._dirtyItems){this.changed=true;this._dirtyItems=false;}
for(i=0,il=this.items.length;i<il;i++){item=this.items[i];item.update();if(!item.highPerformance&&!item.paused&&(item.changed||item.intersecting||item.checking)){this.changed=true;if(item instanceof ig.EntityLight){this.changedLights=true;}}}
if(this.changed&&this.itemsChecking.length>0){this.checkEntities();}}},draw:function(){if(!this.noDraw&&this.items.length>0){for(var i=0,il=this.items.length;i<il;i++){this.items[i].draw();}}},checkEntities:function(){var hash=this.spatialHash={};var cellSize=this.spatialHashCellSize;for(var i=0,il=this.itemsChecking.length;i<il;i++){var item=this.itemsChecking[i];item.cleanupCollision();var itemsChecked={};var minX=Math.floor(item.pos.x/cellSize);var minY=Math.floor(item.pos.y/cellSize);var maxX=Math.floor((item.pos.x+item.size.x)/cellSize)+1;var maxY=Math.floor((item.pos.y+item.size.y)/cellSize)+1;for(var x=minX;x<maxX;x++){for(var y=minY;y<maxY;y++){var column=hash[x];if(!column){column=hash[x]={};}
var cell=column[y];if(!cell){column[y]=[item];}
else{for(var j=0,jl=cell.length;j<jl;j++){var other=cell[j];if(!itemsChecked[other.id]){itemsChecked[other.id]=true;if(item.touches(other)){ig.EntityExtended.checkPair(item,other);}}}
cell.push(item);}}}}}});});

// lib/plusplus/core/input.js
ig.baked=true;ig.module('plusplus.core.input').requires('impact.input','plusplus.core.config','plusplus.helpers.utils','plusplus.helpers.utilsintersection').defines(function(){var _c=ig.CONFIG;var _g=_c.GESTURE;var _ut=ig.utils;var _uti=ig.utilsintersection;ig.Input.inject({inputPoints:[],initMouse:function(){this.parent();ig.system.canvas.addEventListener('mouseout',this.keycancel.bind(this),false);ig.system.canvas.addEventListener('mouseleave',this.keycancel.bind(this),false);if(ig.ua.touchDevice){ig.system.canvas.addEventListener('touchcancel',this.keycancel.bind(this),false);ig.system.canvas.addEventListener('MSPointerOut',this.keycancel.bind(this),false);ig.system.canvas.addEventListener('MSPointerLeave',this.keycancel.bind(this),false);}},keydown:function(event){if(event.type=='mousedown'||event.type=='touchstart'){var inputPoint;if(event.changedTouches){for(var i=0,il=event.changedTouches.length;i<il;i++){inputPoint=this.getInputPoint(event.changedTouches[i]);inputPoint.touch=true;inputPoint.setDown();}}
else{inputPoint=this.getInputPoint(event);inputPoint.setDown();}}
this.parent(event);},keyup:function(event){if(event.type==='mouseup'||event.type==='touchend'||event.type==='mouseout'||event.type==='mouseleave'||event.type==='touchcancel'){var inputPoint;if(event.changedTouches){for(var i=0,il=event.changedTouches.length;i<il;i++){inputPoint=this.getInputPoint(event.changedTouches[i]);inputPoint.setUp();}}
else{inputPoint=this.getInputPoint(event);inputPoint.setUp();}
this.mousemove(event,true);}
this.parent(event);},keycancel:function(event){var action=this.bindings[event.button===2?ig.KEY.MOUSE2:ig.KEY.MOUSE1];if(action&&this.actions[action]){this.keyup(event);}},mousemove:function(event){var internalWidth=parseInt(ig.system.canvas.offsetWidth)||ig.system.realWidth;var scale=ig.system.scale*(internalWidth/ig.system.realWidth);var boundsClient;if(ig.system.canvas.getBoundingClientRect){boundsClient=ig.system.canvas.getBoundingClientRect();}
if(event.changedTouches){for(var i=0,il=event.changedTouches.length;i<il;i++){this.inputPointMove(event.changedTouches[i],scale,boundsClient);}}
else{this.inputPointMove(event,scale,boundsClient);}
var mousePoint=this.inputPoints[0];ig.input.mouse.x=mousePoint.x;ig.input.mouse.y=mousePoint.y;},inputPointMove:function(event,scale,boundsClient){var x=event.clientX;var y=event.clientY;if(boundsClient){x=x-boundsClient.left;y=y-boundsClient.top;}
x/=scale;y/=scale;var inputPoint=this.getInputPoint(event,x,y);inputPoint.reposition(x,y);},getInputPointId:function(parameters){if(typeof parameters==='string'){return parameters;}
else if(parameters){if(typeof parameters.identifier==='string'){return parameters.identifier;}
else if(parameters.properties&&parameters.values){return _ut.indexOfProperties(this.inputPoints,parameters.properties,parameters.values);}}
return 0;},getInputPoint:function(parameters){var id=this.getInputPointId(parameters);var inputPoint=this.inputPoints[id];if(!inputPoint){inputPoint=this.inputPoints[id]=new ig.InputPoint(0,0,id);}
return inputPoint;},getInputPoints:function(properties,values){var inputPoints=[];for(var i=0,il=this.inputPoints.length;i<il;i++){var inputPoint=this.inputPoints[i];var missing;for(var j=0,jl=properties.length;j<jl;j++){if(values[j]!==inputPoint[properties[j]]){missing=true;break;}}
if(missing!==true){inputPoints.push(inputPoint);}}
return inputPoints;},removeInputPoint:function(parameters){var id=this.getInputPointId(parameters);var inputPoint=this.inputPoints[id];if(inputPoint){inputPoint.setUp();this.inputPoints.splice(id,1);}},inputPressed:function(code){var action=this.bindings[code];if(action){this.actions[action]=true;if(!this.locks[action]){this.presses[action]=true;this.locks[action]=true;}}},inputReleased:function(code){var action=this.bindings[code];if(action){this.delayedKeyup[action]=true;}},update:function(){for(var i=0,il=this.inputPoints.length;i<il;i++){this.inputPoints[i].update();}}});ig.InputPoint=ig.Class.extend({id:0,x:0,y:0,lastX:0,lastY:0,worldX:0,worldY:0,deltaX:0,deltaY:0,directionX:0,directionY:0,downDeltaX:0,downDeltaY:0,swipeDistanceX:0,swipeDistanceY:0,swipeTotalDeltaX:0,swipeTotalDeltaY:0,duration:0,targets:null,targetsUp:null,targetsDown:null,targetsDownStart:null,down:false,tapped:false,holding:false,holdingActivate:false,moved:false,swipingX:false,swipingY:false,swipingLeft:false,swipingRight:false,swipingUp:false,swipingDown:false,_taps:0,_downTotalDeltaX:0,_downTotalDeltaY:0,_directionDeltaTotalX:0,_directionDeltaTotalY:0,_durationReleased:0,_durationSwipeTry:0,_unpositioned:true,_movedWithReposition:false,_holdingActivatable:true,_downLast:false,_blockTap:false,init:function(x,y,id){this.x=x||0;this.y=y||0;this.id=id||0;this.targets=[];this.targetsUp=[];this.targetsDown=[];this.targetsDownStart=[];this.lastX=this.x;this.lastY=this.y;this.worldX=this.x+ig.game.screen.x;this.worldY=this.y+ig.game.screen.y;},reset:function(){this._unpositioned=true;this.lastX=this.x;this.lastY=this.y;this.worldX=this.x+ig.game.screen.x;this.worldY=this.y+ig.game.screen.y;this._taps=this._durationReleased=this.deltaX=this.deltaY=this.directionX=this.directionY=this._directionDeltaTotalX=this._directionDeltaTotalY=0;this.moved=this._movedWithReposition=false;this.resetTargets();this.resetDown();},resetTargets:function(){this.targets.length=this.targetsUp.length=this.targetsDown.length=this.targetsDownStart.length=0;},resetDown:function(){if(this.down!==false){if(this.holding){ig.input.inputReleased(ig.KEY.HOLD);}
this.duration=this.downDeltaX=this.downDeltaY=this._downTotalDeltaX=this._downTotalDeltaY=0;this.down=this._downLast=this.holding=this._blockTap=this.holdingActivate=false;this._holdingActivatable=true;this.resetSwipe();}},resetSwipe:function(){if(this.swiping!==false){ig.input.inputReleased(ig.KEY.SWIPE);this.releaseSwipeX();this.releaseSwipeY();this.swiping=false;this.resetSwipeValues();}},resetSwipeValues:function(){this._durationSwipeTry=this.swipeDistanceX=this.swipeDistanceY=this.swipeTotalDeltaX=this.swipeTotalDeltaY=0;},releaseSwipeX:function(){if(this.swipingX){ig.input.inputReleased(ig.KEY.SWIPE_X);if(this.swipingLeft){ig.input.inputReleased(ig.KEY.SWIPE_LEFT);this.swipingLeft=false;}
else if(this.swipingRight){ig.input.inputReleased(ig.KEY.SWIPE_RIGHT);this.swipingRight=false;}
this.swipingX=false;}},releaseSwipeY:function(){if(this.swipingY){ig.input.inputReleased(ig.KEY.SWIPE_Y);if(this.swipingUp){ig.input.inputReleased(ig.KEY.SWIPE_UP);this.swipingUp=false;}
else if(this.swipingDown){ig.input.inputReleased(ig.KEY.SWIPE_DOWN);this.swipingDown=false;}
this.swipingY=false;}},setDown:function(){this.resetDown();this.down=true;},setUp:function(){if(this.down){if(!this._blockTap){this.tapped=true;this._taps++;this._durationReleased=0;ig.input.inputReleased(ig.KEY.TAP);if(this._taps===2&&this._downTotalDeltaX*this._downTotalDeltaX+this._downTotalDeltaY*this._downTotalDeltaY<=(this.screenSize*this.screenSize)*_g.TAP_MULTI_DISTANCE_PCT){this._taps=0;ig.input.inputReleased(ig.KEY.TAP_DOUBLE);}
if(_g.TARGET_TAP){if(_g.TARGET_DOWN_START){this.targets=this.targetsDownStart;}
else{this.targets=this.getTargets();}}}
else{this._taps=0;this.tapped=false;}
this.resetDown();}},getTargets:function(){var searchRadius=_g.TARGET_SEARCH_RADIUS/ig.system.scale;return _uti.entitiesInAABB(this.worldX-searchRadius,this.worldY-searchRadius,this.worldX+searchRadius,this.worldY+searchRadius,true);},reposition:function(x,y){var directionChangedX;var directionChangedY;this.screenSize=Math.min(ig.system.width,ig.system.height);if(this._unpositioned){this.x=x;this.y=y;this._unpositioned=false;}
else{this.deltaX=x-this.x;this.deltaY=y-this.y;if(this.deltaX!==0){var directionX=this.deltaX<0?-1:1;if(this.directionX!==directionX){this._directionDeltaTotalX+=this.deltaX*directionX;if(this._directionDeltaTotalX>=this.screenSize*_g.DIRECTION_SWITCH_PCT){directionChangedX=true;this._directionDeltaTotalX=0;this.directionX=directionX;}}}
if(this.deltaY!==0){var directionY=this.deltaY<0?-1:1;if(this.directionY!==directionY){this._directionDeltaTotalY+=this.deltaY*directionY;if(this._directionDeltaTotalY>=this.screenSize*_g.DIRECTION_SWITCH_PCT){directionChangedY=true;this._directionDeltaTotalY=0;this.directionY=directionY;}}}
this._movedWithReposition=this.deltaX!==0||this.deltaY!==0;this.x=x;this.y=y;}
this.worldX=this.x+ig.game.screen.x;this.worldY=this.y+ig.game.screen.y;if(_g.TARGET_UP){this.targetsUp=this.getTargets();}
if(this.down){if(_g.TARGET_DOWN){if(_g.TARGET_UP){this.targetsDown=this.targetsUp;}
else{this.targetsDown=this.getTargets();}}
if(this._downLast!==this.down){this._downLast=this.down;if(_g.TARGET_DOWN_START){if(_g.TARGET_DOWN){this.targetsDownStart=this.targetsDown;}
else if(_g.TARGET_UP){this.targetsDownStart=this.targetsUp;}
else{this.targetsDownStart=this.getTargets();}}}
this.downDeltaX=this.deltaX;this.downDeltaY=this.deltaY;this._downTotalDeltaX+=this.downDeltaX;this._downTotalDeltaY+=this.downDeltaY;if(this._holdingActivatable&&this._downTotalDeltaX*this._downTotalDeltaX+this._downTotalDeltaY*this._downTotalDeltaY>=(this.screenSize*this.screenSize)*_g.HOLD_ACTIVATE_DISTANCE_PCT){this._holdingActivatable=false;}
this.swipeTotalDeltaX+=this.downDeltaX;this.swipeTotalDeltaY+=this.downDeltaY;this.swipeDistanceX=this.swipeTotalDeltaX<0?-this.swipeTotalDeltaX:this.swipeTotalDeltaX;this.swipeDistanceY=this.swipeTotalDeltaY<0?-this.swipeTotalDeltaY:this.swipeTotalDeltaY;if(this.swiping!==true&&this._durationSwipeTry>_g.SWIPE_DURATION_TRY){this.resetSwipeValues();}
else{if(this.swipingX!==true&&this.swipeDistanceX>=this.screenSize*_g.SWIPE_DISTANCE_PCT){this.swiping=this._blockTap=true;this._holdingActivatable=false;ig.input.inputPressed(ig.KEY.SWIPE);this.swipingX=directionChangedX=true;ig.input.inputPressed(ig.KEY.SWIPE_X);}
if(this.swipingX&&directionChangedX){if(this.directionX===-1){if(this.swipingRight){this.swipingRight=false;ig.input.inputReleased(ig.KEY.SWIPE_RIGHT);}
this.swipingLeft=true;ig.input.inputPressed(ig.KEY.SWIPE_LEFT);}
else if(this.directionX===1){if(this.swipingLeft){this.swipingLeft=false;ig.input.inputReleased(ig.KEY.SWIPE_LEFT);}
this.swipingRight=true;ig.input.inputPressed(ig.KEY.SWIPE_RIGHT);}}
if(this.swipingY!==true&&this.swipeDistanceY>=this.screenSize*_g.SWIPE_DISTANCE_PCT){this.swiping=this._blockTap=true;this._holdingActivatable=false;ig.input.inputPressed(ig.KEY.SWIPE);this.swipingY=directionChangedY=true;ig.input.inputPressed(ig.KEY.SWIPE_Y);}
if(this.swipingY&&directionChangedY){if(this.directionY===-1){if(this.swipingDown){this.swipingDown=false;ig.input.inputReleased(ig.KEY.SWIPE_DOWN);}
this.swipingUp=true;ig.input.inputPressed(ig.KEY.SWIPE_UP);}
else if(this.directionY===1){if(this.swipingUp){this.swipingUp=false;ig.input.inputReleased(ig.KEY.SWIPE_UP);}
this.swipingDown=true;ig.input.inputPressed(ig.KEY.SWIPE_DOWN);}}}}},update:function(){this.moved=this.x-this.lastX!==0||this.y-this.lastY!==0;this.lastX=this.x;this.lastY=this.y;this.worldX=this.x+ig.game.screen.x;this.worldY=this.y+ig.game.screen.y;if(this.down){this.duration+=ig.system.tick;this._durationSwipeTry+=ig.system.tick;if(!this.holding&&this.duration>=_g.HOLD_DELAY){this.holding=true;ig.input.inputPressed(ig.KEY.HOLD);}
if(!this._blockTap&&this.duration>=_g.HOLD_DELAY_BLOCK_TAP){this._blockTap=true;}
if(this._holdingActivatable&&!this.holdingActivate&&this.duration>=_g.HOLD_DELAY_ACTIVATE){this.holdingActivate=true;ig.input.inputPressed(ig.KEY.HOLD_ACTIVATE);}
if(!this.moved&&this._durationSwipeTry>_g.SWIPE_DURATION_RESET){this.resetSwipe();}}
else if(this._taps>0){this._durationReleased+=ig.system.tick;if(this._durationReleased>=_g.RELEASE_DELAY){if(this.touch){ig.input.removeInputPoint(this.id);}
else{this._taps=0;}}}}});ig.KEY.TAP=-6;ig.KEY.TAP_DOUBLE=-7;ig.KEY.HOLD=-9;ig.KEY.HOLD_ACTIVATE=-10;ig.KEY.SWIPE=-11;ig.KEY.SWIPE_X=-12;ig.KEY.SWIPE_Y=-13;ig.KEY.SWIPE_LEFT=-14;ig.KEY.SWIPE_RIGHT=-15;ig.KEY.SWIPE_UP=-16;ig.KEY.SWIPE_DOWN=-17;});

// lib/plusplus/ui/ui-element.js
ig.baked=true;ig.module('plusplus.ui.ui-element').requires('plusplus.core.config','plusplus.core.entity','plusplus.helpers.signals','plusplus.helpers.utils').defines(function(){"use strict";var _c=ig.CONFIG;var _ut=ig.utils;ig.UIElement=ig.global.UIElement=ig.EntityExtended.extend({layerName:'ui',frozen:true,visible:true,fixed:true,canFlipX:_c.UI.CAN_FLIP_X,canFlipY:_c.UI.CAN_FLIP_Y,posAsPct:_c.UI.POS_AS_PCT,posPct:{x:0,y:0},align:{x:0,y:0},margin:{x:0,y:0},marginAsPct:true,marginAsPctSmallest:_c.UI.MARGIN_AS_PCT_SMALLEST,marginScaleless:_c.UI.MARGIN_SCALELESS,totalMarginX:0,totalMarginY:0,scale:_c.UI.SCALE,scaleOfSystemScale:_c.UI.SCALE_OF_SYSTEM_SCALE,scaleMin:_c.UI.SCALE_MIN,scaleMax:_c.UI.SCALE_MAX,ignoreSystemScale:_c.UI.IGNORE_SYSTEM_SCALE,linkAlign:{x:0,y:0},linkAlignInside:false,autoDeactivate:true,initTypes:function(){this.parent();_ut.addType(ig.EntityExtended,this,'type',"UI");},changePerformanceDynamic:function(){if(this.layerName==='ui'){ig.game.removeItem(this,{layerName:this.layerName});this.layerName='entities';ig.game.addItem(this);}},cleanup:function(){if(this.autoDeactivate){this.deactivate();}
this.parent();},reposition:function(force){var linkDir=this.linkAlignInside?-1:1;if(!this.getIsMovingSelf()){if(this.linkedTo){var scaleSystemMod=this.scale/ig.system.scale;var sizeDrawX=this.sizeDraw.x*scaleSystemMod;var sizeDrawY=this.sizeDraw.y*scaleSystemMod;var linkedScaleSystemMod=this.linkedTo.scale/ig.system.scale;var linkedSizeDrawX=this.linkedTo.sizeDraw.x*linkedScaleSystemMod;var linkedSizeDrawY=this.linkedTo.sizeDraw.y*linkedScaleSystemMod;var diffX=(linkedSizeDrawX-sizeDrawX)*0.5;var diffY=(linkedSizeDrawY-sizeDrawY)*0.5;this.pos.x=this.linkedTo.posDraw.x+diffX;this.pos.y=this.linkedTo.posDraw.y+diffY;var offsetX=(linkedSizeDrawX+sizeDrawX*linkDir)*0.5;var offsetY=(linkedSizeDrawY+sizeDrawY*linkDir)*0.5;this.pos.x+=this.linkAlign.x*offsetX;this.pos.y+=this.linkAlign.y*offsetY;}
else if(this.posAsPct){this.pos.x=this.posPct.x*ig.system.width;this.pos.y=this.posPct.y*ig.system.height;}
else{this.pos.x=this.resetState.pos.x;this.pos.y=this.resetState.pos.y;}
this.totalMarginX=Math.round(this.marginAsPct?this.margin.x*(this.marginAsPctSmallest?ig.system.size:ig.system.width):this.margin.x);this.totalMarginY=Math.round(this.marginAsPct?this.margin.y*(this.marginAsPctSmallest?ig.system.size:ig.system.height):this.margin.y);if(this.marginScaleless){this.totalMarginX/=this.scale;this.totalMarginY/=this.scale;}
if(this.linkedTo){this.pos.x+=this.linkAlign.x*this.totalMarginX*linkDir;this.pos.y+=this.linkAlign.y*this.totalMarginY*linkDir;}
else{this.pos.x=this.pos.x-this.align.x*this.sizeDraw.x*this.scaleMod+((1-this.align.x)*this.totalMarginX-this.align.x*this.totalMarginX);this.pos.y=this.pos.y-this.align.y*this.sizeDraw.y*this.scaleMod+((1-this.align.y)*this.totalMarginY-this.align.y*this.totalMarginY);}}
return this.parent(force);},moveTo:function(item,settings){this.align.x=this.align.y=this.margin.x=this.margin.y=0;this.unlink(false);return this.parent(item,settings);},link:function(entity,refresh){if(!this.movingTo){this.parent(entity,refresh);}
else{this.unlink(false);}},unlink:function(refresh){if(this.linkedTo&&!this._killed&&refresh!==false){var x=this.pos.x;var y=this.pos.y;x+=this.align.x*this.sizeDraw.x*this.scaleMod-((1-this.align.x)*this.totalMarginX-this.align.x*this.totalMarginX);y+=this.align.y*this.sizeDraw.y*this.scaleMod-((1-this.align.y)*this.totalMarginY-this.align.y*this.totalMarginY);if(this.posAsPct){this.posPct.x=x/ig.system.width;this.posPct.y=y/ig.system.height;}
else{this.resetState.pos.x=x;this.resetState.pos.y=y;}}
this.parent(refresh);}});_ut.getType(ig.EntityExtended,"UI");ig.EntityExtended.TYPE.UI;});

// lib/plusplus/ui/ui-text.js
ig.baked=true;ig.module('plusplus.ui.ui-text').requires('plusplus.core.config','plusplus.core.font','plusplus.core.image-drawing','plusplus.ui.ui-element').defines(function(){"use strict";var _c=ig.CONFIG;ig.UIText=ig.global.UIText=ig.UIElement.extend({align:{x:0,y:0},linkAlign:{x:0,y:0},font:null,scale:_c.FONT.SCALE,scaleOfSystemScale:_c.FONT.SCALE_OF_SYSTEM_SCALE,scaleMin:_c.FONT.SCALE_MIN,scaleMax:_c.FONT.SCALE_MAX,ignoreSystemScale:_c.FONT.IGNORE_SYSTEM_SCALE,text:'',textDisplay:'',textOverflow:'',autoRefreshText:true,changedText:false,textImage:null,textAlign:ig.Font.ALIGN.CENTER,maxWidth:0,maxHeight:0,_text:'',refresh:function(force){this.font=this.font||ig.Font.FONTS.MAIN;if(this.text&&this.font){if(!this.textImage){this.textImage=new ig.ImageDrawing();}}
else if(this.textImage){this.textImage=null;}
this.parent(force);},resize:function(force){if(this._text!==this.text){this.changedText=true;this._text=this.text;}
if(this._text&&this.font){var textDisplay=this._text;var textOverflow='';var sizeX=this.font.widthForString(textDisplay);var sizeY=this.font.heightForString(textDisplay);if(this.maxWidth>0&&sizeX>this.maxWidth){textDisplay=this.font.multilineForWidth(textDisplay,this.maxWidth);sizeX=this.font.widthForString(textDisplay);sizeY=this.font.heightForString(textDisplay);}
if(this.maxHeight>0&&sizeY>this.maxHeight){var textFormatted=this.font.overflowForHeight(textDisplay,this.maxHeight);textDisplay=textFormatted.display;textOverflow=textFormatted.overflow;sizeX=this.font.widthForString(textDisplay);sizeY=this.font.heightForString(textDisplay);}
if(this.textDisplay!==textDisplay||this.textOverflow!==textOverflow){this.needsRebuild=this.changedText=true;this.textDisplay=textDisplay;this.textOverflow=textOverflow;}
if(this.size.x!==sizeX){this.size.x=sizeX;force=this.needsRebuild=this.changedText=true;}
if(this.size.y!==sizeY){this.size.y=sizeY;force=this.needsRebuild=this.changedText=true;}}
return force;},rebuild:function(){this.parent();if(this.textDisplay&&this.font){this.textImage.setDimensions(this.size.x,this.size.y);var offsetX;if(this.textAlign===ig.Font.ALIGN.CENTER){offsetX=this.size.x*0.5;}
else if(this.textAlign===ig.Font.ALIGN.RIGHT){offsetX=this.size.x;}
else{offsetX=0;}
this.font.draw(this.textDisplay,offsetX,0,this.textAlign,this.textImage.dataContext,1);this.textImage.finalize();}},update:function(){if(this.autoRefreshText&&this._text!==this.text){this.refresh(true);}
else{this.changedText=false;}
this.parent();},draw:function(){this.parent();if(this.visible&&this.textImage){if(this.alpha!==1){ig.system.context.globalAlpha=this.alpha;}
if(this.fixed){this.textImage.draw(this.posDraw.x,this.posDraw.y,undefined,undefined,undefined,undefined,this.scale);}
else{this.textImage.draw(this.posDraw.x-ig.game.screen.x,this.posDraw.y-ig.game.screen.y,undefined,undefined,undefined,undefined,this.scale);}
if(this.alpha!==1){ig.system.context.globalAlpha=1;}}}});});

// lib/plusplus/ui/ui-overlay.js
ig.baked=true;ig.module('plusplus.ui.ui-overlay').requires('plusplus.core.font','plusplus.core.config','plusplus.core.image-drawing','plusplus.ui.ui-element','plusplus.ui.ui-text','plusplus.helpers.utilsdraw','plusplus.helpers.utilscolor').defines(function(){"use strict";var _c=ig.CONFIG;var _utd=ig.utilsdraw;var _utc=ig.utilscolor;ig.UIOverlay=ig.global.UIOverlay=ig.UIElement.extend({layerName:"overlay",zIndex:_c.Z_INDEX_BELOW_ALL,scaleMin:_c.ENTITY.SCALE_MIN,scaleMax:_c.ENTITY.SCALE_MAX,scaleOfSystemScale:_c.ENTITY.SCALE_OF_SYSTEM_SCALE,ignoreSystemScale:false,sizeAsPct:true,sizePct:{x:1,y:1},fill:null,filled:true,r:_c.OVERLAY.R,g:_c.OVERLAY.G,b:_c.OVERLAY.B,alpha:_c.OVERLAY.ALPHA,fillStyle:'',fillColors:null,gradientRadial:false,gradientHorizontal:false,cover:false,cornerRadius:0,cornerRadiusAsPct:false,pixelPerfect:_c.OVERLAY.PIXEL_PERFECT,message:null,messageEntity:ig.UIText,textSettings:null,textMoveToSettings:{matchPerformance:true},resetExtras:function(){if(this.filled){this.fill=new ig.ImageDrawing();}
else{this.fill=null;}
if(typeof this.text==='string'){this.textSettings=this.textSettings||{};this.textSettings.text=this.text;this.text=undefined;}
if(typeof this.message==='string'){this.textSettings=this.textSettings||{};this.textSettings.text=this.message;this.message=undefined;}
if(!this.message&&this.textSettings&&this.textSettings.text&&this.textSettings.text.length>0){this.message=new(this.messageEntity)(0,0,ig.merge({layerName:this.layerName,fixed:this.fixed,alpha:this.alpha,linkedTo:this,autoRefreshText:false},this.textSettings));}
this.parent();},resize:function(force){if(this.sizeAsPct){var sizeX=ig.system.width*this.sizePct.x;var sizeY=ig.system.height*this.sizePct.y;if(this.size.x!==sizeX){this.size.x=sizeX;force=this.needsRebuild=true;}
if(this.size.y!==sizeY){this.size.y=sizeY;force=this.needsRebuild=true;}}
return force;},rebuild:function(){this.refill();if(this.fill){this.fill.finalize(this.pixelPerfect?1:this.scale);}
this.parent();},refill:function(width,height){if(this.fill){if(typeof width==='undefined'){width=this.sizeDraw.x;}
if(typeof height==='undefined'){height=this.sizeDraw.y;}
var context=this.fill.dataContext;if(this.pixelPerfect){this.fill.setDimensions(this.sizeDraw.x,this.sizeDraw.y);if(this.cornerRadius>0){_utd.pixelFillRoundedRect(context,0,0,this.fill.width,this.fill.height,0,0,width,height,this.cornerRadiusAsPct?Math.min(width,height)*this.cornerRadius:this.cornerRadius,this.r,this.g,this.b,1);}
else{context.fillStyle=this.getFillStyle();context.fillRect(0,0,width,height);}}
else{this.fill.setDimensions(this.sizeDraw.x*this.scale,this.sizeDraw.y*this.scale);context.fillStyle=this.getFillStyle();width*=this.scale;height*=this.scale;if(this.cornerRadius>0){_utd.fillRoundedRect(context,0,0,width,height,this.cornerRadiusAsPct?Math.min(width,height)*this.cornerRadius:this.cornerRadius);}
else{context.fillRect(0,0,width,height);}}}},getFillStyle:function(){var fillStyle;if(!this.pixelPerfect){if(this.fillStyle){fillStyle=this.fillStyle;}
else if(this.fillColors){if(this.gradientRadial){fillStyle=_utc.radialGradient(this.cover?Math.max(this.sizeDraw.x,this.sizeDraw.y):Math.min(this.sizeDraw.x,this.sizeDraw.y),this.fillColors);}
else{if(this.gradientHorizontal){fillStyle=_utc.linearGradient(0,0,this.sizeDraw.x,0,this.fillColors);}
else{fillStyle=_utc.linearGradient(0,0,0,this.sizeDraw.y,this.fillColors);}}}}
if(!fillStyle){fillStyle=_utc.RGBToCSS(this.r,this.g,this.b);}
return fillStyle;},ready:function(){if(this.message){ig.game.spawnEntity(this.message,this.message.pos.x,this.message.pos.y);}
this.parent();},moveTo:function(item,settings){var movingTo=this.parent(item,settings);if(this.message){this.message.moveTo(this,this.textMoveToSettings);}
return movingTo;},moveToStop:function(){if(this.message){this.message.moveToStop();}
this.parent();},pause:function(){this.parent();if(this.message){this.message.pause();}},unpause:function(){this.parent();if(this.message){this.message.unpause();}},cleanup:function(){if(this.message){ig.game.removeEntity(this.message);}
this.parent();},update:function(){if(this.message){var text=(this.textSettings&&this.textSettings.text)||this.text;if(text&&this.message.text!==text){this.message.text=text;}
if(this.message._text!==this.message.text){this.refresh(true);}}
this.parent();},draw:function(){if(this.message){this.message.alpha=this.alpha;}
if(this.visible){if(this.fill){if(this.alpha!==1){ig.system.context.globalAlpha=this.alpha;}
if(this.fixed){this.fill.draw(this.posDraw.x,this.posDraw.y,undefined,undefined,undefined,undefined,this.scale);}
else{this.fill.draw(this.posDraw.x-ig.game.screen.x,this.posDraw.y-ig.game.screen.y,undefined,undefined,undefined,undefined,this.scale);}
if(this.alpha!==1){ig.system.context.globalAlpha=1;}}
this.parent();}}});});

// lib/plusplus/core/camera.js
ig.baked=true;ig.module('plusplus.core.camera').requires('plusplus.core.config','plusplus.core.timer','plusplus.core.image-drawing','plusplus.ui.ui-overlay','plusplus.helpers.utils','plusplus.helpers.utilsmath','plusplus.helpers.utilsvector2','plusplus.helpers.utilsintersection','plusplus.helpers.signals','plusplus.helpers.tweens').defines(function(){"use strict";var _c=ig.CONFIG;var _ut=ig.utils;var _utm=ig.utilsmath;var _utv2=ig.utilsvector2;var _uti=ig.utilsintersection;var _tw=ig.TWEEN;ig.Camera=ig.Class.extend({boundsTrapAsPct:_c.CAMERA.BOUNDS_TRAP_AS_PCT,boundsTrap:_uti.boundsMinMax(_c.CAMERA.BOUNDS_TRAP_MINX,_c.CAMERA.BOUNDS_TRAP_MINY,_c.CAMERA.BOUNDS_TRAP_MAXX,_c.CAMERA.BOUNDS_TRAP_MAXY),boundsTrapPct:_uti.boundsMinMax(_c.CAMERA.BOUNDS_TRAP_PCT_MINX,_c.CAMERA.BOUNDS_TRAP_PCT_MINY,_c.CAMERA.BOUNDS_TRAP_PCT_MAXX,_c.CAMERA.BOUNDS_TRAP_PCT_MAXY),keepCentered:_c.CAMERA.KEEP_CENTERED,keepInsideLevel:{x:_c.CAMERA.KEEP_INSIDE_LEVEL,y:_c.CAMERA.KEEP_INSIDE_LEVEL},boundsLevel:_uti.boundsMinMax(0,0,0,0),paused:false,changed:false,entity:null,entityFallback:null,autoFollowPlayer:_c.CAMERA.AUTO_FOLLOW_PLAYER,snapFirstFollow:_c.CAMERA.SNAP_FIRST_FOLLOW,centerFirstFollow:_c.CAMERA.CENTER_FIRST_FOLLOW,lerp:_c.CAMERA.LERP,transitionDuration:_c.CAMERA.TRANSITION_DURATION,transitionDurationMin:_c.CAMERA.TRANSITION_DURATION_MIN,transitionDurationMax:_c.CAMERA.TRANSITION_DURATION_MAX,transitionDistance:_c.CAMERA.TRANSITION_DISTANCE,transitioning:false,transitioningInstantly:false,transitioningCenter:false,transitionPct:0,screenLast:{x:0,y:0},atmosphere:false,atmosphereOverlay:null,atmosphereSettings:{r:0,g:0,b:0,alpha:0.9},atmosphereFadeDuration:1000,lightAmplification:3,lightBaseOnly:true,lightsCutout:true,onTransitioned:null,shaking:false,shakeStrength:8,shakeDuration:2,shakeFunction:false,shakeOffset:null,shakeTimer:null,_transitionTime:0,_transitionDuration:0,_transitionFrom:{x:0,y:0},_snap:true,_center:true,_entityInvulnerable:false,_entityPaused:false,_entityAlpha:1,_boundsScreen:_uti.boundsMinMax(0,0,0,0),_rLast:0,_gLast:0,_bLast:0,_alphaLast:0,init:function(settings){ig.merge(this,settings);this._snap=this.snapFirstFollow;this._center=this.centerFirstFollow;this.onTransitioned=new ig.Signal();this.shakeTimer=new ig.Timer();ig.system.onResized.add(this.resize,this,-1);},reset:function(){this.screenLast.x=ig.game.screen.x=0;this.screenLast.y=ig.game.screen.y=0;this.shakeStop();this.removeAtmosphere(0);this.unfollow();this.unfollowFallback();this.onTransitioned.removeAll();this.onTransitioned.forget();this._snap=this.snapFirstFollow;this._center=this.centerFirstFollow;},ready:function(){this.getBoundsLevel();if(this.autoFollowPlayer){this.followPlayer();}},pause:function(){this.paused=true;this.shakeTimer.pause();},unpause:function(){this.paused=false;this.shakeTimer.unpause();},getBoundsLevel:function(map){map=typeof map!='undefined'?map:ig.game.collisionMap;if((this.keepInsideLevel.x||this.keepInsideLevel.y)&&map&&map.width&&map.height&&map.tilesize){this.boundsLevel=_uti.boundsMinMax(0,0,map.width*map.tilesize-ig.system.width,map.height*map.tilesize-ig.system.height,this.boundsLevel);if(this.boundsLevel.maxX<0){this.boundsLevel.minX=this.boundsLevel.maxX=this.boundsLevel.maxX*0.5;}
if(this.boundsLevel.maxY<0){this.boundsLevel.minY=this.boundsLevel.maxY=this.boundsLevel.maxY*0.5;}}},shake:function(duration,strength,fn){if(!this.shaking){this.shaking=true;this.shakeDuration=duration||this.shakeDuration;this.shakeStrength=strength||this.shakeStrength;this.shakeFunction=fn||this.shakeFunction;if(!this.shakeOffset){this.shakeOffset={x:0,y:0};}
else{_utv2.zero(this.shakeOffset);}
this.shakeTimer.set(this.shakeDuration);}},shakeStop:function(){if(this.shaking){this.shaking=false;ig.game.screen.x-=this.shakeOffset.x;ig.game.screen.y-=this.shakeOffset.y;}},updateShake:function(){if(this.shaking){ig.game.screen.x-=this.shakeOffset.x;ig.game.screen.y-=this.shakeOffset.y;var delta=this.shakeTimer.delta();if(delta>=0){this.shakeStop();}
else{var deltaPct=-delta/this.shakeDuration;var value=this.shakeFunction?this.shakeFunction():(this.shakeStrength*Math.pow(deltaPct,2));if(value>0.5){this.shakeOffset.x+=_utm.map(Math.random(),0,1,-value,value);this.shakeOffset.y+=_utm.map(Math.random(),0,1,-value,value);}
_utv2.multiplyScalar(this.shakeOffset,deltaPct);}}},toggleAtmosphere:function(duration,atmosphereSettings){if(!this.atmosphere){this.addAtmosphere(duration,atmosphereSettings);}
else{this.removeAtmosphere(duration);}},addAtmosphere:function(duration,atmosphereSettings){if(!this.atmosphere||atmosphereSettings){if(this.atmosphere){this.removeAtmosphere(duration);}
this.atmosphere=true;this.atmosphereFadeDuration=_ut.isNumber(duration)?duration:this.atmosphereFadeDuration;this.atmosphereOverlay=ig.game.spawnEntity(ig.UIOverlay,0,0,(atmosphereSettings?ig.merge(ig.merge({},this.atmosphereSettings),atmosphereSettings):this.atmosphereSettings));if(this.atmosphereOverlay.added){this._showAtmosphere();}
else{this.atmosphereOverlay.onAdded.addOnce(this._showAtmosphere,this);}}},_showAtmosphere:function(){if(this.atmosphereOverlay){this.atmosphereOverlay.alpha=0;this.atmosphereOverlay.fadeTo(this.atmosphereOverlay.resetState.alpha,{duration:this.atmosphereFadeDuration});this.changed=true;this.updateAtmosphere();}},removeAtmosphere:function(duration){this.atmosphere=false;if(this.atmosphereOverlay){if(!this.atmosphereOverlay.added){this.atmosphereOverlay.onAdded.remove(this._showAtmosphere,this);ig.game.removeEntity(this.atmosphereOverlay);}
else{this.atmosphereOverlay.fadeToDeath({duration:_ut.isNumber(duration)?duration:this.atmosphereFadeDuration});}
this.atmosphereOverlay=undefined;}},updateAtmosphere:function(){if(this.atmosphere){if(this.changed||(this.lightsCutout&&(ig.game.dirtyLights||ig.game.changedLights))){this.atmosphereOverlay.refresh(true);var context=this.atmosphereOverlay.fill.dataContext;if(this.lightsCutout){context.globalCompositeOperation="destination-out";var lights=ig.game.lights;var i,il;for(i=0,il=lights.length;i<il;i++){var light=lights[i];if(light.visible&&light.image){context.globalAlpha=Math.min(1,light.alpha*this.lightAmplification);context.drawImage((this.lightBaseOnly&&light.castsShadows?light.imageBase.data:light.image.data),ig.system.getDrawPos(light.posDraw.x-ig.game.screen.x),ig.system.getDrawPos(light.posDraw.y-ig.game.screen.y));}}
context.globalCompositeOperation="source-over";}}}},follow:function(entity,snap,center){snap=snap||this._snap;center=center||this._center;if(this.entity!==entity||snap||center){this._snap=this._center=false;this.unfollow();this.entity=entity;if(this.entity){this.transitioning=true;this.transitioningInstantly=snap;this.transitioningCenter=center;this._transitionTime=0;_utv2.copy(this._transitionFrom,ig.game.screen);if(this.transitioningCenter){_uti.bounds(ig.game.screen.x,ig.game.screen.y,0,0,this._boundsScreen);}
else{_uti.boundsCopy(this._boundsScreen,this.boundsTrap,ig.game.screen.x,ig.game.screen.y);}}}
if(this.transitioning){if(this.transitioningInstantly){this.updateFollow();}}
else if(this.entity){this.transitionComplete();}},followFallback:function(entity,snap,center){if(this.entityFallback!==entity){this.entityFallback=entity;if(!this.entity){this.follow(this.entityFallback,snap,center);}}},followRespawnable:function(entity){this.followFallback(entity);if(this.transitioning){if(!entity.invulnerable){entity.invulnerable=this._entityInvulnerable=true;}
if(!entity.paused){this._entityPaused=true;entity.pause();this._entityAlpha=entity.alpha;entity.alpha=0;}}},followPlayer:function(snap,center){var player=ig.game.getPlayer();if(player){this.unfollow();this.followFallback(player,snap,center);player.onRemoved.add(this.unfollowFallback,this);player.onAdded.add(this.followRespawnable,this);}},unfollow:function(){if(this.entity){this.entity=undefined;}
if(this.transitioning){this.transitioning=false;this._transitionTime=0;_uti.boundsCopy(this._boundsScreen,this.boundsTrap,ig.game.screen.x,ig.game.screen.y);}},unfollowFallback:function(){if(this.entityFallback){if(this.entityFallback===this.entity){this.unfollow();}
this.entityFallback=undefined;}
if(this.transitioning){this.transitioning=false;_uti.boundsCopy(this._boundsScreen,this.boundsTrap,ig.game.screen.x,ig.game.screen.y);}},transitionComplete:function(){this.transitioning=this.transitioningInstantly=this.transitioningCenter=false;if(this._entityInvulnerable&&this.entity.invulnerable){this.entity.invulnerable=this._entityInvulnerable=false;}
if(this._entityPaused&&this.entity.paused){this._entityPaused=false;this.entity.unpause();this.entity.alpha=this._entityAlpha;}
this.onTransitioned.dispatch();},updateFollow:function(){var screen=ig.game.screen;if(!this.entity&&this.entityFallback){this.follow(this.entityFallback);}
if(this.entity){_utv2.copy(this.screenLast,screen);var screenNextX=this.entity.pos.x+this.entity.size.x*0.5-ig.system.width*0.5;var screenNextY=this.entity.pos.y+this.entity.size.y*0.5-ig.system.height*0.5;var noteX,noteY;if(this.transitioning){this.changed=true;if(this.transitioningInstantly){this.transitionPct=1;}
else{if(this._transitionTime===0){if(this.transitionDistance>0){var dx=(screenNextX-this._boundsScreen.minX);var dy=(screenNextY-this._boundsScreen.minY);var distance=Math.sqrt(dx*dx+dy*dy);this._transitionDuration=_utm.clamp((this.transitionDuration*(distance/this.transitionDistance)),this.transitionDurationMin,this.transitionDurationMax);}
else{this._transitionDuration=this.transitionDuration;}}
this._transitionTime+=ig.system.tick;this.transitionPct=this._transitionTime/this._transitionDuration;}
var value=_tw.Easing.Quadratic.InOut(this.transitionPct);if(screenNextX<this._boundsScreen.minX){screen.x=this._transitionFrom.x+(screenNextX-(this._boundsScreen.minX+(this.transitioningCenter?this._boundsScreen.width*0.5:0)))*value;}
else if(screenNextX>this._boundsScreen.maxX){screen.x=this._transitionFrom.x+(screenNextX-(this._boundsScreen.maxX-(this.transitioningCenter?this._boundsScreen.width*0.5:0)))*value;}
else{noteX=true;}
if(screenNextY<this._boundsScreen.minY){screen.y=this._transitionFrom.y+(screenNextY-(this._boundsScreen.minY+(this.transitioningCenter?this._boundsScreen.height*0.5:0)))*value;}
else if(screenNextY>this._boundsScreen.maxY){screen.y=this._transitionFrom.y+(screenNextY-(this._boundsScreen.maxY-(this.transitioningCenter?this._boundsScreen.height*0.5:0)))*value;}
else{noteY=true;}
if(this.transitionPct>=1||(noteX&&noteY)){this.transitionComplete();}}
else{if(this.keepCentered){screen.x+=(screenNextX-screen.x)*this.lerp;screen.y+=(screenNextY-screen.y)*this.lerp;}
else{if(screenNextX<this._boundsScreen.minX){screen.x+=screenNextX-this._boundsScreen.minX;}
else if(screenNextX>this._boundsScreen.maxX){screen.x+=screenNextX-this._boundsScreen.maxX;}
if(screenNextY<this._boundsScreen.minY){screen.y+=screenNextY-this._boundsScreen.minY;}
else if(screenNextY>this._boundsScreen.maxY){screen.y+=screenNextY-this._boundsScreen.maxY;}}
if(screen.x-this.screenLast.x!==0||screen.y-this.screenLast.y!==0){this.changed=true;}}}
if(this.changed){if(this.keepInsideLevel.x){this.screenLast.x=screen.x=_utm.clamp(screen.x,this.boundsLevel.minX,this.boundsLevel.maxX);}
else{this.screenLast.x=screen.x;}
if(this.keepInsideLevel.y){this.screenLast.y=screen.y=_utm.clamp(screen.y,this.boundsLevel.minY,this.boundsLevel.maxY);}
else{this.screenLast.y=screen.y;}
if(!this.transitioning){_uti.boundsCopy(this._boundsScreen,this.boundsTrap,screen.x,screen.y);}}
if(this.shaking){screen.x+=this.shakeOffset.x;screen.y+=this.shakeOffset.y;this.changed=true;}},update:function(){this.changed=false;if(!this.paused){this.updateShake();this.updateFollow();this.updateAtmosphere();}},resize:function(){this.changed=true;this.getBoundsLevel();if(this.boundsTrapAsPct){_uti.boundsCopy(this.boundsTrap,this.boundsTrapPct,0,0,ig.system.width*0.5,ig.system.height*0.5);}
if(this.entity){this.follow(this.entity,true,true);}
this.updateAtmosphere();}});});

// lib/plusplus/core/player-manager.js
ig.baked=true;ig.module('plusplus.core.player-manager').requires('plusplus.core.config','plusplus.core.entity','plusplus.helpers.utils','plusplus.helpers.utilsmath').defines(function(){"use strict";var _c=ig.CONFIG;var _ut=ig.utils;var _utm=ig.utilsmath;ig.PlayerManager=ig.global.PlayerManager=ig.Class.extend({autoManagePlayer:_c.PLAYER_MANAGER.AUTO_MANAGE_PLAYER,entity:null,entityFallback:null,zIndex:0,type:"",group:"",holdToMove:_c.PLAYER_MANAGER.HOLD_TO_MOVE,swipeToJump:_c.PLAYER_MANAGER.SWIPE_TO_JUMP,onManageStarted:null,onManageStopped:null,_zIndex:0,_type:ig.EntityExtended.TYPE.NONE,_group:ig.EntityExtended.GROUP.NONE,init:function(settings){ig.merge(this,settings);this.onManageStarted=new ig.Signal();this.onManageStopped=new ig.Signal();},ready:function(){if(this.autoManagePlayer){this.managePlayer();}},reset:function(){this.onManageStarted.removeAll();this.onManageStarted.forget();this.onManageStopped.removeAll();this.onManageStopped.forget();this.manageReleaseFallback();this.manageRelease();},manage:function(entity){if(this.entity!==entity){this.manageRelease();if(entity instanceof ig.EntityExtended){this.manageStart(entity);}}},manageFallback:function(entity){if(this.entityFallback!==entity){this.entityFallback=entity;if(!this.entity){this.manage(entity);}}},managePlayer:function(){var player=ig.game.getPlayer();if(player&&this.entity!==player){this.manageRelease();this.manageFallback(player);player.onRemoved.add(this.manageReleaseFallback,this);player.onAdded.add(this.managePlayer,this);}},manageStart:function(entity){this.entity=entity;this.entity.onRemoved.addOnce(this.manageRelease,this);if(this.zIndex&&entity.zIndex!==this.zIndex){this._zIndex=entity.zIndex;entity.zIndex=this.zIndex;ig.game.sortEntitiesDeferred(entity.layerName);}
if(this.type){this._type=entity.type;_ut.addType(ig.EntityExtended,entity,'type',this.type);}
if(this.group){this._group=entity.group;_ut.addType(ig.EntityExtended,entity,'group',this.group,"GROUP");}
if(ig.game.camera&&ig.game.camera.autoFollowPlayer&&ig.game.camera.entity!==entity){if(entity===ig.game.getPlayer()){ig.game.camera.followPlayer();}
else{ig.game.camera.follow(entity);}
ig.game.camera.onTransitioned.addOnce(this.highlightManaged,this);}
else{this.highlightManaged();}
if(typeof entity.manageStart==='function'){entity.manageStart();}
this.onManageStarted.dispatch(entity);},manageRelease:function(entity){if((!entity&&this.entity)||(entity&&this.entity===entity)){this.manageStop();}},manageReleaseFallback:function(entity){if((!entity&&this.entityFallback)||(entity&&this.entityFallback===entity)){if(this.entity===this.entityFallback){this.manageRelease();}
this.entityFallback=null;}},manageStop:function(){var entity=this.entity;if(ig.game.camera){ig.game.camera.onTransitioned.remove(this.highlightManaged,this);}
entity.onRemoved.remove(this.manageRelease,this);if(this.zIndex&&entity.zIndex!==this._zIndex){entity.zIndex=this._zIndex;ig.game.sortEntitiesDeferred(entity.layerName);}
if(this.type){entity.type=this._type;}
if(this.group){entity.group=this._group;}
this.entity=null;if(typeof entity.manageStop==='function'){entity.manageStop();}
this.onManageStopped.dispatch(entity);},highlightManaged:function(){if(this.entity&&!this.entity._killed&&this.entity.currentAnim==this.entity.anims[this.entity.getDirectionalAnimName("idle")]){this.entity.animOverride(this.entity.getDirectionalAnimName("highlight"));}},update:function(){if(!this.entity&&this.entityFallback){this.manage(this.entityFallback);}
if(this.isManagedControllable()){this.handleInput();}},isManagedControllable:function(){return this.entity&&!this.entity.paused&&this.entity.controllable;},handleInput:function(){var i,il;var inputPoints;var inputPoint;if(!this.entity.movingTo){if(this.entity.jumping){this.entity.moveToHereHorizontal();}
else{this.entity.moveToHere();}}
if(this.entity.handleInput){this.entity.handleInput();}
if(ig.input.state('right')){this.entity.moveToRight();}
else if(ig.input.state('left')){this.entity.moveToLeft();}
if(ig.input.state('up')){if(!this.entity.hasGravity){this.entity.moveToUp();}
else{this.entity.climbUp();}}
else if(ig.input.state('down')){if(!this.entity.hasGravity){this.entity.moveToDown();}
else{this.entity.climbDown();}}
if(this.holdToMove&&ig.input.state('hold')){inputPoints=ig.input.getInputPoints(['holding'],[true]);for(i=0,il=inputPoints.length;i<il;i++){inputPoint=inputPoints[i];if(!inputPoint.targetsDownStart.length){var halfWidth=this.entity.size.x*0.5;var halfHeight=this.entity.size.y*0.5;var dx=inputPoint.worldX-this.entity.pos.x+halfWidth;var dy=inputPoint.worldY-this.entity.pos.y+halfHeight;if(_utm.almostEqual(dx,0,halfWidth)!==true){if(dx>0){this.entity.moveToRight();}
else{this.entity.moveToLeft();}}
if(_utm.almostEqual(dy,0,halfHeight)!==true){if(dy>0){if(!this.entity.hasGravity){this.entity.moveToDown();}
else{this.entity.climbDown();}}
else{if(!this.entity.hasGravity){this.entity.moveToUp();}
else{this.entity.climbUp();}}}}}}
if(ig.input.pressed('jump')){this.entity.jump();}
else if(this.swipeToJump&&ig.input.state('swipe')){inputPoints=ig.input.getInputPoints(['swiping'],[true]);for(i=0,il=inputPoints.length;i<il;i++){if(inputPoints[i].swipingUp){this.entity.jump();}}}}});});

// lib/plusplus/entities/trigger.js
ig.baked=true;ig.module('plusplus.entities.trigger').requires('plusplus.core.timer','plusplus.core.entity','plusplus.helpers.utils','plusplus.helpers.signals').defines(function(){"use strict";var _ut=ig.utils;ig.EntityTrigger=ig.global.EntityTrigger=ig.EntityExtended.extend({_wmScalable:true,_wmDrawBox:true,_wmBoxColor:'rgba( 255, 255, 0, 0.7 )',frozen:true,target:{},sortTargetsBy:null,targetSequence:[],wait:0,delay:0,triggerAfterDelay:false,once:true,suicidal:true,triggerable:true,useCheckingAsTarget:false,triggering:false,autoComplete:true,autoToggle:false,teardownWhenComplete:true,waitTimer:null,delayTimer:null,onCompleted:null,_delaying:false,initTypes:function(){this.parent();_ut.addType(ig.EntityExtended,this,'type',"TRIGGER");_ut.addType(ig.EntityExtended,this,'checkAgainst',"PLAYER");},initProperties:function(){this.parent();this.waitTimer=new ig.Timer();this.delayTimer=new ig.Timer();this.onCompleted=new ig.Signal();},resetExtras:function(){var activated=this.activated;this.activated=false;this.parent();if(activated){this.trigger();}},check:function(entity){this.parent(entity);if(this.triggerable){this.trigger(entity,true,true);}},trigger:function(entity,needsActivation,entityIsChecking){if(this.getCanTrigger(entity)){if(this.delay>0&&!this._delaying){this._delaying=true;var pausedAt=this.delayTimer.pausedAt;this.delayTimer.set(this.delay);this.delayTimer.pausedAt=pausedAt;}
if(this.delayTimer.delta()>=0){this._delaying=false;this.triggering=true;this.targetSequence.length=0;for(var name in this.target){var target=ig.game.namedEntities[this.target[name]];if(target&&!target.triggering){this.targetSequence.push(target);}}
if(entityIsChecking&&this.useCheckingAsTarget){_ut.arrayCautiousAdd(this.targetSequence,entity);}
if(this.sortTargetsBy){this.targetSequence.sort(this.sortTargetsBy);}
this.handleTargets(entity,needsActivation);if(this.wait){this.waitTimer.set(this.wait);}
this.triggering=false;if(this.autoComplete){this.complete();}}}},getCanTrigger:function(entity){return!this.triggering&&(!this.once||!this.activated)&&(!this.wait||this.waitTimer.delta()>=0);},handleTargets:function(entity,needsActivation){if(needsActivation!==false){this.activate(entity);}
for(var i=0,il=this.targetSequence.length;i<il;i++){var target=this.targetSequence[i];if(target instanceof ig.EntityTrigger){target.trigger(entity);}
else if(target.activate){target.activate(entity);}}},activate:function(entity){if(!this.needsTeardown){this.setup();}
if(!this.triggering){this.trigger(entity,false);}
this.parent(entity);},deactivate:function(entity){if(this.needsTeardown){this.teardown();}
this.parent(entity);},complete:function(){this.onCompleted.dispatch();this.targetSequence.length=0;if(this.suicidal){this.kill(true);}
else{if(!this.checking&&this.autoToggle&&this.activated){this.deactivate();}
else if(this.teardownWhenComplete&&this.needsTeardown){this.teardown();}}},setup:function(){this.needsTeardown=true;},teardown:function(){this.needsTeardown=false;},pause:function(){this.parent();this.delayTimer.pause();this.waitTimer.pause();},unpause:function(){this.parent();this.delayTimer.unpause();this.waitTimer.unpause();},kill:function(silent){this.triggerable=false;this.parent(silent);},cleanup:function(){if(!ig.game.hasLevel){this.onCompleted.removeAll();this.onCompleted.forget();}
if(this.needsTeardown){this.teardown();}
this.parent();},update:function(){if(!this.checking&&this.wasChecking!==this.checking){if(!this.triggerAfterDelay){this._delaying=false;}
if(this.autoToggle&&this.activated){this.deactivate();}}
if(this._delaying&&this.triggerAfterDelay&&this.delayTimer.delta()>=0){this.trigger(this);}
this.parent();}});if(ig.global.wm){delete ig.EntityExtended.prototype.staticInstantiate;ig.EntityTrigger.inject({trigger:function(){}});}});

// lib/plusplus/abstractities/spawner.js
ig.baked=true;ig.module('plusplus.abstractities.spawner').requires('plusplus.core.timer','plusplus.entities.trigger','plusplus.helpers.utils','plusplus.helpers.utilsmath','plusplus.helpers.signals').defines(function(){"use strict";var _ut=ig.utils;var _utm=ig.utilsmath;ig.Spawner=ig.EntityTrigger.extend({_wmBoxColor:'rgba( 0, 100, 255, 0.7)',triggerable:false,autoComplete:false,triggerAfterDelay:true,spawningEntity:'',spawnSettings:null,spawnCountMax:1,spawnCount:0,spawnedCount:0,spawning:false,pool:[],entities:[],duration:0,durationTimer:null,respawnDelay:0,respawnTimer:null,spawnDelay:-1,spawnAt:false,spawnTarget:{},spawnTargetSequence:[],spawnAtRandomPosition:true,spawnAtSide:null,spawnAtRandomTarget:false,spawnAtFirstTarget:false,spawnAndMoveTo:false,spawnAndMoveToSettings:null,spawnedDieWith:false,unspawnSilently:true,spawnTimer:null,onSpawned:null,onSpawnedAll:null,onUnspawned:null,onUnspawnedAll:null,_spawnedAtTargetIndex:0,_spawningComplete:false,_reactivate:false,initProperties:function(){this.parent();this.durationTimer=new ig.Timer();this.respawnTimer=new ig.Timer();this.spawnTimer=new ig.Timer();this.onSpawned=new ig.Signal();this.onSpawnedAll=new ig.Signal();this.onUnspawned=new ig.Signal();this.onUnspawnedAll=new ig.Signal();},resetExtras:function(){this.spawnAt=this.spawnAt||this;if(this.duration===-1){this.suicidal=false;}
this.parent();},activate:function(entity){this.parent(entity);if(!this.spawning&&this.spawnedCount<this.spawnCountMax&&(this.spawningEntity||this.pool.length>0)){this._spawningComplete=false;this.spawning=true;this.spawnedCount=this.spawnCount;if(this.spawnDelay<0){this.spawnDelay=this.duration>0?(this.duration/this.spawnCountMax):0;}
this.spawnTargetSequence.length=0;for(var name in this.spawnTarget){var target=ig.game.namedEntities[this.spawnTarget[name]];if(target){this.spawnTargetSequence.push(target);}}
if(this.duration===0||this.spawnDelay===0){var entitySpawned=true;while(this.spawnedCount<this.spawnCountMax&&entitySpawned){entitySpawned=this.spawnNext();}
this.complete();}
else{this.durationTimer.set(this.duration);this.spawnTimer.set(0);}}},deactivate:function(entity,silent){this.spawning=this._spawningComplete=this._reactivate=false;this.spawnedCount=this.spawnTargetSequence.length=this._spawnedAtTargetIndex=0;this.parent(entity);for(var i=this.entities.length-1;i>=0;i--){var spawned=this.entities[i];this.unspawn(spawned,silent);}},spawnNext:function(entity){if(this.spawnTargetSequence.length>0){if(this.spawnAtRandomTarget){this.spawnAt=this.spawnTargetSequence[Math.round(Math.random()*(this.spawnTargetSequence.length-1))];}
else if(this.spawnAtFirstTarget){this.spawnAt=this.spawnTargetSequence[0];}
else{this.spawnAt=this.spawnTargetSequence[this._spawnedAtTargetIndex];this._spawnedAtTargetIndex=(this._spawnedAtTargetIndex+1)%this.spawnTargetSequence.length;}}
else{this.spawnAt=this;}
if(entity){if(!entity.added||entity._killed){entity=ig.game.spawnEntity(entity,0,0,this.spawnSettings);}
_ut.arrayCautiousRemove(this.pool,entity);_ut.arrayCautiousAdd(this.entities,entity);}
else if(this.pool.length>0){entity=this.pool.pop();if(entity){entity=ig.game.spawnEntity(entity,0,0,this.spawnSettings);this.entities.push(entity);}}
else if(this.spawningEntity&&this.spawnedCount<this.spawnCountMax){entity=ig.game.spawnEntity(this.spawningEntity,0,0,this.spawnSettings);this.entities.push(entity);}
if(entity){this.spawnCount=Math.min(this.spawnCountMax,this.spawnCount+1);this.spawnedCount=Math.min(this.spawnCountMax,this.spawnedCount+1);this.spawned(entity);this.onSpawned.dispatch(entity);if(this.spawnedCount===this.spawnCountMax){this.onSpawnedAll.dispatch(this);}}
return entity;},unspawn:function(entity,silent){if(!entity._killed){entity.kill(typeof silent==='boolean'?silent:this.unspawnSilently);}
else{if(entity.spawner){entity.spawner.unlinkSpawned(entity);}
this.spawnCount=Math.max(0,this.spawnCount-1);if(!this._killed){_ut.arrayCautiousRemove(this.entities,entity);_ut.arrayCautiousAdd(this.pool,entity);this.onUnspawned.dispatch(entity);if(this.spawnCount===0){this.onUnspawnedAll.dispatch(this);}
if(this.activated&&this.duration===-1&&!this.spawning&&(this.spawnDelay>0||this.spawnCount===0)){this.spawnedCount=this.spawnCount;this.respawnTimer.set(this.respawnDelay);this._reactivate=true;}}}},spawned:function(entity){this.linkSpawned(entity);var width=entity.size.x;var height=entity.size.y;var halfWidth=width*0.5;var halfHeight=height*0.5;var spawnAtWidth=this.spawnAt.size.x;var spawnAtHeight=this.spawnAt.size.y;var spawnAtMinX=this.spawnAt.pos.x;var spawnAtMinY=this.spawnAt.pos.y;var spawnAtMaxX=spawnAtMinX+spawnAtWidth;var spawnAtMaxY=spawnAtMinY+spawnAtHeight;if(this.spawnAtRandomPosition){entity.pos.x=_utm.map(Math.random(),0,1,spawnAtMinX+halfWidth,spawnAtMaxX-halfWidth);entity.pos.y=_utm.map(Math.random(),0,1,spawnAtMinY+halfHeight,spawnAtMaxY-halfHeight);}
else{entity.pos.x=spawnAtMinX+spawnAtWidth*0.5;entity.pos.y=spawnAtMinY+spawnAtHeight*0.5;}
entity.pos.x-=halfWidth;entity.pos.y-=halfHeight;if(this.spawnAtSide){if(this.spawnAtSide.x>0){entity.pos.x=spawnAtMaxX-width-spawnAtWidth*0.5*(1-this.spawnAtSide.x);}
else if(this.spawnAtSide.x<0){entity.pos.x=spawnAtMinX+spawnAtWidth*0.5*(1+this.spawnAtSide.x);}
if(this.spawnAtSide.y>0){entity.pos.y=spawnAtMaxY-height-spawnAtHeight*0.5*(1-this.spawnAtSide.y);}
else if(this.spawnAtSide.y<0){entity.pos.y=spawnAtMinY+spawnAtHeight*0.5*(1+this.spawnAtSide.y);}}
if(this.spawnAndMoveTo&&this.spawnTargetSequence.length>0){entity.moveTo(this.spawnTargetSequence,this.spawnAndMoveToSettings);}},linkSpawned:function(entity){if(entity.spawner){entity.spawner.unlinkSpawned(entity);}
entity.onRemoved.add(this.unspawn,this);entity.spawner=this;},unlinkSpawned:function(entity){entity.onRemoved.remove(this.unspawn,this);entity.spawner=undefined;},complete:function(){this._spawningComplete=true;this.spawning=false;this.parent();},pause:function(){this.parent();this.respawnTimer.pause();this.spawnTimer.pause();this.durationTimer.pause();},unpause:function(){this.parent();this.respawnTimer.unpause();this.spawnTimer.unpause();this.durationTimer.unpause();},cleanup:function(){if(!ig.game.hasLevel){this.onSpawned.removeAll();this.onSpawned.forget();this.onSpawnedAll.removeAll();this.onSpawnedAll.forget();this.onUnspawned.removeAll();this.onUnspawned.forget();this.onUnspawnedAll.removeAll();this.onUnspawnedAll.forget();}
if(this.spawnedDieWith){for(var i=this.entities.length-1;i>=0;i--){this.unspawn(this.entities[i]);}}
if(this.entities.length){for(var i=this.entities.length-1;i>=0;i--){this.unlinkSpawned(this.entities[i]);}
this.entities.length=0;}
if(this.pool.length){for(var i=this.pool.length-1;i>=0;i--){this.unlinkSpawned(this.pool[i]);}
this.pool.length=0;}
this.spawning=this._spawningComplete=this._reactivate=false;this.spawnCount=this.spawnedCount=this.spawnTargetSequence.length=this._spawnedAtTargetIndex=0;this.parent();},update:function(){this.parent();if(this.spawning&&!this._spawningComplete&&this.spawnTimer.delta()>=0){this.spawnTimer.set(this.spawnDelay);var entitySpawned=this.spawnNext();if(this.spawnedCount>=this.spawnCountMax||!entitySpawned){this.complete();}}
else if(this._reactivate===true&&this.respawnTimer.delta()>=0){this._reactivate=false;this.activate();}}});});

// lib/plusplus/abstractities/shape.js
ig.baked=true;ig.module('plusplus.abstractities.shape').requires('plusplus.core.entity','plusplus.helpers.utils').defines(function(){"use strict";var _ut=ig.utils;ig.Shape=ig.EntityExtended.extend({_wmScalable:true,_wmDrawBox:true,_wmBoxColor:'rgba( 0, 255, 255, 0.7)',frozen:true,opaqueFromVertices:true,initTypes:function(){this.parent();_ut.addType(ig.EntityExtended,this,'type',"SHAPE");}});});

// lib/plusplus/entities/shape-solid.js
ig.baked=true;ig.module('plusplus.entities.shape-solid').requires('plusplus.abstractities.shape').defines(function(){"use strict";ig.EntityShapeSolid=ig.global.EntityShapeSolid=ig.Shape.extend({opaque:true,diffuse:1,hollow:true});});

// lib/plusplus/entities/shape-climbable.js
ig.baked=true;ig.module('plusplus.entities.shape-climbable').requires('plusplus.abstractities.shape').defines(function(){"use strict";ig.EntityShapeClimbable=ig.global.EntityShapeClimbable=ig.Shape.extend({climbable:true});});

// lib/plusplus/entities/shape-climbable-one-way.js
ig.baked=true;ig.module('plusplus.entities.shape-climbable-one-way').requires('plusplus.entities.shape-climbable').defines(function(){"use strict";ig.EntityShapeClimbableOneWay=ig.global.EntityShapeClimbableOneWay=ig.EntityShapeClimbable.extend({collides:ig.EntityExtended.COLLIDES.FIXED,oneWay:true,oneWayFacing:{x:0,y:-1}});});

// lib/plusplus/ui/ui-overlay-pause.js
ig.baked=true;ig.module('plusplus.ui.ui-overlay-pause').requires('plusplus.ui.ui-overlay').defines(function(){"use strict";ig.UIOverlayPause=ig.global.UIOverlayPause=ig.UIOverlay.extend({layerName:'ui',textSettings:{text:"PAUSED"}});});

// lib/plusplus/helpers/pathfinding.js
ig.baked=true;ig.module('plusplus.helpers.pathfinding').requires('plusplus.core.config','plusplus.core.collision-map','plusplus.core.pathfinding-map','plusplus.helpers.utilsmath','plusplus.helpers.utilstile','plusplus.helpers.utilsintersection').defines(function(){"use strict";var _c=ig.CONFIG;var _utm=ig.utilsmath;var _utt=ig.utilstile;var _uti=ig.utilsintersection;var COLLISION_TILE_ONE_WAY_UP=_c.COLLISION.TILE_ONE_WAY_UP;var COLLISION_TILE_ONE_WAY_DOWN=_c.COLLISION.TILE_ONE_WAY_DOWN;var COLLISION_TILE_ONE_WAY_RIGHT=_c.COLLISION.TILE_ONE_WAY_RIGHT;var COLLISION_TILE_ONE_WAY_LEFT=_c.COLLISION.TILE_ONE_WAY_LEFT;var COLLISION_TILE_CLIMBABLE_WITH_TOP=_c.COLLISION.TILE_CLIMBABLE_WITH_TOP;var COLLISION_TILE_CLIMBABLE_STAIRS_WITH_TOP=_c.COLLISION.TILE_CLIMBABLE_STAIRS_WITH_TOP;var COLLISION_TILES_HASH_WALKABLE=_c.COLLISION.TILES_HASH_WALKABLE;var COLLISION_TILES_HASH_SLOPED=_c.COLLISION.TILES_HASH_SLOPED;var COLLISION_TILES_HASH_CLIMBABLE=_c.COLLISION.TILES_HASH_CLIMBABLE;var COLLISION_TILES_HASH_ONE_WAY=_c.COLLISION.TILES_HASH_ONE_WAY;var WEIGHTED=_c.PATHFINDING.WEIGHTED;var WEIGHT=_c.PATHFINDING.WEIGHT;var WEIGHT_AWAY_FROM=_c.PATHFINDING.WEIGHT_AWAY_FROM;var ALLOW_DIAGONAL=_c.PATHFINDING.ALLOW_DIAGONAL;var DIAGONAL_REQUIRES_BOTH_DIRECT=_c.PATHFINDING.DIAGONAL_REQUIRES_BOTH_DIRECT;var AWAY_FROM_DISTANCE=_c.PATHFINDING.AWAY_FROM_DISTANCE;var AWAY_FROM_MAX_NODES=_c.PATHFINDING.AWAY_FROM_MAX_NODES;var STRICT_SLOPE_CHECK=_c.PATHFINDING.STRICT_SLOPE_CHECK;ig.pathfinding={};var _collisionMap=null;var _collisionMapData=null;var _pathfindingMap=null;var _pathfindingMapData=null;var _tilesize=ig.pathfinding.tilesize=1;var _tilesizeReciprocal=1;var _positions={from:{x:0.1,y:0.1},target:{x:0.1,y:0.1}};var _grid=[];var _open=[];var _closed=[];function _cleanup(){var i,il;for(i=0,il=_open.length;i<il;i++){_open[i].cleanup();}
for(i=0,il=_closed.length;i<il;i++){_closed[i].cleanup();}
_open.length=_closed.length=0;}
var HEURISTIC=ig.pathfinding.HEURISTIC={MANHATTAN:function(dx,dy){return dx+dy;},EUCLIDEAN:function(dx,dy){return Math.sqrt(dx*dx+dy*dy);},CHEBYSHEV:function(dx,dy){return Math.max(dx,dy);}};ig.PathNode=ig.Class.extend({x:0,y:0,gridX:0,gridY:0,size:0,walkable:true,ungrounded:true,insideLevel:true,tile:0,sloped:false,slopeNormal:{x:0,y:0},slopedAlong:false,slopesAlongMap:{},slopedNeighbor:false,slopedNeighborMap:{},climbable:false,oneWay:false,oneWayFacing:{x:0,y:0},weightPct:1,weight:0,neighbors:null,directNeighbors:null,neighborMap:{},corner:false,cornerMap:{},closed:false,opened:false,openIndex:0,prevNode:null,g:0,w:0,h:0,f:0,init:function(x,y,gridX,gridY,walkable,tile){var i,il;this.x=x||0;this.y=y||0;this.gridX=gridX||0;this.gridY=gridY||0;this.walkable=typeof walkable!=='undefined'?walkable:true;this.tile=tile||0;this.climbable=!!COLLISION_TILES_HASH_CLIMBABLE[this.tile];this.oneWay=!!COLLISION_TILES_HASH_ONE_WAY[this.tile];this.sloped=!!COLLISION_TILES_HASH_SLOPED[this.tile];if(this.sloped){var segmentsDef=_utt.defaultTileSegmentsDef[this.tile];if(segmentsDef){for(i=0,il=segmentsDef.length;i<il;i++){var normal=segmentsDef[i].normal;if(normal.x&&normal.y){this.slopeNormal=normal;break;}}}}
if(this.oneWay){if(this.tile===COLLISION_TILE_ONE_WAY_UP||this.tile===COLLISION_TILE_CLIMBABLE_WITH_TOP||this.tile===COLLISION_TILE_CLIMBABLE_STAIRS_WITH_TOP){this.oneWayFacing.y=-1;}
else if(this.tile===COLLISION_TILE_ONE_WAY_DOWN){this.oneWayFacing.y=1;}
if(this.tile===COLLISION_TILE_ONE_WAY_LEFT){this.oneWayFacing.x=-1;}
else if(this.tile===COLLISION_TILE_ONE_WAY_RIGHT){this.oneWayFacing.x=1;}}
if(this.walkable){if(ig.game.shapesLevel.length){this.insideLevel=false;for(i=0,il=ig.game.shapesLevel.length;i<il;i++){var shape=ig.game.shapesLevel[i];if(_uti.pointInAABB(x,y,shape.x,shape.y,shape.x+shape.size.x,shape.y+shape.size.y)&&_uti.pointInPolygon(x-(shape.x+shape.size.x*0.5),y-(shape.y+shape.size.y*0.5),shape.vertices)){this.insideLevel=true;break;}}}}
else{this.insideLevel=false;}},cleanup:function(){this.g=this.h=this.f=this.w=this.openIndex=0;this.prevNode=null;this.closed=this.opened=false;}});ig.pathfinding.rebuild=function(collisionMap,pathfindingMap){ig.pathfinding.unload();_collisionMap=collisionMap;_pathfindingMap=pathfindingMap;if(_collisionMap&&_pathfindingMap&&_pathfindingMap.tilesize!==_collisionMap.tilesize){throw new Error("Maps tilesize mismatch: pathfinding map and collision map must have the same tilesize!");}
if(_collisionMap){_collisionMapData=_collisionMap.data;_tilesize=ig.pathfinding.tilesize=_collisionMap.tilesize;_tilesizeReciprocal=1/_collisionMap.tilesize;}
if(_pathfindingMap){_pathfindingMapData=_pathfindingMap.data;_tilesize=ig.pathfinding.tilesize=_pathfindingMap.tilesize;_tilesizeReciprocal=1/_pathfindingMap.tilesize;}
ig.pathfinding.rebuildGrid();};ig.pathfinding.unload=function(){_grid.length=0;_collisionMap=_collisionMapData=_pathfindingMap=_pathfindingMapData=null;_tilesize=ig.pathfinding.tilesize=0;};ig.pathfinding.rebuildGrid=function(){var row;var tile;var gridRow;var node;var y,yl;var x,xl;var worldX,worldY;if(_collisionMap&&_collisionMapData){for(y=0,yl=_collisionMapData.length;y<yl;y++){row=_collisionMapData[y];gridRow=_grid[y];if(!gridRow){gridRow=_grid[y]=[];}
for(x=0,xl=row.length;x<xl;x++){tile=row[x];worldX=x*_tilesize+_tilesize*0.5;worldY=y*_tilesize+_tilesize*0.5;gridRow[x]=new ig.PathNode(worldX,worldY,x,y,!!COLLISION_TILES_HASH_WALKABLE[tile],tile);}}}
if(_pathfindingMap&&_pathfindingMapData){for(y=0,yl=_pathfindingMapData.length;y<yl;y++){row=_pathfindingMapData[y];gridRow=_grid[y];if(!gridRow){gridRow=_grid[y]=[];}
for(x=0,xl=(!_collisionMap||!_collisionMapData[0]||row.length>=_collisionMapData[0].length?row.length:_collisionMapData[0].length);x<xl;x++){tile=row[x]||0;var settings=_pathfindingMap.tiledef[tile];node=gridRow[x];if(!node){worldX=x*_tilesize+_tilesize*0.5;worldY=y*_tilesize+_tilesize*0.5;node=gridRow[x]=new ig.PathNode(worldX,worldY,x,y,settings&&typeof settings.walkable!=='undefined'?settings.walkable:true,tile);}
ig.merge(node,settings);}}}
for(y=0,yl=_grid.length;y<yl;y++){row=_grid[y];for(x=0,xl=row.length;x<xl;x++){node=row[x];node.size=_tilesize;var nm=node.neighborMap;var prevRow=_grid[y-1];var nextRow=_grid[y+1];if(prevRow){nm.top=prevRow[x];if(x>0){nm.topleft=prevRow[x-1];}
if(x<xl-1){nm.topright=prevRow[x+1];}}
if(x>0){nm.left=row[x-1];}
if(x<xl-1){nm.right=row[x+1];}
if(nextRow){nm.bottom=nextRow[x];if(x>0){nm.bottomleft=nextRow[x-1];}
if(x<xl-1){nm.bottomright=nextRow[x+1];}}
node.ungrounded=!nm.bottom||(nm.bottom.walkable&&nm.bottom.oneWayFacing.y>=0);if(nm.top&&nm.top.walkable&&(nm.top.climbable||nm.top.oneWayFacing.y<=0)&&nm.left&&nm.left.walkable&&(nm.left.climbable||nm.left.oneWayFacing.x<=0)&&(!nm.topleft||(!nm.topleft.walkable&&!nm.topleft.sloped))){node.corner=node.cornerMap.topleft=true;}
if(nm.top&&nm.top.walkable&&(nm.top.climbable||nm.top.oneWayFacing.y<=0)&&nm.right&&nm.right.walkable&&(nm.right.climbable||nm.right.oneWayFacing.x>=0)&&(!nm.topright||(!nm.topright.walkable&&!nm.topright.sloped))){node.corner=node.cornerMap.topright=true;}
if(nm.bottom&&nm.bottom.walkable&&(nm.bottom.climbable||nm.bottom.oneWayFacing.y>=0)&&nm.left&&nm.left.walkable&&(nm.left.climbable||nm.left.oneWayFacing.x<=0)&&(!nm.bottomleft||(!nm.bottomleft.walkable&&!nm.bottomleft.sloped))){node.corner=node.cornerMap.bottomleft=true;}
if(nm.bottom&&nm.bottom.walkable&&(nm.bottom.climbable||nm.bottom.oneWayFacing.y>=0)&&nm.right&&nm.right.walkable&&(nm.right.climbable||nm.right.oneWayFacing.x>=0)&&(!nm.bottomright||(!nm.bottomright.walkable&&!nm.bottomright.sloped))){node.corner=node.cornerMap.bottomright=true;}
if(nm.top&&nm.top.sloped){node.slopedNeighbor=node.slopedNeighborMap.top=true;}
if(nm.bottom&&nm.bottom.sloped){node.slopedNeighbor=node.slopedNeighborMap.bottom=true;}
if(nm.right&&nm.right.sloped){node.slopedNeighbor=node.slopedNeighborMap.right=true;}
if(nm.left&&nm.left.sloped){node.slopedNeighbor=node.slopedNeighborMap.left=true;}
if(nm.topleft&&nm.topleft.sloped){node.slopedNeighbor=node.slopedNeighborMap.topleft=true;}
if(nm.topright&&nm.topright.sloped){node.slopedNeighbor=node.slopedNeighborMap.topright=true;}
if(nm.bottomleft&&nm.bottomleft.sloped){node.slopedNeighbor=node.slopedNeighborMap.bottomleft=true;}
if(nm.bottomright&&nm.bottomright.sloped){node.slopedNeighbor=node.slopedNeighborMap.bottomright=true;}
node.slopesAlongMap.top=false;node.slopesAlongMap.bottom=node.walkable&&!node.oneWay&&nm.bottom&&nm.bottom.sloped;if(ig.pathfinding.getIsAlongSlope(node,-1,0)){node.slopesAlongMap.left=node.slopedAlong=true;}
if(ig.pathfinding.getIsAlongSlope(node,1,0)){node.slopesAlongMap.right=node.slopedAlong=true;}
if(ig.pathfinding.getIsAlongSlope(node,-1,-1)){node.slopesAlongMap.topleft=node.slopedAlong=true;}
if(ig.pathfinding.getIsAlongSlope(node,1,-1)){node.slopesAlongMap.topright=node.slopedAlong=true;}
if(ig.pathfinding.getIsAlongSlope(node,-1,1)){node.slopesAlongMap.bottomleft=node.slopedAlong=true;}
if(ig.pathfinding.getIsAlongSlope(node,1,1)){node.slopesAlongMap.bottomright=node.slopedAlong=true;}
node.directNeighbors=ig.pathfinding.getDirectNeighbors(node);node.neighbors=[].concat(node.directNeighbors,ig.pathfinding.getDiagonalNeighbors(node));}}};ig.pathfinding.getPathToEntity=function(entityPathing,entityTarget,avoidEntities,searchDistance,heuristicType){var positions=ig.pathfinding.getPositionPathfindingEntities(entityPathing,entityTarget,_positions);return ig.pathfinding.getPathTo(positions.from.x,positions.from.y,positions.target.x,positions.target.y,avoidEntities,searchDistance,entityPathing,entityTarget,heuristicType);};ig.pathfinding.getPathToPoint=function(entityPathing,targetX,targetY,avoidEntities,searchDistance,entityTarget,heuristicType){var from=ig.pathfinding.getPositionPathfindingPoint(entityPathing,targetX,targetY,_positions.from);return ig.pathfinding.getPathTo(from.x,from.y,targetX,targetY,avoidEntities,searchDistance,entityPathing,entityTarget,heuristicType);};ig.pathfinding.getPathTo=function(fromX,fromY,targetX,targetY,avoidEntities,searchDistance,entityPathing,entityTarget,heuristicType){var path;if(entityPathing&&entityPathing.path){path=entityPathing.path;path.length=0;}
else{path=[];}
var grid=_grid;if(grid.length===0){return path;}
var gridFromX=Math.floor(fromX*_tilesizeReciprocal);var gridFromY=Math.floor(fromY*_tilesizeReciprocal);var gridDestinationX=Math.floor(targetX*_tilesizeReciprocal);var gridDestinationY=Math.floor(targetY*_tilesizeReciprocal);var startNode=grid[gridFromY]&&grid[gridFromY][gridFromX];var destinationNode=grid[gridDestinationY]&&grid[gridDestinationY][gridDestinationX];if(!startNode||!destinationNode||startNode===destinationNode){return path;}
var open=_open;var closed=_closed;var heuristic=HEURISTIC[heuristicType||'MANHATTAN'];var abs=Math.abs;var SQRT2=Math.SQRT2;var neighbors;var neighbor;var openNode;var i,il;var j,jl;var tilesize=_tilesize;var entityPathingSize=tilesize;var needsAvoidEntityCheck;var diagonalDouble;var nodeHasCollidingEntities;var neighborMap;var diagonalUnsafe;var topleft;var topright;var bottomleft;var bottomright;var diagonalStartIndex;if(entityPathing){entityPathingSize=Math.max(entityPathing.size.x,entityPathing.size.y);diagonalDouble=ALLOW_DIAGONAL&&DIAGONAL_REQUIRES_BOTH_DIRECT;if(avoidEntities){needsAvoidEntityCheck=true;nodeHasCollidingEntities=ig.pathfinding.nodeHasCollidingEntities;}}
var needsDistCheck;if(entityTarget&&searchDistance>0){needsDistCheck=true;searchDistance*=_tilesizeReciprocal;searchDistance*=searchDistance;}
else{needsDistCheck=false;}
open.push(startNode);while(open.length>0){var currentNode=open.pop();var gridCurrentX=currentNode.gridX;var gridCurrentY=currentNode.gridY;closed.push(currentNode);currentNode.closed=true;if(currentNode===destinationNode){while(currentNode){path.push(currentNode);currentNode=currentNode.prevNode;}
_cleanup();return path;}
neighbors=currentNode.neighbors;il=neighbors.length;if(diagonalDouble){if(entityPathingSize>tilesize&&il<8&&!currentNode.slopedNeighbor){neighbors=currentNode.directNeighbors;il=neighbors.length;diagonalStartIndex=-1;diagonalUnsafe=false;}
else{neighborMap=currentNode.neighborMap;topleft=topright=bottomleft=bottomright=diagonalUnsafe=false;diagonalStartIndex=(il*0.5)|0+1;}}
for(i=0;i<il;i++){neighbor=neighbors[i];if(neighbor.closed){continue;}
var gridX=neighbor.gridX;var gridY=neighbor.gridY;if(neighbor!==destinationNode){if(needsDistCheck){var deltaX=gridX-gridDestinationX;var deltaY=gridY-gridDestinationY;if(deltaX*deltaX+deltaY*deltaY>searchDistance){continue;}}
if(needsAvoidEntityCheck){if(diagonalUnsafe&&((topleft&&neighbor===neighborMap.topleft)||(topright&&neighbor===neighborMap.topright)||(bottomleft&&neighbor===neighborMap.bottomleft)||(bottomright&&neighbor===neighborMap.bottomright))){continue;}
else if(nodeHasCollidingEntities(neighbor,currentNode,entityPathing,entityTarget)){if(diagonalDouble&&i<diagonalStartIndex){if(neighbor===neighborMap.top){diagonalUnsafe=topleft=topright=true;}
if(neighbor===neighborMap.bottom){diagonalUnsafe=bottomleft=bottomright=true;;}
if(neighbor===neighborMap.left){diagonalUnsafe=topleft=bottomleft=true;}
if(neighbor===neighborMap.right){diagonalUnsafe=topright=bottomright=true;}}
continue;}}}
var dg=(gridX-gridCurrentX)===0||(gridY-gridCurrentY)===0?1:SQRT2;var ng=currentNode.g+dg;var nw;if(WEIGHTED){nw=currentNode.w+dg+neighbor.weight+WEIGHT*neighbor.weightPct;}
else{nw=ng;}
if(!neighbor.opened||nw<neighbor.w){neighbor.g=ng;neighbor.w=nw;neighbor.h=neighbor.h||heuristic(abs(gridX-gridDestinationX),abs(gridY-gridDestinationY));neighbor.f=neighbor.w+neighbor.h;neighbor.prevNode=currentNode;if(!neighbor.opened){neighbor.opened=true;for(j=open.length;j>0;j--){openNode=open[j-1];if(neighbor.f<=openNode.f){break;}
else{openNode.openIndex=j;open[j]=openNode;}}
neighbor.openIndex=j;open[j]=neighbor;}
else{var shifted;for(j=neighbor.openIndex,jl=open.length-1;j<jl;j++){openNode=open[j+1];if(openNode.f<=neighbor.f){shifted=true;break;}
else{openNode.openIndex=j;open[j]=openNode;}}
if(!shifted){j=open.length;}
neighbor.openIndex=j;open[j]=neighbor;}}}}
_cleanup();return path;};ig.pathfinding.getPathAwayFromEntity=function(entityPathing,entityTarget,avoidEntities,searchDistance,heuristicType){return ig.pathfinding.getPathAwayFrom(entityPathing.pos.x+entityPathing.size.x*0.5,entityPathing.pos.y+entityPathing.size.y*0.5,entityTarget.pos.x+entityTarget.size.x*0.5,entityTarget.pos.y+entityTarget.size.y*0.5,avoidEntities,searchDistance,entityPathing,heuristicType);};ig.pathfinding.getPathAwayFromPoint=function(entityPathing,awayFromX,awayFromY,avoidEntities,searchDistance,heuristicType){return ig.pathfinding.getPathAwayFrom(entityPathing.pos.x+entityPathing.size.x*0.5,entityPathing.pos.y+entityPathing.size.y*0.5,awayFromX,awayFromY,avoidEntities,searchDistance,entityPathing,heuristicType);};ig.pathfinding.getPathAwayFrom=function(fromX,fromY,awayFromX,awayFromY,avoidEntities,searchDistance,entityPathing,heuristicType){var path;if(entityPathing&&entityPathing.path){path=entityPathing.path;path.length=0;}
else{path=[];}
var grid=_grid;if(grid.length===0){return path;}
var gridFromX=Math.floor(fromX*_tilesizeReciprocal);var gridFromY=Math.floor(fromY*_tilesizeReciprocal);var gridAwayFromX=Math.floor(awayFromX*_tilesizeReciprocal);var gridAwayFromY=Math.floor(awayFromY*_tilesizeReciprocal);var startNode=grid[gridFromY]&&grid[gridFromY][gridFromX];var awayFromNode=grid[gridAwayFromY]&&grid[gridAwayFromY][gridAwayFromX];if(!startNode||!awayFromNode){return path;}
var open=_open;var closed=_closed;var heuristic=HEURISTIC[heuristicType||'MANHATTAN'];var abs=Math.abs;var SQRT2=Math.SQRT2;var neighbors;var neighbor;var openNode;var i,il;var j,jl;var tilesize=_tilesize;var entityPathingSize=tilesize;var needsAvoidEntityCheck;var diagonalDouble;var nodeHasCollidingEntities;var neighborMap;var diagonalUnsafe;var topleft;var topright;var bottomleft;var bottomright;var diagonalStartIndex;if(entityPathing){entityPathingSize=Math.max(entityPathing.size.x,entityPathing.size.y);diagonalDouble=ALLOW_DIAGONAL&&DIAGONAL_REQUIRES_BOTH_DIRECT;if(avoidEntities){needsAvoidEntityCheck=true;nodeHasCollidingEntities=ig.pathfinding.nodeHasCollidingEntities;}}
if(searchDistance>0){searchDistance*=_tilesizeReciprocal;}
else{searchDistance=AWAY_FROM_DISTANCE*_tilesizeReciprocal;}
searchDistance*=searchDistance;open.push(startNode);var bestCost=Infinity;var bestDistance=-Infinity;var bestFleeNode;var gridDeltaX=gridFromX-gridAwayFromX;var gridDeltaY=gridFromY-gridAwayFromY;var gridDistanceAwayStart=gridDeltaX*gridDeltaX+gridDeltaY*gridDeltaY;var fleeNode;while(open.length>0){var currentNode=open.pop();var gridCurrentX=currentNode.gridX;var gridCurrentY=currentNode.gridY;closed.push(currentNode);currentNode.closed=true;gridDeltaX=gridCurrentX-gridAwayFromX;gridDeltaY=gridCurrentY-gridAwayFromY;var gridDistanceAway=(gridDeltaX*gridDeltaX+gridDeltaY*gridDeltaY)-gridDistanceAwayStart;if(gridDistanceAway>0&&currentNode.g>1&&gridDistanceAway>bestDistance&&currentNode.w*0.5<bestCost){bestFleeNode=currentNode;bestCost=currentNode.w;bestDistance=gridDistanceAway;}
if(closed.length>=AWAY_FROM_MAX_NODES){fleeNode=bestFleeNode;}
if(fleeNode){while(fleeNode){path.push(fleeNode);fleeNode=fleeNode.prevNode;}
_cleanup();return path;}
neighbors=currentNode.neighbors;il=neighbors.length;if(diagonalDouble){if(entityPathingSize>tilesize&&!currentNode.slopedNeighbor&&il<8){neighbors=currentNode.directNeighbors;il=neighbors.length;diagonalStartIndex=-1;diagonalUnsafe=false;}
else{neighborMap=currentNode.neighborMap;topleft=topright=bottomleft=bottomright=diagonalUnsafe=false;diagonalStartIndex=(il*0.5)|0+1;}}
for(i=0;i<il;i++){neighbor=neighbors[i];if(neighbor.closed){continue;}
if(needsAvoidEntityCheck){if(diagonalUnsafe&&((topleft&&neighbor===neighborMap.topleft)||(topright&&neighbor===neighborMap.topright)||(bottomleft&&neighbor===neighborMap.bottomleft)||(bottomright&&neighbor===neighborMap.bottomright))){continue;}
else if(nodeHasCollidingEntities(neighbor,currentNode,entityPathing)){if(diagonalDouble&&i<diagonalStartIndex){if(neighbor===neighborMap.top){diagonalUnsafe=topleft=topright=true;}
if(neighbor===neighborMap.bottom){diagonalUnsafe=bottomleft=bottomright=true;;}
if(neighbor===neighborMap.left){diagonalUnsafe=topleft=bottomleft=true;}
if(neighbor===neighborMap.right){diagonalUnsafe=topright=bottomright=true;}}
continue;}}
var gridX=neighbor.gridX;var gridY=neighbor.gridY;var dx=gridX-gridCurrentX;var dy=gridY-gridCurrentY;var dg=dx===0||dy===0?1:SQRT2;var ng=currentNode.g+dg;var dw;if(WEIGHTED){dw=dg+neighbor.weight+WEIGHT*neighbor.weightPct;}
else{dw=dg;}
if((gridDeltaX>0&&gridDeltaX+dx<gridDeltaX)||(gridDeltaX<0&&gridDeltaX+dx>gridDeltaX)){dw+=WEIGHT_AWAY_FROM;}
if((gridDeltaY>0&&gridDeltaY+dy<gridDeltaY)||(gridDeltaY<0&&gridDeltaY+dy>gridDeltaY)){dw+=WEIGHT_AWAY_FROM;}
var nw=currentNode.w+dw;if(!neighbor.opened||nw<neighbor.w){neighbor.g=ng;neighbor.w=nw;neighbor.h=neighbor.h||heuristic(abs(gridX-gridAwayFromX),abs(gridY-gridAwayFromY));neighbor.f=neighbor.w+neighbor.h;neighbor.prevNode=currentNode;if(!neighbor.opened){neighbor.opened=true;for(j=open.length;j>0;j--){openNode=open[j-1];if(neighbor.f<=openNode.f){break;}
else{openNode.openIndex=j;open[j]=openNode;}}
neighbor.openIndex=j;open[j]=neighbor;}
else{var shifted;for(j=neighbor.openIndex,jl=open.length-1;j<jl;j++){openNode=open[j+1];if(openNode.f<=neighbor.f){shifted=true;break;}
else{openNode.openIndex=j;open[j]=openNode;}}
if(!shifted){j=open.length;}
neighbor.openIndex=j;open[j]=neighbor;}}}}
_cleanup();return path;};ig.pathfinding.getNeighbors=function(node){var neighbors=[];var gridX=node.gridX;var gridY=node.gridY;var grid=_grid;var neighbor;var row=grid[gridY];var prevRow=grid[gridY-1];var nextRow=grid[gridY+1];neighbor=prevRow&&prevRow[gridX];if(neighbor&&neighbor.walkable&&ig.pathfinding.isDirectionWalkable(neighbor,0,-1,node)){neighbors.push(neighbor);}
neighbor=row&&row[gridX+1];if(neighbor&&neighbor.walkable&&ig.pathfinding.isDirectionWalkable(neighbor,1,0,node)){neighbors.push(neighbor);}
neighbor=nextRow&&nextRow[gridX];if(neighbor&&neighbor.walkable&&ig.pathfinding.isDirectionWalkable(neighbor,0,1,node)){neighbors.push(neighbor);}
neighbor=row&&row[gridX-1];if(neighbor&&neighbor.walkable&&ig.pathfinding.isDirectionWalkable(neighbor,-1,0,node)){neighbors.push(neighbor);}
neighbor=prevRow&&prevRow[gridX-1];if(neighbor&&neighbor.walkable&&ig.pathfinding.isDirectionWalkable(neighbor,-1,-1,node)){neighbors.push(neighbor);}
neighbor=prevRow&&prevRow[gridX+1];if(neighbor&&neighbor.walkable&&ig.pathfinding.isDirectionWalkable(neighbor,1,-1,node)){neighbors.push(neighbor);}
neighbor=nextRow&&nextRow[gridX+1];if(neighbor&&neighbor.walkable&&ig.pathfinding.isDirectionWalkable(neighbor,1,1,node)){neighbors.push(neighbor);}
neighbor=nextRow&&nextRow[gridX-1];if(neighbor&&neighbor.walkable&&ig.pathfinding.isDirectionWalkable(neighbor,-1,1,node)){neighbors.push(neighbor);}
return neighbors;};ig.pathfinding.getDirectNeighbors=function(node){var neighbors=[];var gridX=node.gridX;var gridY=node.gridY;var grid=_grid;var neighbor;var row=grid[gridY];var prevRow=grid[gridY-1];var nextRow=grid[gridY+1];neighbor=prevRow&&prevRow[gridX];if(neighbor&&(neighbor.walkable||node.slopesAlongMap.left)&&ig.pathfinding.isDirectionWalkable(neighbor,0,-1,node)){neighbors.push(neighbor);}
neighbor=row&&row[gridX+1];if(neighbor&&(neighbor.walkable||node.slopesAlongMap.right)&&ig.pathfinding.isDirectionWalkable(neighbor,1,0,node)){neighbors.push(neighbor);}
neighbor=nextRow&&nextRow[gridX];if(neighbor&&(neighbor.walkable||node.slopesAlongMap.bottom)&&ig.pathfinding.isDirectionWalkable(neighbor,0,1,node)){neighbors.push(neighbor);}
neighbor=row&&row[gridX-1];if(neighbor&&neighbor.walkable&&ig.pathfinding.isDirectionWalkable(neighbor,-1,0,node)){neighbors.push(neighbor);}
return neighbors;};ig.pathfinding.getDiagonalNeighbors=function(node){var neighbors=[];var gridX=node.gridX;var gridY=node.gridY;var grid=_grid;var neighbor;var row=grid[gridY];var prevRow=grid[gridY-1];var nextRow=grid[gridY+1];neighbor=prevRow&&prevRow[gridX-1];if(neighbor&&(neighbor.walkable||node.slopesAlongMap.topleft)&&ig.pathfinding.isDirectionWalkable(neighbor,-1,-1,node)){neighbors.push(neighbor);}
neighbor=prevRow&&prevRow[gridX+1];if(neighbor&&(neighbor.walkable||node.slopesAlongMap.topright)&&ig.pathfinding.isDirectionWalkable(neighbor,1,-1,node)){neighbors.push(neighbor);}
neighbor=nextRow&&nextRow[gridX+1];if(neighbor&&(neighbor.walkable||node.slopesAlongMap.bottomright)&&ig.pathfinding.isDirectionWalkable(neighbor,1,1,node)){neighbors.push(neighbor);}
neighbor=nextRow&&nextRow[gridX-1];if(neighbor&&(neighbor.walkable||node.slopesAlongMap.bottomleft)&&ig.pathfinding.isDirectionWalkable(neighbor,-1,1,node)){neighbors.push(neighbor);}
return neighbors;};ig.pathfinding.nodeHasCollidingEntities=function(node,nodeFrom,entityPathing,entityTarget){var layer=ig.game.layersMap[entityPathing.layerName];if(layer&&layer.spatialHash){var hash=layer.spatialHash;var cellSize=layer.spatialHashCellSize;var x=node.x;var y=node.y;var cellX=(x/cellSize)|0;var cellY=(y/cellSize)|0;var column=hash[cellX];if(column){var cell=column[cellY];if(cell&&cell.length>0){var halfWidth=entityPathing.size.x*0.45;var halfHeight=entityPathing.size.y*0.45;var minX=x-halfWidth;var minY=y-halfHeight;var maxX=x+halfWidth;var maxY=y+halfHeight;var dirX=node.gridX-nodeFrom.gridX;var dirY=node.gridY-nodeFrom.gridY;for(var i=0,il=cell.length;i<il;i++){var entity=cell[i];if(entity!==entityPathing&&!(entity.group&entityPathing.group)&&(!entityTarget||entity!==entityTarget)&&!entity.hidden&&!entity._killed&&(entity.collides!==ig.EntityExtended.COLLIDES.NEVER||((entity.type&ig.EntityExtended.TYPE.DANGEROUS)&&(entity.checkAgainst&entityPathing.type)))&&_uti.AABBIntersect(minX,minY,maxX,maxY,entity.pos.x,entity.pos.y,entity.pos.x+entity.size.x,entity.pos.y+entity.size.y)){if(!entity.oneWay||(!(entity.climbable&&(entityPathing.canClimb||entityPathing.gravityFactor===0||ig.game.gravity===0))&&(((dirY<0&&entity.oneWayFacing.y>0)||(dirY>0&&entity.oneWayFacing.y<0))||((dirX<0&&entity.oneWayFacing.x>0)||(dirX>0&&entity.oneWayFacing.x<0))))){return true;}}}}}}
return false;};ig.pathfinding.getGridNode=function(gridX,gridY){return _grid[gridY]&&_grid[gridY][gridX];};ig.pathfinding.getNode=function(x,y,gridOffsetX,gridOffsetY){var gridX=Math.floor(x*_tilesizeReciprocal)+(gridOffsetX||0);var gridY=Math.floor(y*_tilesizeReciprocal)+(gridOffsetY||0);return ig.pathfinding.getGridNode(gridX,gridY);};ig.pathfinding.getGridWalkableNode=function(x,y,gridOffsetX,gridOffsetY,avoidEntities,entityPathing){var gridX=x+(gridOffsetX||0);var gridY=y+(gridOffsetY||0);var node=_grid[gridY]&&_grid[gridY][gridX];var nodeFrom=_grid[y]&&_grid[y][x];if(node&&node.walkable&&((!gridOffsetX&&!gridOffsetY)||ig.pathfinding.isDirectionWalkable(node,gridOffsetX,gridOffsetY,nodeFrom))){if(avoidEntities&&entityPathing){if(!nodeFrom||!ig.pathfinding.nodeHasCollidingEntities(node,nodeFrom,entityPathing)){return node;}}
else{return node;}}};ig.pathfinding.getWalkableNode=function(x,y,gridOffsetX,gridOffsetY,avoidEntities,entityPathing){return ig.pathfinding.getGridWalkableNode(Math.floor(x*_tilesizeReciprocal),Math.floor(y*_tilesizeReciprocal),gridOffsetX,gridOffsetY,avoidEntities,entityPathing);};ig.pathfinding.getWalkableNodeChain=function(x,y,dirX,dirY,numNodes,avoidEntities,entityPathing,nodes){var gridX=Math.floor(x*_tilesizeReciprocal);var gridY=Math.floor(y*_tilesizeReciprocal);numNodes=numNodes||2;if(nodes){nodes.length=0;}
else{nodes=[];}
for(var i=1;i<=numNodes;i++){var node=ig.pathfinding.getGridWalkableNode(gridX+dirX*i,gridY+dirY*i,dirX,dirY,avoidEntities,entityPathing);if(!node){break;}
nodes.push(node);}
return nodes;};ig.pathfinding.isGridWalkable=function(x,y,gridOffsetX,gridOffsetY,avoidEntities,entityPathing){var gridX=x+(gridOffsetX||0);var gridY=y+(gridOffsetY||0);var node=_grid[gridY]&&_grid[gridY][gridX];var nodeFrom=_grid[y]&&_grid[y][x];if(node&&node.walkable&&((!gridOffsetX&&!gridOffsetY)||ig.pathfinding.isDirectionWalkable(node,gridOffsetX,gridOffsetY,nodeFrom))){if(avoidEntities&&entityPathing){if(nodeFrom&&!ig.pathfinding.nodeHasCollidingEntities(node,nodeFrom,entityPathing)){return true;}}
else{return true;}}
return false;};ig.pathfinding.isWalkable=function(x,y,gridOffsetX,gridOffsetY,avoidEntities,entityPathing){return ig.pathfinding.isGridWalkable(Math.floor(x*_tilesizeReciprocal),Math.floor(y*_tilesizeReciprocal),gridOffsetX,gridOffsetY,avoidEntities,entityPathing);};ig.pathfinding.isDirectionWalkable=function(node,dirX,dirY,nodeFrom){if(dirX!==0&&dirY!==0&&nodeFrom){if(!ALLOW_DIAGONAL){return false;}
var nm=nodeFrom.neighborMap;if(DIAGONAL_REQUIRES_BOTH_DIRECT){if(dirX>0){if(!nm.right||(!nm.right.walkable&&!nm.right.sloped)){return false;}
if(dirY>0){if(!nm.bottom||(!nm.bottom.walkable&&!nm.bottom.sloped)){return false;}}
else if(!nm.top||(!nm.top.walkable&&!nm.top.sloped)){return false;}}
else{if(!nm.left||(!nm.left.walkable&&!nm.left.sloped)){return false;}
if(dirY>0){if(!nm.bottom||(!nm.bottom.walkable&&!nm.bottom.sloped)){return false;}}
else if(!nm.top||(!nm.top.walkable&&!nm.top.sloped)){return false;}}}
else{if(dirX>0){if(dirY>0){if((!nm.right||(!nm.right.walkable&&!nm.right.sloped))&&(!nm.bottom||(!nm.bottom.walkable&&!nm.bottom.sloped))){return false;}}
else if((!nm.right||(!nm.right.walkable&&!nm.right.sloped))&&(!nm.top||(!nm.top.walkable&&!nm.top.sloped))){return false;}}
else{if(dirY>0){if((!nm.left||(!nm.left.walkable&&!nm.left.sloped))&&(!nm.bottom||(!nm.bottom.walkable&&!nm.bottom.sloped))){return false;}}
else if((!nm.left||(!nm.left.walkable&&!nm.left.sloped))&&(!nm.top||(!nm.top.walkable&&!nm.top.sloped))){return false;}}}}
if(node.oneWay&&!node.climbable&&(((dirY<0&&node.oneWayFacing.y>0)||(dirY>0&&node.oneWayFacing.y<0))||((dirX<0&&node.oneWayFacing.x>0)||(dirX>0&&node.oneWayFacing.x<0)))){return false;}
return true;};ig.pathfinding.isGridPointInGrid=function(gridX,gridY){return _grid[gridY]&&_grid[gridY][gridX]instanceof Node;};ig.pathfinding.isPointInGrid=function(x,y,gridOffsetX,gridOffsetY){var gridX=Math.floor(x*_tilesizeReciprocal)+(gridOffsetX||0);var gridY=Math.floor(y*_tilesizeReciprocal)+(gridOffsetY||0);return _grid[gridY]&&_grid[gridY][gridX]instanceof Node;};ig.pathfinding.getPositionPathfindingEntities=function(entityPathing,entityTarget,positions){if(!positions){positions={from:{x:0.1,y:0.1},target:{x:0.1,y:0.1}};}
var pWidth=entityPathing.size.x;var pHeight=entityPathing.size.y;var pMinX=entityPathing.pos.x;var pMaxX=pMinX+pWidth;var pMinY=entityPathing.pos.y;var pMaxY=pMinY+pHeight;var pCenterX=pMinX+pWidth*0.5;var pCenterY=pMinY+pHeight*0.5;var tWidth=entityTarget.size.x;var tHeight=entityTarget.size.y;var tMinX=entityTarget.pos.x;var tMaxX=tMinX+tWidth;var tMinY=entityTarget.pos.y;var tMaxY=tMinY+tHeight;var tCenterX=tMinX+tWidth*0.5;var tCenterY=tMinY+tHeight*0.5;var tilesizeQuarter=_tilesize*0.25;if(pCenterX>tCenterX){positions.from.x=pMinX+tilesizeQuarter;positions.target.x=tMaxX-tilesizeQuarter;}
else if(pCenterX<tCenterX){positions.from.x=pMaxX-tilesizeQuarter;positions.target.x=tMinX+tilesizeQuarter;}
else{positions.from.x=pMinX+pWidth*0.5;positions.target.x=tMinX+tWidth*0.5;}
if(pCenterY>tCenterY){positions.from.y=entityPathing.hasGravity?pMaxY-tilesizeQuarter:pMinY+tilesizeQuarter;positions.target.y=tMaxY-tilesizeQuarter;}
else if(pCenterY<tCenterY){positions.from.y=pMaxY-tilesizeQuarter;positions.target.y=entityTarget.hasGravity?tMaxY-tilesizeQuarter:tMinY+tilesizeQuarter;}
else{positions.from.y=entityPathing.hasGravity?pMaxY-tilesizeQuarter:pMinY+pHeight*0.5;positions.target.y=entityTarget.hasGravity?tMaxY-tilesizeQuarter:tMinY+tHeight*0.5;}
return positions;};ig.pathfinding.getPositionPathfindingPoint=function(entityPathing,targetX,targetY,position){if(!position){position={};}
position.x=entityPathing.pos.x+entityPathing.size.x*0.5;position.y=entityPathing.pos.y+entityPathing.size.y*0.5;if(position.x>targetX){position.x=entityPathing.pos.x+_tilesize*0.25;}
else if(position.x<targetX){position.x=entityPathing.pos.x+entityPathing.size.x-_tilesize*0.25;}
if(entityPathing.hasGravity||position.y<targetY){position.y=entityPathing.pos.y+entityPathing.size.y-_tilesize*0.25;}
else if(position.y>targetY){position.y=entityPathing.pos.y+_tilesize*0.25;}
return position;};ig.pathfinding.getBoundsPathfollowing=function(x,y,width,height,target,zeroGrav,bounds){if(!bounds){bounds={};}
var tileWidth=Math.min(_tilesize*0.5,width*0.5);var tileHeight=Math.min(_tilesize*0.5,height*0.5);if(target.corner){if(target.cornerMap.bottomleft){bounds.minX=x;bounds.maxX=bounds.minX+tileWidth;bounds.maxY=y+height;bounds.minY=bounds.maxY-tileHeight;}
else if(target.cornerMap.bottomright){bounds.maxX=x+width;bounds.minX=bounds.maxX-tileWidth;bounds.maxY=y+height;bounds.minY=bounds.maxY-tileHeight;}
else if(target.cornerMap.topleft){bounds.minX=x;bounds.maxX=bounds.minX+tileWidth;bounds.minY=y;bounds.maxY=bounds.minY+tileHeight;}
else if(target.cornerMap.topright){bounds.maxX=x+width;bounds.minX=bounds.maxX-tileWidth;bounds.minY=y;bounds.maxY=bounds.minY+tileHeight;}}
else{if(bounds.ignoreCornerX){bounds.minX=x+width*0.5-tileWidth*0.5;bounds.maxX=bounds.minX+tileWidth;}
else{bounds.minX=x+width*0.5;bounds.maxX=bounds.minX;}
bounds.maxY=y+height;bounds.minY=bounds.maxY-tileHeight;if(target.x>bounds.maxX){bounds.minX=x;bounds.maxX=bounds.minX+tileWidth;}
else if(target.x<bounds.minX){bounds.maxX=x+width;bounds.minX=bounds.maxX-tileWidth;}
if(!bounds.ignoreCornerX&&target.x>=bounds.minX-1&&target.x<=bounds.maxX+1){bounds.ignoreCornerX=true;}
if(zeroGrav){if(bounds.ignoreCornerY){bounds.minY=y+height*0.5-tileHeight*0.5;bounds.maxY=bounds.minY+tileHeight;}
else{bounds.minY=y+height*0.5;bounds.maxY=bounds.minY;}
if(target.y>bounds.maxY){bounds.minY=y;bounds.maxY=bounds.minY+tileHeight;}
else if(target.y<bounds.minY){bounds.maxY=y+height;bounds.minY=bounds.maxY-tileHeight;}
if(!bounds.ignoreCornerY&&target.y>=bounds.minY-1&&target.y<=bounds.maxY+1){bounds.ignoreCornerY=true;}}}
bounds.width=tileWidth;bounds.height=tileHeight;return bounds;};ig.pathfinding.getEntityNeighborPositionX=function(x,width,dirX){if(dirX!==0){if(dirX<0){return x-_tilesize;}
else{return x+width+_tilesize;}}
else{return x+width*0.5;}};ig.pathfinding.getEntityNeighborPositionY=function(y,height,dirY,zeroGrav){if(dirY!==0){if(dirY<0){return y-_tilesize;}
else{return y+height+_tilesize;}}
else if(zeroGrav){return y+height*0.5;}
else{return y+height-_tilesize*0.25;}};ig.pathfinding.getEntityOnSmoothSlope=function(entity,dirX,dirY){var tilesizeQuarter=_tilesize*0.25;var node;if(dirX<0){node=ig.pathfinding.getNode(entity.pos.x+tilesizeQuarter,entity.pos.y+entity.size.y-tilesizeQuarter);}
else{node=ig.pathfinding.getNode(entity.pos.x+entity.size.x-tilesizeQuarter,entity.pos.y+entity.size.y-tilesizeQuarter);}
if(node){if(STRICT_SLOPE_CHECK){var neighborName;if(dirX<0){neighborName="left";}
else{neighborName="right";}
return node.slopesAlongMap[neighborName]||(dirY&&node.slopesAlongMap[(dirY<0?"top":"bottom")+neighborName])||(!dirY&&(node.slopesAlongMap["top"+neighborName]||node.slopesAlongMap["bottom"+neighborName]));}
else{return node.slopedAlong;}}
return false;};ig.pathfinding.getSlopeDirectionY=function(entity,dirX){var tilesizeQuarter=_tilesize*0.25;var node;if(dirX<0){node=ig.pathfinding.getNode(entity.pos.x+tilesizeQuarter,entity.pos.y+entity.size.y-tilesizeQuarter);}
else{node=ig.pathfinding.getNode(entity.pos.x+entity.size.x-tilesizeQuarter,entity.pos.y+entity.size.y-tilesizeQuarter);}
if(node&&node.sloped&&node.slopeNormal){return _utm.direction(-node.slopeNormal.x*(dirX<0?1:-1));}
return 0;};ig.pathfinding.getIsAlongSlope=function(node,dirX,dirY){var neighborName;var tileDefIndexA;var tileDefIndexB;if(dirX<0){neighborName="left";tileDefIndexA=1;tileDefIndexB=3;}
else{neighborName="right";tileDefIndexA=3;tileDefIndexB=1;}
var nodeNeighbor;var loc;var mod;if(typeof dirY!=='undefined'){if(dirY!==0){if(dirY<0){nodeNeighbor=node.neighborMap["top"+neighborName];loc=0;mod=1;}
else{nodeNeighbor=node.neighborMap["bottom"+neighborName];loc=0;mod=-1;}}
else{nodeNeighbor=node.neighborMap[neighborName];loc=1;mod=0;}}
else if(node.sloped){nodeNeighbor=node.neighborMap["top"+neighborName];loc=0;mod=1;}
else{nodeNeighbor=node.neighborMap[neighborName];loc=1;mod=0;}
if(nodeNeighbor&&nodeNeighbor.sloped){var dtd=(ig.game.collisionMap&&ig.game.collisionMap.tiledef)||ig.CollisionMap.defaultTileDef;var tileDef=dtd[node.tile];var tileDefNeighbor=dtd[nodeNeighbor.tile];if(!tileDefNeighbor||((!tileDef&&tileDefNeighbor[tileDefIndexB]===loc)||(tileDef&&tileDef[tileDefIndexA]+mod===tileDefNeighbor[tileDefIndexB]))){return true;}}
return false;};});

// lib/plusplus/core/game.js
ig.baked=true;ig.module('plusplus.core.game').requires('impact.game','plusplus.core.config','plusplus.core.timer','plusplus.core.font','plusplus.core.image','plusplus.core.background-map','plusplus.core.collision-map','plusplus.core.pathfinding-map','plusplus.core.animation','plusplus.core.layer','plusplus.core.input','plusplus.core.entity','plusplus.core.camera','plusplus.core.player-manager','plusplus.abstractities.spawner','plusplus.entities.light','plusplus.entities.shape-solid','plusplus.entities.shape-climbable','plusplus.entities.shape-climbable-one-way','plusplus.ui.ui-overlay-pause','plusplus.helpers.signals','plusplus.helpers.tweens','plusplus.helpers.pathfinding','plusplus.helpers.utils','plusplus.helpers.utilstile','plusplus.helpers.utilsintersection').defines(function(){'use strict';var _c=ig.CONFIG;var _pf=ig.pathfinding;var _ut=ig.utils;var _utt=ig.utilstile;var _uti=ig.utilsintersection;ig.GameExtended=ig.Game.extend({shapesPasses:{level:{retainBoundaryOuter:false,discardEdgesInner:true,ignoreClimbables:true,ignoreOneWays:true},climbables:{ignoreSolids:true,ignoreOneWays:true}},shapesLevel:[],layers:[],layersMap:{},sortLayersBy:null,paused:false,pauseLocked:false,changed:false,changedLights:false,dirtyEntities:true,dirtyLights:true,deferring:false,hasLevel:false,entities:[],namedEntities:{},persistentEntities:{},autoSpawnPlayer:_c.AUTO_SPAWN_PLAYER,playerClass:null,canSearchForPlayerByClass:true,canSearchForPlayerByType:true,lights:[],gravity:_c.TOP_DOWN?0:_c.GRAVITY,cameraClass:ig.Camera,cameraSettings:null,camera:null,playerManagerClass:ig.PlayerManager,playerManagerSettings:null,playerManager:null,pathfindingMap:null,onPaused:null,onUnpaused:null,clearColor:_c.CLEAR_COLOR,_gameNeedsSetup:true,_gameNeedsResize:false,_gameForceResize:false,_levelBuilding:false,_levelToBuild:null,_levelNeedsBuild:false,_levelNeedsUnload:false,_playerSpawnerName:'',_layersToChange:[],_layersToAdd:[],_layersToRemove:[],_itemsToAdd:[],_itemsToAddNext:[],_itemsToRemove:[],_itemsToRemoveNext:[],init:function(){if(this._gameNeedsSetup){this.setup();}},setup:function(){this._gameNeedsSetup=false;this.onPaused=new ig.Signal();this.onUnpaused=new ig.Signal();if(this.cameraClass){this.camera=new(this.cameraClass)(this.cameraSettings);}
if(this.playerManagerClass){this.playerManager=new(this.playerManagerClass)(this.playerManagerSettings);}
this.sortLayersBy=this.sortLayersBy||ig.Game.SORT.Z_INDEX;this.addLayer(new ig.Layer('backgroundMaps',{preRender:_c.PRERENDER_BACKGROUND_LAYER,noUpdate:_c.NO_UPDATE_BACKGROUND_LAYER}));this.addLayer(new ig.Layer('lights'));this.addLayer(new ig.Layer('entities'));this.addLayer(new ig.Layer('foregroundMaps',{preRender:_c.PRERENDER_FOREGROUND_LAYER,noUpdate:_c.NO_UPDATE_FOREGROUND_LAYER}));this.addLayer(new ig.Layer('overlay',{zIndex:1,ignorePause:_c.IGNORE_PAUSE_OVERLAY_LAYER,autoSort:_c.AUTO_SORT_OVERLAY_LAYER}));this.addLayer(new ig.Layer('ui',{zIndex:2,clearOnLoad:_c.CLEAR_ON_LOAD_UI_LAYER,ignorePause:_c.IGNORE_PAUSE_UI_LAYER,autoSort:_c.AUTO_SORT_UI_LAYER}));for(var layerName in _c.LAYERS_CUSTOM){var layerSettings=_c.LAYERS_CUSTOM[layerName];this.addLayer(new ig.Layer(layerName,layerSettings));}
this._addDeferredLayers();ig.global.addEventListener('resize',_ut.debounce(this.resize.bind(this),_c.RESIZE_DELAY),false);this.resize();this.inputStart();},loadLevelDeferred:function(level,playerSpawnerName){this.resetLoadLevel();this._levelToLoad=level;this._playerSpawnerName=playerSpawnerName;},loadLevel:function(level,playerSpawnerName){if(this._gameNeedsSetup){this.setup();}
level=level||this._levelToLoad;this._levelToLoad=undefined;if(typeof level==='string'){var levelName=level.replace(/^(Level)?(\w)(\w*)/,function(m,l,a,b){return a.toUpperCase()+b;});levelName=levelName.replace(/[-|\s?)](.)/g,function(m,a){return a.toUpperCase();});level=ig.global['Level'+levelName];}
if(level){this._levelToBuild=level;if(this.hasLevel&&_c.TRANSITION_LEVELS&&this.layersMap[_c.TRANSITIONER_LAYER]&&this.layersMap[_c.TRANSITIONER_LAYER].ignorePause){var me=this;if(!this.transitioner){this.transitioner=this.spawnEntity(ig.UIOverlay,0,0,{layerName:_c.TRANSITIONER_LAYER,zIndex:_c.Z_INDEX_TRANSITIONER,fillStyle:_c.TRANSITIONER_COLOR,r:_c.TRANSITIONER_R,g:_c.TRANSITIONER_G,b:_c.TRANSITIONER_B,alpha:0});}
this.transitioner.fadeTo(1,{onComplete:function(){me.buildLevelDeferred();}});this.pause(true);}
else{this.buildLevel();}}},buildLevelDeferred:function(){if(this._levelToBuild){this._levelNeedsBuild=true;}},buildLevel:function(){if(this._gameNeedsSetup){this.setup();}
var levelData=this._levelToBuild;var playerSpawnerName=this._playerSpawnerName;var entData,ld,newMap;var i,il;if(levelData){this._levelBuilding=true;this.unloadLevel();this.collisionMap=ig.CollisionMap.staticNoCollision;for(i=0;i<levelData.layer.length;i++){ld=levelData.layer[i];if(ld.name==='collision'){this.collisionMap=new ig.CollisionMap(ld.tilesize,ld.data);}
else if(ld.name==='pathfinding'){this.pathfindingMap=new ig.PathfindingMap(ld.tilesize,ld.data);}
else{newMap=new ig.BackgroundMapExtended(ld.tilesize,ld.data,ld.tilesetName);newMap.anims=this.backgroundAnims[ld.tilesetName]||{};newMap.repeat=ld.repeat;newMap.distance=ld.distance;newMap.foreground=!!ld.foreground;newMap.preRender=!!ld.preRender;newMap.name=ld.name;if(!newMap.layerName&&newMap.foreground){newMap.layerName='foregroundMaps';}
else if(!newMap.layerName){newMap.layerName='backgroundMaps';}
this.addItem(newMap);}}
_utt.rebuild(this.collisionMap);this.createShapes();if(_c.PATHFINDING.BUILD_WITH_LEVEL){_pf.rebuild(this.collisionMap,this.pathfindingMap);}
this.namedEntities={};for(i=0,il=levelData.entities.length;i<il;i++){entData=levelData.entities[i];this.spawnEntity(entData.type,entData.x,entData.y,entData.settings);}
var player=this.getPlayer();if(!player&&this.autoSpawnPlayer){player=this.persistentEntities['player']||this.playerClass;if(player){this.spawnEntity(player,0,0);}}
this.sortEntities();this._levelBuilding=false;this.hasLevel=true;for(i=0,il=this.layers.length;i<il;i++){this.layers[i].ready();}
if(player&&playerSpawnerName){var playerSpawner=this.namedEntities[playerSpawnerName];if(playerSpawner){if(playerSpawner instanceof ig.Spawner){playerSpawner.spawnNext(player);}
else{player.moveToPosition(playerSpawner);}}}
this.unpause(true);if(this.transitioner){if(!this.transitioner.added){this.spawnEntity(this.transitioner,0,0,{alpha:1});}
this.transitioner.fadeToDeath();this.transitioner=undefined;}
if(this.camera){this.camera.ready();}
if(this.playerManager){this.playerManager.ready();}
this.resize();this.dirtyEntities=this.dirtyLights=true;}},unloadLevelDeferred:function(){this._levelNeedsUnload=true;},unloadLevel:function(){if(this.hasLevel){this.hasLevel=false;this.shapesLevel.length=0;if(this.playerManager){this.playerManager.reset();}
if(this.camera){this.camera.reset();}
this._removeDeferredItems();this._addDeferredItems();this.resetLoadLevel();_pf.unload();for(var i=0,il=this.layers.length;i<il;i++){this.layers[i].reset();}}},resetLoadLevel:function(){this._levelToLoad=this._levelToBuild=undefined;this._levelNeedsBuild=this._levelNeedsUnload=false;this._playerSpawnerName='';},createShapes:function(){var i,il;var options,shapes;if(this.shapesPasses&&this.collisionMap){for(var pass in this.shapesPasses){options=this.shapesPasses[pass];shapes=_utt.shapesFromCollisionMap(this.collisionMap,options);for(i=0,il=shapes.solids.length;i<il;i++){var shape=shapes.solids[i];if(pass==="level"){shape.size=shape.settings.size;shape.vertices=shape.settings.vertices;delete shape.id;delete shape.settings;this.shapesLevel.push(shape);}
else{this.spawnEntity(ig.EntityShapeSolid,shape.x,shape.y,shape.settings);}}
for(i=0,il=shapes.oneWays.length;i<il;i++){var shape=shapes.oneWays[i];this.spawnEntity(ig.EntityShapeSolid,shape.x,shape.y,shape.settings);}
for(i=0,il=shapes.climbables.length;i<il;i++){var shape=shapes.climbables[i];this.spawnEntity((shape.settings.oneWay?ig.EntityShapeClimbableOneWay:ig.EntityShapeClimbable),shape.x,shape.y,shape.settings);}}}},addLayer:function(layer){this._layersToAdd.push(layer);return layer;},_addDeferredLayers:function(layers){layers=layers||this._layersToAdd;if(layers.length>0){for(var i=0,il=layers.length;i<il;i++){var layer=layers[i];if(this.layersMap[layer.name]!==layer){if(this.layersMap[layer.name]){this.removeLayer(this.layersMap[layer.name]);}
this.layersMap[layer.name]=layer;this.layers.push(layer);if(this.sortLayersBy){this.layers.sort(this.sortLayersBy);}}}
if(layers===this._layersToAdd){this._layersToAdd.length=0;}}},removeLayer:function(layer){this._layersToRemove.push(layer);},_removeDeferredLayers:function(layers){layers=layers||this._layersToRemove;if(layers.length>0){for(var i=0,il=layers.length;i<il;i++){var layer=layers[i];_ut.arrayCautiousRemove(this.layers,layer);if(this.layersMap[layer.name]===layer){delete this.layersMap[layer.name];}
layer.reset();}
if(layers===this._layersToRemove){this._layersToRemove.length=0;}}},changeLayer:function(layerName,settings){this._layersToChange.push({name:layerName,settings:settings});},_changeDeferredLayers:function(){if(this._layersToChange.length>0){for(var i=0,il=this._layersToChange.length;i<il;i++){var change=this._layersToChange[i];var layerName=change.name;var settings=change.settings;var layer=this.layersMap[layerName];if(layer){ig.merge(layer,settings);}}
this._layersToChange.length=0;}},spawnEntity:function(type,x,y,settings){var EntityClass=typeof type==='string'?ig[type]||ig.global[type]:type;if(!EntityClass){throw new Error("Can't spawn entity of type: "+type+". It does not exist in namespace 'ig' or 'ig.global'/'window'.");}
var entity;if(EntityClass instanceof ig.EntityExtended){entity=EntityClass;if(entity._layerNameAdd){return entity;}
entity.reset(x,y,settings);}
else{entity=new(EntityClass)(x,y,settings);}
if(entity.name){if(entity.persistent){if(this.persistentEntities[entity.name]instanceof ig.EntityExtended){entity=this.persistentEntities[entity.name];entity.reset(x,y,settings);}
else{this.persistentEntities[entity.name]=entity;}}
this.namedEntities[entity.name]=entity;}
if(_c.FORCE_ENTITY_EXTENDED&&!(entity instanceof ig.EntityExtended)){throw new Error("You are trying to spawn an entity that does not inherit or extend ig.EntityExtended. Although it is not recommended (seriously), if you wish to allow this, see ig.CONFIG.FORCE_ENTITY_EXTENDED.")}
this.addItem(entity);return entity;},removeEntity:function(entity,settings){if(entity instanceof ig.EntityExtended&&!entity._killed){this.flagAsKilled(entity);}
this.removeItem(entity,settings);},clearPersistentEntity:function(name){var entity=ig.game.persistentEntities[name];if(entity){if(entity.added){entity._cleanupPersistent=true;}
else{entity.cleanupPersistent();}
delete ig.game.persistentEntities[name];}},clearPersistentEntities:function(){for(var name in ig.game.persistentEntities){this.clearPersistentEntity(name);}},flagAsKilled:function(entity){if(entity.name)delete this.namedEntities[entity.name];entity._killed=true;entity.type=ig.EntityExtended.TYPE.NONE;entity.checkAgainst=ig.EntityExtended.TYPE.NONE;entity.collides=ig.EntityExtended.COLLIDES.NEVER;},addItem:function(item,settings){if(!item._killed){var layerNameAdd;if(settings){item._layerChange=settings.forChange||false;layerNameAdd=settings.layerName||item.layerName||"entities";}
else{item._layerChange=false;layerNameAdd=item.layerName||"entities";}
if(item._layerChange||!item._layerNameAdd){item._layerNameAdd=layerNameAdd;if(!this._levelBuilding){if(this.deferring){this._itemsToAdd.push(item);}
else{this._itemsToAddNext.push(item);}}
else{this._addDeferredItem(item);}}}},_addDeferredItems:function(){if(this._itemsToAdd.length>0){for(var i=0,il=this._itemsToAdd.length;i<il;i++){this._addDeferredItem(this._itemsToAdd[i]);}
this._itemsToAdd.length=0;}},_addDeferredItem:function(item){if(this._gameNeedsSetup){this.setup();}
item.layerName=item._layerNameAdd;item._layerNameAdd=undefined;var layer=this.layersMap[item.layerName];if(!layer){throw new Error("Attempting to add item/entity to layer named "+item.layerName+" and that layer doesn't exist. Your item needs a 'layerName' property with a value matching one of the existing game layer names: ",this.layersMap);}
layer.addItem(item);item.added=true;if(!item._layerChange&&!this._levelBuilding){if(layer.paused){if(item.pause){item.pause();}}
else if(item.paused&&item.unpause){item.unpause();}
if(item.adding){item.adding();}}
item._layerChange=false;this.dirtyEntities=true;if(item instanceof ig.EntityLight){this.dirtyLights=true;}},removeItem:function(item,settings){if(settings){item._layerNameRemove=settings.layerName||item.layerName;item._layerChange=settings.forChange||false;}
else{item._layerNameRemove=item.layerName;item._layerChange=false;}
if(!item._layerChange){if(item.cleanup){item.cleanup();}
item.added=false;}
if(!this._levelBuilding){if(item._layerNameAdd){item._layerNameAdd=undefined;_ut.arrayCautiousRemove(this._itemsToAddNext,item);_ut.arrayCautiousRemove(this._itemsToAdd,item);}
if(this.deferring){this._itemsToRemove.push(item);}
else{this._itemsToRemoveNext.push(item);}}
else{this._removeDeferredItem(item);}},_removeDeferredItems:function(){if(this._itemsToRemove.length>0){for(var i=0,il=this._itemsToRemove.length;i<il;i++){this._removeDeferredItem(this._itemsToRemove[i]);}
this._itemsToRemove.length=0;}},_removeDeferredItem:function(item){var layer=this.layersMap[item._layerNameRemove];item._layerNameRemove=undefined;if(layer){layer.removeItem(item);}
this.dirtyEntities=true;if(item instanceof ig.EntityLight){this.dirtyLights=true;}},_advanceDeferredNext:function(){if(this._itemsToAddNext.length>0){this._itemsToAdd=this._itemsToAddNext;this._itemsToAddNext=[];}
if(this._itemsToRemoveNext.length>0){this._itemsToRemove=this._itemsToRemoveNext;this._itemsToRemoveNext=[];}},layerChangeItem:function(item,layerName){if(item){if(!layerName&&item.resetState){layerName=item.resetState.layerName;}
if(layerName&&item.layerName!==layerName){this.removeItem(item,{layerName:item.layerName,forChange:true});this.addItem(item,{layerName:layerName,forChange:true});}}},sortEntities:function(layerName){if(typeof layerName==='string'){this.sortEntitiesOnLayer(this.layersMap[layerName]);}
else{for(var i=0,il=this.layers.length;i<il;i++){this.sortEntitiesOnLayer(this.layers[i]);}}},sortEntitiesOnLayer:function(layer){if(layer){layer.items.sort(layer.sortBy);}},sortEntitiesDeferred:function(layerName){if(typeof layerName==='string'){this.sortEntitiesOnLayerDeferred(this.layersMap[layerName]);}
else{for(var i=0,il=this.layers.length;i<il;i++){this.sortEntitiesOnLayerDeferred(this.layers[i]);}}},sortEntitiesOnLayerDeferred:function(layer){if(layer){layer.sort();}},isInsideLevel:function(x,y){if(_pf.tilesize){var node=_pf.getNode(x,y);return node&&node.insideLevel;}
else if(this.collisionMap){return _utt.isTileWalkableStrict(this.collisionMap.getTile(x,y));}
return true;},getPlayer:function(settings){return this.namedEntities["player"]||(this.canSearchForPlayerByClass&&this.getEntitiesByClass("Player",settings||{first:true})[0])||(this.canSearchForPlayerByType&&this.getEntitiesByType(ig.EntityExtended.TYPE.PLAYER,settings||{first:true})[0]);},getEntitiesByClass:function(cls,settings){var entityClass=typeof(cls)==='string'?ig.global[cls]:cls;if(entityClass){return this.getEntitiesMatching(function(entity){return entity instanceof entityClass;},settings);}
else{return[];}},getEntitiesByType:function(type,settings){var entityType=typeof(type)==='string'?_ut.getType(ig.EntityExtended,type):type;return this.getEntitiesMatching(function(entity){return entity.type&entityType;},settings);},getEntitiesByGroup:function(group,settings){var entityGroup=typeof(group)==='string'?_ut.getType(ig.EntityExtended,group):group;return this.getEntitiesMatching(function(entity){return entity.group&entityGroup;},settings);},getCharactersByGroup:function(group,settings){var entityGroup=typeof(group)==='string'?_ut.getType(ig.EntityExtended,group):group;return this.getEntitiesMatching(function(entity){return(entity.group&entityGroup)&&entity instanceof ig.Character;},settings);},getEntitiesMatching:function(matchBy,settings){var matching=[];var layer;var layerName;var unsorted;var distanceSquared;var byDistance;var lineOfSight;var nonHidden;var from;var intersects;var minX;var minY;var maxX;var maxY;var first;var i,il;if(!settings||!settings.layerName){settings=settings||{};settings.unsorted=true;for(i=0,il=this.layers.length;i<il;i++){layer=this.layers[i];if(layer.numEntities){settings.layerName=layer.name;var layerMatching=this.getEntitiesMatching(matchBy,settings);if(layerMatching.length){matching=matching.concat(layerMatching);if(settings.first){break;}}}}}
else{if(settings){layerName=settings.layerName;unsorted=settings.unsorted;distanceSquared=settings.distanceSquared;byDistance=settings.byDistance;lineOfSight=settings.lineOfSight;nonHidden=settings.nonHidden;from=settings.from;first=settings.first;if(typeof settings.minX!=='undefined'){intersects=true;minX=settings.minX;minY=settings.minY;maxX=settings.maxX;maxY=settings.maxY;}}
layer=this.layersMap[layerName];if(layer){var items=layer.items;for(i=0,il=items.length;i<il;i++){var item=items[i];if(!item._killed&&matchBy(item)&&(!nonHidden||!item.hidden)&&(!distanceSquared||item.distanceSquaredTo(from)<=distanceSquared)&&(!intersects||_uti.AABBIntersect(minX,minY,maxX,maxY,item.pos.x,item.pos.y,item.pos.x+item.width,item.pos.y+item.height))&&(!lineOfSight||from.lineOfSight(item))){matching.push(item);if(first){break;}}}}}
if(matching.length>1&&!unsorted){if(byDistance){if(from instanceof ig.EntityExtended){_uti.sortByDistance(from.pos.x+from.size.x*0.5,from.pos.y+from.size.y*0.5,matching);}
else{_uti.sortByDistance(from.x,from.y,matching);}}
else{matching.sort(this.sortBy);}}
return matching;},getMapByName:function(name){var i,il,j,jl,items,layer;if(name==='collision'){return this.collisionMap;}
for(i=0,il=this.layers.length;i<il;i++){layer=this.layers[i];items=layer.items;if(layer.numBackgroundMaps){for(j=0,jl=items.length;j<jl;j++){var item=items[j];if(item.name===name){return item;}}}}},pause:function(lock){if(!this.pauseLocked&&!this._levelBuilding){for(var i=0,il=this.layers.length;i<il;i++){this.layers[i].pause();}
if(!this.paused){this.paused=true;this.pauseLocked=lock;if(this.camera){this.camera.pause();}
if(!this.pauseLocked&&_c.DIMMED_PAUSE){if(!this.dimmer){this.dimmer=this.spawnEntity(ig.UIOverlayPause,0,0,{fillStyle:_c.DIMMER_COLOR,r:_c.DIMMER_R,g:_c.DIMMER_G,b:_c.DIMMER_B,alpha:0});}
this.dimmer.fadeTo(_c.DIMMER_ALPHA);}
this.onPaused.dispatch(this);}}},unpause:function(unlock){if(unlock){this.pauseLocked=false;}
if(!this.pauseLocked&&!this._levelBuilding){for(var i=0,il=this.layers.length;i<il;i++){this.layers[i].unpause();}
if(this.paused){this.paused=false;if(this.camera){this.camera.unpause();}
if(this.dimmer){this.dimmer.fadeToDeath();this.dimmer=undefined;}
this.onUnpaused.dispatch(this);}}},inputStart:function(){ig.input.bind(ig.KEY.MOUSE1,'touch');ig.input.bind(ig.KEY.MOUSE2,'touch');ig.input.bind(ig.KEY.TAP,'tap');ig.input.bind(ig.KEY.TAP_DOUBLE,'tapDouble');ig.input.bind(ig.KEY.HOLD,'hold');ig.input.bind(ig.KEY.HOLD_ACTIVATE,'holdActivate');ig.input.bind(ig.KEY.SWIPE,'swipe');ig.input.bind(ig.KEY.SWIPE_X,'swipeX');ig.input.bind(ig.KEY.SWIPE_Y,'swipeY');ig.input.bind(ig.KEY.SWIPE_LEFT,'swipeLeft');ig.input.bind(ig.KEY.SWIPE_RIGHT,'swipeRight');ig.input.bind(ig.KEY.SWIPE_UP,'swipeUp');ig.input.bind(ig.KEY.SWIPE_DOWN,'swipeDown');ig.input.bind(ig.KEY.LEFT_ARROW,'left');ig.input.bind(ig.KEY.RIGHT_ARROW,'right');ig.input.bind(ig.KEY.UP_ARROW,'up');ig.input.bind(ig.KEY.DOWN_ARROW,'down');ig.input.bind(ig.KEY.A,'left');ig.input.bind(ig.KEY.D,'right');ig.input.bind(ig.KEY.W,'up');ig.input.bind(ig.KEY.S,'down');ig.input.bind(ig.KEY.SPACE,'jump');},inputEnd:function(){ig.input.unbind(ig.KEY.MOUSE1,'touch');ig.input.unbind(ig.KEY.MOUSE2,'touch');ig.input.unbind(ig.KEY.TAP,'tap');ig.input.unbind(ig.KEY.TAP_DOUBLE,'tapDouble');ig.input.unbind(ig.KEY.HOLD,'hold');ig.input.unbind(ig.KEY.HOLD_ACTIVATE,'holdActivate');ig.input.unbind(ig.KEY.SWIPE,'swipe');ig.input.unbind(ig.KEY.SWIPE_X,'swipeX');ig.input.unbind(ig.KEY.SWIPE_Y,'swipeY');ig.input.unbind(ig.KEY.SWIPE_LEFT,'swipeLeft');ig.input.unbind(ig.KEY.SWIPE_RIGHT,'swipeRight');ig.input.unbind(ig.KEY.SWIPE_UP,'swipeUp');ig.input.unbind(ig.KEY.SWIPE_DOWN,'swipeDown');ig.input.unbind(ig.KEY.LEFT_ARROW,'left');ig.input.unbind(ig.KEY.RIGHT_ARROW,'right');ig.input.unbind(ig.KEY.UP_ARROW,'up');ig.input.unbind(ig.KEY.DOWN_ARROW,'down');ig.input.unbind(ig.KEY.A,'left');ig.input.unbind(ig.KEY.D,'right');ig.input.unbind(ig.KEY.W,'up');ig.input.unbind(ig.KEY.S,'down');ig.input.unbind(ig.KEY.SPACE,'jump');},handleInput:function(){var i,il;var j,jl;var inputPoints;var inputPoint;var targets;var target;if(ig.input.released('tap')){inputPoints=ig.input.getInputPoints(['tapped'],[true]);for(i=0,il=inputPoints.length;i<il;i++){inputPoint=inputPoints[i];targets=inputPoint.targets;if(targets.length>0){for(j=0,jl=targets.length;j<jl;j++){target=targets[j];if(target.type&ig.EntityExtended.TYPE.UI&&target.fixed){target.toggleActivate();inputPoint.tapped=false;if(il===1){ig.input.delayedKeyup.tap=false;}
break;}}}}}},update:function(){var i,il;var layer;this.deferring=false;this._removeDeferredLayers();this._addDeferredLayers();this._changeDeferredLayers();this._removeDeferredItems();this._addDeferredItems();this._advanceDeferredNext();if(this._levelToLoad){this.loadLevel();}
else if(this._levelNeedsBuild){this.buildLevel();}
else if(this._levelNeedsUnload){this.unloadLevel();}
if(this._gameNeedsResize){this.resize(this._gameForceResize);}
this.deferring=true;if(this.dirtyEntities!==false){this.entities.length=this.lights.length=0;for(i=0,il=this.layers.length;i<il;i++){layer=this.layers[i];if(layer.numEntities&&layer.items.length>0){this.entities=this.entities.concat(layer.items);this.lights=this.lights.concat(layer.itemsLight);}}}
ig.TWEEN.update();ig.input.update();this.handleInput();if(this.playerManager){this.playerManager.update();}
this.changed=this.changedLights=false;for(i=0,il=this.layers.length;i<il;i++){var layer=this.layers[i];layer.update();this.changed|=layer.changed;this.changedLights|=layer.changedLights;}
for(var tileset in this.backgroundAnims){var anims=this.backgroundAnims[tileset];for(i in anims){anims[i].update();}}
if(this.camera){this.camera.update();}
this.dirtyEntities=this.dirtyLights=false;},updateEntities:function(layerName){var layer=this.layersMap[layerName];if(layer){var items=layer.items;for(var i=0,il=items.length;i<il;i++){var item=items[i];item.update();}}},draw:function(){if(this.clearColor){ig.system.clear(this.clearColor);}
this._rscreen.x=ig.system.getDrawPos(this.screen.x)/ig.system.scale;this._rscreen.y=ig.system.getDrawPos(this.screen.y)/ig.system.scale;for(var i=0,il=this.layers.length;i<il;i++){this.layers[i].draw();}},drawEntities:function(layerName){var layer=this.layersMap[layerName];if(layer){var entities=layer.items;for(var i=0,il=entities.length;i<il;i++){entities[i].draw();}}},resize:function(force){var width=_c.GAME_WIDTH_PCT?ig.global.innerWidth*_c.GAME_WIDTH_PCT:_c.GAME_WIDTH;var height=_c.GAME_HEIGHT_PCT?ig.global.innerHeight*_c.GAME_HEIGHT_PCT:_c.GAME_HEIGHT;var scale=_c.SCALE;if(_c.GAME_WIDTH_VIEW||_c.GAME_HEIGHT_VIEW){var viewWidth=_c.GAME_WIDTH_VIEW||1;var viewHeight=_c.GAME_HEIGHT_VIEW||1;scale=Math.floor(Math.max(Math.min(width/viewWidth,height/viewHeight),1));}
scale=Math.min(Math.max(scale,_c.SCALE_MIN),_c.SCALE_MAX);var scaleReciprocal=(1/scale);ig.system.resize(width*scaleReciprocal,height*scaleReciprocal,scale,force||this._gameForceResize);this._gameNeedsResize=this._gameForceResize=false;},resizeDeferred:function(force){this._gameNeedsResize=true;this._gameForceResize=force||false;}});});

// lib/plusplus/core/plusplus.js
ig.baked=true;ig.module('plusplus.core.plusplus').requires('plusplus.core.config','plusplus.core.loader','plusplus.core.game','plusplus.helpers.signals').defines(function(){"use strict";var _c=ig.CONFIG;ig.System.inject({size:240,onResized:null,init:function(canvasId,fps,width,height,scale){this.onResized=new ig.Signal();this.fps=fps;this.clock=new ig.Timer();this.canvas=ig.$(canvasId);this.context=this.canvas.getContext('2d');this.getDrawPos=ig.System.drawMode;this.resize(width,height,scale);},run:function(){ig.Timer.step();if(ig.Timer.stepped){this.tick=this.clock.tick();this.delegate.run();ig.input.clearPressed();if(this.newGameClass){this.setGameNow(this.newGameClass);this.newGameClass=null;}}},resize:function(width,height,scale,force){var modifier;if(ig.ua.pixelRatio>1&&(!this.context.webkitBackingStorePixelRatio||this.context.webkitBackingStorePixelRatio>1)){modifier=ig.ua.pixelRatio;}else{modifier=1;}
this.width=width*modifier;this.height=height*modifier;if(typeof scale!=='undefined'&&scale!==null){this.scale=scale;}
this.realWidth=this.width*this.scale;this.realHeight=this.height*this.scale;this.canvas.width=this.realWidth;this.canvas.height=this.realHeight;this.canvas.style.width=Math.round(this.realWidth/modifier)+"px";this.canvas.style.height=Math.round(this.realHeight/modifier)+"px";this.size=Math.min(this.width,this.height);if(this.scale!==1&&_c.AUTO_CRISP_SCALING){ig.System.scaleMode=ig.System.SCALE.CRISP;}
ig.System.scaleMode(this.canvas,this.context);this.onResized.dispatch(force);}});});

// lib/game/components/pacloader.js
ig.baked=true;ig.module('game.components.pacloader').requires('plusplus.core.loader').defines(function(){"use strict";var _c=ig.CONFIG;var _utm=ig.utilsmath;ig.pacLoader=ig.LoaderExtended.extend({run:function(){var t=Date.now()-this._endTime;var delay=100;if(t<delay){this.draw();}
else{ig.game.run();ig.system.setDelegate(ig.game);}}});});

// lib/plusplus/core/hierarchy.js
ig.baked=true;ig.module('plusplus.core.hierarchy').requires('plusplus.helpers.utils').defines(function(){"use strict";var _ut=ig.utils;var count=0;ig.Hierarchy=ig.Class.extend({id:count++,name:'',descendants:[],descendantsMap:{},ancestor:null,sortBy:null,init:function(settings){this.id=count++;this.sortBy=ig.Hierarchy.SORT.PRIORITY;ig.merge(this,settings);},setAncestor:function(ancestor){this.ancestor=ancestor;},setName:function(name){if(this.name!==name){if(this.ancestor instanceof ig.Hierarchy){this.ancestor.unmapDescendant(this);}
this.name=name;if(this.ancestor instanceof ig.Hierarchy){this.ancestor.mapDescendant(this);}}},setFallback:function(fallback){this.fallback=fallback;},addDescendants:function(adding){adding=_ut.toArray(adding);for(var i=0,il=adding.length;i<il;i++){this.addDescendant(adding[i]);}},addDescendant:function(adding){if(adding instanceof ig.Hierarchy){if(this.isAncestor(adding)===true){return;}
if(adding.ancestor!==undefined){adding.ancestor.removeDescendant(adding);}
adding.setAncestor(this);}
this.mapDescendant(adding);this.descendants.push(adding);this.sortDescendants();},removeDescendants:function(removing){removing=_ut.toArray(removing);for(var i=0,il=removing.length;i<il;i++){this.removeDescendant(removing[i]);}},removeDescendant:function(removing){var index=_ut.indexOfValue(this.descendants,removing);if(index!==-1){if(removing instanceof ig.Hierarchy){removing.setAncestor();}
this.descendants.splice(index,1);this.unmapDescendant(removing);}
else{for(var i=0,il=this.descendants.length;i<il;i++){var descendant=this.descendants[i]
if(descendant instanceof ig.Hierarchy){descendant.removeDescendant(removing);}}}},clearDescendants:function(){for(var i=this.descendants.length-1;i>=0;i--){var descendant=this.descendants[i];if(descendant instanceof ig.Hierarchy){descendant.setAncestor();}
this.descendants.length--;this.unmapDescendant(descendant);}},sortDescendants:function(){this.descendants.sort(this.sortBy);},mapDescendant:function(descendant){if(descendant.name){var existing=this.descendantsMap[descendant.name];if(existing instanceof ig.Hierarchy){existing.ancestor.removeDescendant(existing);}
this.descendantsMap[descendant.name]=descendant;}},unmapDescendant:function(descendant){if(descendant.name){var mapped=this.descendantsMap[descendant.name];if(descendant===mapped){delete this.descendantsMap[descendant.name];}}},getDescendantByName:function(name,recursive){var named=this._getDescendantByName(name,recursive);if(!named&&this.fallback){named=this.fallback._getDescendantByName(name,recursive);}
return named;},_getDescendantByName:function(name,recursive){var named=this.descendantsMap[name];if(recursive===true&&!named){for(var i=0,il=this.descendants.length;i<il;i++){var descendant=this.descendants[i];if(descendant instanceof ig.Hierarchy){named=descendant.getDescendantByName(name,recursive);if(named){break;}}}}
return named;},getDescendantsByType:function(type,recursive){var matching=this._getDescendantsByType(type,recursive,[]);if(!matching.length&&this.fallback){matching=this.fallback._getDescendantsByType(type,recursive,matching);}
return matching;},_getDescendantsByType:function(type,recursive,matching){for(var i=0,il=this.descendants.length;i<il;i++){var descendant=this.descendants[i];if(descendant.type&type){matching.push(descendant);}
if(recursive===true&&descendant instanceof ig.Hierarchy){descendant._getDescendantsByType(name,recursive,matching);}}
return matching;},getDescendants:function(array){array=_ut.toArray(array).concat(this.descendants);for(var i=0,il=this.descendants.length;i<il;i++){var descendant=this.descendants[i];if(descendant instanceof ig.Hierarchy){array=descendant.getDescendants(array);}}
return array;},getRoot:function(){var ancestor=this;var root;while(ancestor){root=ancestor;ancestor=ancestor.ancestor;}
return root;},isAncestor:function(target){var ancestor=this.ancestor;while(ancestor){if(ancestor===target){return true;}
ancestor=ancestor.ancestor;}
return false;},forAll:function(callback){var args=Array.prototype.slice.call(arguments,1);callback.apply(this,args);this.forAllDescendants.apply(this,arguments);},forAllDescendants:function(callback){var args=Array.prototype.slice.call(arguments,1);for(var i=0,il=this.descendants.length;i<il;i++){var descendant=this.descendants[i];callback.apply(descendant,args);if(descendant instanceof ig.Hierarchy){descendant.forAllDescendants.apply(descendant,arguments);}}},forAllWithCallback:function(callbackName){var callback=this[callbackName];if(typeof callback==='function'){var args=Array.prototype.slice.call(arguments,1);callback.apply(this,args);}
this.forAllDescendantsWithCallback.apply(this,arguments);},forAllDescendantsWithCallback:function(callbackName){var args=Array.prototype.slice.call(arguments,1);for(var i=0,il=this.descendants.length;i<il;i++){var descendant=this.descendants[i];var callback=descendant[callbackName];if(typeof callback==='function'){callback.apply(descendant,args);}
if(descendant instanceof ig.Hierarchy){descendant.forAllWithCallback.apply(descendant,arguments);}}},forImmediate:function(callback){var args=Array.prototype.slice.call(arguments,1);callback.apply(this,args);for(var i=0,il=this.descendants.length;i<il;i++){callback.apply(this.descendants[i],args);}},forImmediateWithCallback:function(callbackName){var callback=this[callbackName];if(typeof callback==='function'){var args=Array.prototype.slice.call(arguments,1);callback.apply(this,args);}
for(var i=0,il=this.descendants.length;i<il;i++){var descendant=this.descendants[i];callback=descendant[callbackName];if(typeof callback==='function'){callback.apply(descendant,args);}}},activate:function(){var activated=false;var blocked=false;var method="activate";for(var i=0,il=this.descendants.length;i<il;i++){var descendant=this.descendants[i];descendant[method].apply(descendant,arguments);if(!blocked&&(descendant.activated||descendant.getUsing())){activated=true;if(descendant.blocking){blocked=true;method="cleanup";}}}
if(this.fallback){activated=this.fallback[method].apply(descendant,arguments)||activated;}
return activated;},deactivate:function(){for(var i=0,il=this.descendants.length;i<il;i++){this.descendants[i].deactivate();}
if(this.fallback){this.fallback.deactivate();}},update:function(){for(var i=0,il=this.descendants.length;i<il;i++){this.descendants[i].update();}
if(this.fallback){this.fallback.update();}},cleanup:function(){for(var i=0,il=this.descendants.length;i<il;i++){this.descendants[i].cleanup();}
if(this.fallback){this.fallback.cleanup();}},setEntity:function(entity){for(var i=0,il=this.descendants.length;i<il;i++){this.descendants[i].setEntity(entity);}
if(this.fallback){this.fallback.setEntity(entity);}},setEntityTarget:function(entity){for(var i=0,il=this.descendants.length;i<il;i++){this.descendants[i].setEntityTarget(entity);}
if(this.fallback){this.fallback.setEntityTarget(entity);}},setEntityTargetFirst:function(entities){for(var i=0,il=this.descendants.length;i<il;i++){this.descendants[i].setEntityTargetFirst(entities);}
if(this.fallback){this.fallback.setEntityTargetFirst(entities);}},setEntityOptions:function(entity){for(var i=0,il=this.descendants.length;i<il;i++){this.descendants[i].setEntityOptions(entity);}
if(this.fallback){this.fallback.setEntityOptions(entity);}},getUsing:function(){for(var i=0,il=this.descendants.length;i<il;i++){if(this.descendants[i].getUsing()){return true;}}
if(this.fallback){return this.fallback.getUsing();}
return false;},pause:function(){for(var i=0,il=this.descendants.length;i<il;i++){this.descendants[i].pause();}
if(this.fallback){this.fallback.pause();}},unpause:function(){for(var i=0,il=this.descendants.length;i<il;i++){this.descendants[i].unpause();}
if(this.fallback){this.fallback.unpause();}},clone:function(c){if(c instanceof ig.Hierarchy!==true){c=new ig.Hierarchy();}
c.name=this.name;for(var i=0,il=this.descendants.length;i<il;i++){var descendant=this.descendants[i];if(typeof descendant.clone==='function'){c.addDescendant(descendant.clone());}}
return c;}});ig.Hierarchy.SORT={PRIORITY:function(a,b){return b.priority-a.priority;},Z_INDEX:function(a,b){return b.zIndex-a.zIndex;}};});

// lib/plusplus/abstractities/spawner-fast.js
ig.baked=true;ig.module('plusplus.abstractities.spawner-fast').requires('plusplus.abstractities.spawner','plusplus.helpers.utils','plusplus.helpers.utilsmath').defines(function(){var _ut=ig.utils;var _utm=ig.utilsmath;ig.SpawnerFast=ig.global.SpawnerFast=ig.Spawner.extend({spawnNext:function(entity){if(this.pool.length>0){entity=this.pool.pop();if(entity){entity=ig.game.spawnEntity(entity,0,0,this.spawnSettings);this.entities.push(entity);}}
else if(this.spawningEntity&&this.spawnedCount<this.spawnCountMax){entity=ig.game.spawnEntity(this.spawningEntity,0,0,this.spawnSettings);this.entities.push(entity);this.linkSpawned(entity);}
if(entity){this.spawnCount=Math.min(this.spawnCountMax,this.spawnCount+1);this.spawnedCount=Math.min(this.spawnCountMax,this.spawnedCount+1);this.spawned(entity);}
return entity;},unspawn:function(entity){if(!entity._killed){entity.kill(true);}
else{this.spawnCount=Math.max(0,this.spawnCount-1);_ut.arrayCautiousRemove(this.entities,entity);this.pool.push(entity);if(this.activated&&this.duration===-1&&!this.spawning&&(this.spawnDelay>0||this.spawnCount===0)){this.spawnedCount=this.spawnCount;this.respawnTimer.set(this.respawnDelay);this._reactivate=true;}}},spawned:function(entity){var width=entity.size.x;var height=entity.size.y;var spawnAtWidth=this.size.x;var spawnAtHeight=this.size.y;var spawnAtMinX=this.pos.x;var spawnAtMinY=this.pos.y;var spawnAtMaxX=spawnAtMinX+spawnAtWidth;var spawnAtMaxY=spawnAtMinY+spawnAtHeight;entity.pos.x=_utm.map(Math.random(),0,1,spawnAtMinX,spawnAtMaxX-width)-width*0.5;entity.pos.y=_utm.map(Math.random(),0,1,spawnAtMinY,spawnAtMaxY-height)-height*0.5;}});});

// lib/plusplus/abstractities/particle.js
ig.baked=true;ig.module('plusplus.abstractities.particle').requires('plusplus.core.config','plusplus.core.timer','plusplus.core.entity').defines(function(){"use strict";var _c=ig.CONFIG;ig.Particle=ig.EntityExtended.extend({animAutomatic:_c.PARTICLE.ANIM_AUTOMATIC,animsExpected:["move"],zIndex:_c.Z_INDEX_ABOVE_ALL,performance:ig.EntityExtended.PERFORMANCE.DYNAMIC,size:{x:1,y:1},maxVel:{x:150,y:150},friction:{x:20,y:0},minBounceVelocity:0,bounciness:0.6,lifeDuration:1,fadeAfterSpawnDuration:0,fadeBeforeDeathDuration:0.5,collisionKills:false,collisionSticky:false,randomVel:true,randomDoubleVel:true,randomFlip:true,velocityFlip:true,lifeTimer:null,_fadeAfterInv:0,_fadeBeforeDiff:0,_fadeBeforeInv:0,initProperties:function(){this.parent();this.lifeTimer=new ig.Timer();},resetExtras:function(){this.parent();if(this.animAutomatic&&!this._animsPlaceheld){this._animsPlaceheld=true;this.placeholdAnims();}
if(this.fadeAfterSpawnDuration){this._fadeAfterInv=1/(this.fadeAfterSpawnDuration);}
if(this.fadeBeforeDeathDuration){this._fadeBeforeInv=1/(this.fadeBeforeDeathDuration);this._fadeBeforeDiff=this.lifeDuration-this.fadeBeforeDeathDuration;}},placeholdAnims:function(){if(this.animsExpected.length>0){var anims=this.anims;var animInitPlaceholder;if(this.animInit instanceof ig.Animation){animInitPlaceholder=animInit;}
else if(this.animInit&&anims[this.animInit]){animInitPlaceholder=anims[this.animInit];}
else{animInitPlaceholder=anims['idle']||this.currentAnim;}
for(var i=0,il=this.animsExpected.length;i<il;i++){var animName=this.animsExpected[i];var animPlaceholder=anims[animName]||animInitPlaceholder;if(animPlaceholder){if(!anims[animName+"X"]){anims[animName+"X"]=animPlaceholder;}
if(!anims[animName+"Right"]){anims[animName+"Right"]=anims[animName+"X"];}
if(!anims[animName+"Left"]){anims[animName+"Left"]=anims[animName+"X"];}
if(!anims[animName+"Y"]){anims[animName+"Y"]=animPlaceholder;}
if(!anims[animName+"Down"]){anims[animName+"Down"]=anims[animName+"Y"];}
if(!anims[animName+"Up"]){anims[animName+"Up"]=anims[animName+"Y"];}}}}},ready:function(){this.lifeTimer.set(this.lifeDuration);if(this.randomVel){if(this.randomDoubleVel){this.vel.x=(Math.random()*2-1)*this.vel.x;this.vel.y=(Math.random()*2-1)*this.vel.y;}
else{this.vel.x*=Math.random();this.vel.y*=Math.random();}}
if(this.currentAnim){if(this.randomFlip){this.flip.x=(Math.random()>0.5);this.flip.y=(Math.random()>0.5);}
else if(this.velocityFlip){if(this.canFlipX){this.flip.x=this.vel.x<0?true:false;}
if(this.canFlipY){this.flip.y=this.vel.y<0?true:false;}}}
this.parent();},pause:function(){this.parent();this.lifeTimer.pause();},unpause:function(){this.parent();this.lifeTimer.unpause();},collideWith:function(entity,dirX,dirY,nudge,vel,weak){this.parent(entity,dirX,dirY,nudge,vel,weak);if(this.collisionKills){this.kill();}
else if(this.collisionSticky&&!(entity instanceof ig.Particle)){this.collides=ig.EntityExtended.COLLIDES.NEVER;this.performance=ig.EntityExtended.PERFORMANCE.MOVABLE;this.moveTo(entity,{offset:{x:(this.pos.x+this.size.x*0.5)-(entity.pos.x+entity.size.x*0.5),y:(this.pos.y+this.size.y*0.5)-(entity.pos.y+entity.size.y*0.5)}});}},handleMovementTrace:function(res){this.parent(res);if(this.collidingWithMap){if(this.collisionKills){this.kill();}
else if(this.collisionSticky){this.applyAntiVelocity();this.collides=ig.EntityExtended.COLLIDES.NEVER;this.performance=ig.EntityExtended.PERFORMANCE.STATIC;}}},update:function(){var delta=this.lifeTimer.delta();if(delta>=0){this.kill();}
else{var deltaInv=delta+this.lifeDuration;this.alpha=(this.fadeAfterSpawnDuration!==0?Math.min(1,deltaInv*this._fadeAfterInv):1)-(this.fadeBeforeDeathDuration!==0?Math.max(0,(deltaInv-this._fadeBeforeDiff)*this._fadeBeforeInv):0);}
this.parent();},recordChanges:function(force){this.parent(force);if(this.changed){if(_c.TOP_DOWN||this.canFlipY){if(this.movingX){this.facing.x=this.vel.x<0?-1:1;if(this.movingY){this.facing.y=this.vel.y<0?-1:1;}
else{this.facing.y=0;}}
else if(this.movingY){this.facing.x=0;this.facing.y=this.vel.y<0?-1:1;}}
else if(this.movingX){this.facing.x=this.vel.x<0?-1:1;}}},updateVisible:function(){if(this.animAutomatic&&!this._killed){this.updateCurrentAnim();}
this.parent();},updateCurrentAnim:function(){if(this.performance===ig.EntityExtended.PERFORMANCE.DYNAMIC){this.currentAnim=this.anims[this.getDirectionalAnimName("move")];}}});});

// lib/plusplus/abstractities/particle-fast.js
ig.baked=true;ig.module('plusplus.abstractities.particle-fast').requires('plusplus.core.config','plusplus.abstractities.particle').defines(function(){"use strict";var _c=ig.CONFIG;ig.ParticleFast=ig.Particle.extend({type:ig.EntityExtended.TYPE.NONE,collides:ig.EntityExtended.COLLIDES.NEVER,checkAgainst:ig.EntityExtended.TYPE.NONE,performance:ig.EntityExtended.PERFORMANCE.DYNAMIC,highPerformance:true,init:function(x,y,settings){this.id=++ig.Entity._lastId;this.lifeTimer=new ig.Timer();this.onAdded=new ig.Signal();this.onRemoved=new ig.Signal();this.onMovedTo=new ig.Signal();this.reset(x,y,settings);},reset:function(x,y,settings){this.pos.x=x;this.pos.y=y;this.posDraw=this.pos;this.sizeDraw=this.size;ig.merge(this,settings);this._killed=false;this.changed=true;this.moving=this.movingX=this.movingY=true;if(!this.ignoreSystemScale){var scale=Math.min(Math.max(Math.round(ig.system.scale*this.scaleOfSystemScale),this.scaleMin),this.scaleMax);if(this.scale!==scale){this.scale=scale;}}
this.scaleMod=this.scale/ig.system.scale;if(this.fadeAfterSpawnDuration){this._fadeAfterInv=1/(this.fadeAfterSpawnDuration);}
if(this.fadeBeforeDeathDuration){this._fadeBeforeInv=1/(this.fadeBeforeDeathDuration);this._fadeBeforeDiff=this.lifeDuration-this.fadeBeforeDeathDuration;}},refresh:function(){},resetCore:function(){},resetExtras:function(){},recordResetState:function(){},ready:function(){this.lifeTimer.set(this.lifeDuration);if(this.randomVel){if(this.randomDoubleVel){this.vel.x=(Math.random()*2-1)*this.vel.x;this.vel.y=(Math.random()*2-1)*this.vel.y;}
else{this.vel.x*=Math.random();this.vel.y*=Math.random();}}
if(this.currentAnim){if(this.randomFlip){this.flip.x=(Math.random()>0.5);this.flip.y=(Math.random()>0.5);}
else{if(this.canFlipX){this.flip.x=this.vel.x<0?true:false;}
if(this.canFlipY){this.flip.y=this.vel.y<0?true:false;}}}},spawn:function(){},tween:function(){throw new Error("Attempting to TWEEN fast particle but fast particle does not tween!");},collideWith:function(){throw new Error("Attempting to COLLIDE fast particle but fast particle does not collide!");},handleMovementTrace:function(){throw new Error("Attempting to TRACE COLLISION MAP fast particle but fast particle ignore collision map!");},kill:function(){if(!this._killed){ig.game.removeEntity(this);}},die:function(){},cleanup:function(){this.moveToStop();this.onRemoved.dispatch(this);if(!ig.game.hasLevel){this.onAdded.removeAll();this.onAdded.forget();this.onRemoved.removeAll();this.onRemoved.forget();this.onMovedTo.removeAll();this.onMovedTo.forget();for(var name in this.anims){var anim=this.anims[name];anim.onCompleted.removeAll();anim.onCompleted.forget();}}},update:function(){if(!this.paused){if(!this._killed){var delta=this.lifeTimer.delta();if(delta>=0){return this.kill();}
else{var deltaInv=delta+this.lifeDuration;this.alpha=(this.fadeAfterSpawnDuration!==0?Math.min(1,deltaInv*this._fadeAfterInv):1)-(this.fadeBeforeDeathDuration!==0?Math.max(0,(deltaInv-this._fadeBeforeDiff)*this._fadeBeforeInv):0);}
if(this.movingTo){this.moveToUpdate();}
else{this.pos.x+=this.vel.x*ig.system.tick;this.pos.y+=this.vel.y*ig.system.tick;}
if(this.getIsVisible()){this.visible=true;this.currentAnim.update();}
else{this.visible=false;}}}
else if(ig.game.camera&&!ig.game.camera.paused){this.visible=this.getIsVisible();}},getIsVisible:function(){if(this.alpha<=0)return false;else{var minX=this.posDraw.x-ig.game.screen.x;var minY=this.posDraw.y-ig.game.screen.y;if(minX<0||minY<0||minX+this.sizeDraw.x>ig.system.width||minY+this.sizeDraw.y>ig.system.height)return false;}
return true;},recordChanges:function(){throw new Error("Attempting to RECORD CHANGES in fast particle but fast particle is always changed!");},recordLast:function(){throw new Error("Attempting to RECORD LAST of fast particle but fast particle doesn't record last!");},updateBounds:function(){throw new Error("Attempting to UPDATE BOUNDS of fast particle but fast particle does not update bounds!");},draw:function(){if(this.visible){var anim=this.currentAnim;var sheet=anim.sheet;var image=sheet.image;if(image.loaded){if(image._scale!==this.scale){image.resize(this.scale);}
var scale=this.scale;var tileWidth=sheet.width;var tileHeight=sheet.height;var tileWidthScaled=Math.floor(tileWidth*scale);var tileHeightScaled=Math.floor(tileHeight*scale);if(this.alpha!==1){ig.system.context.globalAlpha=this.alpha;ig.system.context.drawImage(image.data,(Math.floor(anim.tile*tileWidth)%image.width)*scale,(Math.floor(anim.tile*tileWidth/image.width)*tileHeight)*scale,tileWidthScaled,tileHeightScaled,ig.system.getDrawPos(this.posDraw.x-ig.game.screen.x),ig.system.getDrawPos(this.posDraw.y-ig.game.screen.y),tileWidthScaled,tileHeightScaled);ig.system.context.globalAlpha=1;}
else{ig.system.context.drawImage(image.data,(Math.floor(anim.tile*tileWidth)%image.width)*scale,(Math.floor(anim.tile*tileWidth/image.width)*tileHeight)*scale,tileWidthScaled,tileHeightScaled,ig.system.getDrawPos(this.posDraw.x-ig.game.screen.x),ig.system.getDrawPos(this.posDraw.y-ig.game.screen.y),tileWidthScaled,tileHeightScaled);}
ig.Image.drawCount++;}}}});});

// lib/plusplus/entities/particle-color.js
ig.baked=true;ig.module('plusplus.entities.particle-color').requires('plusplus.core.config','plusplus.abstractities.particle-fast').defines(function(){"use strict";var _c=ig.CONFIG;ig.EntityParticleColor=ig.global.EntityParticleColor=ig.ParticleFast.extend({size:{x:2,y:2},animSheet:new ig.AnimationSheet(_c.PATH_TO_MEDIA+'particles.png',2,2),animTileOffset:0,animSequenceCount:7,vel:{x:50,y:50},lifeDuration:0.35,fadeBeforeDeathDuration:0.15,_animTileOffsetLast:-1,reset:function(x,y,settings){this.parent(x,y,settings);if(this._animTileOffsetLast!==this.animTileOffset){this._animTileOffsetLast=this.animTileOffset;this.addAnim("move",{sequence:[Math.round(Math.random()*this.animSequenceCount)+(this.animTileOffset*(this.animSequenceCount+1))],frameTime:1,stop:true});}}});ig.EntityParticleColor.colorOffsets={RED:0,YELLOW:4,GREEN:8,BLUE:12,PURPLE:16,BROWN:20,GRAY:24,WHITE:28};});

// lib/plusplus/entities/explosion.js
ig.baked=true;ig.module('plusplus.entities.explosion').requires('plusplus.abstractities.spawner-fast','plusplus.entities.particle-color').defines(function(){"use strict";ig.EntityExplosion=ig.global.EntityExplosion=ig.SpawnerFast.extend({spawningEntity:ig.EntityParticleColor,spawnCountMax:3,spawnSettings:{vel:{x:100,y:100},animTileOffset:ig.EntityParticleColor.colorOffsets.YELLOW},activated:true});});

// lib/plusplus/abstractities/character.js
ig.baked=true;ig.module('plusplus.abstractities.character').requires('plusplus.core.config','plusplus.core.timer','plusplus.core.entity','plusplus.core.hierarchy','plusplus.entities.explosion','plusplus.helpers.utils','plusplus.helpers.utilsmath','plusplus.helpers.utilsintersection','plusplus.helpers.utilsvector2','plusplus.helpers.tweens','plusplus.helpers.pathfinding').defines(function(){"use strict";var _c=ig.CONFIG;var _ut=ig.utils;var _utm=ig.utilsmath;var _uti=ig.utilsintersection;var _utv2=ig.utilsvector2;var _pf=ig.pathfinding;ig.Character=ig.EntityExtended.extend({performance:ig.EntityExtended.PERFORMANCE.MOVABLE,targetable:true,animAutomatic:_c.CHARACTER.ANIM_AUTOMATIC,animsExpected:["idle","move","stairs","climb","jump","fall"],size:{x:_c.CHARACTER.SIZE_EFFECTIVE_X,y:_c.CHARACTER.SIZE_EFFECTIVE_Y},offset:{x:_c.CHARACTER.SIZE_OFFSET_X,y:_c.CHARACTER.SIZE_OFFSET_Y},maxVelUngrounded:{x:_c.CHARACTER.MAX_VEL_UNGROUNDED_X,y:_c.CHARACTER.MAX_VEL_UNGROUNDED_Y},maxVelGrounded:{x:_c.CHARACTER.MAX_VEL_GROUNDED_X,y:_c.CHARACTER.MAX_VEL_GROUNDED_Y},maxVelClimbing:{x:_c.CHARACTER.MAX_VEL_CLIMBING_X,y:_c.CHARACTER.MAX_VEL_CLIMBING_Y},frictionUngrounded:{x:_c.CHARACTER.FRICTION_UNGROUNDED_X,y:_c.CHARACTER.FRICTION_UNGROUNDED_Y},frictionGrounded:{x:_c.CHARACTER.FRICTION_GROUNDED_X,y:_c.CHARACTER.FRICTION_GROUNDED_Y},speed:{x:_c.CHARACTER.SPEED_X,y:_c.CHARACTER.SPEED_Y},canJump:_c.CHARACTER.CAN_JUMP&&!_c.TOP_DOWN,jumpSteps:_c.CHARACTER.JUMP_STEPS,jumpForce:_c.CHARACTER.JUMP_FORCE,jumpControl:_c.CHARACTER.JUMP_CONTROL,canClimb:_c.CHARACTER.CAN_CLIMB&&!_c.TOP_DOWN,climbingControl:_c.CHARACTER.CLIMBING_CONTROL,movingFrom:false,moveToUnsafe:false,canPathfind:_c.CHARACTER.CAN_PATHFIND,path:[],pathfindingDelay:_c.CHARACTER.PATHFINDING_DELAY,pathfindingUpdateDelay:_c.CHARACTER.PATHFINDING_UPDATE_DELAY,pathfindingSimpleDelay:_c.CHARACTER.PATHFINDING_SIMPLE_DELAY,pathingTimer:null,stuck:false,stuckDelay:_c.CHARACTER.STUCK_DELAY,stuckTimer:null,health:_c.CHARACTER.HEALTH,healthMax:_c.CHARACTER.HEALTH,energy:_c.CHARACTER.ENERGY,energyMax:_c.CHARACTER.ENERGY,damageDelay:0,damageTimer:null,temporaryInvulnerabilityPulses:2,temporaryInvulnerabilityAlpha:0.5,regen:false,regenDelay:0,regenTimer:null,regenRateHealth:_c.CHARACTER.REGEN_RATE_HEALTH,regenAsPctHealth:false,regenRateEnergy:_c.CHARACTER.REGEN_RATE_ENERGY,regenAsPctEnergy:false,regenHealth:true,regenEnergy:true,mimicLevel:_c.RANKS_MAP.NONE,explodingDamage:_c.CHARACTER.EXPLODING_DAMAGE,damageSettings:{spawnCountMax:_c.CHARACTER.EXPLODING_DAMAGE_PARTICLE_COUNT,spawnSettings:{animTileOffset:ig.EntityParticleColor.colorOffsets.WHITE}},explodingDeath:_c.CHARACTER.EXPLODING_DEATH,deathSettings:{spawnCountMax:_c.CHARACTER.EXPLODING_DEATH_PARTICLE_COUNT,spawnSettings:{animTileOffset:ig.EntityParticleColor.colorOffsets.WHITE}},abilities:null,abilitiesOriginal:null,slopeSticking:_c.CHARACTER.SLOPE_STICKING,falling:false,ungroundedFor:0,ungroundedForThreshold:_c.CHARACTER.UNGROUNDED_FOR_THRESHOLD,ungroundedForAndFallingThreshold:_c.CHARACTER.UNGROUNDED_FOR_AND_FALLING_THRESHOLD,withinClimbables:false,withinClimbablesAbove:false,withinStairs:false,withinOneWay:false,jumping:false,jumpAscend:false,climbing:false,needsNewPath:false,_jumpPushing:false,_jumpWhileClimbing:false,_climbingIntentDown:false,_climbingIntentUp:false,_cleanIntentDown:false,_cleanIntentUp:false,_temporarilyInvulnerable:false,_temporarilyInvulnerablePulsing:false,_positionsPathfinding:{from:{x:0.1,y:0.1},target:{x:0.1,y:0.1}},_boundsPathfollow:{},initTypes:function(){this.parent();_ut.addType(ig.EntityExtended,this,'type',"CHARACTER");},initProperties:function(){this.parent();this.regenTimer=new ig.Timer();this.damageTimer=new ig.Timer();this.pathingTimer=new ig.Timer();this.stuckTimer=new ig.Timer();this.abilities=this.abilitiesOriginal=new ig.Hierarchy();},resetExtras:function(){this.parent();this.energyMax=this.energy;this.moveToStop();this.applyAntiVelocity();if(this.animAutomatic&&this.animsExpected.length>0&&!this._animsPlaceheld){this._animsPlaceheld=true;this.placeholdAnims();}},placeholdAnims:function(){var anims=this.anims;var animInitPlaceholder;if(this.animInit instanceof ig.Animation){animInitPlaceholder=animInit;}
else if(this.animInit&&anims[this.animInit]){animInitPlaceholder=anims[this.animInit];}
else{animInitPlaceholder=anims['idle']||this.currentAnim;}
for(var i=0,il=this.animsExpected.length;i<il;i++){var animName=this.animsExpected[i];var animPlaceholder=anims[animName]||animInitPlaceholder;if(animPlaceholder){if(!anims[animName+"X"]){anims[animName+"X"]=animPlaceholder;}
if(!anims[animName+"Right"]){anims[animName+"Right"]=anims[animName+"X"];}
if(!anims[animName+"Left"]){anims[animName+"Left"]=anims[animName+"X"];}
if(!anims[animName+"Y"]){anims[animName+"Y"]=animPlaceholder;}
if(!anims[animName+"Down"]){anims[animName+"Down"]=anims[animName+"Y"];}
if(!anims[animName+"Up"]){anims[animName+"Up"]=anims[animName+"Y"];}}}},recordResetState:function(){this.parent();this.resetState.controllable=this.controllable;this.resetState.energy=this.energy;},ready:function(){var me=this;this.abilities.forAllDescendants(function(){this.setEntity(me);});this.temporaryInvulnerability();this.removeControl();this.parent();},spawn:function(){this.parent();if(this.resetState.controllable){this.addControl();}},removeControl:function(){this.parent();this.moveToStop();this.jumpEnd();this.climbEnd();},pause:function(){this.parent();this.regenTimer.pause();this.damageTimer.pause();this.pathingTimer.pause();this.stuckTimer.pause();this.abilities.pause();},unpause:function(){this.parent();this.regenTimer.unpause();this.damageTimer.unpause();this.pathingTimer.unpause();this.stuckTimer.unpause();this.abilities.unpause();},setGrounded:function(withoutVelocity){if(_c.TOP_DOWN){this.standing=this.grounded=true;this.falling=false;}
else{this.standing=this.grounded=this.hasGravity;this.falling=false;if(!this.climbing&&!withoutVelocity){if(this.slopeSticking&&this.hasGravity){this.vel.y=this.maxVelGrounded.y;}
else{this.vel.y=0;}}}},setUngrounded:function(){if(!_c.TOP_DOWN){this.grounded=this.standing=this.falling=false;}},moveTo:function(item,settings){var startedMoving=this.parent(item,settings);if(startedMoving){this.needsNewPath=true;if(this.pathingTimer){this.pathingTimer.set(0);}}
return startedMoving;},moveFrom:function(item,settings){var startedMoving=this.moveTo(item,settings);if(startedMoving){this.movingFrom=true;}
return startedMoving;},moveToUpdate:function(){if(this.performance===ig.EntityExtended.PERFORMANCE.DYNAMIC){if(this.movingTo){if(this.canPathfind){this.needsNewPath=this.movingTo.changed||this.changed||this.moveToUnsafe||this.needsNewPath;if(!this.movedTo||this.needsNewPath){this.findMoveToPath();this.moveToPath();}}
else{this.lookAt(this.movingTo);}}}
else{this.parent();}},findMoveToPath:function(settings){if(this.pathingTimer.delta()>=0&&(this.path.length===0||this.needsNewPath)){this.needsNewPath=this.movedTo=this.moveToUnsafe=false;settings=settings||this.movingToSettings;var simple;var avoidEntities;var unsafe;var avoidSlopes;var searchDistance;var alwaysKeepFirst;if(settings){simple=settings.simple;avoidEntities=settings.avoidEntities;unsafe=settings.unsafe;avoidSlopes=settings.avoidSlopes;searchDistance=settings.searchDistance;alwaysKeepFirst=settings.alwaysKeepFirst;}
if(simple){var from;var target;if(this.movingTo instanceof ig.EntityExtended){var positions=ig.pathfinding.getPositionPathfindingEntities(this,this.movingTo,this._positionsPathfinding);from=positions.from;target=positions.target;}
else{target=this.movingTo;from=_pf.getPositionPathfindingPoint(this,this.movingTo.x,this.movingTo.y,this._positionsPathfinding.from);}
var dX=target.x-from.x;var dY=target.y-from.y;if(this.movingFrom){dX=-dX;dY=-dY;}
if(dX!==0){if(dX*dX<this.size.x*this.size.x*0.25){dX=0;}
else{dX=_utm.direction(dX);}}
if(dY!==0){if(dY*dY<this.size.y*this.size.y*0.25){dY=0;}
else{dY=_utm.direction(dY);}}
if(this.hasGravity){if(dX!==0&&dY!==0&&dY*dY<dX*dX*2){dY=0;}
if(!avoidSlopes){var onSlope=_pf.getEntityOnSmoothSlope(this,dX);if(onSlope&&dY===0){dY=_pf.getSlopeDirectionY(this,dX);}}}
var node=unsafe||onSlope?_pf.getNode(from.x,from.y,dX,dY):_pf.getWalkableNode(from.x,from.y,dX,dY,avoidEntities,this);if(node){this.path[0]=node;}
else{this.clearPath();this.moveToUnsafe=true;}
this.pathingTimer.set(this.pathfindingSimpleDelay);}
else{if(this.movingFrom){if(this.movingTo instanceof ig.EntityExtended){this.path=_pf.getPathAwayFromEntity(this,this.movingTo,avoidEntities,searchDistance);}
else{this.path=_pf.getPathAwayFromPoint(this,this.movingTo.x,this.movingTo.y,avoidEntities,searchDistance);}}
else{if(this.movingTo instanceof ig.EntityExtended){this.path=_pf.getPathToEntity(this,this.movingTo,avoidEntities,searchDistance);}
else{this.path=_pf.getPathToPoint(this,this.movingTo.x,this.movingTo.y,avoidEntities,searchDistance);}}
if(this.path.length===0){this.clearPath();this.pathingTimer.set(this.pathfindingDelay)}
else{this.pathingTimer.set(this.pathfindingUpdateDelay);if(this.path.length>1&&!alwaysKeepFirst){var node=this.path[this.path.length-1];if(!node.corner||this._lastCornerNode===node){this.path.length--;return;}
var nextNode=this.path[this.path.length-2];var x=this.pos.x+this.size.x*0.5;var y=this.pos.y+this.size.y*0.5;if((node.x<x&&nextNode.x>x)||(node.x>x&&nextNode.x<x)||(node.y<y&&nextNode.y>y)||(node.y>y&&nextNode.y<y)){this.path.length--;}
if(this.path.length&&this._lastNode!==this.path[this.path.length-1]){this._boundsPathfollow.ignoreCornerX=this._boundsPathfollow.ignoreCornerY=false;}}}}}},moveToPath:function(path,settings){path=path||this.path;if(path){if(path.length===0||(this.stuck&&this.stuckTimer.delta()>=0)){this.moveToComplete();}
else{if(!this.changed){if(!this.stuck){this.stuckTimer.set(this.stuckDelay);this.stuck=true;}}
else{this.stuck=false;}
settings=settings||this.movingToSettings;var unsafe;var avoidUngrounded;if(settings){unsafe=settings.unsafe;avoidUngrounded=settings.avoidUngrounded;}
var length=path.length;var node=this._lastNode=path[length-1];var nodeX=node.x;var nodeY=node.y;var atNode;var width=this.size.x;var height=this.size.y;var x=this.pos.x;var y=this.pos.y;var bounds=_pf.getBoundsPathfollowing(x,y,width,height,node,!this.hasGravity,this._boundsPathfollow);var minX=Math.round(bounds.minX);var maxX=Math.round(bounds.maxX);var minY=Math.round(bounds.minY);var maxY=Math.round(bounds.maxY);if(node.corner){atNode=_uti.pointInAABB(nodeX,nodeY,minX,minY,maxX,maxY);}
else if(this.jumping&&node.ungrounded&&length>1){atNode=x<=nodeX&&x+width>=nodeX;}
else{atNode=_uti.pointInAABB(nodeX,nodeY,x,y,x+width,y+height);}
if(atNode){if(node.corner){this._lastCornerNode=node;}
else{this._lastCornerNode=null;}
this._boundsPathfollow.ignoreCornerX=this._boundsPathfollow.ignoreCornerY=false;if(path.length===1){return this.moveToComplete();}
else{path.length--;return this.moveToPath(path);}}
width=bounds.width;height=bounds.height;var cX=Math.round(minX+width*0.5);var cY=Math.round(minY+height*0.5);if(!this.hasGravity){if(minY<=nodeY&&maxY>=nodeY){this.moveToHereVertical();}
else if(cY<nodeY){this.moveToDown();}
else if(cY>nodeY){this.moveToUp();}
if(minX<=nodeX&&maxX>=nodeX){this.moveToHereHorizontal();}
else if(cX<nodeX){this.moveToRight();}
else if(cX>nodeX){this.moveToLeft();}}
else{var nodeNext;var withinX=minX<=nodeX&&maxX>=nodeX;if(!this.jumping){if(minY<=nodeY&&maxY>=nodeY){this.moveToHereVertical();}
else if(cY<nodeY){if(this.canClimb){this.climbDown();}
if(!this.climbing){this.moveToDown();}}
else if(cY>nodeY){this.moveToUnsafe=!unsafe&&node.ungrounded;if(this.withinClimbables&&this.canClimb){this.moveToUnsafe=false;this.climbUp();}
else if(this.canJump){this.moveToUnsafe=false;this.jump();}}
if(!unsafe&&(node.ungrounded&&(!node.oneWay||node.oneWayFacing.y>=0))&&avoidUngrounded&&(this.grounded||this.climbing)){nodeNext=node.neighborMap.bottom;while(nodeNext){nodeNext=nodeNext.neighborMap.bottom;if(!nodeNext.walkable||(nodeNext.oneWay&&nodeNext.oneWayFacing.y<0)){break;}
else if(nodeNext.y>this.pos.y+this.size.y){this.moveToUnsafe=true;break;}}}}
if(this.moveToUnsafe){return this.moveToComplete();}
if(withinX){this.moveToHereHorizontal();if(this.jumping&&(!node.ungrounded||node.x===path[0].x)){if(cX<nodeX){this.moveToRight();}
else if(cX>nodeX){this.moveToLeft();}}}
else if(cX<nodeX){this.moveToRight();}
else if(cX>nodeX){this.moveToLeft();}}}}},clearPath:function(){this.stuck=false;if(this.path.length>0){this.path.length=0;}},moveToLeft:function(mod){if(mod){this.accel.x=-this.speed.x*mod;}
else{this.accel.x=-this.speed.x;}
this.flip.x=this.canFlipX;if(this.moving){if(!this.movingY){this.facing.y=0;}
this.facing.x=-1;}},moveToRight:function(mod){if(mod){this.accel.x=this.speed.x*mod;}
else{this.accel.x=this.speed.x;}
this.flip.x=false;if(this.moving){if(!this.movingY){this.facing.y=0;}
this.facing.x=1;}},moveToUp:function(mod){if(mod){this.accel.y=-this.speed.y*mod;}
else{this.accel.y=-this.speed.y;}
this.flip.y=this.canFlipY;if(this.moving&&(_c.TOP_DOWN||this.canFlipY)){if(!this.movingX){this.facing.x=0;}
this.facing.y=-1;}},moveToDown:function(mod){if(mod){this.accel.y=this.speed.y*mod;}
else{this.accel.y=this.speed.y;}
this.flip.y=false;if(this.moving&&(_c.TOP_DOWN||this.canFlipY)){if(!this.movingX){this.facing.x=0;}
this.facing.y=1;}},moveToHereHorizontal:function(){this.accel.x=0;},moveToHereVertical:function(){this.accel.y=0;},moveToHere:function(){this.clearPath();this.moveToHereHorizontal();this.moveToHereVertical();},moveToSequenceNext:function(){if(this.movingToSequence){if(this.movingToSequence.length>0){if(this.movingFrom){this.movingTo=null;this.movingFrom=false;this.moveFrom(this.movingToSequence.shift(),this.movingToSettings);}
else{this.movingTo=null;this.moveTo(this.movingToSequence.shift(),this.movingToSettings);}}
else{this.movingToSequence=undefined;this.moveToComplete();this.moveToStop();}}},moveToComplete:function(){if(this.pathingTimer){this.pathingTimer.set(0);}
this.moveToHere();this.parent();},moveToStop:function(){this.moveToHere();this.movingFrom=false;this.parent();},manageStart:function(){this.parent();this.moveToStop();},jump:function(){if(this.canJump){if(this.climbing){this._jumpWhileClimbing=true;this.climbEnd();}
if((this.grounded||(this.canClimb&&this.withinClimbables)||this.ungroundedFor<this.ungroundedForThreshold)&&this.jumping!==true){this.jumping=this._jumpPushing=true;this.jumpStepsRemaining=this.jumpSteps;}}},jumpUpdate:function(){if(this.jumping===true){if(this._jumpPushing){this.jumpPush();}
if(this.vel.y>=0){this.jumpAscend=false;}
if(!this._jumpPushing&&!this.jumpAscend&&(this.grounded||(this._jumpWhileClimbing&&this.withinClimbables))){this.jumpEnd();}}},jumpPush:function(){if(this.jumpStepsRemaining>0){if(this.jumpStepsRemaining===this.jumpSteps){this.setUngrounded();this.applyAntiVelocityY();}
this.jumpAscend=true;this.jumpStepsRemaining--;this.moveToUp(this.jumpForce);if(this.jumpStepsRemaining<=0){this._jumpPushing=false;this.moveToHereVertical();}}},jumpEnd:function(){this.jumping=this._jumpPushing=false;this.jumpStepsRemaining=0;if(this._jumpWhileClimbing){this._jumpWhileClimbing=false;this.climb();}},climb:function(){if(this.canClimb&&this.withinClimbables){if(this.jumping){this.jumpEnd();}
if(this.climbing!==true&&((this._climbingIntentUp&&this.withinClimbablesAbove)||(this._climbingIntentDown&&!this.grounded))){this.setUngrounded();this.climbing=true;if(!this.jumping){this.applyAntiVelocityY();}}}},climbUp:function(){this._climbingIntentUp=true;this._cleanIntentUp=false;this.climb();if(this.climbing){this.moveToUp();}},climbDown:function(){this._climbingIntentDown=true;this._cleanIntentDown=false;this.climb();if(this.climbing){this.moveToDown();}},climbUpdate:function(){if(this.climbing){this.applyAntiGravity();if(!this.withinClimbables||(this.grounded&&this.vel.y>=0)){this.climbEnd();}}
if(this._climbingIntentDown){if(this._cleanIntentDown){this._cleanIntentDown=this._climbingIntentDown=false;}
else{this._cleanIntentDown=true;}}
if(this._climbingIntentUp){if(this._cleanIntentUp){this._cleanIntentUp=this._climbingIntentUp=false;}
else{this._cleanIntentUp=true;}}},climbEnd:function(){if(this.climbing!==false){this.climbing=false;if(!this.jumping&&this.vel.y<0){this.applyAntiVelocityY();}}},receiveDamage:function(amount,from,unblockable){var applied=this.parent(amount,from,unblockable);if(applied&&!this._killed){if(this.explodingDamage){this.explode();}
if(!unblockable){this.temporaryInvulnerability();}}
return applied;},explode:function(settings){ig.game.spawnEntity(ig.EntityExplosion,this.pos.x,this.pos.y,ig.merge({size:{x:this.size.x,y:this.size.y}},settings||this.damageSettings));},receiveHealing:function(amount,from){this.health=Math.min(this.healthMax,this.health+amount);},drainEnergy:function(amount,from,unblockable){if(!this.invulnerable||unblockable){this.energy=Math.max(0,this.energy-amount);return true;}
return false;},receiveEnergy:function(amount,from){this.energy=Math.min(this.energyMax,this.energy+amount);},restoreStats:function(from){this.receiveHealing(this.healthMax-this.health,from);this.receiveEnergy(this.energyMax-this.energy,from);},regenerate:function(){if(this.regenHealth){this.receiveHealing(this.regenRateHealth*(this.regenAsPctHealth?this.healthMax:1),this);}
if(this.regenEnergy){this.receiveEnergy(this.regenRateEnergy*(this.regenAsPctEnergy?this.energyMax:1),this);}},temporaryInvulnerability:function(duration){if(typeof duration==='undefined'){duration=this.damageDelay;}
if(!this.invulnerable&&duration>0){this.damageTimer.set(duration);this.invulnerable=this._temporarilyInvulnerable=true;if(this.alpha===1&&this.temporaryInvulnerabilityAlpha<1&&this.temporaryInvulnerabilityPulses>0){this._temporarilyInvulnerablePulsing=true;var hide=this.tween({alpha:this.temporaryInvulnerabilityAlpha},{name:"invulnerableHide",duration:duration*1000/(this.temporaryInvulnerabilityPulses*2),noComplete:true,stopped:true});var show=this.tween({alpha:1},{name:"invulnerableShow",duration:duration*1000/(this.temporaryInvulnerabilityPulses*2),noComplete:true,stopped:true});hide.chain(show);show.chain(hide);hide.start();}}},temporaryInvulnerabilityEnd:function(){if(this._temporarilyInvulnerable){if(this._temporarilyInvulnerablePulsing){this.tweenEnd("invulnerableHide");this.tweenEnd("invulnerableShow");this._temporarilyInvulnerablePulsing=false;this.alpha=1;}
this.invulnerable=this._temporarilyInvulnerable=false;}},kill:function(silent){this.controllable=false;this.parent(silent);},die:function(){this.temporaryInvulnerabilityEnd();if(!this.dieingSilently&&this.explodingDeath){this.explode(this.deathSettings);}
this.parent();},cleanup:function(){this.moveToUnsafe=false;this._lastNode=this._lastCornerNode=null;this.parent();},cleanupCollision:function(){this.parent();this.withinOneWay=this.withinClimbables=this.withinClimbablesAbove=this.withinStairs=false;},intersectWith:function(entity){this.parent();if(entity.oneWay){this.withinOneWay=true;}
if(entity.climbable){this.withinClimbables=true;this.withinStairs=entity.climbableStairs;if(entity.pos.y<Math.round(this.pos.y+this.size.y*0.9)){this.withinClimbablesAbove=true;}}},getIsCollidingWithOneWay:function(entityOneWay){var colliding=this.parent(entityOneWay);if(colliding&&entityOneWay.climbable){if(this._climbingIntentDown&&entityOneWay.oneWayFacing.y<0){this.withinClimbables=true;this.withinStairs=entityOneWay.climbableStairs;this.grounded=false;this.climbDown();return false;}
else if(this._climbingIntentUp&&entityOneWay.oneWayFacing.y>0){this.withinClimbables=this.withinClimbablesAbove=true;this.withinStairs=entityOneWay.climbableStairs;this.climbUp();return false;}}
return colliding;},collideWith:function(entity,dirX,dirY,nudge,vel,weak){this.parent(entity,dirX,dirY,nudge,vel,weak);if(!weak||this===weak){if(dirY<0&&this.jumping){this.jumpEnd();}
if(this.changed){this.updateVisible();}}},updateChanges:function(){this.parent();if(this._temporarilyInvulnerable&&this.invulnerable&&this.damageTimer.delta()>=0){this.temporaryInvulnerabilityEnd();}
if(this.regen&&this.regenTimer.delta()>=0){this.regenTimer.set(this.regenDelay);this.regenerate();}
this.abilities.update();this.jumpUpdate();this.climbUpdate();if(this.hasGravity&&!this.grounded&&!this.climbing){this.ungroundedFor+=ig.system.tick;if(this.ungroundedFor>this.ungroundedForAndFallingThreshold){this.falling=true;}}
else{this.ungroundedFor=0;}},updateVelocity:function(){var control;if(this.climbing){_utv2.copy(this.maxVel,this.maxVelClimbing);control=this.climbingControl;}
else if(this.grounded){_utv2.copy(this.maxVel,this.maxVelGrounded);control=1;}
else{_utv2.copy(this.maxVel,this.maxVelUngrounded);control=this.jumpControl;}
if(this.standing||this.climbing){_utv2.copy(this.friction,this.frictionGrounded);}
else{_utv2.copy(this.friction,this.frictionUngrounded);}
this.vel.x=this.getNewVelocity(this.vel.x,this.accel.x*control,this.friction.x,this.maxVel.x);this.vel.y=this.getNewVelocity(this.vel.y,this.accel.y*control,this.friction.y,this.maxVel.y);},updateVisible:function(){if(this.animAutomatic&&!this._killed){this.updateCurrentAnim();}
this.parent();},updateCurrentAnim:function(){var anims=this.anims;var anim;if(this.performance===ig.EntityExtended.PERFORMANCE.DYNAMIC){if(this.climbing===true){if(this.withinStairs){if(this.moving){this.currentAnim=anims[this.getDirectionalAnimName("stairs")];return true;}}
else{this.currentAnim=anims[this.getDirectionalAnimName("climb")];this.currentAnim.stop=!this.moving;this.currentAnim.reverse=this.vel.y>0;return true;}}
else if(!this.grounded){if(this.jumping){anim=anims[this.getDirectionalAnimName("jump")];if(this.currentAnim!==anim){this.currentAnim=anim;this.currentAnim.playFromStart(true);}
return true;}
else if(this.falling){this.currentAnim=anims[this.getDirectionalAnimName("fall")];return true;}}
if(this.moving){this.currentAnim=anims[this.getDirectionalAnimName("move")];return true;}}
anim=anims[this.getDirectionalAnimName("idle")];if(this.currentAnim!==anim){this.currentAnim=anim;this.currentAnim.playFromStart();}}});});

// lib/plusplus/abilities/ability.js
ig.baked=true;ig.module('plusplus.abilities.ability').requires('plusplus.core.timer','plusplus.core.entity','plusplus.abstractities.particle','plusplus.helpers.utils','plusplus.helpers.utilsintersection','plusplus.helpers.signals').defines(function(){"use strict";var _ut=ig.utils;var _uti=ig.utilsintersection;var count=0;ig.Ability=ig.Class.extend({id:count++,name:'',type:0,paused:false,blocking:true,priority:0,enabled:true,entity:null,entityOptions:null,entityTarget:null,movable:false,autoStopMoving:true,once:false,activated:false,needsDeactivate:false,activateToggle:false,activateStrict:true,channelled:false,channelling:false,costActivate:0,costChannel:0,cooldownDelay:0,cooldownTimer:null,castTimer:null,requiresTarget:false,canFindTarget:false,canTargetSelf:true,canTargetOthers:true,canTargetFixed:false,rangeX:0,rangeY:0,typeTargetable:0,groupTargetable:0,faceTarget:true,retainTarget:false,regenBlocking:true,rank:0,upgrades:[],casting:false,activateCastSettings:null,activatePassCastSettings:null,activateSetupCastSettings:null,deactivateCastSettings:null,deactivateSetupCastSettings:null,failCastSettings:null,failReason:'',onActivated:null,onDeactivated:null,onFailed:null,_activating:false,_deactivating:false,_regenBlocked:false,_entityTargetRetained:false,init:function(entity,settings){this.id=count++;if(settings&&!ig.global.wm){if(typeof settings.typeTargetable==='string'){_ut.addType(ig.EntityExtended,this,'typeTargetable',settings.typeTargetable);delete settings.typeTargetable;}
if(typeof settings.groupTargetable==='string'){_ut.addType(ig.EntityExtended,this,'groupTargetable',settings.groupTargetable,"GROUP");delete settings.groupTargetable;}
ig.merge(this,settings);}
this.initTypes();this.initProperties();this.initUpgrades();this.setEntity(entity);},initTypes:function(){},initProperties:function(){this.castTimer=new ig.Timer();this.cooldownTimer=new ig.Timer();this.onActivated=new ig.Signal();this.onDeactivated=new ig.Signal();this.onFailed=new ig.Signal();},initUpgrades:function(){},activate:function(){if(this.enabled){if(this.activateToggle&&(this.needsDeactivate||this.activated)){return this.deactivate.apply(this,arguments);}
else if(!this._activating&&!this.channelling){this.activated=false;if(this.assert(this.cooledDown(),ig.Ability.FAIL.COOLDOWN)){return this.activateSetup.apply(this,arguments);}}}},activatePlain:function(){return this.activate();},execute:function(){console.warn("DEPRECATED: ig.Ability.execute has been replaced by ig.Ability.activate, and ig.Ability.activate's previous functionality is now handled by ig.Ability.activateComplete.");return this.activate.apply(arguments,this);},activateSetup:function(){if(!this._activating){this.castEnd();this._deactivating=false;this.needsDeactivate=this._activating=true;if(this.faceTarget){this.entity.lookAt(this.entityTarget);}
if(this.activateSetupCastSettings){this.cast(this.activateSetupCastSettings,this.activateTry,arguments);}
else{return this.activateTry.apply(this,arguments);}}},activateTry:function(){if(this.costActivate===0){if(this.assert(this.hasTarget(),ig.Ability.FAIL.TARGET)&&this.assert(this.closeEnough(),ig.Ability.FAIL.DISTANCE)){if(this.activatePassCastSettings){this.cast(this.activatePassCastSettings,this.activatePass,arguments);}
else{return this.activatePass.apply(this,arguments);}}}
else if(this.assert(this.hasTarget(),ig.Ability.FAIL.TARGET)&&this.assert(this.canPayCost(this.costActivate),ig.Ability.FAIL.COST)&&this.assert(this.closeEnough(),ig.Ability.FAIL.DISTANCE)){this.extractCost(this.costActivate);if(this.activatePassCastSettings){this.cast(this.activatePassCastSettings,this.activatePass,arguments);}
else{return this.activatePass.apply(this,arguments);}}},activatePass:function(){if(!this.activatePassCastSettings||!this.activateStrict||this.assert(this.closeEnough(),ig.Ability.FAIL.DISTANCE)){return this.activateComplete.apply(this,arguments);}},activateComplete:function(){this._activating=this._deactivating=false;this.needsDeactivate=true;this.activated=this.once||this.channelled;this.onActivated.dispatch(this);if(this.cooldownDelay>0){this.cooldownTimer.set(this.cooldownDelay);}
if(this.activateCastSettings){this.cast(this.activateCastSettings,this.channelled?this.channelTry:null);}
else{this.castEnd();if(this.channelled){this.channelTry();}}
this.dropEntityTarget();},deactivate:function(){return this.deactivateSetup.apply(this,arguments);},deactivateSetup:function(){if(this.needsDeactivate&&!this._deactivating){this._deactivating=true;this.activated=this._activating=this.needsDeactivate=false;if(this.channelling){this.channelStop();}
this.castEnd();if(this.deactivateSetupCastSettings&&!this.entity._killed){this.cast(this.deactivateSetupCastSettings,this.deactivateComplete,arguments);}
else{return this.deactivateComplete.apply(this,arguments);}}},deactivateComplete:function(){this._deactivating=false;this.onDeactivated.dispatch(this);if(this.deactivateCastSettings&&!this.entity._killed){this.cast(this.deactivateCastSettings);}
else{this.castEnd();}
this.dropEntityTarget();},cleanup:function(){this.castEnd();var deactivateSetupCastSettings=this.deactivateSetupCastSettings;var deactivateCastSettings=this.deactivateCastSettings;this.deactivateCastSettings=this.deactivateSetupCastSettings=null;var result=this.deactivate.apply(this,arguments);this.deactivateSetupCastSettings=deactivateSetupCastSettings;this.deactivateCastSettings=deactivateCastSettings;if(!ig.game.hasLevel){this.onActivated.removeAll();this.onActivated.forget();this.onDeactivated.removeAll();this.onDeactivated.forget();this.onFailed.removeAll();this.onFailed.forget();}
return result;},cleanupPlain:function(){return this.cleanup();},pause:function(){this.paused=true;this.castTimer.pause();this.cooldownTimer.pause();},unpause:function(){this.paused=false;this.castTimer.unpause();this.cooldownTimer.unpause();},setEnabled:function(enabled){if(typeof enabled==='undefined'){enabled=true;}
if(!enabled){this.disable();}
else{this.enable();}},enable:function(){this.enabled=true;},disable:function(){this.enabled=false;if(this.needsDeactivate||this.activated){return this.deactivateSetup(arguments);}},cooledDown:function(){return this.cooldownDelay<=0||this.cooldownTimer.delta()>=0;},cast:function(settings,internalCallback,internalArgs){if(settings){var callback;var args;if(!settings.async){callback=internalCallback;args=internalArgs;}
var animName=settings.animName;if(animName&&!settings.animOmniDirectional){animName=this.entity.getDirectionalAnimName(animName);}
var as=settings.animSettings||{};if(animName&&!settings.delay&&(!(!as.loop&&!as.lock&&!as.stop)||(as.frame&&this.entity.anims[animName]&&this.entity.anims[animName].stop))){settings.delay=1;}
if(settings.delay){this.castStart(settings,callback,args);this.castTimer.set(settings.delay);if(animName){if(typeof as.loop==='undefined'){as.loop=true;}
this.entity.animOverride(animName,as);}}
else if(animName){this.castStart(settings,callback,args);var originalCallback=as.callback;var originalContext=as.context;as.callback=function(){this.castComplete();if(originalCallback){originalCallback.call(originalContext||this);}};as.context=this;this.entity.animOverride(animName,as);}
else{this.castEffects(settings.effects);if(callback){callback.apply(this,args);}}
if(settings.async&&internalCallback){internalCallback.apply(this,internalArgs);}}
else if(internalCallback){internalCallback.apply(this,internalArgs);}},castStart:function(settings,internalCallback,internalArgs){this.castEnd();this.casting=true;this.castSettings=settings;this.castInternalCallback=internalCallback;this.castInternalArgs=internalArgs;if(this.autoStopMoving&&this.getInterrupted()){this.entity.moveAllStop();}
this.castEffects(settings.effects);},castUpdate:function(){if(this.castSettings&&this.castSettings.delay&&this.castTimer.delta()>=0){this.castComplete();}
else if(!this.failReason){this.assert(!this.getInterrupted(),ig.Ability.FAIL.INTERRUPT);}},castComplete:function(){var settings=this.castSettings;var internalCallback=this.castInternalCallback;var internalArgs=this.castInternalArgs;this.castEnd();this.failReason='';if(settings&&settings.callback){settings.callback.apply(settings.context||this,settings.settings);}
if(internalCallback){internalCallback.apply(this,internalArgs);}},castEnd:function(){if(this.casting||this.castSettings){this.casting=false;if(this.castSettings){var effects=this.castSettings.effects;if(effects){for(var i=0,il=effects.length;i<il;i++){this.effectEnd(effects[i]);}}
var animName=this.castSettings.animName;if(animName){if(!this.castSettings.animOmniDirectional){animName=this.entity.getDirectionalAnimName(animName);}
this.entity.animRelease(animName,true);}}
this.castSettings=this.castInternalCallback=this.castInternalArgs=undefined;}},castEffects:function(effects){if(effects&&effects.length){for(var i=0,il=effects.length;i<il;i++){this.effectStart(effects[i]);}}},effectStart:function(effect){var es=effect.settings||{};if(!effect.ignoreDuration){if(this.castSettings){if(this.castSettings.delay){es.lifeDuration=this.castSettings.delay;}
else if(this.castSettings.animName){var anim=this.entity.anims[this.castSettings.animName];if(anim){es.lifeDuration=anim.frameTime*anim.sequence.length;}}}
if(effect.fade){es.fadeBeforeDeathDuration=es.fadeBeforeDeathDuration||0;}}
if(!effect.followTarget||this.entityTarget){var entity=effect.entity=ig.game.spawnEntity(effect.entityClass,0,0,es);if(effect.followSettings){if(typeof effect.followSettings.flipWith==='undefined'){effect.followSettings.flipWith=true;}
if(effect.followTarget){if(this.entityTarget){entity.moveTo(this.entityTarget,effect.followSettings);}}
else{entity.moveTo(this.entity,effect.followSettings);}}
else if(effect.center!==false){entity.pos.x=this.entity.pos.x+(this.entity.size.x-entity.size.x)*0.5;entity.pos.y=this.entity.pos.y+(this.entity.size.y-entity.size.y)*0.5;}}},effectEnd:function(effect){if(effect.entity&&!effect.entity._killed&&(this.failReason===ig.Ability.FAIL.INTERRUPT||!(effect.entity instanceof ig.Particle))){effect.entity.kill();effect.entity=undefined;}},update:function(){if(this.enabled&&!this.paused){if(this.casting){this.castUpdate();}
if(this.activated&&this.channelled){this.channelTry(arguments);}}},channelTry:function(args){if(!this.channelling&&this.autoStopMoving&&this.getInterrupted()){this.entity.moveAllStop();}
if(this.costChannel===0){if(this.assert(!this.getInterrupted(),ig.Ability.FAIL.INTERRUPT)&&this.assert(this.closeEnough(),ig.Ability.FAIL.DISTANCE)){return this.channel.apply(this,args);}}
else if(this.assert(this.canPayCost(this.costChannel),ig.Ability.FAIL.COST)&&this.assert(!this.getInterrupted(),ig.Ability.FAIL.INTERRUPT)&&this.assert(this.closeEnough(),ig.Ability.FAIL.DISTANCE)){this.extractCost(this.costChannel);return this.channel.apply(this,args);}
return this.deactivate.apply(this,args);},channel:function(){if(!this.channelling&&this.regenBlocking){this.channelling=true;this.blockRegen(this.entity);}
if(this.faceTarget){this.entity.lookAt(this.entityTarget);}},channelStop:function(){this.channelling=false;this.unblockRegen(this.entity);},getUsing:function(){return this.casting||this.channelling;},getActivelyUsing:function(){return this.activated||this.getUsing();},getInterrupted:function(){return this.entity.moving&&!(this.movable||(this.castSettings&&this.castSettings.movable));},blockRegen:function(entity){if(entity.regenEnergy){this._regenBlocked=true;entity.regenEnergy=false;}},unblockRegen:function(entity){if(this._regenBlocked){entity.regenEnergy=true;this._regenBlocked=false;}},setEntity:function(entity){if(this.entity){this.entity.onRemoved.remove(this.cleanupPlain,this);this.entity.onAdded.remove(this.activatePlain,this);this.cleanup();}
this.entity=entity;if(this.entity){this.entity.onRemoved.add(this.cleanupPlain,this);if(this.type&ig.Ability.TYPE.PASSIVE){if(this.entity.added){this.activatePlain();}
else{this.entity.onAdded.addOnce(this.activatePlain,this);}}}},setEntityOptions:function(entity){this.entityOptions=entity;},setEntityTarget:function(entity){if(!entity||(this.entityTarget!==entity&&this.isEntityTargetable(entity))){this.entityTarget=entity;this._entityTargetRetained=false;}},isEntityTargetable:function(entity){return(!entity.fixed||this.canTargetFixed)&&(!this.typeTargetable||(entity.type&this.typeTargetable)===this.typeTargetable&&!(this.entity.group&entity.group))&&(!this.groupTargetable||(entity.group&this.groupTargetable)===this.groupTargetable)&&((this.canTargetOthers&&this.entity!==entity)||(this.canTargetSelf&&this.entity===entity));},setEntityTargetFirst:function(entities){if(entities&&entities.length){for(var i=0,il=entities.length;i<il;i++){this.setEntityTarget(entities[i]);if(this.entityTarget){break;}}}
else{this.setEntityTarget();}},setClosestEntityTarget:function(){if(this.rangeX>0||this.rangeY>0){if(this.entityTarget){this.setEntityTarget();}
var entities=_uti.entitiesInAABB(this.entity.pos.x-this.rangeX,this.entity.pos.y-this.rangeY,this.entity.pos.x+this.entity.size.x+this.rangeX,this.entity.pos.y+this.entity.size.y+this.rangeY,true);this.setEntityTargetFirst(entities);}},dropEntityTarget:function(){if(this.entityTarget){if(this.isEntityTargetDroppable()){this.setEntityTarget();}
else{this._entityTargetRetained=true;}}},isEntityTargetDroppable:function(){return!((this.activated&&this.channelled)||this.retainTarget);},hasTarget:function(){if(this.requiresTarget){if(this.canFindTarget&&!this.entityTarget){this.setClosestEntityTarget();}
if(this.entityTarget){return true;}
return false;}
return true;},hasValidTarget:function(){return!this.requiresTarget||this.entityTarget;},closeEnough:function(){if(this.requiresTarget){if(this.entityTarget){var interactiveTarget=this.entityTarget.type&ig.EntityExtended.TYPE.INTERACTIVE;if((this.rangeX===0&&this.rangeY===0)||(interactiveTarget&&this.entityTarget.rangeInteractableX===0&&this.entityTarget.rangeInteractableY===0)){return true;}
else{var rangeX;var rangeY;if(interactiveTarget){rangeX=Math.max(this.rangeX,this.entityTarget.rangeInteractableX);rangeY=Math.max(this.rangeY,this.entityTarget.rangeInteractableY);}
else{rangeX=this.rangeX;rangeY=this.rangeY;}
var overlap=_uti.AABBIntersect(this.entityTarget.pos.x,this.entityTarget.pos.y,this.entityTarget.pos.x+this.entityTarget.size.x,this.entityTarget.pos.y+this.entityTarget.size.y,this.entity.pos.x-rangeX,this.entity.pos.y-rangeY,this.entity.pos.x+this.entity.size.x+rangeX,this.entity.pos.y+this.entity.size.y+rangeY);if(this.faceTarget){this.entity.lookAt(this.entityTarget);}
return overlap;}}
else{return false;}}
return true;},assert:function(checkResult,failReason){if(!checkResult){this.fail(failReason);}
else{this.failReason='';}
return checkResult;},fail:function(failReason){this.failReason=failReason||ig.Ability.FAIL.UNKNOWN;this._activating=this._deactivating=false;if(this.failReason===ig.Ability.FAIL.INTERRUPT){this.castEnd();}
else{var fs=this.failCastSettings;if(fs){if(fs.effects){for(var i=0,il=fs.effects.length;i<il;i++){var effect=fs.effects[i];effect.settings=effect.settings||{};effect.settings.animInit=this.failReason;}}
if(this.failCastSettings){this.cast(this.failCastSettings);}
else{this.castEnd();}}}
this.onFailed.dispatch(this);this.dropEntityTarget();},canPayCost:function(amount){return!this.entity.hasOwnProperty('energy')||this.entity.invulnerable||this.entity.energy>=amount;},extractCost:function(amount){if(this.entity.drainEnergy){this.entity.drainEnergy(amount,this);}},addUpgrades:function(upgrades){_ut.arrayCautiousAddMulti(this.upgrades,upgrades);},upgrade:function(rank){if(rank===true){rank=this.upgrades.length;}
else if(!_ut.isNumber(rank)){rank=this.rank+1;}
this.changegrade(rank);},downgrade:function(rank){if(rank===true){rank=0;}
else if(!_ut.isNumber(rank)){rank=this.rank-1;}
this.changegrade(rank);},changegrade:function(rank){var rankMax=this.upgrades.length;var direction=rank<this.rank?-1:1;var rankNext=this.rank+direction;if(this.rank!==rank){this.cleanup();}
while(this.rank!==rank&&rankNext<rankMax&&rankNext>=0){this.rank=rankNext;var upgrade=this.upgrades[rankNext];var entity=this.entity;var entityOptions=this.entityOptions||entity;if(typeof upgrade==='function'){upgrade.call(this,entity,entityOptions);}
else{ig.merge(this,upgrade);}
rankNext+=direction;}},clone:function(c){if(c instanceof ig.Ability!==true){c=new ig.Ability();}
c.name=this.name;c.type=this.type;c.enabled=this.enabled;c.costActivate=this.costActivate;c.costDeactivate=this.costDeactivate;c.costChannel=this.costChannel;c.requiresTarget=this.requiresTarget;c.canFindTarget=this.canFindTarget;c.canTargetSelf=this.canTargetSelf;c.canTargetOthers=this.canTargetOthers;c.typeTargetable=this.typeTargetable;c.rangeX=this.rangeX;c.rangeY=this.rangeY;c.retainTarget=this.retainTarget;c.rank=this.rank;c.upgrades=this.upgrades.slice(0);c.regenBlocking=this.regenBlocking;c.setEntityOptions(this.entityOptions);c.setEntity(this.entity);return c;}});ig.Ability.TYPE;_ut.getType(ig.Ability,"PASSIVE");_ut.getType(ig.Ability,"SPAMMABLE");_ut.getType(ig.Ability,"TOGGLEABLE");ig.Ability.FAIL={UNKNOWN:'unknown',COST:"cost",TARGET:"target",DISTANCE:"distance",COOLDOWN:"cooldown",INTERRUPT:"interrupt"}});

// lib/plusplus/abilities/interact.js
ig.baked=true;ig.module('plusplus.abilities.interact').requires('plusplus.core.config','plusplus.abilities.ability','plusplus.helpers.utils').defines(function(){"use strict";var _c=ig.CONFIG;var _ut=ig.utils;ig.AbilityInteract=ig.Ability.extend({rangeX:_c.CHARACTER.SIZE_EFFECTIVE_X,rangeY:_c.CHARACTER.SIZE_EFFECTIVE_Y*0.5,requiresTarget:true,canFindTarget:false,canTargetSelf:false,initTypes:function(){this.parent();_ut.addType(ig.Ability,this,'type',"INTERACT");_ut.addType(ig.EntityExtended,this,'typeTargetable',"INTERACTIVE");},activateComplete:function(){this.entityTarget.toggleActivate(this.entity);this.parent();}});});

// lib/plusplus/abstractities/player.js
ig.baked=true;ig.module('plusplus.abstractities.player').requires('plusplus.core.config','plusplus.abstractities.character','plusplus.abilities.interact','plusplus.helpers.utils','plusplus.helpers.utilsmath').defines(function(){"use strict";var _c=ig.CONFIG;var _ut=ig.utils;ig.Player=ig.Character.extend({name:"player",zIndex:_c.Z_INDEX_PLAYER,performance:ig.EntityExtended.PERFORMANCE.DYNAMIC,collides:ig.EntityExtended.COLLIDES.LITE,persistent:true,damageDelay:1,initTypes:function(){this.parent();_ut.addType(ig.EntityExtended,this,'type',"PLAYER DAMAGEABLE MIMICABLE");_ut.addType(ig.EntityExtended,this,'group',"PLAYER FRIEND","GROUP");},initProperties:function(){this.parent();if(!ig.global.wm){this.abilityInteract=new ig.AbilityInteract(this);this.abilities.addDescendant(this.abilityInteract);}},spawn:function(){this.parent();this.checkAutomaticUtilities();},checkAutomaticUtilities:function(){if(ig.game.playerManager&&!ig.game.playerManager.entity&&ig.game.playerManager.autoManagePlayer){ig.game.playerManager.managePlayer();}
if(ig.game.camera&&!ig.game.camera.entity&&ig.game.camera.autoFollowPlayer){ig.game.camera.followPlayer();}},handleInput:function(){var i,il;var inputPoints;var inputPoint;if(!this.jumping&&ig.input.released('tap')){inputPoints=ig.input.getInputPoints(['tapped'],[true]);for(i=0,il=inputPoints.length;i<il;i++){inputPoint=inputPoints[i];this.abilityInteract.setEntityTargetFirst(inputPoint.targets);if(this.abilityInteract.entityTarget&&(!(this.abilityInteract.entityTarget.type&ig.EntityExtended.TYPE.UI)||!this.abilityInteract.entityTarget.fixed)){this.abilityInteract.activate();}}}}});});

// lib/plusplus/ui/ui-text-bubble.js
ig.baked=true;ig.module('plusplus.ui.ui-text-bubble').requires('plusplus.core.config','plusplus.ui.ui-overlay','plusplus.helpers.utilsvector2','plusplus.helpers.utilsdraw','plusplus.helpers.utilsintersection').defines(function(){"use strict";var _c=ig.CONFIG;var _utv2=ig.utilsvector2;var _utd=ig.utilsdraw;ig.UITextBubble=ig.global.UITextBubble=ig.UIOverlay.extend({layerName:'ui',size:{x:_c.TEXT_BUBBLE.SIZE_X,y:_c.TEXT_BUBBLE.SIZE_Y},sizeAsPct:_c.TEXT_BUBBLE.SIZE_AS_PCT,sizePct:{x:_c.TEXT_BUBBLE.SIZE_PCT_X,y:_c.TEXT_BUBBLE.SIZE_PCT_Y},cornerRadius:_c.TEXT_BUBBLE.CORNER_RADIUS,cornerRadiusAsPct:_c.TEXT_BUBBLE.CORNER_RADIUS_AS_PCT,r:_c.TEXT_BUBBLE.R,g:_c.TEXT_BUBBLE.G,b:_c.TEXT_BUBBLE.B,alpha:_c.TEXT_BUBBLE.ALPHA,pixelPerfect:_c.TEXT_BUBBLE.PIXEL_PERFECT,shrinkToText:_c.TEXT_BUBBLE.SHRINK_TO_TEXT,triangleLength:_c.TEXT_BUBBLE.TRIANGLE_LENGTH,triangleWidth:_c.TEXT_BUBBLE.TRIANGLE_WIDTH,padding:{x:_c.TEXT_BUBBLE.PADDING_X,y:_c.TEXT_BUBBLE.PADDING_Y},resetExtras:function(){if(this.textSettings){this.textSettings.font=this.textSettings.font||ig.Font.FONTS.CHAT;this.textSettings.margin={x:0,y:this.padding.y-this.triangleLength};this.textSettings.marginAsPct=false;}
this.textMoveToSettings=ig.merge(this.textMoveToSettings,{offset:{x:0,y:this.padding.y-this.triangleLength}});if(!this.sizeAsPct){this.resetState.size=this.resetState.size||{x:0,y:0};_utv2.copy(this.resetState.size,this.size);}
this.parent();},recordResetState:function(){this.parent();this.resetState.size=this.resetState.size||{x:0,y:0};_utv2.copy(this.resetState.size,this.size);this.resetState.sizePct=this.resetState.sizePct||{x:0,y:0};_utv2.copy(this.resetState.sizePct,this.sizePct);},refresh:function(force){if(!this.sizeAsPct){_utv2.copy(this.size,this.resetState.size);}
if(this.message&&this.message.added&&this.added){this.message.maxWidth=this.message.maxHeight=0;this.message.refresh(force);}
this.parent(force);if(this.message&&this.message.linkedTo!==this){this.message.refresh(force);}},resize:function(force){var force=this.parent(force);if(this.message){var scaleMod=this.message.scale/this.scale;var sizeX=this.getSizeDrawX()-this.padding.x*2;var sizeY=this.getSizeDrawY()-this.padding.y*2-this.triangleLength;var messageSizeX=this.message.getSizeDrawX()*scaleMod;if(messageSizeX>sizeX){this.message.maxWidth=sizeX*(1/scaleMod);this.message.resize(true);messageSizeX=this.message.getSizeDrawX()*scaleMod;}
var messageSizeY=this.message.getSizeDrawY()*scaleMod;if(messageSizeY>sizeY){this.message.maxHeight=sizeY*(1/scaleMod);this.message.resize(true);messageSizeY=this.message.getSizeDrawY()*scaleMod;}
if(this.shrinkToText){if(messageSizeX<sizeX){this.size.x=messageSizeX+this.padding.x*2;force=this.needsRebuild=true;}
if(messageSizeY<sizeY){this.size.y=messageSizeY+this.padding.y*2+this.triangleLength;force=this.needsRebuild=true;}}}
return force;},refill:function(){if(this.fill&&this.triangleLength>0){var triangleLength=this.triangleLength;var triangleWidth=this.triangleWidth;var width=this.sizeDraw.x;var height=this.sizeDraw.y-triangleLength;this.parent(width,height);if(!this.pixelPerfect){width*=this.scale;height*=this.scale;triangleLength*=this.scale;triangleWidth*=this.scale;}
var vertices=[{x:width*0.5-triangleWidth*0.5,y:height},{x:width*0.5+triangleWidth*0.5,y:height},{x:width*0.5,y:height+triangleLength}];var context=this.fill.dataContext;if(this.pixelPerfect){_utd.pixelFillPolygon(context,0,0,this.fill.width,this.fill.height,vertices,this.r,this.g,this.b,this.alpha);}
else{context.fillStyle=this.getFillStyle();_utd.fillPolygon(context,vertices);}}
else{this.parent();}}});});

// lib/plusplus/entities/conversation.js
ig.baked=true;ig.module('plusplus.entities.conversation').requires('plusplus.core.timer','plusplus.ui.ui-text','plusplus.ui.ui-text-bubble','plusplus.entities.trigger','plusplus.helpers.utils').defines(function(){"use strict";var _ut=ig.utils;ig.EntityConversation=ig.global.EntityConversation=ig.EntityTrigger.extend({_wmBoxColor:'rgba(200, 200, 200, 0.7)',steps:{},stepsSorted:[],stepsUnused:[],stepsUsed:[],step:null,message:null,messageEntity:ig.UIText,messageContainer:null,messageContainerEntity:ig.UITextBubble,messageSettings:{},messageFollowsSpeaker:true,messageMoveToSettings:{matchPerformance:true,offsetPct:{x:0,y:-1.3}},speaker:null,speakerLast:null,participate:{},participating:[],looking:true,pausing:false,locking:false,lockingPlayer:false,interrupting:true,animNameTalk:'talk',animNameListen:'listen',cameraFollows:true,cameraCentered:false,autoAdvance:true,advanceTimer:null,durationPerLetter:0.1,durationPerStepMin:1,action:'tap',triggerAfterDelay:true,autoComplete:false,_order:0,_step:null,_speakersModified:[],_cameraWasFollowing:null,initProperties:function(){this.parent();this.advanceTimer=new ig.Timer();},resetExtras:function(){this.stepsSorted.length=0;for(var name in this.steps){var step=this.steps[name];var order=parseInt(step.order);if(!_ut.isNumber(order)){order=step.order=parseInt(name);}
if(!_ut.isNumber(order)){order=step.order=++this._order;}
else if(order>this._order){this._order=order;}
this._addStep(step);}
this.parent();},addStep:function(text,speakerName,order,settings){if(text&&text.length>0){if(!_ut.isNumber(order)){order=++this._order;}
else if(order>this._order){this._order=order;}
var step=this.steps[order]={name:speakerName,text:text,order:order,settings:settings};this._addStep(step);}},_addStep:function(step){this.stepsSorted.push(step);this.stepsSorted.sort(function(a,b){return a.order-b.order;});if(this.activated){this._addUnusedStep(step);this.stepsUnused.sort(function(a,b){return a.order-b.order;});}},setup:function(){var i,il;if(this.pausing&&!this.action){this.pausing=false;this.autoAdvance=true;}
if(this.interrupting){var interrupted={};for(i=0,il=this.stepsSorted.length;i<il;i++){var step=this.stepsSorted[i];var speaker=ig.game.namedEntities[step.name];var conversation=speaker&&speaker.conversation;if(conversation&&conversation!==this&&!interrupted[conversation.id]&&conversation instanceof ig.EntityConversation&&conversation.activated){interrupted[conversation.id]=true;conversation.deactivate();}}}
if(this.pausing){ig.game.pause(true);if(ig.game.camera){ig.game.camera.unpause();}
this.unpause();}
if(this.lockingPlayer){var player=ig.game.getPlayer();player&&player.removeControl();}
this.stepsUnused.length=this.stepsUsed.length=this.participating.length=this._speakersModified.length=0;for(i=0,il=this.stepsSorted.length;i<il;i++){this._addUnusedStep(this.stepsSorted[i]);}
this._speakersModified.length=0;for(var name in this.participate){var participant=ig.game.namedEntities[this.participate[name]];if(participant){_ut.arrayCautiousAdd(this.participating,participant);}}
this.nextStep();this.parent();},teardown:function(){this.hideStep();this.speakerLast=null;this.stepsUnused.length=this.stepsUsed.length=this.participating.length=this._speakersModified.length=0;for(var name in this.steps){var step=this.steps[name];var speaker=ig.game.namedEntities[step.name];if(speaker&&_ut.indexOfValue(this._speakersModified,step.name)===-1){this._speakersModified.push(step.name);speaker.conversation=undefined;if(step.locking||this.locking){speaker.addControl();}
speaker.animRelease(speaker.getDirectionalAnimName(step.animNameTalk||this.animNameTalk));speaker.animRelease(speaker.getDirectionalAnimName(step.animNameListen||this.animNameListen));}}
this._speakersModified.length=0;if(ig.game.camera){ig.game.camera.onTransitioned.remove(this.complete,this);this._cameraWasFollowing=null;}
if(this.lockingPlayer){var player=ig.game.getPlayer();player&&player.addControl();}
if(this.pausing){ig.game.unpause(true);}
this.parent();},_addUnusedStep:function(step){this.stepsUnused.push(step);var name=step.name;var speaker=ig.game.namedEntities[name];if(speaker&&_ut.indexOfValue(this._speakersModified,step.name)===-1){this._speakersModified.push(name);this.participating.push(speaker);speaker.conversation=this;if(this.pausing){speaker.unpause();}
if(step.locking||this.locking){speaker.removeControl();var animName;if(typeof step.animNameListen!=='undefined'){animName=step.animNameListen;}
else{animName=this.animNameListen;}
if(animName){speaker.animOverride(speaker.getDirectionalAnimName(animName),{loop:true});}}}},nextStep:function(){this.hideStep();if(this.stepsUnused.length>0){this._step=this.stepsUnused.shift();this.stepsUsed.push(this._step);if(this._step.name){this.speaker=ig.game.namedEntities[this._step.name];if(this.speaker){var unmoving=this._step.locking||this.locking;if(unmoving){var animName;if(typeof this._step.animNameTalk!=='undefined'){animName=this._step.animNameTalk;}
else{animName=this.animNameTalk;}
if(animName){this.speaker.animOverride(this.speaker.getDirectionalAnimName(animName),{loop:true});}}
if(this.looking){for(var i=0,il=this.participating.length;i<il;i++){var participant=this.participating[i];if(participant!==this.speaker){participant.lookAt(this.speaker);}}}
if((this.pausing||this.lockingPlayer||unmoving)&&ig.game.camera&&this.cameraFollows&&this.speaker!==this.speakerLast){if(!this._cameraWasFollowing){this._cameraWasFollowing=ig.game.camera.entity;}
this._cameraFollowing=this.speaker;ig.game.camera.onTransitioned.addOnce(this.showStep,this);ig.game.camera.follow(this.speaker,false,this.cameraCentered);}
else{this.showStep();}}}
else{this.showStep();}}
else{if(ig.game.camera&&this.cameraFollows&&this._cameraWasFollowing){ig.game.camera.onTransitioned.addOnce(this.complete,this);ig.game.camera.follow(this._cameraWasFollowing,false,true);this._cameraWasFollowing=null;}
else{this.complete();}}},showStep:function(){if(this._step&&this._step.text){var messageSettings=this.messageSettings;if(this.speaker&&this.messageFollowsSpeaker){messageSettings.fixed=messageSettings.fixed||false;}
var messageContainer;if(this.messageContainerEntity){messageSettings.textSettings={text:this._step.text};messageContainer=this.messageContainer=ig.game.spawnEntity(this.messageContainer||this.messageContainerEntity,0,0,ig.merge(messageSettings,this._step.settings));}
else{messageSettings.text=this._step.text;messageContainer=this.message=ig.game.spawnEntity(this.message||this.messageEntity,0,0,ig.merge(messageSettings,this._step.settings));}
if(messageContainer.added){this.activateStep();}
else{messageContainer.onAdded.addOnce(this.activateStep,this);}}
else{this.activateStep();}},activateStep:function(){if(this._step){this.step=this._step;this._step=undefined;var messageContainer;var message;if(this.messageContainer){messageContainer=this.messageContainer;message=this.message=messageContainer.message;}
else{messageContainer=message=this.message;}
if(message){if(message.textOverflow){var overflow=message.textOverflow;message.text=message.textDisplay||message.text;message.textOverflow="";var overflowStep=ig.merge({},this.step);this.step.text=message.text;overflowStep.text=overflow;this._addStep(overflowStep);}
if(this.speaker&&this.messageFollowsSpeaker){messageContainer.unpause();messageContainer.moveTo(this.speaker,this.messageMoveToSettings);if((this.pausing||this.locking||this.lockingPlayer||this.step.locking)&&ig.game.camera&&this.cameraFollows&&!messageContainer.fixed){if(!this._cameraWasFollowing){this._cameraWasFollowing=ig.game.camera.entity;}
this._cameraFollowing=messageContainer;ig.game.camera.follow(messageContainer,false,this.cameraCentered);}}
if(this.autoAdvance){this.advanceTimer.set(Math.max(this.step.text.length*this.durationPerLetter,this.durationPerStepMin));}}
else{this.advanceTimer.set(this.durationPerStepMin);}}},hideStep:function(){if(this.messageContainer){this.messageContainer.onAdded.remove(this.activateStep,this);if(!this.messageContainer._killed){ig.game.removeEntity(this.messageContainer);}
this.messageContainer=null;}
if(this.message){this.message.onAdded.remove(this.activateStep,this);if(!this.message._killed){ig.game.removeEntity(this.message);}
this.message=null;}
if(this.speaker){if(this.stepsUnused.length>0){if(this.locking||(this.step&&this.step.locking)){var animName;if(this.step&&typeof this.step.animNameListen!=='undefined'){animName=this.step.animNameListen;}
else{animName=this.animNameListen;}
if(animName){this.speaker.animOverride(this.speaker.getDirectionalAnimName(animName),{loop:true});}}
this.speakerLast=this.speaker;}
else{this.speaker.animRelease(this.speaker.getDirectionalAnimName(this.step.animNameTalk||this.animNameTalk));this.speaker.animRelease(this.speaker.getDirectionalAnimName(this.step.animNameListen||this.animNameListen));}
this.speaker=null;}
if(ig.game.camera&&this.cameraFollows){ig.game.camera.onTransitioned.remove(this.showStep,this);if(ig.game.camera&&this._cameraFollowing&&ig.game.camera.entity===this._cameraFollowing){ig.game.camera.unfollow();}
this._cameraFollowing=null;}
this.step=this._step=null;},pause:function(){this.parent();this.advanceTimer.pause();},unpause:function(){this.parent();this.advanceTimer.unpause();},update:function(){if(this.step){if(this.speaker&&this.speaker._killed){this.nextStep();}
else if((this.autoAdvance||(this.step&&!this.step.text))&&this.advanceTimer.delta()>=0){this.nextStep();}
else if(ig.input.pressed(this.action)||ig.input.released(this.action)){this.nextStep();}}
this.parent();}});});

// lib/game/entities/player.js
ig.baked=true;ig.module('game.entities.player').requires('plusplus.abstractities.player','plusplus.core.config','plusplus.entities.conversation').defines(function(){var _c=ig.CONFIG;ig.EntityPlayer=ig.global.EntityPlayer=ig.Player.extend({name:'player',collides:ig.Entity.COLLIDES.ACTIVE,size:{x:8,y:8},offset:{x:3,y:20},temporaryInvulnerabilityAlpha:1,animSheet:new ig.AnimationSheet(_c.PATH_TO_MEDIA+'player.png',14,30),animSettings:{idleX:{frameTime:1,sequence:[0]},idleDown:{frameTime:1,sequence:[6]},idleUp:{frameTime:1,sequence:[12]},moveX:{frameTime:0.10,sequence:[0,1,2,3,4,5]},moveDown:{frameTime:0.10,sequence:[6,7,8,9,10,11]},moveUp:{frameTime:0.10,sequence:[12,13,14,15,16,17]}},speak:function(){if(ig.game.getEntitiesByClass(ig.EntityConversation)[0]){ig.game.getEntitiesByClass(ig.EntityConversation)[0].kill();}
var textbubble=ig.game.spawnEntity(ig.EntityConversation,0,0);textbubble.durationPerLetter=0.05;textbubble.messageMoveToSettings={matchPerformance:true,offset:{x:0,y:-30},align:{x:0.5,y:1}};for(var i=0;i<arguments.length;i++)
textbubble.addStep(arguments[i],'player',i);textbubble.activate();}});});

// lib/game/entities/cursor.js
ig.baked=true;ig.module('game.entities.cursor').requires('plusplus.core.entity','plusplus.core.config').defines(function(){var _c=ig.CONFIG;ig.EntityCursor=ig.global.EntityCursor=ig.EntityExtended.extend({name:'cursor',performance:'moveable',size:{x:14,y:14},layerName:'cursor',cursorOffset:{x:-6,y:-6},animSheet:new ig.AnimationSheet(_c.PATH_TO_MEDIA+'ui/cursor.png',14,14),animInit:"blink",animSettings:{blink:{frameTime:0.20,sequence:[0,1,2,0]}},repositionCursor:function(){this.pos={x:ig.input.mouse.x+ig.game.screen.x+this.cursorOffset.x,y:ig.input.mouse.y+ig.game.screen.y+this.cursorOffset.y}},update:function(){this.parent();this.repositionCursor();}});});

// lib/game/entities/select-language.js
ig.baked=true;ig.module('game.entities.select-language').requires('plusplus.core.entity','plusplus.core.config').defines(function(){var _c=ig.CONFIG;ig.EntitySelectLanguage=ig.global.EntitySelectLanguage=ig.EntityExtended.extend({name:'langSelector',size:{x:125,y:11},animSheet:new ig.AnimationSheet(_c.PATH_TO_MEDIA+'select-language.gif',125,11),animInit:'blink',animSettings:{blink:{frameTime:0.9,sequence:[0,1]}}});});

// lib/game/entities/lang-catalan.js
ig.baked=true;ig.module('game.entities.lang-catalan').requires('plusplus.core.entity','plusplus.core.config').defines(function(){var _c=ig.CONFIG;ig.EntityLangCatalan=ig.global.EntityLangCatalan=ig.EntityExtended.extend({size:{x:57,y:9},animSheet:new ig.AnimationSheet(_c.PATH_TO_MEDIA+'lang-catalan.gif',57,9),animInit:'blink',animSettings:{blink:{frameTime:0.9,sequence:[0]}}});});

// lib/game/entities/lang-english.js
ig.baked=true;ig.module('game.entities.lang-english').requires('plusplus.core.entity','plusplus.core.config').defines(function(){var _c=ig.CONFIG;ig.EntityLangEnglish=ig.global.EntityLangEnglish=ig.EntityExtended.extend({size:{x:57,y:9},animSheet:new ig.AnimationSheet(_c.PATH_TO_MEDIA+'lang-english.gif',57,9),animInit:'blink',animSettings:{blink:{frameTime:0.9,sequence:[0]}}});});

// lib/game/entities/lang-spanish.js
ig.baked=true;ig.module('game.entities.lang-spanish').requires('plusplus.core.entity','plusplus.core.config').defines(function(){var _c=ig.CONFIG;ig.EntityLangSpanish=ig.global.EntityLangSpanish=ig.EntityExtended.extend({size:{x:57,y:9},animSheet:new ig.AnimationSheet(_c.PATH_TO_MEDIA+'lang-spanish.gif',57,9),animInit:'blink',animSettings:{blink:{frameTime:0.9,sequence:[0]}}});});

// lib/game/levels/titlescreen.js
ig.baked=true;ig.module('game.levels.titlescreen').requires('impact.image','game.entities.cursor','game.entities.select-language','game.entities.lang-catalan','game.entities.lang-english','game.entities.lang-spanish').defines(function(){LevelTitlescreen={"entities":[{"type":"EntityCursor","x":52,"y":120},{"type":"EntitySelectLanguage","x":104,"y":104},{"type":"EntityLangCatalan","x":136,"y":120,"settings":{"name":"langCatalan"}},{"type":"EntityLangEnglish","x":136,"y":132,"settings":{"name":"langEnglish"}},{"type":"EntityLangSpanish","x":136,"y":144,"settings":{"name":"langSpanish"}}],"layer":[{"name":"background","width":40,"height":25,"linkWithCollision":false,"visible":1,"tilesetName":"media/title-screen.gif ","repeat":false,"preRender":true,"distance":"1","tilesize":8,"foreground":false,"data":[[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40],[41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80],[81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120],[121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160],[161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200],[201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240],[241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280],[281,282,283,284,285,286,287,288,289,290,291,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,307,308,309,310,311,312,313,314,315,316,317,318,319,320],[321,322,323,324,325,326,327,328,329,330,331,332,333,334,335,336,337,338,339,340,341,342,343,344,345,346,347,348,349,350,351,352,353,354,355,356,357,358,359,360],[361,362,363,364,365,366,367,368,369,370,371,372,373,374,375,376,377,378,379,380,381,382,383,384,385,386,387,388,389,390,391,392,393,394,395,396,397,398,399,400],[401,402,403,404,405,406,407,408,409,410,411,412,413,414,415,416,417,418,419,420,421,422,423,424,425,426,427,428,429,430,431,432,433,434,435,436,437,438,439,440],[441,442,443,444,445,446,447,448,449,450,451,452,453,454,455,456,457,458,459,460,461,462,463,464,465,466,467,468,469,470,471,472,473,474,475,476,477,478,479,480],[481,482,483,484,485,486,487,488,489,490,491,492,493,494,495,496,497,498,499,500,501,502,503,504,505,506,507,508,509,510,511,512,513,514,515,516,517,518,519,520],[521,522,523,524,525,526,527,528,529,530,531,532,533,534,535,536,537,538,539,540,541,542,543,544,545,546,547,548,549,550,551,552,553,554,555,556,557,558,559,560],[561,562,563,564,565,566,567,568,569,570,571,572,573,574,575,576,577,578,579,580,581,582,583,584,585,586,587,588,589,590,591,592,593,594,595,596,597,598,599,600],[601,602,603,604,605,606,607,608,609,610,611,612,613,614,615,616,617,618,619,620,621,622,623,624,625,626,627,628,629,630,631,632,633,634,635,636,637,638,639,640],[641,642,643,644,645,646,647,648,649,650,651,652,653,654,655,656,657,658,659,660,661,662,663,664,665,666,667,668,669,670,671,672,673,674,675,676,677,678,679,680],[681,682,683,684,685,686,687,688,689,690,691,692,693,694,695,696,697,698,699,700,701,702,703,704,705,706,707,708,709,710,711,712,713,714,715,716,717,718,719,720],[721,722,723,724,725,726,727,728,729,730,731,732,733,734,735,736,737,738,739,740,741,742,743,744,745,746,747,748,749,750,751,752,753,754,755,756,757,758,759,760],[761,762,763,764,765,766,767,768,769,770,771,772,773,774,775,776,777,778,779,780,781,782,783,784,785,786,787,788,789,790,791,792,793,794,795,796,797,798,799,800],[801,802,803,804,805,806,807,808,809,810,811,812,813,814,815,816,817,818,819,820,821,822,823,824,825,826,827,828,829,830,831,832,833,834,835,836,837,838,839,840],[841,842,843,844,845,846,847,848,849,850,851,852,853,854,855,856,857,858,859,860,861,862,863,864,865,866,867,868,869,870,871,872,873,874,875,876,877,878,879,880],[881,882,883,884,885,886,887,888,889,890,891,892,893,894,895,896,897,898,899,900,901,902,903,904,905,906,907,908,909,910,911,912,913,914,915,916,917,918,919,920],[921,922,923,924,925,926,927,928,929,930,931,932,933,934,935,936,937,938,939,940,941,942,943,944,945,946,947,948,949,950,951,952,953,954,955,956,957,958,959,960],[961,962,963,964,965,966,967,968,969,970,971,972,973,974,975,976,977,978,979,980,981,982,983,984,985,986,987,988,989,990,991,992,993,994,995,996,997,998,999,1000]]}]};LevelTitlescreenResources=[new ig.Image('media/title-screen.gif ')];});

// lib/game/levels/storyscreen.js
ig.baked=true;ig.module('game.levels.storyscreen').requires('impact.image','game.entities.cursor').defines(function(){LevelStoryscreen={"entities":[{"type":"EntityCursor","x":228,"y":64}],"layer":[{"name":"background","width":40,"height":25,"linkWithCollision":false,"visible":1,"tilesetName":"media/background-junkroom.gif","repeat":false,"preRender":true,"distance":"1","tilesize":8,"foreground":false,"data":[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0,1,0,0,0,1,2,3,4,5,6,7,8,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,41,0,41,0,41,0,0,0,0,0,1,2,3,4,5,6,7,8,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,81,0,81,0,81,0,0,0,0,0,1,2,3,4,5,6,7,8,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,121,0,121,0,121,0,0,0,0,0,0,1,2,3,4,5,6,7,8,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,7,8,8,8,8,8,0,0,1,2,3,4,5,6,7,8,0,0,0,0],[0,0,0,0,0,0,1,2,3,4,5,6,7,8,8,8,8,7,8,48,47,48,48,48,48,48,8,8,0,1,2,3,4,5,6,7,8,0,0,0],[0,0,0,0,0,0,1,2,3,4,5,6,7,8,48,48,48,47,48,88,87,88,88,88,88,88,48,48,6,7,8,8,8,8,8,8,8,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,128,127,128,128,128,128,128,88,88,46,47,48,48,48,48,48,48,48,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,41,42,43,44,45,46,47,48,168,167,168,168,168,168,168,128,128,86,87,88,88,88,88,88,88,88,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,81,82,83,84,85,86,87,88,161,162,163,164,165,166,167,168,168,126,127,128,128,128,128,128,128,128,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,121,122,123,124,125,126,127,128,579,580,581,0,161,162,163,164,165,166,167,168,168,168,168,168,168,168,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,161,162,163,164,165,166,167,168,619,620,621,622,623,624,625,626,627,628,629,630,631,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,651,652,653,654,655,656,657,658,659,660,661,662,663,664,665,666,667,668,669,670,671,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,691,692,693,694,695,696,697,698,699,700,701,702,703,704,705,706,707,708,709,710,711,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]}]};LevelStoryscreenResources=[new ig.Image('media/background-junkroom.gif')];});

// lib/game/levels/ending.js
ig.baked=true;ig.module('game.levels.ending').requires('impact.image').defines(function(){LevelEnding={"entities":[],"layer":[{"name":"background","width":40,"height":25,"linkWithCollision":false,"visible":1,"tilesetName":"media/ending.gif","repeat":false,"preRender":true,"distance":"1","tilesize":8,"foreground":false,"data":[[1,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,28,29,30,31,32,33,34,35,36,37,38,39,40],[0,42,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[81,82,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[121,122,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[161,162,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[201,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]}]};LevelEndingResources=[new ig.Image('media/ending.gif')];});

// lib/game/components/i18n/i18n-ca.js
ig.baked=true;ig.module('game.components.i18n.i18n-ca').requires('plusplus.core.config').defines(function(){"use strict";var _c=ig.CONFIG;ig.i18nCa=ig.Class.extend({messages:{'introText':'Any 2014.\n La gran cita s\'apropa, tots els preparatius estan en marxa. Els convidats van arribant, per en falta un per confirmar...'+'Encarnes a Ajar Nordic I, que, perdut en un moment d\'amnsia, ha oblidat per complet tots els detalls de la boda d\'en Joan i en Ricard. '+'La teva missi s clara, has de buscar i apuntar totes les dades necessries per tal d\'arribar a la boda a temps.'+'\nSers capa\xe7 de trobar totes les peces del trencaclosques?','lookBlackboard1':'s el problema que cal resoldre per la boda.','lookBlackboard2':'Si sabem que hi ha ms de 100 convidats, llavors o 15 es coneixen tots amb tots,','lookBlackboard3':'o 3 no es coneixen entre s.','giveBlackboard1':'No s a qui ms assignar el problema... a la Marta?','useBlackboard1':'L\'Amanda hi ha estat treballant durament! Segur que ja sap la soluci!','pickupBlackboard1':'A l\'intentar agafar-lo he vist que a un costat hi ha les lletres "/sec".','pushBlackboard1':'Coses de matemtics...','pullBlackboard1':'Coses de matemtics...','openBlackboard1':'Fa temps que no obro la pissarra al pblic.','closeBlackboard1':'Coses de matemtics...','talkBlackboard1':'Pissarra, pissarreta qui s el professor ms motivat?','talkBlackboard2':'Mmmm... Espera que acabo de sentir alguna cosa...','talkBlackboard3':'Crec que ha dit que la Laura Morera i la Tresa Marimon amb el seu Explorium!','defaulBlackboard1':'Coses de matemtics...','lookInventoryMap1':'Al mapa diu que es casen a Sant Cugat, al Mercantic','lookInventoryMap2':'Avinguda de Rius i Taulet, 120, 08173 Sant Cugat del Valls, Barcelona','giveInventoryMap1':'No tinc a qui donar-li.','useInventoryMap1':'Quan vagi cap all l\'utilitzar.','pickupInventoryMap1':'Ja tinc el mapa.','pushInventoryMap1':'Movent-lo una mica encara llegeixo les lletres de darrera: "oom".','pullInventoryMap1':'No s qu he de fer.','openInventoryMap1':'Abans era una bola de paper, ara s un mapa.','closeInventoryMap1':'Prefereixo el mapa que la bola de paper.','talkInventoryMap1':'No crec que parlar amb objectes inanimats sigui la soluci...','talkInventoryMap2':'Merda! Ja estic parlant sol un altre cop!','defaultInventoryMap1':'No s qu he de fer.','lookInventoryPaperball1':'Sembla que aquest paper rebregat s important.','giveInventoryPaperball1':'T informaci massa important com per regalar-lo.','useInventoryPaperball1':'Aix en forma de bola no el puc utilitzar.','pickupInventoryPaperball1':'Ja la tinc a l\'inventari','pushInventoryPaperball1':'No sembla funcionar!','pullInventoryPaperball1':'No sembla funcionar!','openInventoryPaperball1':'Mira, ves per on hi ha un mapa!','closeInventoryPaperball1':'Ja est tancada.','talkInventoryPaperball1':'Hola? Hola? No contesta!','defaultInventoryPaperball1':'Ein','lookPapers1':'Una pila de papers. Entre d\'altres hi ha el gui de la meva pellcula "A sporadic Injurer".','lookPapers2':'Em recorda a la pila de papers que el Joan t a la taula. Ell diu que s hereditari.','lookPapers3':'Un paper diu que l\'ordre s guix, gel, esfera.','givePapers1':'Hi ha tamb un Internal Assessment que ha de corregir el Taixs. L\'agafar per donar-li a la boda!','usePapers1':'No hi ha res gaire important.','pickupPapers1':'S que tenia el mapa per aqu, per ara no el veig.','pickupPapers2':'El mapa estava a la pila de papers per havia caigut.','pushPapers1':'A l\'apartar els papers he vist un plnol per renovar el pis. Per sort el Jordi i la Nria m\'ajudaran a entendre-ho!','pullPapers1':'No siguis brut!','openPapers1':'Entre tota la muntanya tamb he vist un assaig sobre la realitat democrtica amb dibuixos de Magritte firmat per M.R.','closePapers1':'No em posar a fer boles de paper...','talkPapers1':'No s cap discurs.','defaultPapers1':'Ein.','lookWindow1':'Ui crec que aquell s el Dani que est corrent que arriba tard a la boda.','useWindow1':'El Pau no em deixaria utilitzar una altra cosa que no sigui Linux.','openWindow1':'Fa fred i no la vull obrir. A ms em sento observat per l\'amiga del Jacobo...','closeWindow1':'Ja est tancada. No vull baixar la persiana no passi com a la casa de Collblanc del Micky que desprs no la podien pujar!','talkWindow1':'HELLO WORLD!','talkWindow2':'HELLO CLOUD!','talkWindow3':'HELLO PUCK!','defaultWindow1':'No, simplement no','lookPaperball1':'Hi ha alguna cosa important escrita a la part de dins. A fora hi ha escrit "oom", no s qu ser.','givePaperball1':'s la meva bola de paper.','usePaperball1':'Si tingus una cistella, podria utilitzar-la.','pickupPaperball1':'Molt b! Ara ja tinc una bola de paper.','pushPaperball1':'No, a casa no es juga a pilota!','pullPaperball1':'No, a casa no es juga a pilota!','openPaperball1':'Fins que no l\'agafi no la podr obrir','closePaperball1':'Ja est tancada!','talkPaperball1':'Hola bola de paper! Diga\'m tots els teus secrets...','defaultPaperball1':'Ein','lookBed1':'s el meu llit. Aquests llenols me\'ls va regalar la Julia i el Doron!','giveBed1':'Tot i que molts amics s\'han quedat a dormir, com ara el Marc, el llit s meu!','useBed1':'Ara no toca dormir.','pickupBed1':'No, aix no funciona','pushBed1':'No, aix no funciona','pullBed1':'No, aix no funciona','openBed1':'El llit est fet i no el vull desfer.','closeBed1':'El llit ja est fet!','talkBed1':'El llit no pot parlar... Segurament s millor aix.','defaultBed1':'No, aix no funciona','lookBooks1':'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sembla un ritual per convocar a Nyarlathotep ','giveBooks1':'Estan b a la llibreria.','useBooks1':'Mlkshk tousled authentic lomo DIY, flexitarian tattooed asymmetrical Wes Anderson normcore gentrify drinking vinegar PBR&B Pitchfork. Tote bag VHS forage banh mi pour-over, viral hoodie vinyl you probably haven\'t heard of them typewriter Shoreditch jean shorts four loko mumblecore.','pickupBooks1':'Sn llibres de Hipster. Ah i aqu hi ha un lbum de Menorca on apareixo amb la Trish.','pushBooks1':'No tinc portes secretes a casa. I per codis secrets ho hauria de consultar amb el Chris.','pullBooks1':'No funciona...','openBooks1':'Ara no em posar a llegir. Tot i que veig una cpia de Brave New World i la Cals me l\'ha recomanat.','openBooks2':'L\'agafar per si la boda s molt aburrida.','closeBooks1':'Estan tancats.','talkBooks1':'No tinc res a dir-los-hi.','defaultBooks1':'Ein','lookCabinet1':'Hi ha unes pedres de Go i un taulell a dins, per no hi arribo.','giveCabinet1':'No hi arribo.','useCabinet1':'M\'encantaria fer una partida de Baduk amb el Csar, per millor que m\'afanyi.','pickupCabinet1':'El taulell plegable per jugar amb l\'Oscar est a dalt, per no hi arribo.','pushCabinet1':'No hi arribo. Potser hauria d\'avisar al Pablo.','pullCabinet1':'No hi arribo.','openCabinet1':'Ja em va dir la Zurie que era mala idea posar-ho tan adalt.','closeCabinet1':'No hi arribo.','talkCabinet1':'Ara recordo que he de quedar amb la Laura per seguir practicant Go!','defaultCabinet1':'No hi arribo.','lookCactus1':'s un cactus. Es diu Chuck.','giveCactus1':'No el vull donar.','useCactus1':'Mmmm no funciona.','pickupCactus1':'Si me\'l poso a la butxaca em punxar!','pushCactus1':'No el vull trencar!','pullCactus1':'Em far mal.','openCactus1':'No tinc l\'equip mdic necessari.','closeCactus1':'No se si entenc qu s el que vols fer.','talkCactus1':'Hola Chuck! La Magda m\'ha regalat una regadora nova, no s perqu en t tantes a casa!','defaultCactus1':'s un cactus. No volen que el molestin.','lookClock1':'Mmm... El dia era el 29 de novembre... i...','lookClock2':'Ja recordo l\'hora!','lookClock3':'La cerimnia comenar a la 13:00! Ms val que m\'afanyi!','useClock1':'Ja est en marxa.','pickupClock1':'M\'agrada on s. A ms vull arribar abans que l\'Eduard, i aix s difcil ja que s molt responsable.','talkClock1':'Rellotjet rellotjet mgic..., ai no.','defaultClock1':'No, aix no funciona','lookCloset1':'Plats, gots, etc.','giveCloset1':'Lo what?','useCloset1':'Fa tems que vam sortir dels armaris.','pickupCloset1':'A la part de sota tinc totes les bosses de reciclatge segons el tipus de plstic com em va ensenyar l\'Edu, per ara no ho puc tirar.','pushCloset1':'Ein?','pullCloset1':'Ein?','openCloset1':'No hi ha res interessant dins. Tot i que hi ha unes figuretes que em va regalar la Tina! Aquella si que va ser una gran boda!','closeCloset1':'Estan tancats.','talkCloset1':'Objecte inanimat incapa de conversar.','defaultCloset1':'s un armari! No ho puc fer!','lookClothes1':'Un vestit de princesa Leia, un de Han Solo...','lookClothes2':'Ah! I aqu tinc la meva camisa i corbata','lookClothes3':'Em van dir que podia venir de Cosplay o be normal, per no de carrer.','giveClothes1':'No! Just les acabo de trobar!','useClothes1':'Em vestir quan ho tingui tot i surti per la porta. Agafar un llacet extra pel Darko.','pickupClothes1':'Esperar a l\'ltim moment','pushClothes1':'Estic d\'acord que em falta espai per posar totes les samarretes que m\'ha regalat la Gemma. s que es va buidar l\'armari.','pullClothes1':'Ein?','openClothes1':'Aqu he vist una pea nica de Brunihilda Beast, de la collecci de la Plage de St Tropez.','closeClothes1':'Ein?','talkClothes1':'Em poso el vestit de l\'emparador?','defaultClothes1':'Ein?','lookDrawer1':'A dins hi ha el meu telfon.','lookDrawer2':'A dins hi havia el meu telfon. Ara noms queda una moneda de dos euros que li vaig prometre al Jacobo.','giveDrawer1':'Est encaixat a la taula.','useDrawer1':'O l\'obro o el tanco.','pickupDrawer1':'Uooo ja he agafat el telfon.','pickupDrawer2':'Tancat poca cosa farem.','pickupDrawer3':'No hi ha res ms.','pushDrawer1':'No t cap sentit empnyer aix','pullDrawer1':'No sortir.','openDrawer1':'Ja est obert.','openDrawer2':'Est encallat, per una mica entreobert. Puc intentar agafar el que hi ha a dins.','closeDrawer1':'Acabo de tancar-lo.','closeDrawer2':'Ja est tancat.','talkDrawer1':'Ein?','defaultDrawer1':'Ein?','lookExit1':'s la porta de sortida.','lookExit2':'Quan estigui preparat sortir de casa!','giveExit1':'Ein?','useExit1':'Encara no puc marxar, ja que no estic preparat!','useExit2':'Ho tinc tot! Ja puc marxar!','pickupExit1':'Ein?','pushExit1':'La porta est tancada. Ara fer una sortida triumfant se\'n diu fer un Corominas.','pullExit1':'Ein?','openExit1':'Encara no puc marxar, ja que no estic preparat!','closeExit1':'Ein?','talkExit1':'Qui s? Ah si ning ha trucat!','defaultExit1':'Ein?','lookFridge1':'La 3a nevera que compro. Tenia una collecci d\'imants com l\'Olga, per els he tret tots.','giveFridge1':'Em va costar molts diners com per regalar-la.','useFridge1':'Ja menjar a la boda. Espero que s\'enrecordin de la meva alergia al peix!','pickupFridge1':'Una mica massa gran, no?','pushFridge1':'Nyyyyyyyyy no puc.','pullFridge1':'Nyyyyyyyyy no puc.','openFridge1':'Obrir la nevera si no vull res s un desperdici de llum. A ms el No es va deixar l\'ampolla d\'orxata i no vull que se li escalfi.','closeFridge1':'Est tancada.','talkFridge1':'Ein?','defaultFridge1':'Ein?','lookFreezer1':'s el congelador.','giveFreezer1':'Est unit a la nevera.','useFreezer1':'Est ple, crec que noms hi ha trufes de xocolata. A la caixa hi ha les lletres "rets/l"','pickupFreezer1':'Va a ser que no.','pushFreezer1':'Una mica bstia, no?','pullFreezer1':'Una mica bstia, no?','openFreezer1':'No que fa fred.','closeFreezer1':'Est tancat.','talkFreezer1':'La teva segona transformaci deixava molt que desitjar.','defaultFreezer1':'Ein?','lookGuitar1':'Han contractat a DJ Galeote per punxar a la boda.','giveGuitar1':'No! Costa massa diners!','useGuitar1':'A veure que tal sona...','useGuitar2':'Hi ha un tema de Throwing Muses que em surt genial, pero no estic massa inspirat ara.','pickupGuitar1':'Ara no. Tocar alguna cosa de David Bowie desprs.','pushGuitar1':'No home que caur! Aqu l\'Oriol tindria penjada una bicicleta enlloc d\'una guitarra.','pullGuitar1':'No home que caur!','openGuitar1':'Estic a primer curs! No en tinc ni idea!','closeGuitar1':'Lo what?','talkGuitar1':'No estem en aquest punt.','defaultGuitar1':'Tun tun tan tan tinc tiiin','lookPictureB1':'Un dels meus jocs favortis: Loom, creat al 1990.','lookPictureB2':'Tamb s un dels jocs preferits del Nas.','givePictureB1':'T un valor sentimental.','usePictureB1':'Puc jugar al joc si el decarrego del steam. Recordo haver escrit el codi en algun lloc.','pickupPictureB1':'Tot i que el porto sempre amb mi, avui farem una excepci.','pushPictureB1':'No, aqu tampoc hi ha cap caixa forta.','pullPictureB1':'No, aqu tampoc hi ha cap caixa forta.','openPictureB1':'El trencar si ho faig.','closePictureB1':'No es pot tancar.','talkPictureB1':'Hola, em dic Bobbin Threadbare, ets la meva mare?','defaultPictureB1':'Ein?','lookPictureK1':'En Julio va fer aquesta foto a l\'Ignatius fa molt temps.','givePictureK1':'No penso regalar la meva foto de l\'Ignatius','usePictureK1':'Potser podrem fer-li una foto amb el nou gatet de la Natalia. O encara no el t?','pickupPictureK1':'Qu mono. Atxus l\'alrgia del Karde s tan forta que fins i tot amb la foto li agafa!','pushPictureK1':'s molt maco.','pullPictureK1':'Uaaaaaa','openPictureK1':'Uuuu','closePictureK1':'Kitty, kitty, kitty','talkPictureK1':'Miau! Recordo quan el Jin va dir a l\'Anakin vols que la Misha et punxi amb un punx? I el Curry va dir que no.','defaultPictureK1':'No puc parar de clicar a la foto de lo maco que s!','lookPresent1':'A la targeta posa: Per a en Joan i en Ricard, d\'Ajar Nordic I. ','lookPresent2':'s una estatua!','lookPresent3':'Ara recordo que em van dir que l\'opci ms cmode era fer un ingrs.','givePresent1':'L\'hauria d\'agafar primer.','givePresent2':'Pesa massa. Si ha de ser un problema, els far una transferncia en lloc d\'un regal.','givePresent3':'Recordo que el nmero era: 1465-0150-58-1714428432','usePresent1':'s una estatua intil. I la Natalia ja els ha regalat un llum fantstic.','pickupPresent1':'Pesa massa i no el puc moure.','pushPresent1':'No el puc moure. No crec que ni un basc ho pugus fer.','pullPresent1':'No el puc moure.','openPresent1':'No s per a mi.','closePresent1':'Ja est tancat.','talkPresent1':'Si parlo i em contesta em far por!','defaultPresent1':'Ein?','lookSofa1':'s un sof de l\'IKEA que en Danferino em va ajudar a portar.','giveSofa1':'No sortir d\'aquesta casa.','useSofa1':'Tot i que estic cansat ara no s el moment de seure.','useSofa2':'A ms, en Raimon em vigila amb la seva app de fitness!','pickupSofa1':'Pesa massa.','pushSofa1':'M\'agrada a on est ara.','pullSofa1':'No em posar a ordenar l\'habitaci i canviar els mobles de lloc','openSofa1':'No s un sof llit! I em preocupa que quan el vam muntar amb el Carlos ens va sobrar moltes peces.','closeSofa1':'No es pot fer!','talkSofa1':'No vull parlar amb el sof.','defaultSofa1':'Ein?','lookInventoryTPhone1':'s el meu telefon. Amb ell jugo a l\'Ingress com el Darko.','giveInventoryTPhone1':'No, s meu.','useInventoryTPhone1':'Trucar al Joan i al Ricard per confirmar.','useInventoryTPhone2':'Ara ja puc parlar!','useInventoryTPhone3':'Ja est encs!','useInventoryTPhone4':'Crec que far una partida rpida a Spooklins!','useInventoryTPhone5':'Ja estic, per no he superat el record del Quele!','pickupInventoryTPhone1':'Ja el tinc.','pushInventoryTPhone1':'Ein?','pullInventoryTPhone1':'Ein?','openInventoryTPhone1':'Fa molt temps que els telfons ja no s\'obren','closeInventoryTPhone1':'No es tanca.','talkInventoryTPhone1':'Hola?','talkInventoryTPhone2':'Ja s que confirmar al mateix dia s lleig,','talkInventoryTPhone3':'que hauria d\'haver confirmat abans del 15 de novembre,','talkInventoryTPhone4':'per vaig fer el video com vau demanar a l\'invitaci i vau posar a la web Clssica!','talkInventoryTPhone5':'B, ens veiem ara! Adu!','talkInventoryTPhone6':'...','talkInventoryTPhone7':'Hauria d\'haver-los preguntat tot el qu encara no s!','talkInventoryTPhone8':'No els vull molestar ms!','talkInventoryTPhone9':'Primer hauria de trucar...','defaultInventoryTPhone1':'Ein?','ending':'Felicitats!\nHas arribat al final d\'aquesta aventura. Ara tens tota la informaci'+' necessria per atendre l\'event. Esperem de tot cor que hagis disfrutat d\'aquest petit joc, i'+' que prximament puguis tamb difrutar amb nosaltres el dia de la notra boda. '+'Si encara tens algun dubte, pots contactar-nos a contacte@superjoaniricard.com, o be per twitter a @superjoanricard'+'\n'+'\n'+'CREDITS:'+'Gui, Programaci, Art i Msica:\n'+'Joan Alemany i Ricard Cabrera\n'+'Testing: Daniel Ferreira\n'+'AGRA\xCFMENTS: Patrick Niekerken'+'\n'+'\n'},items:{'windowB1':'finestra','windowB2':'finestra','clothes':'vestidor','pictureB':'quadre de loom','guitar':'guitarra','bed':'llit','paperball':'bola de paper','tphone':'telefon','blackboard':'pissarra','clock':'rellotge','drawer':'calaix','window':'finestra','papers':'papers','closet':'armaris','fridge':'nevera','freezer':'congelador','pictureK':'quadre de gat','cabinet':'estanteria','cactus':'cactus','carpet':'catifa','door':'porta','exit':'sortida','sofa':'sof','books':'llibres','present':'regal'},commands:{'Give':'Donar','Use':'Usar','Pick up':'Agafar','Open':'Obrir','Close':'Tancar','Talk':'Parlar','Look':'Mirar','Push':'Empnyer','Pull':'Estirar','Walk':'Anar a'},levels:{'kitchen':'cuina','bedroom':'dormitori','sitting-room':'saleta','study':'estudi','titlescreen':'titlescreen'},commandImages:{'give':'ui/donar.gif','open':'ui/obrir.gif','look':'ui/mirar.gif','use':'ui/usar.gif','close':'ui/tancar.gif','push':'ui/empenyer.gif','pickup':'ui/agafar.gif','talk':'ui/parlar.gif','pull':'ui/estirar.gif','walk':'ui/caminar.gif'},commandXs:{'give':76/2,'open':68/2,'look':70/2,'use':60/2,'close':92/2,'push':128/2,'pickup':90/2,'talk':86/2,'pull':98/2,'walk':0},commandYs:{'give':10,'open':10,'look':10,'use':10,'close':10,'push':10,'pickup':10,'talk':10,'pull':10,'walk':0},getMessage:function(messageCode){return this.messages[messageCode];},getItemName:function(itemCode){return this.items[itemCode];},getCommandName:function(commandCode){return this.commands[commandCode];},getLevelName:function(levelName){return this.levels[levelName];},getCommandImage:function(key){return this.commandImages[key];},getCommandX:function(key){return this.commandXs[key];},getCommandY:function(key){return this.commandYs[key];},getLocalizedImagePath:function(imageCode){if(imageCode==="map"){return'idle';}
return null;}});});

// lib/game/components/i18n/i18n-en.js
ig.baked=true;ig.module('game.components.i18n.i18n-en').requires('plusplus.core.config').defines(function(){"use strict";var _c=ig.CONFIG;ig.i18nEn=ig.Class.extend({messages:{'introText':'Year 2014.\n The big day is fast approaching, all the preparations have started. The guests are arriving, but one still needs to confirm... '+'You are Ajar Nordic, who lost in amnesia has completely forgotten all the details for Joan and Ricard\'s wedding. '+'Your mission is crystal clear: you have to look for and write down all the necessary information in order to get to the wedding on time.'+'\nWill you be able to find all the pieces to the puzzle?','lookBlackboard1':'This is the problem that needs to be resolved for the wedding.','lookBlackboard2':'If we know that there are more than a 100 guests, then either 15 they all know each other,','lookBlackboard3':'or 3 do not know each other.','giveBlackboard1':'I don\'t know who else to assign this problem... to Marta?','useBlackboard1':'Amanda has been working on it really hard! For sure she already knows the solution!','pickupBlackboard1':'When trying to get it, I saw that on one side there are the following letters "/sec".','pushBlackboard1':'Mathematics stuff...','pullBlackboard1':'Mathematics stuff...','openBlackboard1':'It\'s been a while since I have opened the blackboard to the public.','closeBlackboard1':'Mathematics stuff...','talkBlackboard1':'Blackboard, blackboard, who is the most motivated professor?','talkBlackboard2':'Mmmm... Wait, I just heard something...','talkBlackboard3':'I think I heard Laura Morera and Tresa Marimon with her Explorium!','defaulBlackboard1':'Mahematics stuff...','lookInventoryMap1':'In the map it says they are getting married in Sant Cugat, at Mercantic','lookInventoryMap2':'Avinguda de Rius i Taulet, 120, 08173 Sant Cugat del Valls, Barcelona','giveInventoryMap1':'I don\'t have anyone to give this to.','useInventoryMap1':'I will use it when going there.','pickupInventoryMap1':'I already have the map.','pushInventoryMap1':'Moving it a little bit, I can read the last letters: "oom".','pullInventoryMap1':'I don\'t know what to do.','openInventoryMap1':'Before it was a ball of paper, now it\'s a map.','closeInventoryMap1':'I prefer the map to the paper ball.','talkInventoryMap1':'I do not think that speaking to inanimate objects is the solution... ','talkInventoryMap2':'Shit! I\'m talking to myself again! ','defaultInventoryMap1':'I don\'t know what to do.','lookInventoryPaperball1':'It seems like this crumbled paper is important.','giveInventoryPaperball1':'It contains information that is too important to give it away.','useInventoryPaperball1':'In this ball shape, I can\'t really use it.','pickupInventoryPaperball1':'I already have it in the inventory.','pushInventoryPaperball1':'It doesn\'t seem to work!','pullInventoryPaperball1':'It doesn\'t seem to work!','openInventoryPaperball1':'Look at this, there is a map!','closeInventoryPaperball1':'It\'s closed.','talkInventoryPaperball1':'Hello? Hello? There is no answer!','defaultInventoryPaperball1':'Ein','lookPapers1':'Lots of papers and among them the screen play for my movie "A sporadic Injurer".','lookPapers2':'It reminds me to the pile of papres that Joan has on his table. He says its hereditary.','lookPapers3':'A paper says that the order is chalk, sphere, and ice l.','givePapers1':'There is also an Internal Assessment that Taixs needs to review. I\'ll take it so I can give it to him at the wedding!','usePapers1':'There is nothing that important.','pickupPapers1':'I know the map was around here but I cant see it now.','pickupPapers2':'The map was among that pile of papers but it fell.','pushPapers1':'In moving those papers, I found a plan to renovate the appartment, Luckily Jordi and Nuria will help me understand it!','pullPapers1':'don\'t be dirty!','openPapers1':'In that pile, I have also seen an essay about the democratic reality with drawings from Magritte signed by M.R.','closePapers1':'I\'m not going to start making paper balls...','talkPapers1':'Its not a speech.','defaultPapers1':'Ein.','lookWindow1':'Oof I think that is Dani who is running because he is late to the wedding.','useWindow1':'Pau wold not let me use anything but Linux.','openWindow1':'Its cold and I don\'t want to open it. And I feel like I am being watched by Jacobo\'s friend...','closeWindow1':'Its already closed. I don\'t want to bring the curtains down, in case the same happens as what happened in Micky\'s house in Collblanc when they couldn\'t bring it up again!','talkWindow1':'HELLO WORLD!','talkWindow2':'HELLO CLOUD!','talkWindow3':'HELLO PUCK!','defaultWindow1':'No, simply no','lookPaperball1':'There is something written inside. Outside it reads "oom", Not sure what it is.','givePaperball1':'It is my paper ball.','usePaperball1':'If I had a basket I could use it.','pickupPaperball1':'Great! Now I already have a paper ball.','pushPaperball1':'No, you should not play ball at home!','pullPaperball1':'No, you should not play ball at home!','openPaperball1':'Until I can get it, I will not be able to open it','closePaperball1':'Its closed!','talkPaperball1':'Hello paper ball, tell me all your secrets...','defaultPaperball1':'Ein','lookBed1':'Its my bed. Julia and Doron gave me these sheets!','giveBed1':'Although many friends have slept over like Marc, this is my bed!','useBed1':'Its not time to sleep.','pickupBed1':'No, this is not working.','pushBed1':'No, this is not working','pullBed1':'No, this is not working','openBed1':'The bed is made and I don\'t want to mess it up.','closeBed1':'The bed is made!','talkBed1':'The bed cant speak. Its probably better this way.','defaultBed1':'No, this doesn\'t work','lookBooks1':'Lorem ipsum dolor sit amet, consectetur adipiscing elit. This seems like a ritual to invoque Nyarlathotep ','giveBooks1':'They are okay in the bookcase.','useBooks1':'Mlkshk tousled authentic lomo DIY, flexitarian tattooed asymmetrical Wes Anderson normcore gentrify drinking vinegar PBR&B Pitchfork. Tote bag VHS forage banh mi pour-over, viral hoodie vinyl you probably haven\'t heard of them typewriter Shoreditch jean shorts four loko mumblecore.','pickupBooks1':'They are Hipster books. Oh and here is an album from Menorca where Trish is in it.','pushBooks1':'I don\'t have secret doors at home. And for secret codes I would have to consult with.','pullBooks1':'Not working...','openBooks1':'I\'m not going to read now, although I see a copy of Brave New World and Cals recommended it to me.','openBooks2':'I\'ll take it in case the wedding is boring.','closeBooks1':'They are closed.','talkBooks1':'I don\'t have anything to tell them.','defaultBooks1':'Ein','lookCabinet1':'There are some Go pieces and a board insode, but I cant reach it.','giveCabinet1':'I cant reach it.','useCabinet1':'I would love to play a game of Baduk with Csar, but I better hurry up.','pickupCabinet1':'It\'s a foldable Go board, I used to play with Oscar with it. Now it\'s so high, I can\'t reach it','pushCabinet1':'Can\'t reach it. Maybe I should ask Pablo for some help.','pullCabinet1':'Can\'t reach it','openCabinet1':'Zurine told me that was a bad idea to put it so high.','closeCabinet1':'Can\'t reach it','talkCabinet1':'I remember now that I have to met Laura to play Go!','defaultCabinet1':'Can\'t reach it','lookCactus1':'It\'s a cactus. It\'s name is Chuck.','giveCactus1':'I don\'t want to give it away!','useCactus1':'Mmmm... Doesn\'t work.','pickupCactus1':'If I put it in my pocket I\'ll get hurt!','pushCactus1':'I don\'t want to break it!','pullCactus1':'I will get hurt.','openCactus1':'I don\'t have the necessary medical equipment.','closeCactus1':'I don\'t think I understand what you want to do.','talkCactus1':'Hi Cuck! Magda gave me this brand new watering can. I dunno why she has so many watering cans at home!','defaultCactus1':'It\'s a cactus. Doesn\'t want to be bothered.','lookClock1':'Mmm... The day was the 29th of November... and...','lookClock2':'I\'ve just remembered the time!','lookClock3':'The ceremony starts at 01:00PM! I have hurry up!','useClock1':'It\'s working already','pickupClock1':'I like where it is. Also, I want to get there before Eduard, it might be difficult, he is such a responsible guy.','talkClock1':'My little little tiny clock, who is the.... ooops, not now.','defaultClock1':'Sorry, this doesen\'t work.','lookCloset1':'Dishes, glasses, etc.','giveCloset1':'WHAT?','useCloset1':'I\'m out of the closet now.','pickupCloset1':'I see some recicable bins. Edu taught me how to use them depending on the plastic type, but I don\'t have anything to throw away now.','pushCloset1':'Sure?','pullCloset1':'Sure?','openCloset1':'There\'s nothing inside. Well.... I\'ve found the little figurines that Tina gave us! That wedding was a blast!','closeCloset1':'They are closed!','talkCloset1':'Nonliving object, uncapable to answer any question.','defaultCloset1':'It\'s just a closet!! I cannot!!','lookClothes1':'There are some costumes here. This one is a Leia costume, and a Hand Solo costume...','lookClothes2':'Here there are! My shirt and tie!','lookClothes3':'They told me to go to the wedding in a costume, or with some kind of suit.','giveClothes1':'No! Just found them!','useClothes1':'I\'ll get dress when I\'ll have everything ready. I\'ll get an extra bow tie for Darko.','pickupClothes1':'I\'ll wait until I\'ll have everything ready.','pushClothes1':'I agree with you that I need more space to put all those tshirts that Gemma gave me. She emptied her closet!','pullClothes1':'WHAT?','openClothes1':'Here we have a unique piece of Brunihilda Beast designer, La Plage de St Tropez collection.','closeClothes1':'WHAT?','talkClothes1':'Should I put on the emperor\'s suit?','defaultClothes1':'WHAT?','lookDrawer1':'My cellphone is inside.','lookDrawer2':'My cellphone was inside. Now there\'s just this 2 euro coin I promised to give to Jacobo.','giveDrawer1':'It\'s stuck!','useDrawer1':'Either I open it, or close it.','pickupDrawer1':'Yes!!! I have my phone now.','pickupDrawer2':'If it\'s closed I can\'t do anything.','pickupDrawer3':'There is nothing else inside.','pushDrawer1':'It doesn\'t make any sense to do that.','pullDrawer1':'I can\'t.','openDrawer1':'It\'s open already.','openDrawer2':'It\'s stuck, but slightly opened. I can try to pick up whatever it\'s inside.','closeDrawer1':'I\'ve just close it!','closeDrawer2':'It\' closed.','talkDrawer1':'WHAT?','defaultDrawer1':'WHAT?','lookExit1':'This door is the exit.','lookExit2':'I\'ll leave when I\'ll have everything ready!','giveExit1':'WHAT?','useExit1':'I can\'t! I\'m not ready yet!','useExit2':'I have everything now. Here I go!','pickupExit1':'WHAT?','pushExit1':'The door is closed. Nowadays, to do a triumphal exit is "to do a Corominas".','pullExit1':'WHAT?','openExit1':'But I\'m not ready yet!','closeExit1':'WHAT?','talkExit1':'Who is this? Oops, nobody knocked!','defaultExit1':'WHAT?','lookFridge1':'This is the third fridge that I\'ve bought. It used to have a lot of magnets, like Olga has, but I\'ve removed them all.','giveFridge1':'It\'s too expensive to give it away.','useFridge1':'I\'ll eat later on the wedding. I hope they remember I have an alergy to peanuts.','pickupFridge1':'A little bit bulky, don\t you think?','pushFridge1':'Ngggggggg can\'t.','pullFridge1':'Ngggggggg can\'t.','openFridge1':'It\'s useless to open the fridge if I don\'t need anything. Besides, No left there a bottle of horchata I need to keep it cold.','closeFridge1':'It\'s already closed.','talkFridge1':'WHAT?','defaultFridge1':'WHAT?','lookFreezer1':'The freezer.','giveFreezer1':'It\'s tighted to the fridge.','useFreezer1':'It\'s full now, but I think there are only some chocolate truffles. In the box I can read: "rets/l"','pickupFreezer1':'Don\' think so, sorry.','pushFreezer1':'I think it\'s to heavy.','pullFreezer1':'I think it\'s to heavy.','openFreezer1':'No, I\'m cold.','closeFreezer1':'It\'s closed.','talkFreezer1':'Your second transformation was quite dissapointing.','defaultFreezer1':'WHAT?','lookGuitar1':'They\'ve hired DJ Galeote to play on the wedding.','giveGuitar1':'No! It\'s super expensive!','useGuitar1':'Let me see how it sounds...','useGuitar2':'There\'s a song from Throwing Muses that I know how to play really well, but I don\'t feel like playing right now.','pickupGuitar1':'Not now. I\'ll play some David Bowie songs later.','pushGuitar1':'It will fall if I do that! Here Oriol will have a bicicle instead.','pullGuitar1':'It will fall if I do that!','openGuitar1':'I\'m still learning! I don\'t know how to do this!','closeGuitar1':'WHAT?','talkGuitar1':'We haven\'t get tot that point yet.','defaultGuitar1':'Tun tun tan tan tinc tiiin','lookPictureB1':'One of my favourite games: Loom, released in 1990.','lookPictureB2':'It\'s also one of Nas\' favourite games.','givePictureB1':'It has a sentimental value.','usePictureB1':'I cant play it if I download it from Steam. I think I wrote the code somewhere.','pickupPictureB1':'I normally take it with me everywhere. But today I\'ll make an exception.','pushPictureB1':'No, there is no security box in here.','pullPictureB1':'No, there is no security box in here.','openPictureB1':'I don\'t want to break it!','closePictureB1':'Can\'t be closed.','talkPictureB1':'Hi, my name is Bobbin Threadbare, are you my mother?','defaultPictureB1':'WHAT?','lookPictureK1':'Julio took this picture of Ignatius long time ago.','givePictureK1':'I don\'t want to give my picture away!','usePictureK1':'Maybe we can take a picture of Natalia\'s new kitten. Or she haven\'t got it yet?','pickupPictureK1':'How cute!. But I don\'t have any alergy like Karde has.','pushPictureK1':'It\'s so freaking cute.','pullPictureK1':'Uaaaaaa.','openPictureK1':'Uuuu.','closePictureK1':'Kitty, kitty, kitty.','talkPictureK1':'Mew! Who are those kitten? Jin, Anakin or Curry?','defaultPictureK1':'Can\'t stop clicking in the picture. It\'s so cute!','lookPresent1':'In the card it says: for Joan & Ricard, from Ajar Nordic I. ','lookPresent2':'It\'s a statue!','lookPresent3':'Now I remember they told me that the easiest option was to make a transfer.','givePresent1':'I\'ll have to take it first.','givePresent2':'No way, it\'s too heavy. If this is gonna be a problem, I can make a transfer.','givePresent3':'It turns out that I remember the number by heart: 1465-0150-58-1714428432','usePresent1':'This is just a silly statue. Natalia gave them a really cool lamp already.','pickupPresent1':'Too heavy, not possible to be moved.','pushPresent1':'Too heavy!','pullPresent1':'Too heavy!.','openPresent1':'It\'s not for me!.','closePresent1':'It\'s closed.','talkPresent1':'If I talk to it and it answers it would be scary!','defaultPresent1':'WHAT?','lookSofa1':'An IKEA sofa, Danferino help me with it.','giveSofa1':'No way, this is going nowhere.','useSofa1':'I\'m a little bit tired, but it\'s not time to rest.','useSofa2':'Besides, Raimon is watching me with his fitness app!','pickupSofa1':'Too heavy.','pushSofa1':'I like it where it is.','pullSofa1':'I don\'t think it\'s time to tidy up the house.','openSofa1':'It\'s not a bed! And I\' worried because when we build it with Carlos some screws didn\'t worked well.','closeSofa1':'Simply, cannot be done.','talkSofa1':'Don\'t feel like talking.','defaultSofa1':'WHAT?','lookInventoryTPhone1':'My cellphone. I\'m playing Ingress with Darko.','giveInventoryTPhone1':'No, this is mine..','useInventoryTPhone1':'I think I\'ll call Joan and Ricard to confirm I\'m attending the wedding.','useInventoryTPhone2':'Now I can talk with them!','useInventoryTPhone3':'It\'s on already!','useInventoryTPhone4':'I think I have time to play a quick game to Spooklins!','useInventoryTPhone5':'Done! But I haven\'t beat Quele\'s highscore!','pickupInventoryTPhone1':'I already have it.','pushInventoryTPhone1':'WHAT?','pullInventoryTPhone1':'WHAT?','openInventoryTPhone1':'Since long time ago, no cellphone can be opened.','closeInventoryTPhone1':'Cant be closed.','talkInventoryTPhone1':'Hello?','talkInventoryTPhone2':'I know it\'s not polite to confirm that I will attend the same day of the wedding,','talkInventoryTPhone3':'I should have done it before November 15th,','talkInventoryTPhone4':'but I recorded that video answering a question (contact us to know more)!','talkInventoryTPhone5':'Well... See you in a bit. Cheers!','talkInventoryTPhone6':'...','talkInventoryTPhone7':'Crap. I should have asked all the things that I don\'t know yet!','talkInventoryTPhone8':'I don\'t want to bother them again!','talkInventoryTPhone9':'I would have to call them first...','defaultInventoryTPhone1':'WHAT?','ending':'Congratulations!\nYou have completed this graphic adventure. Now you have all the necessary information'+' to attend the wedding. We hope you have enjoyed this little game and that'+' we can see you soon and enjoy with you in the day of our wedding. '+'If you still have some doubt, do not hesitate to contact us by email: contacto@superjoaniricard.com, or twitter: @superjoanricard'+'\n'+'\n'+'CREDITS:'+'Script, Coding, Art & Music:\n'+'Joan Alemany & Ricard Cabrera\n'+'Testing: Daniel Ferreira\n'+'Translator: Julia Alemany'+'Special thanks to: Patrick Niekerken'+'\n'+'\n'},items:{'windowB1':'window','windowB2':'window','clothes':'clothes','pictureB':'Loom picture','guitar':'guitar','bed':'bed','paperball':'paperball','tphone':'cell phone','blackboard':'blackboard','clock':'clock','drawer':'drawer','window':'window','papers':'papers','closet':'closet','fridge':'fridge','freezer':'freezer','pictureK':'cat picture','cabinet':'cabinet','cactus':'cactus','carpet':'carpet','door':'door','exit':'exit','sofa':'sofa','books':'books','present':'present'},levels:{'kitchen':'kitchen','bedroom':'bedroom','sitting-room':'sitting room','study':'study','titlescreen':'titlescreen'},commands:{'Give':'Give','Use':'Use','Pick up':'Pick up','Open':'Open','Close':'Close','Talk':'Talk','Look':'Look','Push':'Push','Pull':'Pull','Walk':'Walk to'},commandImages:{'give':'ui/give.gif','open':'ui/open.gif','look':'ui/look.gif','use':'ui/use.gif','close':'ui/close.gif','push':'ui/push.gif','pickup':'ui/pickup.gif','talk':'ui/talk.gif','pull':'ui/pull.gif','walk':'ui/walk.gif'},commandXs:{'give':52/2,'open':60/2,'look':60/2,'use':44/2,'close':70/2,'push':60/2,'pickup':92/2,'talk':54/2,'pull':48/2,'walk':0},commandYs:{'give':10,'open':10,'look':10,'use':10,'close':10,'push':10,'pickup':10,'talk':10,'pull':10,'walk':0},getMessage:function(messageCode){return this.messages[messageCode];},getItemName:function(itemCode){return this.items[itemCode];},getCommandName:function(commandCode){return this.commands[commandCode];},getLevelName:function(levelName){return levelName;},getCommandImage:function(key){return this.commandImages[key];},getCommandX:function(key){return this.commandXs[key];},getCommandY:function(key){return this.commandYs[key];},getLocalizedImagePath:function(imageCode){if(imageCode==="map"){return'en';}
return null;}});});

// lib/game/components/i18n/i18n-es.js
ig.baked=true;ig.module('game.components.i18n.i18n-es').requires('plusplus.core.config').defines(function(){"use strict";var _c=ig.CONFIG;ig.i18nEs=ig.Class.extend({messages:{'introText':'Ao 2014.\n La gran cita se acerca, todos los preparativos estn en marcha. Los invidatos estn al caer, pero falta alguien por confirmar...'+'Encarnas a Ajar Nordic I, que, perdido en un momento de amnesia, ha olvidado por completo todos los detalles de la boda de Joan y Ricard.'+'Tu misin es clara, tienes que buscar todos los datos necesarios para poder llegar a la boda a tiempo.'+'\nSers capaz de encontrar todas las piezas del rompecabezas?','lookBlackboard1':'Es el problema que hay que resolver para la boda','lookBlackboard2':'Si sabemos que hay ms de 100 invitados, entonces o 15 se conocen todos entre todos,','lookBlackboard3':'o 3 no se conocen entre s\xED.','giveBlackboard1':'No se a quien ms asignar el problema... a Marta?','useBlackboard1':'Amanda ha estado trabajando duramente! Seguro que ya sabe la solucin!','pickupBlackboard1':'Al intentar cogerlo he visto que al lado hay unas letras: "/sec".','pushBlackboard1':'Cosas de matemticos...','pullBlackboard1':'Cosas de matemticos...','openBlackboard1':'Hace tiempo que no abro la pizarra en pblico.','closeBlackboard1':'Cosas de matemticos...','talkBlackboard1':'Pizarra pizarrita, quin es el profesor ms motivado?','talkBlackboard2':'Mmmm... Creo que he escuchado algo','talkBlackboard3':'Creo que ha dicho que las ms motivadas son Laura Morera y Tresa Marimon con su Explorium!','defaulBlackboard1':'Cosas de matemticos...','lookInventoryMap1':'En el mapa dice que se casan en Sant Cugat, en Mercantic','lookInventoryMap2':'Avenida de Rius i Taulet, 120, 08173 Sant Cugat del Valls, Barcelona','giveInventoryMap1':'A quien se lo doy?','useInventoryMap1':'Cuando me dirija hacia all ya lo usar','pickupInventoryMap1':'Ya lo tengo.','pushInventoryMap1':'Si lo muevo un poco veo unas letras escritas por detrs: "oom".','pullInventoryMap1':'Ni idea de qu tengo que hacer.','openInventoryMap1':'Antes era una bola de papel, ahora es un mapa.','closeInventoryMap1':'Prefiero el mapa que la bola de papel.','talkInventoryMap1':'No creo que hablar con objetos inanimados sea la solucin','talkInventoryMap2':'Mierda! Ya estoy hablando solo de nuevo!','defaultInventoryMap1':'No se qu tengo que hacer.','lookInventoryPaperball1':'Parece que este papel arrugado es importante.','giveInventoryPaperball1':'Tiene informain demasiado importante como para regalarlo.','useInventoryPaperball1':'As en forma de bola no veo cmo usarlo.','pickupInventoryPaperball1':'Ya lo tengo en mi inventario.','pushInventoryPaperball1':'No parece que vaya a funcionar!','pullInventoryPaperball1':'No parece que vaya a funcionar!','openInventoryPaperball1':'Mira, si es un mapa!','closeInventoryPaperball1':'Ya est cerrada.','talkInventoryPaperball1':'Hola? Hola? No contesta!','defaultInventoryPaperball1':'Ein?','lookPapers1':'Un montn de papeles. Entre otros tengo el guin de mi pelcula: "A sporadic Injurer".','lookPapers2':'Me recuerda al montn de papeles que tiene Joan en su mesa. Dice que es hereditario.','lookPapers3':'Un papel dice que el orden correcto es: tiza, hielo, esfera.','givePapers1':'Hay un Internal Assessment que Taixs tiene que corregir. Lo coger para drselo en la boda!','usePapers1':'No hay nada importante.','pickupPapers1':'Se que tena el mapa por aqu, pero ahora no lo veo.','pickupPapers2':'El mapa estaba con el resto de papeles, pero se ha cado.','pushPapers1':'Al apartar los papeles he visto un plano de las obras del piso. Suerte que Jordi y Nria me ayudarn a entenderlo!','pullPapers1':'No ensucies!','openPapers1':'Entre toda esta montaa de papeles he visto un ensayo sobre la realidad democrtica con dibujos de Magritte firmado por M.R.','closePapers1':'No me voy a poner a hacer bolas de papel...','talkPapers1':'No es un discurso.','defaultPapers1':'Ein.','lookWindow1':'Uy, creo que se que corre es Dani, que llega tarde a la boda.','useWindow1':'No, Pau no me dejara usar otra cosa que no sea Linux.','openWindow1':'Hace fro y no la quiero abrir. Adems, creo que la amiga de Jacobo me observa.','closeWindow1':'Ya est cerrada. No quiero bajar la persiana no vaya a ser que pase como en la casa de Collblanc de Micky que despus no la podamos subir!','talkWindow1':'HELLO WORLD!','talkWindow2':'HELLO CLOUD!','talkWindow3':'HELLO PUCK!','defaultWindow1':'No, simplemente no','lookPaperball1':'Tiene algo escrito dentro. Dice: "oom", no se que ser.','givePaperball1':'Es mi bola de papel.','usePaperball1':'Si tubiera una canasta, la podra usar.','pickupPaperball1':'Genial! Ahora ya tengo la bola de papel.','pushPaperball1':'No, en casa no se puede jugar a la pelota!','pullPaperball1':'No, en casa no se puede jugar a la pelota!','openPaperball1':'Hasta que no la coja no la podr abrir','closePaperball1':'Ya est cerrada!','talkPaperball1':'Hola bola de papel! Dime todos tus secretos...','defaultPaperball1':'Ein?','lookBed1':'Es mi cama. Las sbanas me las regalaron Jlia i Doron!','giveBed1':'Aunque muchos amigos, como Marc, se han quedado a dormir. La cama es ma!','useBed1':'No es hora de ir a dormir.','pickupBed1':'No, eso no funciona.','pushBed1':'No, eso no funciona.','pullBed1':'No, eso no funciona.','openBed1':'La cama est hecha, no la quiero deshacer','closeBed1':'Ya est hecha!','talkBed1':'La cama no puede hablar, y seguramente ser mejor que sea as','defaultBed1':'No, eso no funciona.','lookBooks1':'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Parece un ritual para invocar a Nyarlathotep ','giveBooks1':'Estn bien en la librera','useBooks1':'Mlkshk tousled authentic lomo DIY, flexitarian tattooed asymmetrical Wes Anderson normcore gentrify drinking vinegar PBR&B Pitchfork. Tote bag VHS forage banh mi pour-over, viral hoodie vinyl you probably haven\'t heard of them typewriter Shoreditch jean shorts four loko mumblecore.','pickupBooks1':'Son libros de hipster. Ah, aqu hay un lbum de Menorca donde salgo con Trish.','pushBooks1':'No hay puertas secretas en casa. Y para cdigos secretos ms vale hablar con Chris.','pullBooks1':'No funciona...','openBooks1':'Ahora no me voy a poner a leer. Aunque veo que tengo una copia de  Brave New World y Cals me lo recomend.','openBooks2':'Lo coger por si la boda es muy aburrida.','closeBooks1':'Estn cerrados.','talkBooks1':'No tengo nada que decirles.','defaultBooks1':'Ein?','lookCabinet1':'Hay un tablero de Go con sus piedras dentro, pero no llego.','giveCabinet1':'No llego.','useCabinet1':'Me encantaria jugar a Baduk con Csar, pero tengo prisa.','pickupCabinet1':'El tablero plegable de scar est arriba, pero no lo alcanzo.','pushCabinet1':'No alcanzo. Y si aviso a Pablo?','pullCabinet1':'No alcanzo.','openCabinet1':'Ya me dijo Zurie que era mala idea ponerlo tan arriba.','closeCabinet1':'No alcanzo.','talkCabinet1':'Ahora me acuerdo que tengo que quedar con Laura para jugar al Go.','defaultCabinet1':'No alcanzo.','lookCactus1':'Es un cactus. Se llama Chuck.','giveCactus1':'No lo quiero regalar.','useCactus1':'Mmmm no funciona.','pickupCactus1':'Si me lo pongo en el bolsillo me pinchar!','pushCactus1':'No lo quiero romper!','pullCactus1':'Me voy a hacer dao.','openCactus1':'No tengo el equipo mdico necesario.','closeCactus1':'No se si entiendo qu quieres hacer.','talkCactus1':'Hola Chuck! Magda me ha regalado una regadora nueva, no se porqu tiene tantas en casa!','defaultCactus1':'Es un cactus. Desea no ser molestado.','lookClock1':'Mmm... El da era el 29 de novembre... y...','lookClock2':'Ya me acuerdo de la hora!','lookClock3':'La ceremonia empieza a la 13:00! Tengo que darme prisa!','useClock1':'Ya funciona.','pickupClock1':'Me gusta donde est. Adems, quiero llegar antes que Eduard, aunque va a ser difcil, es muy responsable.','talkClock1':'Relojito relojito mgico, ay no.','defaultClock1':'No, eso no funciona.','lookCloset1':'Platos, vasos, etc.','giveCloset1':'Lo what?','useCloset1':'Ya hace tiempo que salimos del armario.','pickupCloset1':'En la parte de debajo hay unas bolsas de reciclaje segn el tipo de plstico como me ense Edu, pero anora no voy a tirarlas.','pushCloset1':'Ein?','pullCloset1':'Ein?','openCloset1':'No hay nada interesante dentro. Aunque hay unas figuritas que me regal Tina! sa si fue una gran boda!','closeCloset1':'Estn cerrados.','talkCloset1':'Objecto inanimado incapaz de conversar.','defaultCloset1':'Es un armario! No puedo!','lookClothes1':'Hay un vestido de Leia, otro de Han Solo...','lookClothes2':'Aja! Aqu tengo mi camisa y mi corbata!','lookClothes3':'Me dijeron que poda venir de Cosplay o formal, no casual','giveClothes1':'No! Ahora que las acabo de encontrar!','useClothes1':'Me vestir cuando lo tenga todo listo justo antes de salir por la puerta. Coger una pajarita extra para Darko.','pickupClothes1':'Esperar hasta el ltimo momento.','pushClothes1':'Estoy de acuerdo que me falta espacio para poner las camisetas que me ha regalado Gemma. Es que se vaci el armario.','pullClothes1':'Ein?','openClothes1':'Aqu hay una pieza nica de Brunihilda Beast, de la coleccin de la Plage de St Tropez.','closeClothes1':'Ein?','talkClothes1':'Me pongo el vestido de emperador?','defaultClothes1':'Ein?','lookDrawer1':'Dentro tengo mi telfono.','lookDrawer2':'Antes estaba mi telfono. Ahora slo queda la moneda de dos euros que le promet a Jacobo.','giveDrawer1':'Est atascado.','useDrawer1':'O lo abro o lo cierro.','pickupDrawer1':'Uooo ya tengo mi telfono.','pickupDrawer2':'Cerrado imposible.','pickupDrawer3':'No hay nada ms.','pushDrawer1':'No tiene sentido empujarlo.','pullDrawer1':'No saldr.','openDrawer1':'Ya est abierto.','openDrawer2':'Est atascado, pero entreabierto. Puedo intentar coger lo que haya dentro.','closeDrawer1':'Acabo de cerrarlo.','closeDrawer2':'Ya est cerrado.','talkDrawer1':'Ein?','defaultDrawer1':'Ein?','lookExit1':'Es la puerta de salida.','lookExit2':'Cuando estr preparado saldr de casa!','giveExit1':'Ein?','useExit1':'No me puedo ir todava, no estoy listo!','useExit2':'Lo tengo todo! All voy!!','pickupExit1':'Ein?','pushExit1':'La puerta est cerrada. Hacer una salida triunfal ahora se le llama hacer un Corominas.','pullExit1':'Ein?','openExit1':'No me puedo ir todava, no estoy listo!','closeExit1':'Ein?','talkExit1':'Quien es? Ay, si no ha llamado nadie!','defaultExit1':'Ein?','lookFridge1':'La tercera nevera que comrpo. Tena una coleccin de imanes como los de Olga, pero los he quitado.','giveFridge1':'Me cost demasiado como para regalarla.','useFridge1':'Ya comer en la boda! Espero que se acuerden de mi alergia a los piones','pickupFridge1':'Abulta un poco, no crees?','pushFridge1':'Ngggggggg no puedo.','pullFridge1':'Ngggggggg no puedo.','openFridge1':'Abir la nevera si no quiero nada es un desperdicio de luz. Adems, No se dej una botella de orchata y no quiero que se le caliente','closeFridge1':'Est cerrada.','talkFridge1':'Ein?','defaultFridge1':'Ein?','lookFreezer1':'El congelador.','giveFreezer1':'Va con la nevera.','useFreezer1':'Est lleno, pero creo que slo hay unas trufas de chocolate. En la caja pone: "rets/l"','pickupFreezer1':'Va a ser que no.','pushFreezer1':'Un poco bestia, no?','pullFreezer1':'Un poco bestia, no?','openFreezer1':'No que tengo fro.','closeFreezer1':'Est cerrado.','talkFreezer1':'Tu segunda transformacin dejaba mucho que desear.','defaultFreezer1':'Ein?','lookGuitar1':'Han contratado a DJ Galeote para pinchar en la boda.','giveGuitar1':'No! Que cuesta mucha pasta!','useGuitar1':'A ver que tal suena...','useGuitar2':'Hay un tema de Throwing Muses que me sale genial, pero ahora no estoy muy inspirado.','pickupGuitar1':'Ahora no. Tocar alguna cosa de David Bowie despus.','pushGuitar1':'No hombre que se va a caer! Aqu Oriol tendra colgada una bici en vez de una guitarra.','pullGuitar1':'No hombre que se va a caer!','openGuitar1':'Que estoy en primero! No tengo ni idea!','closeGuitar1':'Lo what?','talkGuitar1':'No hemos llegado a ese punto.','defaultGuitar1':'Tun tun tan tan tinc tiiin','lookPictureB1':'Uno de mis juegos favoritos: Loom, creado en 1990.','lookPictureB2':'Tambin es uno de los juegos favoritos de Nas.','givePictureB1':'Tiene un valor sentimental.','usePictureB1':'Puedo jugar si lo descargo de Steam. Creo que escrib el cdigo en algn lado.','pickupPictureB1':'Aunque siempre lo llevo conmigo. Hoy har una excepcin.','pushPictureB1':'No, aqu tampoco hay caja fuerte.','pullPictureB1':'No, aqu tampoco hay caja fuerte.','openPictureB1':'Lo romper si lo hago!','closePictureB1':'No se puede cerrar.','talkPictureB1':'Hola, me llamo Bobbin Threadbare, eres mi madre?','defaultPictureB1':'Ein?','lookPictureK1':'Julio hizo esta foto de Ignatius hace mucho tiempo.','givePictureK1':'No pienso regalar mi foto de Ignatius!','usePictureK1':'Quiz le podemos hacer una foto al nuevo gatete de Natalia. O todava no lo tiene?','pickupPictureK1':'Qu mono. Achs La alergia de Karde es tan fuerte que hasta con la foto le coje!','pushPictureK1':'Es muy mono.','pullPictureK1':'Uaaaaaa.','openPictureK1':'Uuuu.','closePictureK1':'Kitty, kitty, kitty.','talkPictureK1':'Miau! Tres tristes gatos gataban trigo, tres tristes gatos en un gatal. Qu gato gataba ms? Jin, Anakin o Curry?','defaultPictureK1':'No puedo parar de hacer click en la foto de lo bonito que es!','lookPresent1':'En la tarjeta pone: para Joan y Ricard, de Ajar Nordic I. ','lookPresent2':'Es una estatua!','lookPresent3':'Ahora recuerdo que me dijeron que la opcin ms comoda era hacer un ingreso.','givePresent1':'Lo tendra que coger primero.','givePresent2':'Pesa demasaido. Si va a ser un problema, puedo hacer una transferencia.','givePresent3':'Creo que el nmero era: 1465-0150-58-1714428432','usePresent1':'Es una estatua intil. Y Natalia les ha regalado ya una lmpara fantstica.','pickupPresent1':'Pesa demasaido, no la puedo mover.','pushPresent1':'No lo puedo mover. No creo que ni un vasco pueda.','pullPresent1':'No lo puedo mover.','openPresent1':'No es para mi.','closePresent1':'Ya est cerrado..','talkPresent1':'Si le hablo y me contesta me dar miedo!','defaultPresent1':'Ein?','lookSofa1':'Es un sof de IKEA que Danferino me ayud a traer.','giveSofa1':'No saldr de esta casa.','useSofa1':'Aunque estoy algo cansado, no es el momento.','useSofa2':'Adems, Raimon me vigila con su app de fitness!','pickupSofa1':'Pesa demasiado.','pushSofa1':'Me gusta donde est.','pullSofa1':'No me pondr a ordenar la habitacin y a cambiar los muebles de sitio.','openSofa1':'No es un sof cama! Y me preocupa porque cuando lo montamos con Carlos sobraron muchas piezas.','closeSofa1':'No se puede hacer!','talkSofa1':'No quiero hablar con el sof.','defaultSofa1':'Ein?','lookInventoryTPhone1':'Es mi telfono. Con l juego a \'Ingress con Darko.','giveInventoryTPhone1':'No, es mo.','useInventoryTPhone1':'Llamar a Joan y Ricard para confirmar.','useInventoryTPhone2':'Ahora ya puedo hablar!','useInventoryTPhone3':'Ya est encendido!','useInventoryTPhone4':'Creo que har una partida rpida al Spooklins!','useInventoryTPhone5':'Ya estoy! Pero no he superado el rcord de Quele!','pickupInventoryTPhone1':'Ya lo tengo.','pushInventoryTPhone1':'Ein?','pullInventoryTPhone1':'Ein?','openInventoryTPhone1':'Hace mucho que los telfonos no se abren.','closeInventoryTPhone1':'No se cierra.','talkInventoryTPhone1':'Hola?','talkInventoryTPhone2':'Ya s que confirmar el mismo da est feo,','talkInventoryTPhone3':'que tendra que haber confirmado antes del 15 de noviembre,','talkInventoryTPhone4':'pero hice el vdeo que pedsteis en la invitacin y la web clsica!','talkInventoryTPhone5':'Bueno, que nos vemos ahora!','talkInventoryTPhone6':'...','talkInventoryTPhone7':'Tendra que haberles preguntado todo lo que todava no se!','talkInventoryTPhone8':'No les quiero molestar ms!','talkInventoryTPhone9':'Primero tendra que llamar...','defaultInventoryTPhone1':'Ein?','ending':'Felicidades!\nHas llegado al final de esta aventura. Ahora tienes toda la informacin'+' necesaria para venir al evento. Esperamos que hayas disfrutado de este pequeo juego y'+' que prximamente puedas disfrutar con nosotros el da de nuestra boda. '+'Si todava tienes alguna duda, puedes contactar con nosotros en contacto@superjoaniricard.com, o por twitter a @superjoanricard'+'\n'+'\n'+'CRDITOS:'+'Guin, Programacin, Arte y Msica:\n'+'Joan Alemany y Ricard Cabrera\n'+'Testing: Daniel Ferreira\n'+'AGRADECIMIENTOS: Patrick Niekerken'+'\n'+'\n'},items:{'windowB1':'ventana','windowB2':'ventana','clothes':'vestidor','pictureB':'cuadro de loom','guitar':'guitarra','bed':'cama','paperball':'bola de papel','tphone':'telfono','blackboard':'pizarra','clock':'reloj','drawer':'cajn','window':'ventana','papers':'papeles','closet':'armarios','fridge':'nevera','freezer':'congelador','pictureK':'cuadro de gat','cabinet':'estantera','cactus':'cactus','carpet':'alfombra','door':'puerta','exit':'salida','sofa':'sof','books':'libros','present':'regalo'},commands:{'Give':'Dar','Use':'Usar','Pick up':'Coger','Open':'Abrir','Close':'Cerrar','Talk':'Hablar','Look':'Mirar','Push':'Empujar','Pull':'Estirar','Walk':'Ir a'},levels:{'kitchen':'cocina','bedroom':'dormitorio','sitting-room':'salita','study':'estudio','titlescreen':'titlescreen'},commandImages:{'give':'ui/ui_button_give.gif','open':'ui/ui_button_open.gif','look':'ui/mirar.gif','use':'ui/ui_button_use.gif','close':'ui/ui_button_close.gif','push':'ui/ui_button_press.gif','pickup':'ui/ui_button_pickup.gif','talk':'ui/ui_button_talk.gif','pull':'ui/ui_button_pull.gif','walk':'ui/ui_button_walk.gif'},commandXs:{'give':44/2,'open':68/2,'look':70/2,'use':60/2,'close':92/2,'push':110/2,'pickup':76/2,'talk':86/2,'pull':68/2,'walk':0},commandYs:{'give':10,'open':10,'look':10,'use':10,'close':10,'push':10,'pickup':10,'talk':10,'pull':10,'walk':10},getMessage:function(messageCode){return this.messages[messageCode];},getItemName:function(itemCode){return this.items[itemCode];},getCommandName:function(commandCode){return this.commands[commandCode];},getLevelName:function(levelName){return this.levels[levelName];},getCommandImage:function(key){return this.commandImages[key];},getCommandX:function(key){return this.commandXs[key];},getCommandY:function(key){return this.commandYs[key];},getLocalizedImagePath:function(imageCode){if(imageCode==="map"){return'es';}
return null;}});});

// lib/game/components/i18n.js
ig.baked=true;ig.module('game.components.i18n').requires('plusplus.core.config','game.components.i18n.i18n-ca','game.components.i18n.i18n-en','game.components.i18n.i18n-es').defines(function(){"use strict";var _c=ig.CONFIG;ig.i18n=ig.Class.extend({init:function(){this.language='ca';this.resource=new ig['i18n'+this.capitaliseFirstLetter(this.language)]();},setLanguage:function(languageCode){this.language=languageCode;this.resource=new ig['i18n'+this.capitaliseFirstLetter(this.language)]();},getMessage:function(messageCode){return this.resource.getMessage(messageCode);},getItemName:function(itemCode){return this.resource.getItemName(itemCode);},getCommandName:function(commandCode){return this.resource.getCommandName(commandCode);},getLevelName:function(levelName){return this.resource.getLevelName(levelName);},getCommandImage:function(key){return this.resource.getCommandImage(key);},getCommandX:function(key){return this.resource.getCommandX(key);},getCommandY:function(key){return this.resource.getCommandY(key);},getLocalizedImagePath:function(imageCode){return this.resource.getLocalizedImagePath(imageCode);},capitaliseFirstLetter:function(string)
{return string.charAt(0).toUpperCase()+string.slice(1);}});});

// lib/game/entities/item-papers.js
ig.baked=true;ig.module('game.entities.item-papers').requires('plusplus.core.entity','plusplus.core.config','game.components.i18n').defines(function(){var _c=ig.CONFIG;ig.EntityItemPapers=ig.global.EntityItemPapers=ig.EntityExtended.extend({name:'papers',_wmScalable:true,collides:ig.Entity.COLLIDES.NEVER,size:{x:8,y:8},interactionDistance:20,interact:function(command){if(command.command==='Look'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('lookPapers1'),ig.game.i18n.getMessage('lookPapers2'),ig.game.i18n.getMessage('lookPapers3'));}
else if(command.command==='Use'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('usePapers1'));}
else if(command.command==='Give'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('givePapers1'));}
else if(command.command==='Push'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('pushPapers1'));}
else if(command.command==='Pick up'){if(ig.game.gameState.placeGoalAchieved===true)
ig.game.getPlayer().speak(ig.game.i18n.getMessage('pickupPapers1'));else
ig.game.getPlayer().speak(ig.game.i18n.getMessage('pickupPapers2'));}
else if(command.command==='Pull'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('pullPapers1'));}
else if(command.command==='Open'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('openPapers1'));}
else if(command.command==='Close'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('closePapers1'));}
else if(command.command==='Talk'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('talkPapers1'));}
else{ig.game.getPlayer().speak(ig.game.i18n.getMessage('defaultPapers1'));}},combine:function(entity){ig.game.getPlayer().speak('No, no tiene sentido');}});});

// lib/plusplus/entities/levelchange.js
ig.baked=true;ig.module('plusplus.entities.levelchange').requires('plusplus.entities.trigger').defines(function(){ig.EntityLevelchange=ig.global.EntityLevelchange=ig.EntityTrigger.extend({_wmBoxColor:'rgba(0, 0, 255, 0.7)',levelName:'',playerSpawnerName:'',clearPersistentPlayer:false,clearPersistentEntities:false,activate:function(entity){this.parent(entity);if(this.clearPersistentEntities){ig.game.clearPersistentEntities();}
else if(this.clearPersistentPlayer){var player=ig.game.getPlayer();var playerName="player";if(player){playerName=player.name||playerName;}
ig.game.clearPersistentEntity(playerName);}
ig.game.loadLevelDeferred(this.levelName,this.playerSpawnerName);}});});

// lib/plusplus/ui/ui-interactive.js
ig.baked=true;ig.module('plusplus.ui.ui-interactive').requires('plusplus.ui.ui-element','plusplus.helpers.utils').defines(function(){"use strict";var _ut=ig.utils;ig.UIInteractive=ig.global.UIInteractive=ig.UIElement.extend({targetable:true,enabled:true,onActivated:null,onDeactivated:null,initTypes:function(){this.parent();_ut.addType(ig.EntityExtended,this,'type',"INTERACTIVE");},initProperties:function(){this.parent();this.onActivated=new ig.Signal();this.onDeactivated=new ig.Signal();},resetExtras:function(){this.parent();this.setEnabled(this.enabled);},setEnabled:function(enabled){if(enabled){this.enable();}
else{this.disable();}},enable:function(){this.enabled=true;this.animRelease(this.getDirectionalAnimName("disabled"));},disable:function(){if(this.activated){this.deactivate();}
this.enabled=false;this.animOverride(this.getDirectionalAnimName("disabled"),{lock:true});},activate:function(entity){if(this.enabled){this.activateComplete(entity);this.parent(entity);}},deactivate:function(entity){if(this.enabled){this.deactivateComplete(entity);this.parent(entity);}},activateComplete:function(entity){this.onActivated.dispatch(this);},deactivateComplete:function(entity){this.onDeactivated.dispatch(this);},cleanup:function(){if(!ig.game.hasLevel){this.onActivated.removeAll();this.onActivated.forget();this.onDeactivated.removeAll();this.onDeactivated.forget();}
this.parent();}});});

// lib/plusplus/ui/ui-button.js
ig.baked=true;ig.module('plusplus.ui.ui-button').requires('plusplus.ui.ui-interactive').defines(function(){"use strict";ig.UIButton=ig.global.UIButton=ig.UIInteractive.extend({alwaysToggleActivate:true,activateComplete:function(entity){this.parent(entity);this.animRelease();if(!this.alwaysToggleActivate){this.animOverride(this.getDirectionalAnimName("pressed"),{lock:true});}
else{this.animOverride(this.getDirectionalAnimName("tapped"));}},deactivateComplete:function(entity){this.parent(entity);this.animRelease();if(!this.alwaysToggleActivate){this.animOverride(this.getDirectionalAnimName("released"),{lock:true});}
else{this.animOverride(this.getDirectionalAnimName("tapped"));}}});});

// lib/game/components/game-state.js
ig.baked=true;ig.module('game.components.game-state').requires('plusplus.core.config').defines(function(){"use strict";var _c=ig.CONFIG;ig.GameState=ig.Class.extend({pw:0,score:0,clothesGoalAchieved:false,presentGoalAchieved:false,timeGoalAchieved:false,placeGoalAchieved:false,confirmationGoalAchieved:false,newGoalAchieved:false});});

// lib/game/ui/command.js
ig.baked=true;ig.module('game.ui.command').requires('plusplus.core.config','plusplus.ui.ui-button','game.components.game-state').defines(function(){var _c=ig.CONFIG;ig.Command=ig.global.Command=ig.UIButton.extend({animInit:'mouseOut',fixed:false,posAsPct:false,name:'command',command:'',zIndex:5,animSettings:{mouseOut:{frameTime:1,sequence:[0]},mouseOver:{frameTime:1,sequence:[1]},blink:{frameTime:0.5,sequence:[1,0]}},inFocus:function(){return((this.pos.x<=(ig.input.mouse.x+ig.game.screen.x))&&((ig.input.mouse.x+ig.game.screen.x)<=this.pos.x+this.size.x)&&(this.pos.y<=(ig.input.mouse.y+ig.game.screen.y))&&((ig.input.mouse.y+ig.game.screen.y)<=this.pos.y+this.size.y));},handleMouseOver:function(){this.inFocus()?this.animOverride('mouseOver'):this.animOverride('mouseOut');},handleCommandInput:function(){if((this.inFocus()&&ig.input.pressed('click'))||(ig.input.pressed(this.command))){var commandPreview=ig.game.getEntitiesByClass(ig.CommandPreview)[0];commandPreview.setCurrentCommand(this);commandPreview.setEntityName('');commandPreview.setHasCombinedCommand(false);ig.game.commandExecution.hasActiveCommand=false;}
else{if(ig.input.pressed('score')){console.log(ig.game.gameState.score);}
if(ig.input.pressed('pw'))ig.game.gameState.pw=1;if(ig.input.pressed('Look')&&ig.game.gameState.pw===1)ig.game.gameState.pw=2;if(ig.input.pressed('Open')&&ig.game.gameState.pw===2)ig.game.gameState.pw=3;if(ig.input.pressed('Give')&&ig.game.gameState.pw===3){ig.game.gameState.placeGoalAchieved=true;ig.game.gameState.clothesGoalAchieved=true;ig.game.gameState.presentGoalAchieved=true;ig.game.gameState.timeGoalAchieved=true;ig.game.gameState.placeGoalAchieved=true;ig.game.gameState.confirmationGoalAchieved=true;}}},update:function(){this.parent();this.handleMouseOver();this.handleCommandInput();}});});

// lib/game/entities/item-goal-clothes.js
ig.baked=true;ig.module('game.entities.item-goal-clothes').requires('plusplus.core.entity','plusplus.core.config','game.components.game-state').defines(function(){var _c=ig.CONFIG;ig.EntityItemGoalClothes=ig.global.EntityItemGoalClothes=ig.EntityExtended.extend({name:'goal clothes',_wmScalable:true,collides:ig.Entity.COLLIDES.NEVER,size:{x:10,y:10},pos:{x:120,y:42},zIndex:_c.Z_INDEX_ABOVE_PLAYER,animSheet:new ig.AnimationSheet(_c.PATH_TO_MEDIA+'tic.png',10,10),animInit:'idle',animSettings:{idle:{frameTime:1,sequence:[0]}},update:function(){this.parent();if(ig.input.pressed('click')||ig.input.pressed('Esc')){ig.game.removeEntity(this);}}});});

// lib/game/entities/item-goal-confirmation.js
ig.baked=true;ig.module('game.entities.item-goal-confirmation').requires('plusplus.core.entity','plusplus.core.config','game.components.game-state').defines(function(){var _c=ig.CONFIG;ig.EntityItemGoalConfirmation=ig.global.EntityItemGoalConfirmation=ig.EntityExtended.extend({name:'goal confirmation',_wmScalable:true,collides:ig.Entity.COLLIDES.NEVER,size:{x:10,y:10},pos:{x:120,y:42},zIndex:_c.Z_INDEX_ABOVE_PLAYER,animSheet:new ig.AnimationSheet(_c.PATH_TO_MEDIA+'tic.png',10,10),animInit:'idle',animSettings:{idle:{frameTime:1,sequence:[0]}},update:function(){this.parent();if(ig.input.pressed('click')||ig.input.pressed('Esc')){ig.game.removeEntity(this);}}});});

// lib/game/entities/item-goal-place.js
ig.baked=true;ig.module('game.entities.item-goal-place').requires('plusplus.core.entity','plusplus.core.config','game.components.game-state').defines(function(){var _c=ig.CONFIG;ig.EntityItemGoalPlace=ig.global.EntityItemGoalPlace=ig.EntityExtended.extend({name:'goal place',_wmScalable:true,collides:ig.Entity.COLLIDES.NEVER,size:{x:10,y:10},pos:{x:120,y:42},zIndex:_c.Z_INDEX_ABOVE_PLAYER,animSheet:new ig.AnimationSheet(_c.PATH_TO_MEDIA+'tic.png',10,10),animInit:'idle',animSettings:{idle:{frameTime:1,sequence:[0]}},update:function(){this.parent();if(ig.input.pressed('click')||ig.input.pressed('Esc')){ig.game.removeEntity(this);}}});});

// lib/game/entities/item-goal-present.js
ig.baked=true;ig.module('game.entities.item-goal-present').requires('plusplus.core.entity','plusplus.core.config','game.components.game-state').defines(function(){var _c=ig.CONFIG;ig.EntityItemGoalPresent=ig.global.EntityItemGoalPresent=ig.EntityExtended.extend({name:'goal Present',_wmScalable:true,collides:ig.Entity.COLLIDES.NEVER,size:{x:10,y:10},pos:{x:120,y:42},zIndex:_c.Z_INDEX_ABOVE_PLAYER,animSheet:new ig.AnimationSheet(_c.PATH_TO_MEDIA+'tic.png',10,10),animInit:'idle',animSettings:{idle:{frameTime:1,sequence:[0]}},update:function(){this.parent();if(ig.input.pressed('click')||ig.input.pressed('Esc')){ig.game.removeEntity(this);}}});});

// lib/game/entities/item-goal-time.js
ig.baked=true;ig.module('game.entities.item-goal-time').requires('plusplus.core.entity','plusplus.core.config','game.components.game-state').defines(function(){var _c=ig.CONFIG;ig.EntityItemGoalTime=ig.global.EntityItemGoalTime=ig.EntityExtended.extend({name:'goal time',_wmScalable:true,collides:ig.Entity.COLLIDES.NEVER,size:{x:10,y:10},pos:{x:120,y:42},zIndex:_c.Z_INDEX_ABOVE_PLAYER,animSheet:new ig.AnimationSheet(_c.PATH_TO_MEDIA+'tic.png',10,10),animInit:'idle',animSettings:{idle:{frameTime:1,sequence:[0]}},update:function(){this.parent();if(ig.input.pressed('click')||ig.input.pressed('Esc')){ig.game.removeEntity(this);}}});});

// lib/game/entities/item-map.js
ig.baked=true;ig.module('game.entities.item-map').requires('plusplus.core.entity','plusplus.core.config','game.components.game-state','game.entities.item-goal-clothes','game.entities.item-goal-confirmation','game.entities.item-goal-place','game.entities.item-goal-present','game.entities.item-goal-time').defines(function(){var _c=ig.CONFIG;ig.EntityItemMap=ig.global.EntityItemMap=ig.EntityExtended.extend({name:'map',_wmScalable:true,collides:ig.Entity.COLLIDES.NEVER,size:{x:216,y:111},pos:{x:52,y:28},zIndex:_c.Z_INDEX_ABOVE_PLAYER,animSheet:new ig.AnimationSheet(_c.PATH_TO_MEDIA+'item-map.png',216,111),animInit:'idle',animSettings:{idle:{frameTime:1,sequence:[0]},en:{frameTime:1,sequence:[1]},es:{frameTime:1,sequence:[2]}},first:true,localized:false,interact:function(command){},init:function(x,y,settings){this.addAnim('idle',1,[0]);this.addAnim('en',1,[1]);this.addAnim('es',1,[2]);this.currentAnim=this.anims[ig.game.i18n.getLocalizedImagePath('map')].rewind();this.parent(x,y,settings);},update:function(){if(this.localized===false){this.currentAnim=this.anims[ig.game.i18n.getLocalizedImagePath('map')].rewind();this.localized=true;}
this.parent();if(this.first){if(ig.game.gameState.clothesGoalAchieved){ig.game.spawnEntity(ig.EntityItemGoalClothes,120,42);}
if(ig.game.gameState.presentGoalAchieved){ig.game.spawnEntity(ig.EntityItemGoalPresent,116,54);}
if(ig.game.gameState.timeGoalAchieved){ig.game.spawnEntity(ig.EntityItemGoalTime,109,66);}
if(ig.game.gameState.placeGoalAchieved){ig.game.spawnEntity(ig.EntityItemGoalPlace,101,78);}
if(ig.game.gameState.confirmationGoalAchieved){ig.game.spawnEntity(ig.EntityItemGoalConfirmation,93,92);}
this.first=false;}
if(ig.input.pressed('click')||ig.input.pressed('Esc')){ig.game.removeEntity(this);this.first=true;}}});});

// lib/game/ui/command-question-mark.js
ig.baked=true;ig.module('game.ui.command-question-mark').requires('plusplus.core.config','plusplus.ui.ui-button','game.ui.command','game.entities.item-map','game.components.game-state').defines(function(){var _c=ig.CONFIG;ig.CommandQuestionMark=ig.global.CommandQuestionMark=ig.Command.extend({command:'ThingsToDo',commandName:'Thing to do',name:'question-mark',state:'off',size:{x:20,y:20},animSheet:new ig.AnimationSheet(_c.PATH_TO_MEDIA+'ui/item-question.gif',20,20),handleCommandInput:function(){if(this.state==='off'&&((this.inFocus()&&ig.input.pressed('click'))||(ig.input.pressed('Question')))){this.state='on';ig.game.spawnEntity("EntityItemMap",0,0);ig.game.gameState.newGoalAchieved=false;}else if(ig.input.pressed('click')||ig.input.pressed('Esc')){this.state='off';}},handleMouseOver:function(){if(ig.game.gameState.newGoalAchieved){this.animOverride('blink');}
else
this.inFocus()?this.animOverride('mouseOver'):this.animOverride('mouseOut');}});});

// lib/game/entities/item-clock.js
ig.baked=true;ig.module('game.entities.item-clock').requires('plusplus.core.entity','plusplus.core.config','game.components.i18n','game.ui.command-question-mark').defines(function(){var _c=ig.CONFIG;ig.EntityItemClock=ig.global.EntityItemClock=ig.EntityExtended.extend({name:'clock',_wmScalable:true,collides:ig.Entity.COLLIDES.NEVER,size:{x:8,y:8},interactionDistance:100,interact:function(command){if(command.command==='Look'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('lookClock1'),ig.game.i18n.getMessage('lookClock2'),ig.game.i18n.getMessage('lookClock3'));if(!ig.game.gameState.timeGoalAchieved){var theme=new ig.Sound(_c.PATH_TO_MEDIA+'music/newGoalAchieved.*');theme.play();ig.game.gameState.timeGoalAchieved=true;ig.game.gameState.newGoalAchieved=true;}}
else if(command.command==='Use'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('useClock1'));}
else if(command.command==='Pick up'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('pickupClock1'));}
else if(command.command==='Talk'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('talkClock1'));}
else{ig.game.getPlayer().speak(ig.game.i18n.getMessage('defaultClock1'));}},combine:function(entity){ig.game.getPlayer().speak('No, no tiene sentido');}});});

// lib/game/entities/item-blackboard.js
ig.baked=true;ig.module('game.entities.item-blackboard').requires('plusplus.core.entity','plusplus.core.config').defines(function(){var _c=ig.CONFIG;ig.EntityItemBlackboard=ig.global.EntityItemBlackboard=ig.EntityExtended.extend({name:'blackboard',_wmScalable:true,persistent:true,collides:ig.Entity.COLLIDES.NEVER,size:{x:28,y:20},sealed:true,state:'untouched',matchingInventoryItem:ig.EntityInventoryItemStick,interactionDistance:30,interact:function(command){if(command.command==='Look'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('lookBlackboard1'),ig.game.i18n.getMessage('lookBlackboard2'),ig.game.i18n.getMessage('lookBlackboard3'));}
else if(command.command==='Use'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('useBlackboard1'));}
else if(command.command==='Give'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('giveBlackboard1'));}
else if(command.command==='Push'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('pushBlackboard1'));}
else if(command.command==='Pick up'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('pickupBlackboard1'));}
else if(command.command==='Pull'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('pullBlackboard1'));}
else if(command.command==='Open'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('openBlackboard1'));}
else if(command.command==='Close'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('closeBlackboard1'));}
else if(command.command==='Talk'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('talkBlackboard1'),ig.game.i18n.getMessage('talkBlackboard2'),ig.game.i18n.getMessage('talkBlackboard3'));}
else{ig.game.getPlayer().speak(ig.game.i18n.getMessage('defaultBlackboard1'));}}});});

// lib/game/entities/player-spawner.js
ig.baked=true;ig.module('game.entities.player-spawner').requires('plusplus.core.entity','plusplus.core.config').defines(function(){var _c=ig.CONFIG;ig.EntityPlayerSpawner=ig.global.EntityPlayerSpawner=ig.EntityExtended.extend({name:'spawner',_wmBoxColor:'rgba(0, 255, 0, 0.7)',size:{x:8,y:8}});});

// lib/game/entities/item-windowR.js
ig.baked=true;ig.module('game.entities.item-windowR').requires('plusplus.core.entity','plusplus.core.config').defines(function(){var _c=ig.CONFIG;ig.EntityItemWindowR=ig.global.EntityItemWindowR=ig.EntityExtended.extend({name:'window',_wmScalable:true,collides:ig.Entity.COLLIDES.NEVER,size:{x:20,y:32},persistent:true,interactionDistance:15,interact:function(command){if(command.command==='Look'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('lookWindow1'));}
else if(command.command==='Open'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('openWindow1'));}
else if(command.command==='Close'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('closeWindow1'));}
else if(command.command==='Talk'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('talkWindow1'),ig.game.i18n.getMessage('talkWindow2'),ig.game.i18n.getMessage('talkWindow3'));}
else{ig.game.getPlayer().speak(ig.game.i18n.getMessage('defaultWindow1'));}}});});

// lib/game/entities/inventory-item-tphone.js
ig.baked=true;ig.module('game.entities.inventory-item-tphone').requires('plusplus.core.entity','plusplus.core.config').defines(function(){var _c=ig.CONFIG;ig.EntityInventoryItemTphone=ig.global.EntityInventoryItemTphone=ig.EntityExtended.extend({name:'tphone',state:'apagat',size:{x:30,y:16},animSheet:new ig.AnimationSheet(_c.PATH_TO_MEDIA+'inventory-item-cellphone.gif',30,16),animInit:'idle',animSettings:{idle:{frameTime:1,sequence:[0]}},category:'inventory',interact:function(command){if(command.command==='Look'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('lookInventoryTPhone1'));}
else if(command.command==='Use'){if(this.state==='apagat'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('useInventoryTPhone1'),ig.game.i18n.getMessage('useInventoryTPhone2'));this.state='ences';}
else{if(ig.game.gameState.confirmationGoalAchieved){ig.game.getPlayer().speak(ig.game.i18n.getMessage('useInventoryTPhone4'),ig.game.i18n.getMessage('useInventoryTPhone5'));}
else{ig.game.getPlayer().speak(ig.game.i18n.getMessage('useInventoryTPhone3'));}}}
else if(command.command==='Give'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('giveInventoryTPhone1'));}
else if(command.command==='Push'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('pushInventoryTPhone1'));}
else if(command.command==='Pick up'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('pickupInventoryTPhone1'));}
else if(command.command==='Pull'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('pullInventoryTPhone1'));}
else if(command.command==='Open'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('openInventoryTPhone1'));}
else if(command.command==='Close'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('closeInventoryTPhone1'));}
else if(command.command==='Talk'){if(this.state=='apagat'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('talkInventoryTPhone9'));}else if(this.state==='trucat'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('talkInventoryTPhone8'));}
else{this.state='trucat';var theme=new ig.Sound(_c.PATH_TO_MEDIA+'music/newGoalAchieved.*');theme.play();ig.game.gameState.confirmationGoalAchieved=true;ig.game.gameState.newGoalAchieved=true;ig.game.getPlayer().speak(ig.game.i18n.getMessage('talkInventoryTPhone1'),ig.game.i18n.getMessage('talkInventoryTPhone2'),ig.game.i18n.getMessage('talkInventoryTPhone3'),ig.game.i18n.getMessage('talkInventoryTPhone4'),ig.game.i18n.getMessage('talkInventoryTPhone5'),ig.game.i18n.getMessage('talkInventoryTPhone6'),ig.game.i18n.getMessage('talkInventoryTPhone7'));}}
else{ig.game.getPlayer().speak(ig.game.i18n.getMessage('defaultInventoryTPhone1'));}}});});

// lib/game/entities/item-drawer.js
ig.baked=true;ig.module('game.entities.item-drawer').requires('plusplus.core.entity','plusplus.core.config','game.entities.inventory-item-tphone').defines(function(){var _c=ig.CONFIG;ig.EntityItemDrawer=ig.global.EntityItemDrawer=ig.EntityExtended.extend({name:'drawer',_wmScalable:true,collides:ig.Entity.COLLIDES.NEVER,size:{x:12,y:6},persistent:true,state:'closed',matchingInventoryItem:ig.EntityInventoryItemTphone,interactionDistance:12,interact:function(command){if(command.command==='Look'){if(ig.game.roomState.tphone.isPickedUp===false){ig.game.getPlayer().speak(ig.game.i18n.getMessage('lookDrawer1'));}
else{ig.game.getPlayer().speak(ig.game.i18n.getMessage('lookDrawer2'));}}
else if(command.command==='Use'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('useDrawer1'));}
else if(command.command==='Give'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('giveDrawer1'));}
else if(command.command==='Push'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('pushDrawer1'));}
else if(command.command==='Pick up'){if(this.state==='opened'){if(ig.game.roomState.tphone.isPickedUp===false){ig.game.getPlayer().speak(ig.game.i18n.getMessage('pickupDrawer1'));ig.game.inventory.addItem(this.matchingInventoryItem,this);ig.game.roomState.tphone.isPickedUp=true;}else{ig.game.getPlayer().speak(ig.game.i18n.getMessage('pickupDrawer3'));}}else{ig.game.getPlayer().speak(ig.game.i18n.getMessage('pickupDrawer2'));}}
else if(command.command==='Pull'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('pullDrawer1'));}
else if(command.command==='Open'){if(this.state==='opened'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('openDrawer1'));}else{ig.game.getPlayer().speak(ig.game.i18n.getMessage('openDrawer2'));this.state='opened'}}
else if(command.command==='Close'){if(this.state==='opened'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('closeDrawer1'));this.state='closed';}else{ig.game.getPlayer().speak(ig.game.i18n.getMessage('closeDrawer2'));}}
else if(command.command==='Talk'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('talkDrawer1'));}
else{ig.game.getPlayer().speak(ig.game.i18n.getMessage('defaultDrawer1'));}}});});

// lib/game/levels/study.js
ig.baked=true;ig.module('game.levels.study').requires('impact.image','game.entities.cursor','game.entities.item-papers','plusplus.entities.levelchange','game.entities.item-clock','game.entities.item-blackboard','game.entities.player-spawner','game.entities.item-windowR','game.entities.item-drawer','game.entities.player').defines(function(){LevelStudy={"entities":[{"type":"EntityCursor","x":140,"y":64},{"type":"EntityItemPapers","x":156,"y":76,"settings":{"size":{"x":20,"y":12}}},{"type":"EntityLevelchange","x":232,"y":64,"settings":{"size":{"x":16,"y":44},"playerSpawnerName":"spawner-a","levelName":"kitchen","name":"kitchen"}},{"type":"EntityLevelchange","x":112,"y":64,"settings":{"size":{"x":16,"y":30},"levelName":"bedroom","name":"bedroom"}},{"type":"EntityItemClock","x":154,"y":50,"settings":{"size":{"x":8,"y":8}}},{"type":"EntityItemBlackboard","x":184,"y":56,"settings":{"size":{"x":28,"y":20}}},{"type":"EntityPlayerSpawner","x":116,"y":100,"settings":{"name":"spawner-b"}},{"type":"EntityItemWindowR","x":64,"y":52,"settings":{"size":{"x":20,"y":32}}},{"type":"EntityItemDrawer","x":168,"y":92,"settings":{"size":{"x":12,"y":6}}},{"type":"EntityPlayerSpawner","x":216,"y":108,"settings":{"name":"spawner-c"}},{"type":"EntityPlayerSpawner","x":152,"y":104},{"type":"EntityPlayer","x":179,"y":104}],"layer":[{"name":"background","width":40,"height":25,"linkWithCollision":false,"visible":1,"tilesetName":"media/study.gif","repeat":false,"preRender":true,"distance":"1","tilesize":8,"foreground":false,"data":[[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40],[41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80],[81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120],[121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160],[161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200],[201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240],[241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280],[281,282,283,284,285,286,287,288,289,290,291,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,307,308,309,310,311,312,313,314,315,316,317,318,319,320],[321,322,323,324,325,326,327,328,329,330,331,332,333,334,335,336,337,338,339,340,341,342,343,344,345,346,347,348,349,350,351,352,353,354,355,356,357,358,359,360],[361,362,363,364,365,366,367,368,369,370,371,372,373,374,375,376,377,378,379,380,381,382,383,384,385,386,387,388,389,390,391,392,393,394,395,396,397,398,399,400],[401,402,403,404,405,406,407,408,409,410,411,412,413,414,415,416,417,418,419,420,421,422,423,424,425,426,427,428,429,430,431,432,433,434,435,436,437,438,439,440],[441,442,443,444,445,446,447,448,449,450,451,452,453,454,455,456,457,458,459,460,461,462,463,464,465,466,467,468,469,470,471,472,473,474,475,476,477,478,479,480],[481,482,483,484,485,486,487,488,489,490,491,492,493,494,495,496,497,498,499,500,501,502,503,504,505,506,507,508,509,510,511,512,513,514,515,516,517,518,519,520],[521,522,523,524,525,526,527,528,529,530,531,532,533,534,535,536,537,538,539,540,541,542,543,544,545,546,547,548,549,550,551,552,553,554,555,556,557,558,559,560],[561,562,563,564,565,566,567,568,569,570,571,572,573,574,575,576,577,578,579,580,581,582,583,584,585,586,587,588,589,590,591,592,593,594,595,596,597,598,599,600],[601,602,603,604,605,606,607,608,609,610,611,612,613,614,615,616,617,618,619,620,621,622,623,624,625,626,627,628,629,630,631,632,633,634,635,636,637,638,639,640],[641,642,643,644,645,646,647,648,649,650,651,652,653,654,655,656,657,658,659,660,661,662,663,664,665,666,667,668,669,670,671,672,673,674,675,676,677,678,679,680],[681,682,683,684,685,686,687,688,689,690,691,692,693,694,695,696,697,698,699,700,701,702,703,704,705,706,707,708,709,710,711,712,713,714,715,716,717,718,719,720],[721,722,723,724,725,726,727,728,729,730,731,732,733,734,735,736,737,738,739,740,741,742,743,744,745,746,747,748,749,750,751,752,753,754,755,756,757,758,759,760],[761,762,763,764,765,766,767,768,769,770,771,772,773,774,775,776,777,778,779,780,781,782,783,784,785,786,787,788,789,790,791,792,793,794,795,796,797,798,799,800],[801,802,803,804,805,806,807,808,809,810,811,812,813,814,815,816,817,818,819,820,821,822,823,824,825,826,827,828,829,830,831,832,833,834,835,836,837,838,839,840],[841,842,843,844,845,846,847,848,849,850,851,852,853,854,855,856,857,858,859,860,861,862,863,864,865,866,867,868,869,870,871,872,873,874,875,876,877,878,879,880],[881,882,883,884,885,886,887,888,889,890,891,892,893,894,895,896,897,898,899,900,901,902,903,904,905,906,907,908,909,910,911,912,913,914,915,916,917,918,919,920],[921,922,923,924,925,926,927,928,929,930,931,932,933,934,935,936,937,938,939,940,941,942,943,944,945,946,947,948,949,950,951,952,953,954,955,956,957,958,959,960],[961,962,963,964,965,966,967,968,969,970,971,972,973,974,975,976,977,978,979,980,981,982,983,984,985,986,987,988,989,990,991,992,993,994,995,996,997,998,999,1000]]},{"name":"collision","width":40,"height":25,"linkWithCollision":false,"visible":1,"tilesetName":"","repeat":false,"preRender":false,"distance":1,"tilesize":8,"foreground":false,"data":[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,51,51,51,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,1,0,0,0,0,0,0,0,0,0,0,1,1,0,0,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,1,0,0,0,0,0,1,1,1,1,1,1,1,51,51,1,51,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,1,38,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,51,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,12,12,12,12,12,12,0,0,0,0,0,14,0,13,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,13,1,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]},{"name":"pathfinding","width":40,"height":25,"linkWithCollision":false,"visible":1,"tilesetName":"media/pathfindingtiles_plusplus_8.png","repeat":false,"preRender":false,"distance":"1","tilesize":8,"foreground":false,"data":[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,4,4,4,4,4,0,0,0,0,0,0,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,4,1,1,1,4,0,0,0,0,0,0,4,1,1,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,4,1,1,1,4,0,0,0,0,0,0,4,1,1,4,4,1,1,1,1,4,4,4,4,4,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,4,1,1,1,4,4,4,4,4,4,0,4,0,0,4,4,1,1,1,1,4,4,1,1,4,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,4,1,1,1,4,0,4,1,1,4,4,4,0,0,4,4,1,1,1,1,4,4,1,1,4,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,4,1,1,1,4,0,4,1,1,4,1,1,1,1,1,1,4,1,1,0,4,4,1,1,4,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,4,4,1,4,4,0,4,1,1,4,1,1,1,1,1,1,4,1,1,0,0,0,1,1,4,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,4,4,1,0,0,0,0,0,0,0,1,1,1,1,1,1,4,0,0,0,0,0,1,1,4,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,4,4,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,0,0,0,0,0,0],[0,0,0,0,0,0,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]}]};LevelStudyResources=[new ig.Image('media/study.gif'),new ig.Image('media/pathfindingtiles_plusplus_8.png')];});

// lib/game/entities/item-clothes.js
ig.baked=true;ig.module('game.entities.item-clothes').requires('plusplus.core.entity','plusplus.core.config').defines(function(){var _c=ig.CONFIG;ig.EntityItemClothes=ig.global.EntityItemClothes=ig.EntityExtended.extend({name:'clothes',_wmScalable:true,collides:ig.Entity.COLLIDES.NEVER,size:{x:24,y:32},interactionDistance:16,interact:function(command){if(command.command==='Look'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('lookClothes1'),ig.game.i18n.getMessage('lookClothes2'),ig.game.i18n.getMessage('lookClothes3'));if(!ig.game.gameState.clothesGoalAchieved){var theme=new ig.Sound(_c.PATH_TO_MEDIA+'music/newGoalAchieved.*');theme.play();ig.game.gameState.clothesGoalAchieved=true;ig.game.gameState.newGoalAchieved=true;}}
else if(command.command==='Use'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('useClothes1'));}
else if(command.command==='Give'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('giveClothes1'));}
else if(command.command==='Push'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('pushClothes1'));}
else if(command.command==='Pick up'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('pickupClothes1'));}
else if(command.command==='Pull'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('pullClothes1'));}
else if(command.command==='Open'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('openClothes1'));}
else if(command.command==='Close'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('closeClothes1'));}
else if(command.command==='Talk'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('talkClothes1'));}
else{ig.game.getPlayer().speak(ig.game.i18n.getMessage('defaultClothes1'));}}});});

// lib/game/entities/item-guitar.js
ig.baked=true;ig.module('game.entities.item-guitar').requires('plusplus.core.entity','plusplus.core.config').defines(function(){var _c=ig.CONFIG;ig.EntityItemGuitar=ig.global.EntityItemGuitar=ig.EntityExtended.extend({name:'guitar',_wmScalable:true,collides:ig.Entity.COLLIDES.NEVER,size:{x:12,y:40},persistent:true,state:'full',matchingInventoryItem:ig.EntityInventoryItemGumex,interactionDistance:12,interact:function(command){if(command.command==='Look'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('lookGuitar1'));}
else if(command.command==='Use'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('useGuitar1'),ig.game.i18n.getMessage('useGuitar2'));ig.Sound.useWebAudio=false;var theme=new ig.Sound(_c.PATH_TO_MEDIA+'music/pedal.*');theme.play();}
else if(command.command==='Give'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('giveGuitar1'));}
else if(command.command==='Push'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('pushGuitar1'));}
else if(command.command==='Pick up'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('pickupGuitar1'));}
else if(command.command==='Pull'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('pullGuitar1'));}
else if(command.command==='Open'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('openGuitar1'));}
else if(command.command==='Close'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('closeGuitar1'));}
else if(command.command==='Talk'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('talkGuitar1'));}
else{ig.game.getPlayer().speak(ig.game.i18n.getMessage('defaultGuitar1'));}}});});

// lib/game/entities/item-bed.js
ig.baked=true;ig.module('game.entities.item-bed').requires('plusplus.core.entity','plusplus.core.config').defines(function(){var _c=ig.CONFIG;ig.EntityItemBed=ig.global.EntityItemBed=ig.EntityExtended.extend({name:'bed',_wmScalable:true,collides:ig.Entity.COLLIDES.NEVER,size:{x:68,y:20},persistent:true,interactionDistance:12,interact:function(command){if(command.command==='Look'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('lookBed1'));}
else if(command.command==='Use'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('useBed1'));}
else if(command.command==='Give'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('giveBed1'));}
else if(command.command==='Push'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('pushBed1'));}
else if(command.command==='Pick up'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('pickupBed1'));}
else if(command.command==='Pull'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('pullBed1'));}
else if(command.command==='Open'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('openBed1'));}
else if(command.command==='Close'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('closeBed1'));}
else if(command.command==='Talk'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('talkBed1'));}
else{ig.game.getPlayer().speak(ig.game.i18n.getMessage('defaultBed1'));}}});});

// lib/game/entities/item-pictureB.js
ig.baked=true;ig.module('game.entities.item-pictureB').requires('plusplus.core.entity','plusplus.core.config').defines(function(){var _c=ig.CONFIG;ig.EntityItemPictureB=ig.global.EntityItemPictureB=ig.EntityExtended.extend({name:'pictureB',_wmScalable:true,collides:ig.Entity.COLLIDES.NEVER,size:{x:20,y:32},persistent:true,state:'full',matchingInventoryItem:ig.EntityInventoryItemGumex,interactionDistance:60,interact:function(command){if(command.command==='Look'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('lookPictureB1'),ig.game.i18n.getMessage('lookPictureB2'));}
else if(command.command==='Use'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('usePictureB1'));}
else if(command.command==='Give'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('givePictureB1'));}
else if(command.command==='Push'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('pushPictureB1'));}
else if(command.command==='Pick up'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('pickupPictureB1'));}
else if(command.command==='Pull'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('pullPictureB1'));}
else if(command.command==='Open'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('openPictureB1'));}
else if(command.command==='Close'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('closePictureB1'));}
else if(command.command==='Talk'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('talkPictureB1'));}
else{ig.game.getPlayer().speak(ig.game.i18n.getMessage('defaultPictureB1'));}}});});

// lib/game/entities/item-windowB1.js
ig.baked=true;ig.module('game.entities.item-windowB1').requires('plusplus.core.entity','plusplus.core.config').defines(function(){var _c=ig.CONFIG;ig.EntityItemWindowB1=ig.global.EntityItemWindowB1=ig.EntityExtended.extend({name:'windowB1',_wmScalable:true,collides:ig.Entity.COLLIDES.NEVER,size:{x:26,y:32},persistent:true,interactionDistance:16,interact:function(command){if(command.command==='Look'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('lookWindow1'));}
else if(command.command==='Open'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('openWindow1'));}
else if(command.command==='Close'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('closeWindow1'));}
else if(command.command==='Talk'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('talkWindow1'),ig.game.i18n.getMessage('talkWindow2'),ig.game.i18n.getMessage('talkWindow3'));}
else{ig.game.getPlayer().speak(ig.game.i18n.getMessage('defaultWindow1'));}}});});

// lib/game/entities/item-windowB2.js
ig.baked=true;ig.module('game.entities.item-windowB2').requires('plusplus.core.entity','plusplus.core.config').defines(function(){var _c=ig.CONFIG;ig.EntityItemWindowB2=ig.global.EntityItemWindowB2=ig.EntityExtended.extend({name:'windowB2',_wmScalable:true,collides:ig.Entity.COLLIDES.NEVER,size:{x:26,y:32},persistent:true,interactionDistance:16,interact:function(command){if(command.command==='Look'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('lookWindow1'));}
else if(command.command==='Open'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('openWindow1'));}
else if(command.command==='Close'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('closeWindow1'));}
else if(command.command==='Talk'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('talkWindow1'),ig.game.i18n.getMessage('talkWindow2'),ig.game.i18n.getMessage('talkWindow3'));}
else{ig.game.getPlayer().speak(ig.game.i18n.getMessage('defaultWindow1'));}}});});

// lib/game/levels/bedroom.js
ig.baked=true;ig.module('game.levels.bedroom').requires('impact.image','game.entities.cursor','game.entities.player-spawner','plusplus.entities.levelchange','game.entities.item-clothes','game.entities.item-guitar','game.entities.item-bed','game.entities.item-pictureB','game.entities.item-windowB1','game.entities.item-windowB2','game.entities.player').defines(function(){LevelBedroom={"entities":[{"type":"EntityCursor","x":156,"y":44},{"type":"EntityPlayerSpawner","x":104,"y":124,"settings":{"name":"spawner-a"}},{"type":"EntityLevelchange","x":104,"y":128,"settings":{"size":{"x":32,"y":16},"name":"study","levelName":"study","playerSpawnerName":"spawner-b"}},{"type":"EntityItemClothes","x":96,"y":72,"settings":{"size":{"x":24,"y":32}}},{"type":"EntityItemGuitar","x":128,"y":56,"settings":{"size":{"x":12,"y":40}}},{"type":"EntityItemBed","x":192,"y":104,"settings":{"size":{"x":68,"y":20}}},{"type":"EntityItemPictureB","x":240,"y":56,"settings":{"size":{"x":20,"y":32}}},{"type":"EntityItemWindowB1","x":152,"y":56,"settings":{"size":{"x":26,"y":32}}},{"type":"EntityItemWindowB2","x":186,"y":56},{"type":"EntityPlayer","x":123,"y":116}],"layer":[{"name":"background","width":40,"height":25,"linkWithCollision":false,"visible":1,"tilesetName":"media/bedroom.gif","repeat":false,"preRender":true,"distance":"1","tilesize":8,"foreground":false,"data":[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,0,0,0,0,0],[0,0,0,0,0,0,0,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,0,0,0,0,0],[0,0,0,0,0,0,0,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,0,0,0,0,0],[0,0,0,0,0,0,0,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,0,0,0,0,0],[0,0,0,0,0,0,0,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,0,0,0,0,0],[0,0,0,0,0,0,0,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,0,0,0,0,0],[0,0,0,0,0,0,0,287,288,289,290,291,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,307,308,309,310,311,312,313,314,0,0,0,0,0],[0,0,0,0,0,0,0,327,328,329,330,331,332,333,334,335,336,337,338,339,340,341,342,343,344,345,346,347,348,349,350,351,352,353,354,0,0,0,0,0],[0,0,0,0,0,0,0,367,368,369,370,371,372,373,374,375,376,377,378,379,380,381,382,383,384,385,386,387,388,389,390,391,392,393,394,0,0,0,0,0],[0,0,0,0,0,0,0,407,408,409,410,411,412,413,414,415,416,417,418,419,420,421,422,423,424,425,426,427,428,429,430,431,432,433,434,0,0,0,0,0],[0,0,0,0,0,0,0,447,448,449,450,451,452,453,454,455,456,457,458,459,460,461,462,463,464,465,466,467,468,469,470,471,472,473,474,0,0,0,0,0],[0,0,0,0,0,0,0,487,488,489,490,491,492,493,494,495,496,497,498,499,500,501,502,503,504,505,506,507,508,509,510,511,512,513,514,0,0,0,0,0],[0,0,0,0,0,0,0,527,528,529,530,531,532,533,534,535,536,537,538,539,540,541,542,543,544,545,546,547,548,549,550,551,552,553,554,0,0,0,0,0],[0,0,0,0,0,0,0,567,568,569,570,571,572,573,574,575,576,577,578,579,580,581,582,583,584,585,586,587,588,589,590,591,592,593,594,0,0,0,0,0],[0,0,0,0,0,0,0,607,608,609,610,611,612,613,614,615,616,617,618,619,620,621,622,623,624,625,626,627,628,629,630,631,632,633,634,0,0,0,0,0],[0,0,0,0,0,0,0,647,648,649,650,651,652,653,654,655,656,657,658,659,660,661,662,663,664,665,666,667,668,669,670,671,672,673,674,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]},{"name":"collision","width":40,"height":25,"linkWithCollision":false,"visible":1,"tilesetName":"","repeat":false,"preRender":false,"distance":1,"tilesize":8,"foreground":false,"data":[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,1,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,1,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,12,12,12,12,12,12,51,1,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,50,50,50,50,51,51,51,51,1,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,50,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]},{"name":"pathfinding","width":40,"height":25,"linkWithCollision":false,"visible":1,"tilesetName":"media/pathfindingtiles_plusplus_8.png","repeat":false,"preRender":false,"distance":"1","tilesize":8,"foreground":false,"data":[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,0,0,0,4,0,0,0,0,0,0,4,4,4,4,4,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,0,0,0,4,0,0,0,0,0,0,4,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,4,1,1,1,4,1,1,1,1,0,0,4,1,1,1,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,4,1,1,1,4,1,1,1,1,0,0,4,1,1,1,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,1,1,4,1,1,1,4,1,1,1,1,0,1,4,1,1,1,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,1,1,4,1,1,1,4,1,1,1,1,0,1,4,1,1,1,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,1,1,4,1,1,1,4,1,1,0,0,0,0,4,1,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,4,4,1,4,4,1,4,4,4,1,4,4,1,4,4,4,4,4,4,1,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]}]};LevelBedroomResources=[new ig.Image('media/bedroom.gif'),new ig.Image('media/pathfindingtiles_plusplus_8.png')];});

// lib/game/entities/item-pictureK.js
ig.baked=true;ig.module('game.entities.item-pictureK').requires('plusplus.core.entity','plusplus.core.config').defines(function(){var _c=ig.CONFIG;ig.EntityItemPictureK=ig.global.EntityItemPictureK=ig.EntityExtended.extend({name:'pictureK',_wmScalable:true,collides:ig.Entity.COLLIDES.NEVER,size:{x:14,y:12},persistent:true,state:'full',clicks:0,interactionDistance:40,interact:function(command){if(command.command==='Look'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('lookPictureK1'));}
else if(command.command==='Use'){if(this.clicks>4){ig.game.getPlayer().speak(ig.game.i18n.getMessage('defaultPictureK1'));}
else ig.game.getPlayer().speak(ig.game.i18n.getMessage('usePictureK1'));this.clicks++;}
else if(command.command==='Give'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('givePictureK1'));}
else if(command.command==='Push'){if(this.clicks>4){ig.game.getPlayer().speak(ig.game.i18n.getMessage('defaultPictureK1'));}
else ig.game.getPlayer().speak(ig.game.i18n.getMessage('pushPictureK1'));this.clicks++;}
else if(command.command==='Pick up'){if(this.clicks>4){ig.game.getPlayer().speak(ig.game.i18n.getMessage('defaultPictureK1'));}
else ig.game.getPlayer().speak(ig.game.i18n.getMessage('pickupPictureK1'));this.clicks++;}
else if(command.command==='Pull'){if(this.clicks>4){ig.game.getPlayer().speak(ig.game.i18n.getMessage('defaultPictureK1'));}
else ig.game.getPlayer().speak(ig.game.i18n.getMessage('pullPictureK1'));this.clicks++;}
else if(command.command==='Open'){if(this.clicks>4){ig.game.getPlayer().speak(ig.game.i18n.getMessage('defaultPictureK1'));}
else ig.game.getPlayer().speak(ig.game.i18n.getMessage('openPictureK1'));this.clicks++;}
else if(command.command==='Close'){if(this.clicks>4){ig.game.getPlayer().speak(ig.game.i18n.getMessage('defaultPictureK1'));}
else ig.game.getPlayer().speak(ig.game.i18n.getMessage('closePictureK1'));this.clicks++;}
else if(command.command==='Talk'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('talkPictureK1'));}
else{ig.game.getPlayer().speak(ig.game.i18n.getMessage('defaultPictureK1'));}}});});

// lib/game/entities/item-closet.js
ig.baked=true;ig.module('game.entities.item-closet').requires('plusplus.core.entity','plusplus.core.config').defines(function(){var _c=ig.CONFIG;ig.EntityItemCloset=ig.global.EntityItemCloset=ig.EntityExtended.extend({name:'closet',_wmScalable:true,collides:ig.Entity.COLLIDES.NEVER,size:{x:70,y:46},persistent:true,state:'full',matchingInventoryItem:ig.EntityInventoryItemGumex,interactionDistance:12,interact:function(command){if(command.command==='Look'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('lookCloset1'));}
else if(command.command==='Use'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('useCloset1'));}
else if(command.command==='Give'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('giveCloset1'));}
else if(command.command==='Push'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('pushCloset1'));}
else if(command.command==='Pick up'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('pickupCloset1'));}
else if(command.command==='Pull'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('pullCloset1'));}
else if(command.command==='Open'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('openCloset1'));}
else if(command.command==='Close'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('closeCloset1'));}
else if(command.command==='Talk'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('talkCloset1'));}
else{ig.game.getPlayer().speak(ig.game.i18n.getMessage('defaultCloset1'));}}});});

// lib/game/entities/item-fridge.js
ig.baked=true;ig.module('game.entities.item-fridge').requires('plusplus.core.entity','plusplus.core.config').defines(function(){var _c=ig.CONFIG;ig.EntityItemFridge=ig.global.EntityItemFridge=ig.EntityExtended.extend({name:'fridge',_wmScalable:true,collides:ig.Entity.COLLIDES.NEVER,size:{x:22,y:32},persistent:true,state:'full',matchingInventoryItem:ig.EntityInventoryItemGumex,interactionDistance:12,interact:function(command){if(command.command==='Look'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('lookFridge1'));}
else if(command.command==='Use'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('useFridge1'));}
else if(command.command==='Give'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('giveFridge1'));}
else if(command.command==='Push'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('pushFridge1'));}
else if(command.command==='Pick up'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('pickupFridge1'));}
else if(command.command==='Pull'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('pullFridge1'));}
else if(command.command==='Open'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('openFridge1'));}
else if(command.command==='Close'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('closeFridge1'));}
else if(command.command==='Talk'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('talkFridge1'));}
else{ig.game.getPlayer().speak(ig.game.i18n.getMessage('defaultFridge1'));}}});});

// lib/game/entities/item-freezer.js
ig.baked=true;ig.module('game.entities.item-freezer').requires('plusplus.core.entity','plusplus.core.config').defines(function(){var _c=ig.CONFIG;ig.EntityItemFreezer=ig.global.EntityItemFreezer=ig.EntityExtended.extend({name:'freezer',_wmScalable:true,collides:ig.Entity.COLLIDES.NEVER,size:{x:22,y:14},persistent:true,interactionDistance:30,interact:function(command){if(command.command==='Look'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('lookFreezer1'));}
else if(command.command==='Use'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('useFreezer1'));}
else if(command.command==='Give'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('giveFreezer1'));}
else if(command.command==='Push'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('pushFreezer1'));}
else if(command.command==='Pick up'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('pickupFreezer1'));}
else if(command.command==='Pull'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('pullFreezer1'));}
else if(command.command==='Open'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('openFreezer1'));}
else if(command.command==='Close'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('closeFreezer1'));}
else if(command.command==='Talk'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('talkFreezer1'));}
else{ig.game.getPlayer().speak(ig.game.i18n.getMessage('defaultFreezer1'));}},});});

// lib/game/levels/kitchen.js
ig.baked=true;ig.module('game.levels.kitchen').requires('impact.image','plusplus.entities.levelchange','game.entities.player-spawner','game.entities.cursor','game.entities.item-pictureK','game.entities.item-closet','game.entities.item-fridge','game.entities.item-freezer','game.entities.player').defines(function(){LevelKitchen={"entities":[{"type":"EntityLevelchange","x":72,"y":76,"settings":{"size":{"x":8,"y":44},"levelName":"study","playerSpawnerName":"spawner-c","name":"study"}},{"type":"EntityLevelchange","x":232,"y":76,"settings":{"size":{"x":16,"y":40},"playerSpawnerName":"spawner-a","levelName":"sitting-room","name":"sitting-room"}},{"type":"EntityPlayerSpawner","x":88,"y":112,"settings":{"name":"spawner-a"}},{"type":"EntityPlayerSpawner","x":216,"y":116,"settings":{"name":"spawner-b"}},{"type":"EntityCursor","x":148,"y":48},{"type":"EntityItemPictureK","x":96,"y":60,"settings":{"size":{"x":14,"y":12}}},{"type":"EntityItemCloset","x":114,"y":60,"settings":{"size":{"x":70,"y":46}}},{"type":"EntityItemFridge","x":184,"y":74,"settings":{"size":{"x":22,"y":32}}},{"type":"EntityItemFreezer","x":184,"y":60,"settings":{"size":{"x":22,"y":14}}},{"type":"EntityPlayer","x":135,"y":112}],"layer":[{"name":"background","width":40,"height":25,"linkWithCollision":false,"visible":1,"tilesetName":"media/kitchen.gif","repeat":false,"preRender":true,"distance":"1","tilesize":8,"foreground":false,"data":[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,0,0,0,0],[0,0,0,0,0,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,0,0,0,0],[0,0,0,0,0,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,0,0,0,0],[0,0,0,0,0,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,0,0,0,0],[0,0,0,0,0,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,0,0,0,0],[0,0,0,0,0,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,0,0,0,0],[0,0,0,0,0,286,287,288,289,290,291,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,307,308,309,310,311,312,313,314,315,316,0,0,0,0],[0,0,0,0,0,326,327,328,329,330,331,332,333,334,335,336,337,338,339,340,341,342,343,344,345,346,347,348,349,350,351,352,353,354,355,356,0,0,0,0],[0,0,0,0,0,366,367,368,369,370,371,372,373,374,375,376,377,378,379,380,381,382,383,384,385,386,387,388,389,390,391,392,393,394,395,396,0,0,0,0],[0,0,0,0,0,406,407,408,409,410,411,412,413,414,415,416,417,418,419,420,421,422,423,424,425,426,427,428,429,430,431,432,433,434,435,436,0,0,0,0],[0,0,0,0,0,446,447,448,449,450,451,452,453,454,455,456,457,458,459,460,461,462,463,464,465,466,467,468,469,470,471,472,473,474,475,476,0,0,0,0],[0,0,0,0,0,486,487,488,489,490,491,492,493,494,495,496,497,498,499,500,501,502,503,504,505,506,507,508,509,510,511,512,513,514,515,516,0,0,0,0],[0,0,0,0,0,526,527,528,529,530,531,532,533,534,535,536,537,538,539,540,541,542,543,544,545,546,547,548,549,550,551,552,553,554,555,556,0,0,0,0],[0,0,0,0,0,566,567,568,569,570,571,572,573,574,575,576,577,578,579,580,581,582,583,584,585,586,587,588,589,590,591,592,593,594,595,596,0,0,0,0],[0,0,0,0,0,606,607,608,609,610,611,612,613,614,615,616,617,618,619,620,621,622,623,624,625,626,627,628,629,630,631,632,633,634,635,636,0,0,0,0],[0,0,0,0,0,646,647,648,649,650,651,652,653,654,655,656,657,658,659,660,661,662,663,664,665,666,667,668,669,670,671,672,673,674,675,676,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]},{"name":"collision","width":40,"height":25,"linkWithCollision":false,"visible":1,"tilesetName":"","repeat":false,"preRender":false,"distance":1,"tilesize":8,"foreground":false,"data":[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,50,50,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,50,50,50,50,50,0,0,0,0,50,50,0,0,0,0,0],[0,0,0,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,0,0,0,0],[0,0,0,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,0,0,0,0,50,0,50,50,0,0,50,50,50,0,0,0,0,0,0],[0,0,0,0,0,0,50,0,50,50,50,50,50,50,50,50,50,50,50,50,0,0,50,50,50,50,0,0,0,0,0,50,50,50,0,0,0,0,0,0],[0,0,0,0,0,0,50,50,50,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,50,50,0,0,0,0,0,0,0],[0,0,0,0,0,0,50,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,50,50,0,0,0,0,0,0,0],[0,0,0,0,0,0,50,0,50,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,50,0,0,0,50,0,0,0,0,0,0,0],[0,0,0,0,0,0,50,0,50,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,50,0,0,0,50,0,0,0,0,0,0,0],[0,0,0,0,0,0,50,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,50,0,0,0,50,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,0,1,0,1,50,50,50,50,50,50,50,50,50,50,50,50,50,50,1,1,50,50,0,0,0,1,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,0,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,50,1,1,1,1,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,0,1,0,51,0,0,0,0,0,0,50,50,50,50,50,50,50,50,0,0,50,0,0,0,1,1,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,50,0,0,0,0,0,0,1,1,51,0,0,0,0,0,0],[0,0,0,0,0,0,1,1,1,51,51,51,51,51,0,0,0,0,0,51,51,51,51,51,51,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]},{"name":"pathfinding","width":40,"height":25,"linkWithCollision":false,"visible":1,"tilesetName":"media/pathfindingtiles_plusplus_8.png","repeat":false,"preRender":false,"distance":"1","tilesize":8,"foreground":false,"data":[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,4,1,1,4,1,1,1,1,1,1,1,4,1,1,1,4,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,4,1,1,4,1,1,1,1,1,1,1,4,1,1,1,4,0,4,4,4,4,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,4,1,4,4,1,1,4,1,1,1,1,1,1,1,4,1,1,1,4,0,4,1,1,4,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,4,1,4,4,1,1,4,0,0,0,0,0,0,0,4,1,1,1,4,0,4,1,1,4,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,4,1,4,0,1,1,4,1,1,1,1,1,1,1,4,1,1,1,4,0,4,1,1,4,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,4,1,4,0,1,1,4,1,1,1,1,1,1,1,4,1,1,1,4,0,4,1,1,4,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,4,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,4,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,4,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]}]};LevelKitchenResources=[new ig.Image('media/kitchen.gif'),new ig.Image('media/pathfindingtiles_plusplus_8.png')];});

// lib/game/entities/item-exit.js
ig.baked=true;ig.module('game.entities.item-exit').requires('plusplus.core.entity','plusplus.core.config','game.components.game-state').defines(function(){var _c=ig.CONFIG;ig.EntityItemExit=ig.global.EntityItemExit=ig.EntityExtended.extend({name:'exit',_wmScalable:true,collides:ig.Entity.COLLIDES.NEVER,size:{x:16,y:44},persistent:true,state:'full',matchingInventoryItem:ig.EntityInventoryItemGumex,interactionDistance:12,interact:function(command){if(command.command==='Look'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('lookExit1'));}
else if(command.command==='Use'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('useExit1'));}
else if(command.command==='Give'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('giveExit1'));}
else if(command.command==='Push'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('pushExit1'));}
else if(command.command==='Pick up'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('pickupExit1'));}
else if(command.command==='Pull'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('pullExit1'));}
else if(command.command==='Open'){if(ig.game.gameState.clothesGoalAchieved&&ig.game.gameState.presentGoalAchieved&&ig.game.gameState.timeGoalAchieved&&ig.game.gameState.placeGoalAchieved&&ig.game.gameState.confirmationGoalAchieved){ig.game.getPlayer().speak(ig.game.i18n.getMessage('useExit2'));ig.game.showEnding();}else{ig.game.getPlayer().speak(ig.game.i18n.getMessage('openExit1'));}}
else if(command.command==='Close'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('closeExit1'));}
else if(command.command==='Talk'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('talkExit1'));}
else{ig.game.getPlayer().speak(ig.game.i18n.getMessage('defaultExit1'));}}});});

// lib/game/entities/item-sofa.js
ig.baked=true;ig.module('game.entities.item-sofa').requires('plusplus.core.entity','plusplus.core.config').defines(function(){var _c=ig.CONFIG;ig.EntityItemSofa=ig.global.EntityItemSofa=ig.EntityExtended.extend({name:'sofa',_wmScalable:true,collides:ig.Entity.COLLIDES.NEVER,size:{x:28,y:20},persistent:true,state:'full',matchingInventoryItem:ig.EntityInventoryItemGumex,interactionDistance:12,interact:function(command){if(command.command==='Look'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('lookSofa1'));}
else if(command.command==='Use'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('useSofa1'),ig.game.i18n.getMessage('useSofa2'));}
else if(command.command==='Give'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('giveSofa1'));}
else if(command.command==='Push'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('pushSofa1'));}
else if(command.command==='Pick up'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('pickupSofa1'));}
else if(command.command==='Pull'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('pullSofa1'));}
else if(command.command==='Open'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('openSofa1'));}
else if(command.command==='Close'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('closeSofa1'));}
else if(command.command==='Talk'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('talkSofa1'));}
else{ig.game.getPlayer().speak(ig.game.i18n.getMessage('defaultSofa1'));}}});});

// lib/game/entities/item-cactus.js
ig.baked=true;ig.module('game.entities.item-cactus').requires('plusplus.core.entity','plusplus.core.config').defines(function(){var _c=ig.CONFIG;ig.EntityItemCactus=ig.global.EntityItemCactus=ig.EntityExtended.extend({name:'cactus',_wmScalable:true,collides:ig.Entity.COLLIDES.NEVER,size:{x:6,y:6},persistent:true,state:'full',matchingInventoryItem:ig.EntityInventoryItemGumex,interactionDistance:12,interact:function(command){if(command.command==='Look'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('lookCactus1'));}
else if(command.command==='Use'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('useCactus1'));}
else if(command.command==='Give'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('giveCactus1'));}
else if(command.command==='Push'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('pushCactus1'));}
else if(command.command==='Pick up'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('pickupCactus1'));}
else if(command.command==='Pull'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('pullCactus1'));}
else if(command.command==='Open'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('openCactus1'));}
else if(command.command==='Close'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('closeCactus1'));}
else if(command.command==='Talk'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('talkCactus1'));}
else{ig.game.getPlayer().speak(ig.game.i18n.getMessage('defaultCactus1'));}}});});

// lib/game/entities/item-books.js
ig.baked=true;ig.module('game.entities.item-books').requires('plusplus.core.entity','plusplus.core.config').defines(function(){var _c=ig.CONFIG;ig.EntityItemBooks=ig.global.EntityItemBooks=ig.EntityExtended.extend({name:'books',_wmScalable:true,collides:ig.Entity.COLLIDES.NEVER,size:{x:26,y:8},persistent:true,state:'full',matchingInventoryItem:ig.EntityInventoryItemGumex,interactionDistance:20,interact:function(command){if(command.command==='Look'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('lookBooks1'));}
else if(command.command==='Use'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('useBooks1'));}
else if(command.command==='Give'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('giveBooks1'));}
else if(command.command==='Push'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('pushBooks1'));}
else if(command.command==='Pick up'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('pickupBooks1'));}
else if(command.command==='Pull'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('pullBooks1'));}
else if(command.command==='Open'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('openBooks1'),ig.game.i18n.getMessage('openBooks2'));}
else if(command.command==='Close'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('closeBooks1'));}
else if(command.command==='Talk'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('talkBooks1'));}
else{ig.game.getPlayer().speak(ig.game.i18n.getMessage('defaultBooks1'));}}});});

// lib/game/entities/item-cabinet.js
ig.baked=true;ig.module('game.entities.item-cabinet').requires('plusplus.core.entity','plusplus.core.config').defines(function(){var _c=ig.CONFIG;ig.EntityItemCabinet=ig.global.EntityItemCabinet=ig.EntityExtended.extend({name:'cabinet',_wmScalable:true,collides:ig.Entity.COLLIDES.NEVER,size:{x:26,y:10},persistent:true,state:'full',matchingInventoryItem:ig.EntityInventoryItemGumex,interactionDistance:30,interact:function(command){if(command.command==='Look'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('lookCabinet1'));}
else if(command.command==='Use'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('useCabinet1'));}
else if(command.command==='Give'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('giveCabinet1'));}
else if(command.command==='Push'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('pushCabinet1'));}
else if(command.command==='Pick up'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('pickupCabinet1'));}
else if(command.command==='Pull'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('pullCabinet1'));}
else if(command.command==='Open'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('openCabinet1'));}
else if(command.command==='Close'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('closeCabinet1'));}
else if(command.command==='Talk'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('talkCabinet1'));}
else{ig.game.getPlayer().speak(ig.game.i18n.getMessage('defaultCabinet1'));}}});});

// lib/game/entities/item-present.js
ig.baked=true;ig.module('game.entities.item-present').requires('plusplus.core.entity','plusplus.core.config').defines(function(){var _c=ig.CONFIG;ig.EntityItemPresent=ig.global.EntityItemPresent=ig.EntityExtended.extend({name:'present',_wmScalable:true,collides:ig.Entity.COLLIDES.NEVER,size:{x:30,y:30},persistent:true,state:'First',matchingInventoryItem:ig.EntityInventoryItemGumex,animSheet:new ig.AnimationSheet(_c.PATH_TO_MEDIA+'item-present.gif',30,30),animInit:'idle',animSettings:{idle:{frameTime:1,sequence:[0]}},interactionDistance:12,interact:function(command){if(command.command==='Look'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('lookPresent1'),ig.game.i18n.getMessage('lookPresent2'),ig.game.i18n.getMessage('lookPresent3'));}
else if(command.command==='Use'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('usePresent1'));}
else if(command.command==='Give'){if(this.state=='First'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('givePresent1'));}
else{ig.game.getPlayer().speak(ig.game.i18n.getMessage('givePresent2'),ig.game.i18n.getMessage('givePresent3'));if(!ig.game.gameState.presentGoalAchieved){var theme=new ig.Sound(_c.PATH_TO_MEDIA+'music/newGoalAchieved.*');theme.play();ig.game.gameState.presentGoalAchieved=true;ig.game.gameState.newGoalAchieved=true;}}}
else if(command.command==='Push'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('pushPresent1'));}
else if(command.command==='Pick up'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('pickupPresent1'));this.state='Second';}
else if(command.command==='Pull'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('pullPresent1'));}
else if(command.command==='Open'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('openPresent1'));}
else if(command.command==='Close'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('closePresent1'));}
else if(command.command==='Talk'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('talkPresent1'));}
else{ig.game.getPlayer().speak(ig.game.i18n.getMessage('defaultPresent1'));}}});});

// lib/game/levels/sitting-room.js
ig.baked=true;ig.module('game.levels.sitting-room').requires('impact.image','plusplus.entities.levelchange','game.entities.player-spawner','game.entities.cursor','game.entities.item-exit','game.entities.item-sofa','game.entities.item-cactus','game.entities.item-books','game.entities.item-cabinet','game.entities.item-present','game.entities.player').defines(function(){LevelSittingRoom={"entities":[{"type":"EntityLevelchange","x":68,"y":72,"settings":{"size":{"x":16,"y":44},"levelName":"kitchen","playerSpawnerName":"spawner-b","name":"kitchen"}},{"type":"EntityPlayerSpawner","x":96,"y":108,"settings":{"name":"spawner-a"}},{"type":"EntityCursor","x":156,"y":60},{"type":"EntityItemExit","x":232,"y":68,"settings":{"size":{"x":16,"y":44}}},{"type":"EntityItemSofa","x":152,"y":88,"settings":{"size":{"x":28,"y":20}}},{"type":"EntityItemCactus","x":118,"y":86,"settings":{"size":{"x":6,"y":6}}},{"type":"EntityItemBooks","x":116,"y":77,"settings":{"size":{"x":26,"y":8}}},{"type":"EntityItemCabinet","x":116,"y":66,"settings":{"size":{"x":26,"y":10}}},{"type":"EntityItemPresent","x":188,"y":80,"settings":{"size":{"x":30,"y":30}}},{"type":"EntityPlayer","x":95,"y":116}],"layer":[{"name":"background","width":40,"height":25,"linkWithCollision":false,"visible":1,"tilesetName":"media/sitting-room.gif","repeat":false,"preRender":true,"distance":"1","tilesize":8,"foreground":false,"data":[[0,403,404,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,443,444,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,483,484,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,37,38,39,40],[0,523,524,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,77,78,79,80],[0,82,83,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,117,118,119,120],[0,122,123,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,157,158,159,160],[0,162,163,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,197,198,199,200],[0,202,203,244,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,237,238,239,240],[0,242,243,284,285,286,287,288,289,290,291,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,307,308,309,310,311,312,313,314,315,316,277,278,279,280],[0,282,283,324,325,326,327,328,329,330,331,332,333,334,335,336,337,338,339,340,341,342,343,344,345,346,347,348,349,350,351,352,353,354,355,356,317,318,319,320],[0,322,323,364,365,366,367,368,369,370,371,372,373,374,375,376,377,378,379,380,381,382,383,384,385,386,387,388,389,390,391,392,393,394,395,396,357,358,359,360],[0,362,363,404,405,406,407,408,409,410,411,412,413,414,415,416,417,418,419,420,421,422,423,424,425,426,427,428,429,430,431,432,433,434,435,436,397,398,399,400],[0,402,403,444,445,446,447,448,449,450,451,452,453,454,455,456,457,458,459,460,461,462,463,464,465,466,467,468,469,470,471,472,473,474,475,476,437,438,439,440],[0,442,443,484,485,486,487,488,489,490,491,492,493,494,495,496,497,498,499,500,501,502,503,504,505,506,507,508,509,510,511,512,513,514,515,516,477,478,479,480],[0,482,483,524,525,526,527,528,529,530,531,532,533,534,535,536,537,538,539,540,541,542,543,544,545,546,547,548,549,550,551,552,553,554,555,556,517,518,519,520],[0,522,523,564,565,566,567,568,569,570,571,572,573,574,575,576,577,578,579,580,581,582,583,584,585,586,587,588,589,590,591,592,593,594,595,596,557,558,559,560],[0,562,563,604,605,606,607,608,609,610,611,612,613,614,615,616,617,618,619,620,621,622,623,624,625,626,627,628,629,630,631,632,633,634,635,636,597,598,599,600],[0,602,603,644,645,646,647,648,649,650,651,652,653,654,655,656,657,658,659,660,661,662,663,664,665,666,667,668,669,670,671,672,673,674,675,676,637,638,639,640],[0,642,643,684,685,686,687,688,689,690,691,692,693,694,695,696,697,698,699,700,701,702,703,704,705,706,707,708,709,710,711,712,713,714,715,716,677,678,679,680],[0,682,683,684,685,686,687,688,689,690,691,692,693,694,695,696,697,698,699,700,701,702,703,704,705,706,707,708,709,710,711,712,713,714,715,716,717,718,719,720],[0,722,723,724,725,726,727,728,729,730,731,732,733,734,735,736,737,738,739,740,741,742,743,744,745,746,747,748,749,750,751,752,753,754,755,756,757,758,759,760],[0,762,763,764,765,766,767,768,769,770,771,772,773,774,775,776,777,778,779,780,781,782,783,784,785,786,787,788,789,790,791,792,793,794,795,796,797,798,799,800],[0,802,803,804,805,806,807,808,809,810,811,812,813,814,815,816,817,818,819,820,821,822,823,824,825,826,827,828,829,830,831,832,833,834,835,836,837,838,839,840],[0,842,843,844,845,846,847,848,849,850,851,852,853,854,855,856,857,858,859,860,861,862,863,864,865,866,867,868,869,870,871,872,873,874,875,876,877,878,879,880],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,363,364,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]},{"name":"collision","width":40,"height":25,"linkWithCollision":false,"visible":1,"tilesetName":"","repeat":false,"preRender":false,"distance":1,"tilesize":8,"foreground":false,"data":[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,51,51,51,51,51,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,51,51,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,1,1,1,1,51,51,1,51,51,51,1,51,51,51,0,0,0,0,0,0,51,51,51,51,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,51,1,51,1,51,51,51,1,51,0,51,1,51,51,51,51,0,0,0,0,0,51,0,0,51,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,51,1,51,1,51,51,51,1,51,51,51,1,51,51,51,51,0,50,0,0,51,51,0,0,51,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,51,51,1,51,1,51,0,51,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,51,51,51,1,51,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,0,0,0,0,0,0,0,0],[51,51,51,51,51,51,51,51,1,51,0,0,0,0,0,0,0,51,0,51,51,51,50,50,50,50,50,50,50,1,1,1,51,0,0,0,0,0,0,0],[0,0,0,0,0,51,51,1,1,51,51,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,50,51,0,0,51,1,1,0,0,0,0,0,0,0],[0,0,0,0,0,0,51,1,51,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,51,1,0,0,0,0,0,0,0],[0,0,0,0,0,0,51,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0],[0,0,0,0,0,0,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,0,0,0,0,0,0,0],[0,0,0,0,0,0,51,0,0,0,0,0,0,0,50,50,50,50,50,50,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,50,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]},{"name":"pathfinding","width":40,"height":25,"linkWithCollision":false,"visible":1,"tilesetName":"media/pathfindingtiles_plusplus_8.png","repeat":false,"preRender":false,"distance":"1","tilesize":8,"foreground":false,"data":[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,4,4,4,4,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,4,4,4,4,4,4,1,1,1,1,4,0,0,0,4,4,4,4,4,4,4,1,1,4,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,4,1,1,4,0,4,1,1,1,1,4,4,4,4,4,1,1,1,1,1,4,1,1,4,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,4,1,1,4,0,4,1,1,1,1,4,1,1,1,4,1,1,1,1,1,4,1,1,4,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,4,1,1,4,0,4,1,1,1,1,4,1,1,1,4,1,1,1,1,1,4,1,1,4,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,4,1,1,4,0,0,1,1,1,1,4,1,1,1,4,1,1,1,1,1,4,1,1,4,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,4,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,4,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,4,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,4,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,4,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]}]};LevelSittingRoomResources=[new ig.Image('media/sitting-room.gif'),new ig.Image('media/pathfindingtiles_plusplus_8.png')];});

// lib/game/components/command-execution.js
ig.baked=true;ig.module('game.components.command-execution').requires('plusplus.core.config').defines(function(){"use strict";var _c=ig.CONFIG;ig.CommandExecution=ig.Class.extend({hasActiveCommand:false,init:function(){this.player=ig.game.getPlayer();},execute:function(){var currentCommand=ig.game.getEntitiesByClass(ig.CommandPreview)[0].currentCommand;var defaultCommand=ig.game.getEntitiesByClass(ig.CommandPreview)[0].defaultCommand;if(ig.input.pressed('click')){if(this.isAbortionCommand()&&currentCommand!==defaultCommand){this.removeCurrentCommand();}
else{this.movePlayer();this.resetNameOnDefaultCommand(currentCommand,defaultCommand);this.checkForActiveCommand(currentCommand);this.checkForActiveCompundableCommand();}}
this.TryToInteract(currentCommand);},TryToInteract:function(currentCommand){var entity=ig.game.getEntityByName(ig.game.getEntitiesByClass(ig.CommandPreview)[0].entityName);var compoundableEntity=ig.game.getEntityByName(ig.game.getEntitiesByClass(ig.CommandPreview)[0].compoundableEntityName);var commandPreview=ig.game.getEntitiesByClass(ig.CommandPreview)[0];if(entity instanceof ig.EntityLevelchange===false&&compoundableEntity instanceof ig.EntityLevelchange===false){if(commandPreview.hasActiveCompoundableCommand&&this.hasTwoInventoryItems(entity,compoundableEntity)){compoundableEntity.combine(entity);this.removeCurrentCommand();}
else{if(this.isUseWithCommand(currentCommand)){ig.game.getEntitiesByClass(ig.CommandPreview)[0].hasCombinedCommand=true;}
else if(commandPreview.hasActiveCompoundableCommand&&this.hasEntityToInteract(compoundableEntity)){compoundableEntity.combine(entity);this.removeCurrentCommand();this.player.moveToStop();}
else if(this.hasEntityToInteract(entity)){entity.interact(currentCommand);this.removeCurrentCommand();this.player.moveToStop();}}}},isUseWithCommand:function(currentCommand){return(this.hasActiveCommand&&this.hasMouseOverInventory()&&currentCommand==='Use');},hasTwoInventoryItems:function(entity,compoundableEntity){return(entity.category==='inventory'&&compoundableEntity.category==='inventory');},hasEntityToInteract:function(entity){return(this.hasActiveCommand&&this.hasPlayerNearEntity(entity)||this.hasActiveCommand&&this.hasMouseOverInventory());},hasMouseOverInventory:function(){return(ig.input.mouse.y+ig.game.screen.y>=153&&ig.input.mouse.y+ig.game.screen.y<=185&&ig.input.mouse.x+ig.game.screen.x>=177&&ig.input.mouse.x+ig.game.screen.x<=303);},hasPlayerNearEntity:function(entity){return(this.player.distanceEdgeTo(entity)<=entity.interactionDistance);},resetNameOnDefaultCommand:function(currentCommand,defaultCommand){if(currentCommand===defaultCommand){var entities=ig.game.entities;var match=false;for(var i=0,len=ig.game.entities.length;i<len;i++){if(this.entityIsinFocus(entities[i])&&entities[i].name!=='player'&&entities[i].name!=='cursor'&&entities[i].name!=='command'&&entities[i].name!=='preview'&&entities[i].name!==undefined&&entities[i].name!=='spawner'&&entities[i].name!=='textbox'){match=false}}
if(!match){ig.game.getEntitiesByClass(ig.CommandPreview)[0].entityName='';}}},checkForActiveCommand:function(currentCommand){if(currentCommand!==''&&ig.game.getEntitiesByClass(ig.CommandPreview)[0].entityName!==''){this.hasActiveCommand=true;}},checkForActiveCompundableCommand:function(){var commandPreview=ig.game.getEntitiesByClass(ig.CommandPreview)[0];if(commandPreview.entityName!==''&&commandPreview.compoundableEntityName!==''){commandPreview.setHasActiveCompoundableCommand(true);}},entityIsinFocus:function(entity){return((entity.pos.x<=(ig.input.mouse.x+ig.game.screen.x))&&((ig.input.mouse.x+ig.game.screen.x)<=entity.pos.x+entity.size.x)&&(entity.pos.y<=(ig.input.mouse.y+ig.game.screen.y))&&((ig.input.mouse.y+ig.game.screen.y)<=entity.pos.y+entity.size.y));},isAbortionCommand:function(){var entities=ig.game.entities;var isAbortion=true;var entity=ig.game.getEntityByName(ig.game.getEntitiesByClass(ig.CommandPreview)[0].entityName);var compoundableEntity=ig.game.getEntityByName(ig.game.getEntitiesByClass(ig.CommandPreview)[0].compoundableEntityName);for(var i=0,len=ig.game.entities.length;i<len;i++){if(this.entityIsinFocus(entities[i])&&entities[i].name!=='player'&&entities[i].name!=='cursor'&&entity instanceof ig.EntityLevelchange===false&&compoundableEntity instanceof ig.EntityLevelchange===false){isAbortion=false;}}
return isAbortion;},removeCurrentCommand:function(){var commandPreview=ig.game.getEntitiesByClass(ig.CommandPreview)[0];var walkCommand=ig.game.getEntitiesByClass(ig.CommandWalk)[0];commandPreview.setCurrentCommand(walkCommand);commandPreview.setHasCombinedCommand(false);commandPreview.setHasActiveCompoundableCommand(false);this.hasActiveCommand=false;},movePlayer:function(){if(this.isClickOnGameWorld()){this.player.moveTo({x:ig.input.mouse.x+ig.game.screen.x,y:ig.input.mouse.y+ig.game.screen.y},{avoidEntities:false});}},isClickOnGameWorld:function(){return(ig.input.mouse.y+ig.game.screen.y<=135);}});});

// lib/game/ui/command-give.js
ig.baked=true;ig.module('game.ui.command-give').requires('plusplus.core.config','plusplus.ui.ui-button','game.ui.command').defines(function(){var _c=ig.CONFIG;ig.CommandGive=ig.global.CommandGive=ig.Command.extend({command:'Give',commandName:'Dar',size:{x:30,y:10},animSheet:new ig.AnimationSheet(_c.PATH_TO_MEDIA+'ui/ui_button_give.gif',22,10)});});

// lib/game/ui/command-open.js
ig.baked=true;ig.module('game.ui.command-open').requires('plusplus.core.config','plusplus.ui.ui-button','game.ui.command').defines(function(){var _c=ig.CONFIG;ig.CommandOpen=ig.global.CommandOpen=ig.Command.extend({command:'Open',commandName:'Abrir',size:{x:34,y:10},animSheet:new ig.AnimationSheet(_c.PATH_TO_MEDIA+'ui/ui_button_open.gif',34,10)});});

// lib/game/ui/command-look.js
ig.baked=true;ig.module('game.ui.command-look').requires('plusplus.core.config','plusplus.ui.ui-button','game.ui.command').defines(function(){var _c=ig.CONFIG;ig.CommandLook=ig.global.CommandLook=ig.Command.extend({command:'Look',keymap:'look at',commandName:'Mirar',size:{x:33,y:10},animSheet:new ig.AnimationSheet(_c.PATH_TO_MEDIA+'ui/ui_button_look.gif',33,10)});});

// lib/game/ui/command-use.js
ig.baked=true;ig.module('game.ui.command-use').requires('plusplus.core.config','plusplus.ui.ui-button','game.ui.command').defines(function(){var _c=ig.CONFIG;ig.CommandUse=ig.global.CommandUse=ig.Command.extend({command:'Use',commandName:'Usar',size:{x:30,y:10},animSheet:new ig.AnimationSheet(_c.PATH_TO_MEDIA+'ui/ui_button_use.gif',30,10)});});

// lib/game/ui/command-close.js
ig.baked=true;ig.module('game.ui.command-close').requires('plusplus.core.config','plusplus.ui.ui-button','game.ui.command').defines(function(){var _c=ig.CONFIG;ig.CommandClose=ig.global.CommandClose=ig.Command.extend({command:'Close',commandName:'Cerrar',keymap:'close',size:{x:46,y:10},animSheet:new ig.AnimationSheet(_c.PATH_TO_MEDIA+'ui/ui_button_close.gif',46,10)});});

// lib/game/ui/command-press.js
ig.baked=true;ig.module('game.ui.command-press').requires('plusplus.core.config','plusplus.ui.ui-button','game.ui.command').defines(function(){var _c=ig.CONFIG;ig.CommandPress=ig.global.CommandPress=ig.Command.extend({command:'Push',commandName:'Empujar',size:{x:55,y:10},animSheet:new ig.AnimationSheet(_c.PATH_TO_MEDIA+'ui/ui_button_press.gif',55,10)});});

// lib/game/ui/command-pickup.js
ig.baked=true;ig.module('game.ui.command-pickup').requires('plusplus.core.config','plusplus.ui.ui-button','game.ui.command').defines(function(){var _c=ig.CONFIG;ig.CommandPickUp=ig.global.CommandPickUp=ig.Command.extend({command:'Pick up',commandName:'Coger',size:{x:38,y:11},animSheet:new ig.AnimationSheet(_c.PATH_TO_MEDIA+'ui/ui_button_pickup.gif',38,11)});});

// lib/game/ui/command-talk.js
ig.baked=true;ig.module('game.ui.command-talk').requires('plusplus.core.config','plusplus.ui.ui-button','game.ui.command').defines(function(){var _c=ig.CONFIG;ig.CommandTalk=ig.global.CommandTalk=ig.Command.extend({command:'Talk',commandName:'Hablar',size:{x:43,y:10},animSheet:new ig.AnimationSheet(_c.PATH_TO_MEDIA+'ui/ui_button_talk.gif',43,10)});});

// lib/game/ui/command-pull.js
ig.baked=true;ig.module('game.ui.command-pull').requires('plusplus.core.config','plusplus.ui.ui-button','game.ui.command').defines(function(){var _c=ig.CONFIG;ig.CommandPull=ig.global.CommandPull=ig.Command.extend({command:'Pull',commandName:'Tirar',size:{x:34,y:10},animSheet:new ig.AnimationSheet(_c.PATH_TO_MEDIA+'ui/ui_button_pull.gif',34,10)});});

// lib/game/ui/command-walk.js
ig.baked=true;ig.module('game.ui.command-walk').requires('plusplus.core.config','plusplus.ui.ui-button','game.ui.command').defines(function(){var _c=ig.CONFIG;ig.CommandWalk=ig.global.CommandWalk=ig.Command.extend({command:'Walk',commandName:'Ir',size:{x:0,y:0},animSheet:new ig.AnimationSheet(_c.PATH_TO_MEDIA+'ui/ui_button_walk.gif',0,0)});});

// lib/game/ui/command-preview.js
ig.baked=true;ig.module('game.ui.command-preview').requires('plusplus.core.config','plusplus.ui.ui-text','plusplus.ui.ui-text','game.components.i18n').defines(function(){var _c=ig.CONFIG;ig.CommandPreview=ig.global.CommandPreview=ig.UIText.extend({name:'preview',fixed:false,posAsPct:false,defaultCommand:null,hasDefaultCommandInventory:false,hasCombinedCommand:false,hasActiveCompoundableCommand:false,currentCommand:null,entityName:'',localizedEntityName:'',compoundableEntityName:'',text:'',font:new ig.Font(_c.PATH_TO_MEDIA+'command_preview_font_11px.png'),centerCommandPreview:function(){this.pos.x=(_c.GAME_WIDTH_VIEW/2)-(this.size.x/2);},entityIsinFocus:function(entity){return((entity.pos.x<=(ig.input.mouse.x+ig.game.screen.x))&&((ig.input.mouse.x+ig.game.screen.x)<=entity.pos.x+entity.size.x)&&(entity.pos.y<=(ig.input.mouse.y+ig.game.screen.y))&&((ig.input.mouse.y+ig.game.screen.y)<=entity.pos.y+entity.size.y));},declareEntityName:function(){var entities=ig.game.entities;var name='';for(var i=0,len=ig.game.entities.length;i<len;i++){if(this.entityIsinFocus(entities[i])&&entities[i].name!=='player'&&entities[i].name!=='cursor'&&entities[i].name!=='command'&&entities[i].name!=='preview'&&entities[i].name!==undefined&&entities[i].name!=='spawner-a'&&entities[i].name!=='spawner-b'&&entities[i].name!=='spawner-c'&&entities[i].name!=='textbox'){name=entities[i].name;}}
if(!ig.game.commandExecution.hasActiveCommand){this.entityName=name;this.localizedEntityName=ig.game.i18n.getItemName(name)||'';if(this.levelName!==""&&this.localizedEntityName===""){this.localizedEntityName=ig.game.i18n.getLevelName(name)||'';}}
if(this.hasCombinedCommand&&name!==this.entityName&&!this.hasActiveCompoundableCommand){this.compoundableEntityName=name;}
else if(!this.hasActiveCompoundableCommand){this.compoundableEntityName='';}},showCommandPreview:function(){if(this.currentCommand===null){this.renderDefaultCommand();}
else{this.renderSelectedCommand();}},renderDefaultCommand:function(){if(this.defaultCommand===null){this.defaultCommand=ig.game.getEntitiesByClass(ig.global.CommandWalk)[0];}
this.currentCommand=this.defaultCommand;var commandName=ig.game.i18n.getCommandName(this.currentCommand.command);this.text=commandName+' '+this.localizedEntityName;},renderSelectedCommand:function(){var commandName=ig.game.i18n.getCommandName(this.currentCommand.command);this.handleInventoryMouseOverCommand();},handleInventoryMouseOverCommand:function(){if(this.hasDefaultCommandInventory){this.currentCommand.command=this.defaultCommand;this.text=ig.game.i18n.getCommandName(this.currentCommand.command)+' '+this.localizedEntityName;this.hasDefaultCommandInventory=false;}
else{if(this.hasCombinedCommand){this.text=ig.game.i18n.getCommandName(this.currentCommand.command)+' '+this.localizedEntityName+' mit '+this.compoundableEntityName;}
else{this.text=ig.game.i18n.getCommandName(this.currentCommand.command)+' '+this.localizedEntityName;}}},setHasCombinedCommand:function(state){this.hasCombinedCommand=state;},setHasActiveCompoundableCommand:function(state){this.hasActiveCompoundableCommand=state;},setEntityName:function(name){this.entityName=name;},setCurrentCommand:function(command){this.currentCommand=command;},hasMouseOverInventory:function(){return(ig.input.mouse.y+ig.game.screen.y>=153&&ig.input.mouse.y+ig.game.screen.y<=185&&ig.input.mouse.x+ig.game.screen.x>=177&&ig.input.mouse.x+ig.game.screen.x<=303);},hasDefaultCommandOnActiveEntity:function(){return(this.currentCommand.command==='Walk'&&this.entityName!=='');},update:function(){this.parent();this.declareEntityName();this.showCommandPreview();ig.game.commandExecution.execute();},reposition:function(){this.parent();this.centerCommandPreview();}});});

// lib/game/ui/pacui.js
ig.baked=true;ig.module('game.ui.pacui').requires('game.ui.command-give','game.ui.command-open','game.ui.command-look','game.ui.command-use','game.ui.command-close','game.ui.command-press','game.ui.command-pickup','game.ui.command-talk','game.ui.command-pull','game.ui.command-walk','game.ui.command-question-mark','game.ui.command-preview','game.components.i18n','plusplus.core.config').defines(function(){"use strict";var _c=ig.CONFIG;ig.Pacui=ig.Class.extend({init:function(){this.spawnCommands();this.spawnCommandPreview();},spawnCommands:function(){ig.game.spawnEntity(ig.CommandGive,16,151,{animSheet:new ig.AnimationSheet(_c.PATH_TO_MEDIA+ig.game.i18n.getCommandImage('give'),ig.game.i18n.getCommandX('give'),ig.game.i18n.getCommandY('give'))});ig.game.spawnEntity(ig.CommandOpen,16,163,{animSheet:new ig.AnimationSheet(_c.PATH_TO_MEDIA+ig.game.i18n.getCommandImage('open'),ig.game.i18n.getCommandX('open'),ig.game.i18n.getCommandY('open'))});ig.game.spawnEntity(ig.CommandLook,16,175,{animSheet:new ig.AnimationSheet(_c.PATH_TO_MEDIA+ig.game.i18n.getCommandImage('look'),ig.game.i18n.getCommandX('look'),ig.game.i18n.getCommandY('look'))});ig.game.spawnEntity(ig.CommandUse,61,151,{animSheet:new ig.AnimationSheet(_c.PATH_TO_MEDIA+ig.game.i18n.getCommandImage('use'),ig.game.i18n.getCommandX('use'),ig.game.i18n.getCommandY('use'))});ig.game.spawnEntity(ig.CommandClose,61,163,{animSheet:new ig.AnimationSheet(_c.PATH_TO_MEDIA+ig.game.i18n.getCommandImage('close'),ig.game.i18n.getCommandX('close'),ig.game.i18n.getCommandY('close'))});ig.game.spawnEntity(ig.CommandPress,61,175,{animSheet:new ig.AnimationSheet(_c.PATH_TO_MEDIA+ig.game.i18n.getCommandImage('push'),ig.game.i18n.getCommandX('push'),ig.game.i18n.getCommandY('push'))});ig.game.spawnEntity(ig.CommandPickUp,130,151,{animSheet:new ig.AnimationSheet(_c.PATH_TO_MEDIA+ig.game.i18n.getCommandImage('pickup'),ig.game.i18n.getCommandX('pickup'),ig.game.i18n.getCommandY('pickup'))});ig.game.spawnEntity(ig.CommandTalk,130,163,{animSheet:new ig.AnimationSheet(_c.PATH_TO_MEDIA+ig.game.i18n.getCommandImage('talk'),ig.game.i18n.getCommandX('talk'),ig.game.i18n.getCommandY('talk'))});ig.game.spawnEntity(ig.CommandPull,130,175,{animSheet:new ig.AnimationSheet(_c.PATH_TO_MEDIA+ig.game.i18n.getCommandImage('pull'),ig.game.i18n.getCommandX('pull'),ig.game.i18n.getCommandY('pull'))});ig.game.spawnEntity(ig.CommandWalk,0,0,{animSheet:new ig.AnimationSheet(_c.PATH_TO_MEDIA+ig.game.i18n.getCommandImage('walk'),ig.game.i18n.getCommandX('walk'),ig.game.i18n.getCommandY('walk'))});ig.game.spawnEntity(ig.CommandQuestionMark,0,0);},spawnCommandPreview:function(){ig.game.spawnEntity(ig.CommandPreview,0,135);}});});

// lib/game/ui/inventory.js
ig.baked=true;ig.module('game.ui.inventory').requires('plusplus.core.config').defines(function(){"use strict";var _c=ig.CONFIG;ig.Inventory=ig.Class.extend({slots:[{x:177,y:153},{x:209,y:153},{x:241,y:153},{x:273,y:153}],inventoryItems:[],addItem:function(inventoryItem,worldItem){if(worldItem){this.removeWorldItem(worldItem);}
var item=ig.game.spawnEntity(inventoryItem,this.slots[this.inventoryItems.length].x,this.slots[this.inventoryItems.length].y);this.inventoryItems.push(item);},removeWorldItem:function(worldItem){ig.game.removeEntity(worldItem);},removeInventoryItem:function(inventoryItem){for(var i=0,len=this.inventoryItems.length;i<len;i++){if(this.inventoryItems[i].name===inventoryItem.name){this.inventoryItems.erase(this.inventoryItems[i]);break;}}
ig.game.removeEntity(inventoryItem);this.respawnInventoryItems();},respawnInventoryItems:function(){if(this.inventoryItems.length>0){this.clearInventory();for(var i=0,len=this.inventoryItems.length;i<len;i++){ig.game.spawnEntity(this.inventoryItems[i],this.slots[i].x,this.slots[i].y);}}},clearInventory:function(){for(var i=0,len=this.inventoryItems.length;i<len;i++){ig.game.removeEntity(this.inventoryItems[i]);}}});});

// lib/game/entities/inventory-item-map.js
ig.baked=true;ig.module('game.entities.inventory-item-map').requires('plusplus.core.entity','plusplus.core.config').defines(function(){var _c=ig.CONFIG;ig.EntityInventoryItemMap=ig.global.EntityInventoryItemMap=ig.EntityExtended.extend({name:'map',size:{x:30,y:16},animSheet:new ig.AnimationSheet(_c.PATH_TO_MEDIA+'inventory-item-map.gif',30,16),animInit:'idle',animSettings:{idle:{frameTime:1,sequence:[0]}},category:'inventory',interact:function(command){if(command.command==='Look'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('lookInventoryMap1'),ig.game.i18n.getMessage('lookInventoryMap2'));if(!ig.game.gameState.placeGoalAchieved){var theme=new ig.Sound(_c.PATH_TO_MEDIA+'music/newGoalAchieved.*');theme.play();ig.game.gameState.placeGoalAchieved=true;ig.game.gameState.newGoalAchieved=true;}
window.open('https://www.google.es/maps/search/mercantic/@41.478038,2.070309,17z/data=!3m1!4b1','_blank');}
else if(command.command==='Use'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('useInventoryMap1'));}
else if(command.command==='Give'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('giveInventoryMap1'));}
else if(command.command==='Push'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('pushInventoryMap1'));}
else if(command.command==='Pick up'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('pickupInventoryMap1'));}
else if(command.command==='Pull'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('pullInventoryMap1'));}
else if(command.command==='Open'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('openInventoryMap1'));}
else if(command.command==='Close'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('closeInventoryMap1'));}
else if(command.command==='Talk'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('talkInventoryMap1'),ig.game.i18n.getMessage('talkInventoryMap2'));}
else{ig.game.getPlayer().speak(ig.game.i18n.getMessage('defaultInventoryMap1'));}}});});

// lib/game/entities/inventory-item-paperball.js
ig.baked=true;ig.module('game.entities.inventory-item-paperball').requires('plusplus.core.entity','plusplus.core.config','game.entities.inventory-item-map').defines(function(){var _c=ig.CONFIG;ig.EntityInventoryItemPaperball=ig.global.EntityInventoryItemPaperball=ig.EntityExtended.extend({name:'paperball',state:'closed',size:{x:30,y:16},animSheet:new ig.AnimationSheet(_c.PATH_TO_MEDIA+'inventory-item-paperball.gif',30,16),animInit:'idle',matchingInventoryItem:ig.EntityInventoryItemMap,animSettings:{idle:{frameTime:1,sequence:[0]}},category:'inventory',interact:function(command){if(command.command==='Look'){if(this.state==='closed'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('lookInventoryPaperball1'));}}
else if(command.command==='Open'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('openInventoryPaperball1'));this.state='open';ig.game.inventory.removeInventoryItem(this);ig.game.inventory.addItem(this.matchingInventoryItem);}
else if(command.command==='Use'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('useInventoryPaperball1'));}
else if(command.command==='Give'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('giveInventoryPaperball1'));}
else if(command.command==='Push'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('pushInventoryPaperball1'));}
else if(command.command==='Pick up'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('pickupInventoryPaperball1'));}
else if(command.command==='Pull'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('pullInventoryPaperball1'));}
else if(command.command==='Close'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('closeInventoryPaperball1'));}
else if(command.command==='Talk'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('talkInventoryPaperball1'));}
else{ig.game.getPlayer().speak(ig.game.i18n.getMessage('defaultInventoryPaperball1'));}},});});

// lib/game/entities/item-paperball.js
ig.baked=true;ig.module('game.entities.item-paperball').requires('plusplus.core.entity','plusplus.core.config','game.entities.inventory-item-paperball','game.components.i18n').defines(function(){var _c=ig.CONFIG;ig.EntityItemPaperball=ig.global.EntityItemPaperball=ig.EntityExtended.extend({name:'paperball',collides:ig.Entity.COLLIDES.NEVER,size:{x:7,y:8},interactionDistance:10,matchingInventoryItem:ig.EntityInventoryItemPaperball,animSheet:new ig.AnimationSheet(_c.PATH_TO_MEDIA+'item-paperball.gif',7,8),animInit:'idle',animSettings:{idle:{frameTime:1,sequence:[0]}},interact:function(command){if(command.command==='Look'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('lookPaperball1'));}
else if(command.command==='Use'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('usePaperball1'));}
else if(command.command==='Give'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('givePaperball1'));}
else if(command.command==='Push'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('pushPaperball1'));}
else if(command.command==='Pick up'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('pickupPaperball1'));ig.game.inventory.addItem(this.matchingInventoryItem,this);ig.game.roomState.paperball.isPickedUp=true;}
else if(command.command==='Pull'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('pullPaperball1'));}
else if(command.command==='Open'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('openPaperball1'));}
else if(command.command==='Close'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('closePaperball1'));}
else if(command.command==='Talk'){ig.game.getPlayer().speak(ig.game.i18n.getMessage('talkPaperball1'));}
else{ig.game.getPlayer().speak(ig.game.i18n.getMessage('defaultPaperball1'));}}});});

// lib/game/components/room-state.js
ig.baked=true;ig.module('game.components.room-state').requires('plusplus.core.config','game.entities.item-paperball','game.entities.item-present').defines(function(){"use strict";var _c=ig.CONFIG;ig.RoomState=ig.Class.extend({paperball:{className:ig.EntityItemPaperball,isPickedUp:false},present:{className:ig.EntityItemPresent,isPickedUp:false},tphone:{className:ig.InventoryItemTphone,isPickedUp:false},createState:function(){var currentLevel=ig.game.currentLevel;if(currentLevel==='study'){if(!this.paperball.isPickedUp){ig.game.spawnEntity(this.paperball.className,192,92);}}
if(currentLevel==='sitting-room'){if(!this.present.isPickedUp){ig.game.spawnEntity(this.present.className,186,80);}}}});});

// lib/game/entities/textplayer.js
ig.baked=true;ig.module('game.entities.textplayer').requires('plusplus.core.entity','plusplus.core.config').defines(function(){ig.EntityTextplayer=ig.global.EntityTextplayer=ig.EntityExtended.extend({_wmDrawBox:true,_wmBoxColor:'rgba(255, 100, 0, 0.7)',size:{x:90,y:90},pos:{x:0,y:0},textString:'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed vulputate magna eget ullamcorper interdum. Vestibulum fermentum mattis risus vitae consectetur. Quisque sit amet augue accumsan odio pharetra vulputate quis nec odio. Ut iaculis arcu at magna lobortis, at tristique felis sodales. Mauris ultricies nunc ut odio eleifend, eget sodales ante suscipit.',textStringLength:null,textArray:null,textCurrentChar:1,displayText:'',maxWidth:250,init:function(x,y,settings){this.parent(x,y,settings);this.textArray=this.textString.split('');this.textStringLength=this.textArray.length;this.pos.x=ig.system.width/2;this.pos.y=ig.system.height/2;},kill:function(){this.parent();},draw:function(){var font=new ig.Font('media/font_intent1.png');var x=ig.system.width/2;var y=ig.system.height/2;if(this.textCurrentChar<=this.textStringLength){this.displayText='';var lineBreaks=1;var breakChar=null;for(var i=0;i<this.textCurrentChar;i++){this.displayText+=this.textArray[i];if(font.widthForString(this.displayText)>this.maxWidth){if(breakChar==null&&this.textArray[i]==' '){breakChar=i;this.displayText=this.displayText+'\n';lineBreaks++;}else{if(i>=(breakChar*lineBreaks)&&this.textArray[i]==' '){this.displayText=this.displayText+'\n';lineBreaks++;}}}}
this.textCurrentChar++;}
font.draw(this.displayText,this.pos.x,this.pos.y-(font.heightForString(this.displayText)/2),ig.Font.ALIGN.CENTER);this.parent();},update:function(){this.parent();}});});

// lib/game/main.js
ig.baked=true;ig.module('game.main').requires('plusplus.core.plusplus','game.components.pacloader','game.entities.player','game.levels.titlescreen','game.levels.storyscreen','game.levels.ending','game.levels.study','game.levels.bedroom','game.levels.kitchen','game.levels.sitting-room','game.components.command-execution','game.components.i18n','game.ui.pacui','game.ui.inventory','game.components.room-state','game.components.game-state','plusplus.entities.conversation','game.entities.textplayer').defines(function(){"use strict";var _c=ig.CONFIG;var lang='ca';var Pac=ig.GameExtended.extend({clearColor:"#000000",currentLevel:null,hasUntoldBackgroundStory:true,init:function(){this.parent();this.loadLevelDeferred('study','spawner-a');this.i18n=new ig.i18n();this.i18n.setLanguage(lang);this.gui=new ig.Pacui();this.roomState=new ig.RoomState();this.gameState=new ig.GameState();this.inventory=new ig.Inventory();this.setCursorLayer();ig.Sound.useWebAudio=false;var theme=new ig.Sound(_c.PATH_TO_MEDIA+'music/mainTheme.*');theme.play();},loadLevelDeferred:function(level,playerSpawnerName){this.currentLevel=level;this.parent(level,playerSpawnerName);},buildLevel:function(){this.parent();this.centerStaticCamera();this.roomState.createState();this.commandExecution=new ig.CommandExecution();this.inventory.respawnInventoryItems();},inputStart:function(){ig.input.bind(ig.KEY.MOUSE1,'click');ig.input.bind(ig.KEY.G,'Give');ig.input.bind(ig.KEY.P,'Pick up');ig.input.bind(ig.KEY.U,'Use');ig.input.bind(ig.KEY.O,'Open');ig.input.bind(ig.KEY.L,'Look');ig.input.bind(ig.KEY.S,'Push');ig.input.bind(ig.KEY.C,'Close');ig.input.bind(ig.KEY.T,'Talk');ig.input.bind(ig.KEY.Y,'Pull');ig.input.bind(ig.KEY.F1,'Question');ig.input.bind(ig.KEY.ESC,'Esc');ig.input.bind(ig.KEY.ENTER,'pw');ig.input.bind(ig.KEY.Q,'score');},tellBackgroundStory:function(){var textbubble=ig.game.spawnEntity(ig.EntityConversation,0,0);textbubble.messageMoveToSettings={matchPerformance:true,offset:{x:0,y:-30},align:{x:0.5,y:1}};},showEnding:function(){ig.system.setGame(TheEnd);},setCursorLayer:function(){this.addLayer(new ig.Layer('cursor',{zIndex:_c.Z_INDEX_ABOVE_ALL}));},centerStaticCamera:function(){ig.game.screen.x=0;ig.game.screen.y=0;ig.game.screen.x-=(ig.system.realWidth/2)/ig.system.scale-(_c.GAME_WIDTH_VIEW/2);ig.game.screen.y-=(ig.system.realHeight/2)/ig.system.scale-(_c.GAME_HEIGHT_VIEW/2);},resize:function(){this.parent();if(ig.game!==null){this.centerStaticCamera();}},update:function(){this.parent();if(this.hasUntoldBackgroundStory){this.tellBackgroundStory();this.hasUntoldBackgroundStory=false;}
ig.game.sortEntities('entities');}});var StoryScreen=ig.GameExtended.extend({clearColor:"#000000",init:function(){this.parent();this.setCursorLayer();this.loadLevelDeferred('storyscreen');this.i18n=new ig.i18n();this.i18n.setLanguage(lang);var text=ig.game.i18n.getMessage('introText');var textbubble=ig.game.spawnEntity(ig.EntityTextplayer,0,0,{textString:text});},inputStart:function(){ig.input.bind(ig.KEY.MOUSE1,'click');},setCursorLayer:function(){this.addLayer(new ig.Layer('cursor',{zIndex:_c.Z_INDEX_ABOVE_ALL}));},centerStaticCamera:function(){ig.game.screen.x=0;ig.game.screen.y=0;ig.game.screen.x-=(ig.system.realWidth/2)/ig.system.scale-(_c.GAME_WIDTH_VIEW/2);ig.game.screen.y-=(ig.system.realHeight/2)/ig.system.scale-(_c.GAME_HEIGHT_VIEW/2);},resize:function(){this.parent();if(ig.game!==null){this.centerStaticCamera();}},update:function(){this.parent();if(ig.input.pressed('click')){ig.system.setGame(Pac);}}});var Titlescreen=ig.GameExtended.extend({clearColor:"#000000",init:function(){this.parent();this.setCursorLayer();this.loadLevelDeferred('titlescreen');ig.Sound.useWebAudio=false;var theme=new ig.Sound(_c.PATH_TO_MEDIA+'music/introTheme.*');theme.play();},inputStart:function(){ig.input.bind(ig.KEY.MOUSE1,'click');},setCursorLayer:function(){this.addLayer(new ig.Layer('cursor',{zIndex:_c.Z_INDEX_ABOVE_ALL}));},centerStaticCamera:function(){ig.game.screen.x=0;ig.game.screen.y=0;ig.game.screen.x-=(ig.system.realWidth/2)/ig.system.scale-(_c.GAME_WIDTH_VIEW/2);ig.game.screen.y-=(ig.system.realHeight/2)/ig.system.scale-(_c.GAME_HEIGHT_VIEW/2);},resize:function(){this.parent();if(ig.game!==null){this.centerStaticCamera();}},update:function(){this.parent();if(ig.input.pressed('click')){var entities=ig.game.entities;for(var i=0,len=ig.game.entities.length;i<len;i++){if(this.entityIsinFocus(entities[i])&&entities[i].name!=='player'&&entities[i].name!=='cursor'&&entities[i].name!=='langSelector'){console.log(entities[i].name+' pressed');ig.game.i18n=new ig.i18n();if(entities[i].name==="langEnglish"){lang='en';}else if(entities[i].name==="langSpanish"){lang='es';}
ig.system.setGame(StoryScreen);}}}},entityIsinFocus:function(entity){return((entity.pos.x<=(ig.input.mouse.x+ig.game.screen.x))&&((ig.input.mouse.x+ig.game.screen.x)<=entity.pos.x+entity.size.x)&&(entity.pos.y<=(ig.input.mouse.y+ig.game.screen.y))&&((ig.input.mouse.y+ig.game.screen.y)<=entity.pos.y+entity.size.y));}});var TheEnd=ig.GameExtended.extend({clearColor:"#000000",init:function(){this.parent();this.loadLevelDeferred('ending');this.i18n=new ig.i18n();this.i18n.setLanguage(lang);var text=ig.game.i18n.getMessage('ending');var textbubble=ig.game.spawnEntity(ig.EntityTextplayer,0,0,{textString:text});ig.Sound.useWebAudio=false;var theme=new ig.Sound(_c.PATH_TO_MEDIA+'music/marryTheme.*');theme.play();},centerStaticCamera:function(){ig.game.screen.x=0;ig.game.screen.y=0;ig.game.screen.x-=(ig.system.realWidth/2)/ig.system.scale-(_c.GAME_WIDTH_VIEW/2);ig.game.screen.y-=(ig.system.realHeight/2)/ig.system.scale-(_c.GAME_HEIGHT_VIEW/2);},resize:function(){this.parent();if(ig.game!==null){this.centerStaticCamera();}}});ig.main('#canvas',Titlescreen,60,_c.GAME_WIDTH,_c.GAME_HEIGHT,_c.SCALE,ig.pacLoader);});